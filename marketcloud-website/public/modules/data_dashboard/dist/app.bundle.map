{"version":3,"sources":["webpack:///app.bundle.js","webpack:///webpack/bootstrap 9cb183d52814c882c8a6","webpack:///./public/modules/data_dashboard/main.js","webpack:///./public/modules/data_dashboard/src \\.js","webpack:///./public/modules/data_dashboard/src/app.js","webpack:///./public/modules/data_dashboard/src/components/activeFilters/activeFilters.component.js","webpack:///./public/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.js","webpack:///./public/modules/data_dashboard/src/components/addressForm/addressForm.component.js","webpack:///./public/modules/data_dashboard/src/components/application/application.component.js","webpack:///./public/modules/data_dashboard/src/components/autocomplete/autocomplete.component.js","webpack:///./public/modules/data_dashboard/src/components/backButton/backButton.component.js","webpack:///./public/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/customAttributes/customAttributes.component.js","webpack:///./public/modules/data_dashboard/src/components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","webpack:///./public/modules/data_dashboard/src/components/dataTable/dataTable.component.js","webpack:///./public/modules/data_dashboard/src/components/errorMessages/errorMessages.component.js","webpack:///./public/modules/data_dashboard/src/components/flagIcon/flagIcon.component.js","webpack:///./public/modules/data_dashboard/src/components/imageSelector/imageSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.js","webpack:///./public/modules/data_dashboard/src/components/imagesCard/imagesCard.component.js","webpack:///./public/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.js","webpack:///./public/modules/data_dashboard/src/components/navbar/navbar.component.js","webpack:///./public/modules/data_dashboard/src/components/paginationNav/paginationNav.component.js","webpack:///./public/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/seoForm/seoForm.component.js","webpack:///./public/modules/data_dashboard/src/components/sidebar/sidebar.component.js","webpack:///./public/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/switch/switch.component.js","webpack:///./public/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.js","webpack:///./public/modules/data_dashboard/src/controllers/PaymentMethods.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/analytics.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/acl.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/application.new.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/applications.list.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/billing.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/collaborators.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/deploy.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/integrations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/navigation.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/overview.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/settings.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/webhooks.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/brandTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.list.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.new.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.list.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.new.js","webpack:///./public/modules/data_dashboard/src/controllers/categoryTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collectionTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.create.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.new.js","webpack:///./public/modules/data_dashboard/src/controllers/contentTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/content.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/content.new.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/contents.list.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/groupedProducts.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/groupedProducts.new.js","webpack:///./public/modules/data_dashboard/src/controllers/coupons/coupon.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/coupons/coupons.new.js","webpack:///./public/modules/data_dashboard/src/controllers/deploy.js","webpack:///./public/modules/data_dashboard/src/controllers/home.js","webpack:///./public/modules/data_dashboard/src/controllers/integrations.js","webpack:///./public/modules/data_dashboard/src/controllers/invoices/invoice.new.js","webpack:///./public/modules/data_dashboard/src/controllers/invoices/invoices.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/localization.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/media.list.js","webpack:///./public/modules/data_dashboard/src/controllers/media_manager.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.new.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.preview.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.translations.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.list.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.new.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.view.js","webpack:///./public/modules/data_dashboard/src/controllers/productTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/products/bundledProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/bundledProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/configurableProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/configurableProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/products.list.js","webpack:///./public/modules/data_dashboard/src/controllers/products/productsWithVariants.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/productsWithVariants.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/simpleProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/simpleProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/promotions/promotions.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/promotions/promotions.new.js","webpack:///./public/modules/data_dashboard/src/controllers/resource.list.js","webpack:///./public/modules/data_dashboard/src/controllers/settings.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shipping.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.list.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.new.js","webpack:///./public/modules/data_dashboard/src/controllers/sidebar.js","webpack:///./public/modules/data_dashboard/src/controllers/staticContents/staticContent.new.js","webpack:///./public/modules/data_dashboard/src/controllers/staticContents/staticContents.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/taxes/taxes.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/taxes/taxes.new.js","webpack:///./public/modules/data_dashboard/src/controllers/translations.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.list.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.new.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.view.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.list.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.new.js","webpack:///./public/modules/data_dashboard/src/controllers/variants.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/variants/variants.list.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/webhooks.js","webpack:///./public/modules/data_dashboard/src/directives/avatar.directive.js","webpack:///./public/modules/data_dashboard/src/directives/contenteditable.directive.js","webpack:///./public/modules/data_dashboard/src/directives/dropdown.directive.js","webpack:///./public/modules/data_dashboard/src/directives/fallback_src.js","webpack:///./public/modules/data_dashboard/src/directives/fileModel.directive.js","webpack:///./public/modules/data_dashboard/src/directives/focusOnShow.directive.js","webpack:///./public/modules/data_dashboard/src/directives/money.directive.js","webpack:///./public/modules/data_dashboard/src/directives/ng-thumb.directive.js","webpack:///./public/modules/data_dashboard/src/directives/ng_enter.js","webpack:///./public/modules/data_dashboard/src/directives/onChangeAsync.directive.js","webpack:///./public/modules/data_dashboard/src/directives/onFileChange.directive.js","webpack:///./public/modules/data_dashboard/src/factories/account.factory.js","webpack:///./public/modules/data_dashboard/src/factories/application.factory.js","webpack:///./public/modules/data_dashboard/src/factories/cache.factory.js","webpack:///./public/modules/data_dashboard/src/factories/locales.factory.js","webpack:///./public/modules/data_dashboard/src/factories/marketcloud.factory.js","webpack:///./public/modules/data_dashboard/src/factories/models.factory.js","webpack:///./public/modules/data_dashboard/src/factories/notificationsPresets.factory.js","webpack:///./public/modules/data_dashboard/src/factories/pagination.factory.js","webpack:///./public/modules/data_dashboard/src/factories/rolesPresets.factory.js","webpack:///./public/modules/data_dashboard/src/factories/stormConfiguration.factory.js","webpack:///./public/modules/data_dashboard/src/factories/tableManager.factory.js","webpack:///./public/modules/data_dashboard/src/factories/taxrates.factory.js","webpack:///./public/modules/data_dashboard/src/factories/utils.factory.js","webpack:///./public/modules/data_dashboard/src/factories/validation.service.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","i","Object","prototype","hasOwnProperty","_m","args","slice","fn","a","b","apply","this","concat","requireAll","requireContext","keys","map","webpackContext","req","webpackContextResolve","Error","./app.js","./components/activeFilters/activeFilters.component.js","./components/addProductsCard/addProductsCard.component.js","./components/addressForm/addressForm.component.js","./components/application/application.component.js","./components/autocomplete/autocomplete.component.js","./components/backButton/backButton.component.js","./components/brandsSelector/brandsSelector.component.js","./components/categoriesSelector/categoriesSelector.component.js","./components/customAttributes/customAttributes.component.js","./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js","./components/dataTable/dataTable.component.js","./components/errorMessages/errorMessages.component.js","./components/flagIcon/flagIcon.component.js","./components/imageSelector/imageSelector.component.js","./components/imageThumbnail/imageThumbnail.component.js","./components/imagesCard/imagesCard.component.js","./components/linkHelpText/linkHelpText.component.js","./components/navbar/navbar.component.js","./components/paginationNav/paginationNav.component.js","./components/paginationSelector/paginationSelector.component.js","./components/resourcePicker/resourcePicker.component.js","./components/seoForm/seoForm.component.js","./components/sidebar/sidebar.component.js","./components/sortingSelector/sortingSelector.component.js","./components/switch/switch.component.js","./components/taxesSelector/taxesSelector.component.js","./components/toolbarSearch/toolbarSearch.component.js","./controllers/PaymentMethods.controller.js","./controllers/analytics.controller.js","./controllers/application/acl.controller.js","./controllers/application/application.new.controller.js","./controllers/application/applications.list.controller.js","./controllers/application/billing.controller.js","./controllers/application/collaborators.controller.js","./controllers/application/deploy.controller.js","./controllers/application/integrations.controller.js","./controllers/application/navigation.controller.js","./controllers/application/overview.controller.js","./controllers/application/settings.controller.js","./controllers/application/webhooks.controller.js","./controllers/brandTranslations.controller.js","./controllers/brands/brands.edit.js","./controllers/brands/brands.list.js","./controllers/brands/brands.new.js","./controllers/categories/categories.edit.js","./controllers/categories/categories.list.js","./controllers/categories/categories.new.js","./controllers/categoryTranslations.controller.js","./controllers/collectionTranslations.controller.js","./controllers/collections/collections.controller.js","./controllers/collections/collections.create.js","./controllers/collections/collections.edit.js","./controllers/collections/collections.new.js","./controllers/contentTranslations.controller.js","./controllers/contents/content.edit.js","./controllers/contents/content.new.js","./controllers/contents/contents.list.js","./controllers/contents/groupedProducts.edit.js","./controllers/contents/groupedProducts.new.js","./controllers/coupons/coupon.edit.js","./controllers/coupons/coupons.new.js","./controllers/deploy.js","./controllers/home.js","./controllers/integrations.js","./controllers/invoices/invoice.new.js","./controllers/invoices/invoices.edit.js","./controllers/localization.controller.js","./controllers/media.list.js","./controllers/media_manager.controller.js","./controllers/notifications/notifications.edit.js","./controllers/notifications/notifications.js","./controllers/notifications/notifications.new.js","./controllers/notifications/notifications.preview.js","./controllers/notifications/notifications.translations.js","./controllers/orders/orders.list.js","./controllers/orders/orders.new.js","./controllers/orders/orders.view.js","./controllers/productTranslations.controller.js","./controllers/products/bundledProduct.edit.js","./controllers/products/bundledProduct.new.js","./controllers/products/configurableProduct.edit.js","./controllers/products/configurableProduct.new.js","./controllers/products/products.list.js","./controllers/products/productsWithVariants.edit.js","./controllers/products/productsWithVariants.new.js","./controllers/products/simpleProduct.edit.js","./controllers/products/simpleProduct.new.js","./controllers/promotions/promotions.edit.js","./controllers/promotions/promotions.new.js","./controllers/resource.list.js","./controllers/settings.controller.js","./controllers/shippingMethods/shipping.edit.js","./controllers/shippingMethods/shippings.list.js","./controllers/shippingMethods/shippings.new.js","./controllers/sidebar.js","./controllers/staticContents/staticContent.new.js","./controllers/staticContents/staticContents.edit.js","./controllers/taxes/taxes.edit.js","./controllers/taxes/taxes.new.js","./controllers/translations.js","./controllers/users/users.list.js","./controllers/users/users.new.js","./controllers/users/users.view.js","./controllers/variables/variables.edit.js","./controllers/variables/variables.list.js","./controllers/variables/variables.new.js","./controllers/variants.edit.js","./controllers/variants/variants.list.controller.js","./controllers/webhooks.js","./directives/avatar.directive.js","./directives/contenteditable.directive.js","./directives/dropdown.directive.js","./directives/fallback_src.js","./directives/fileModel.directive.js","./directives/focusOnShow.directive.js","./directives/money.directive.js","./directives/ng-thumb.directive.js","./directives/ng_enter.js","./directives/onChangeAsync.directive.js","./directives/onFileChange.directive.js","./factories/account.factory.js","./factories/application.factory.js","./factories/cache.factory.js","./factories/locales.factory.js","./factories/marketcloud.factory.js","./factories/models.factory.js","./factories/notificationsPresets.factory.js","./factories/pagination.factory.js","./factories/rolesPresets.factory.js","./factories/stormConfiguration.factory.js","./factories/tableManager.factory.js","./factories/taxrates.factory.js","./factories/utils.factory.js","./factories/validation.service.js","resolve","window","VERSION","API_BASE_URL","LAST_ERROR","app","angular","config","$locationProvider","hashPrefix","$compileProvider","debugInfoEnabled","run","notie","setOptions","colorSuccess","colorWarning","colorError","colorInfo","colorNeutral","colorText","dateMonths","animationDelay","backgroundClickDismiss","Configuration","$http","theme","get","applyTheme","$httpProvider","defaults","paramSerializer","factory","$injector","exception","cause","$log","$getBrowser","error","toString","console","info","method","url","data","type","source","browser","location","href","stack","then","response","warn","catch","$rootScope","$route","$application","$account","$location","application","current_application","user","set","$on","event","next","current","nextRouteName","$$route","name","currentUserRole","acl","deniedRoles","deny","indexOf","alert","$evalAsync","showLoadingAnimation","path","preventDefault","log","_route","copy","routeName","$broadcast","section","$window","online","navigator","onLine","addEventListener","$apply","alertHide","service","$q","responseError","status","reload","reject","interceptors","push","$root","route","$routeProvider","when","templateUrl","controller","analytics","$marketcloud","range","search","_from","_to","Date","setHours","setDate","getDate","setMonth","getMonth","orders","list","$created_at_gt","getTime","$created_at_lt","per_page","customers","users","toISOString","carts","one_month_ago","params","headers","Authorization","public_key","token","product","products","getById","productId","reloadOnSearch","configuration","filters","query","page","forEach","filter","value","urlQuery","JSON","parse","e","k","resolvedProduct","resources","resourceName","dependencies","category","categories","brand","brands","collection","collections","content","contents","parentOrder","orderId","invoice","invoices","invoiceId","payments","all","events","request.path","Content-Type","ordersResponse","order","shippingMethods","shippings","paymentMethods","expand","userId","categoryId","brandId","collectionId","BraintreeIntegration","Promise","StripeIntegration","contentId","staticContents","variables","variable","variableId","media","promotions","promotion","coupons","coupon","redirectTo","taxes","tax","shipping","shippingId","notifications","notification","notificationId","atob","account","http","webhooks","collaborators","roles","role","roleId","otherwise","_typeof","Symbol","iterator","obj","constructor","scope","StormConfiguration","ctrl","newFilter","notFilters","$onInit","filterAttributes","persistFilters","Boolean","persistFilter","inferFilterType","key","_resource","find","item","isFilterSet","length","filterIsNotEmpty","index","array","getControlForFilter","addFilter","saveNewFilterAndApply","applyFilters","$","modal","humanReadableFilterValue","$regex","replace","removeFilter","applyToQuery","filterToRemove","splice","onUpdate","component","bindings","$element","$attrs","additionalFields","swapArrayItemPosition","sourceIndex","destinationIndex","arr","temp","showTheList","prepareRegex","$options","showList","hideList","setTimeout","addProduct","items","removeProduct","loadProducts","overrides","title","$scope","Countries","countries","address","ApplicationController","applicationData","percentage","v","api_calls_quota_left","t","api_calls_quota_max","suggestionList","initiallySelected","myModel","selectItem","toMatch","selectedLabel","toLowerCase","handleNewItems","allowNewElements","label","onSelected","inputClasses","goBack","history","back","template","BrandsSelectorController","$elem","initializeData","currentBrand","onError","newBrand","enableCreateBrand","showModal","saveBrand","save","hide","setSelectedBrand","onChange","filterBrands","$inject","CategoriesSelectorController","currentCategory","clearInput","newCategory","enableCreateCategory","setSelectedCategory","$emit","text","category_id","filterCategories","saveCategory","$moment","computePropertiesTypes","properties","propertiesTypes","split","trim","isNull","isRichText","isURL","containersForExistingMediaAttributes","$watchCollection","inObject","btnText","resource","rootObject","newAttribute","resetNewAttributeValue","availableTypes","containerForNewMediaAttribute","isBoolean","d","isString","str","doc","DOMParser","parseFromString","body","childNodes","some","node","nodeType","isNumber","isObject","typeof","o","hasCustomProperties","addCustomProperty","errorMessage","deleteCustomProperty","propertyName","editCustomProperty","propertiesStack","showRecursiveObjectEditor","goToNestedStep","disableAdd","removeCardFrame","columns","ErrorMessagesController","Models","modelName","schema","$onChanges","changes","validation","messageMin","messageMax","messageRequired","messageType","countryObject","country","countryCode","code","getFlagClassName","ImageSelectorControllerDependencies","ImageSelectorController","FileUploader","$exceptionHandler","images","closeOnUploadComplete","buttonClass","buttonText","buttonIcon","tabs","uploader","arrayKey","closeDialog","onCloseDialog","openDialog","onOpenDialog","uploadImages","onUploadImages","image","media_files","loadingMediaFiles","pagination","loadMedias","currentPage","numberOfPages","pages","nextPage","_links","previousPage","prev","count","loadPage","page_number","loadData","loadMore","pageToFetch","showProgressBar","uploadingImages","howManySelectedMedia","addSelectedFromLibrary","isImageSelected","selectImage","onCompleteAll","clearQueue","onUploadComplete","onProgressAll","progress","onErrorItem","err","chooseFileFromStorage","trigger","uploadSelectedImages","uploadAll","addImageFromUrl","showImageSelectorModal","showOverlay","edit","onEdit","delete","onDelete","zoom","hideOverlay","toggleEditImageModal","imageSrc","ImagesCardController","fromIndex","toIndex","target","toMove","stringify","removeImage","removed","onRemove","showHelpText","toggleHelpText","onChangePage","getListOfPages","np","cp","initialPage","lastPage","perPage","defaultPageSize","defaultPageNumber","updatePageCounters","currentValue","first","last","availablePageSizes","setPageSize","pageSize","newSize","onChangePageSize","setPageNumber","pageNumber","onChangePageNumber","seo","activeSeoTab","showSeoTab","tabname","$params","showingSubSidebar","currentSidebarSection","currentSection","sidebarIsExpanded","subEntriesGroupToShow","subSideBars","inventory","system","$event","currentSubsection","hideSubSidebar","switchToApp","app_id","showSubEntries","hideAllSubEntries","subEntriesGroupShown","mql","matchMedia","addListener","mq","matches","toggleSidebar","movement","duration","animate","margin-left","queue","left","not","done","addClass","removeClass","element","toggleSubEntries","group_id","saveStormConfiguration","showSubSidebar","sidebars","sort_by","sort_order","resourceAttributes","applySorting","align","on","readOnly","class","TaxesSelectorController","searchWord","onQueryChange","modalMode","paymentMethod","description","active","loadPaymentMethods","availableChargeOptions","payment","createPayment","editPayment","update","updates","payload","togglePaymentMethod","moment","getDateKeyFromDate","month","String","day","getFullYear","currentRange","today","yesterday","oneWeekAgo","salesVolumePerDay","numberOfOrdersPerDay","x","invalid_orders","created_at","total","goodOrders","ordersPerDay","dateLabels","formattedDateLabels","format","ordersVolumePerDay","ordersCountPerDay","date","numberOfOrdersThisDate","salesThisDate","reduce","totalOrdersValue","toFixed","totalOrdersCount","chartOptions","scaleLabel","currency_code","scales","xAxes","gridLines","display","yAxes","labelString","totalCustomersCount","totalCartsCount","abandonedCarts","cart","abandonedCartsCount","emptyCartsCount","convertedCartsCount","abandonedCartsTotalValue","CartsDatasets","CartsLabels","CartsChartOptions","legend","position","setCurrentTimeRange","totalCartValue","averageCartValue","averageOrderValue","rootScope","rolePresets","preset_name","errors","presets","applyPreset","endpoints","clearErrors","formHasErrors","validateRole","updateRole","newRole","public","saveRole","load","create","_invalid","Application","validate","valid","invalidPropertyName","applications","step","selected_plan","card","creditCardFormState","showYearlyPlans","goToStep","selectPlan","plan_id","plans","plan","updateApplicationSubscription","message","filterByInterval","interval","mode","showCreateModal","saveCollaborator","newCollaborator","updateCollaborator","collaborator","email","selectedTemplate","getHerokuURL","encodeURIComponent","secret_key","integrations","tags","links","view","$routeParams","isIntegrationInstalled","currentApplication","toggleIntegration","isActive","displayCredentialsForm","braintreeConfiguration","braintreeUpdate","toggleCredentialsForm","saveBraintreeConfiguration","environment","merchantId","publicKey","privateKey","showNavigation","activities","kilobytesToGigabytes","kb","renew_date","getMethodCSSClass","cls","BILLING_PLANS","free","price_monthly","price_yearly","storage","month-19","month-49","month-99","BillingPlans","currentPlan","plan_name","updateApplication","put","deleteApplication","confirm","regenerateKeys","newWebhook","webhookMethods","webhookResources","hook","showUpdateModal","validateWebhook","validateUrl","saveWebhook","regex","test","updateWebhook","EditBrandTranslationsController","locales","getSlugFromString","join","getAvailableLocaleCodes","availableLocales","unsafeSlug","updateSlug","currentLocale","slug","locale","toLocaleLowerCase","updateTranslations","filterNotNullProperties","result","y","brandResponse","$utils","$validation","$models","coreProperties","Brand","getPropertyNames","customPropertiesData","updateBrand","image_url","toSave","showErrorMessage","deleteBrand","brand_id","loadingData","updateCategory","Category","toggleAll","selected","selectAll","getSelectedItems","bulkDelete","defer","promises","promise","deleteCategory","validationObject","EditCategoryTranslationsController","localeCode","EditCollectionTranslationsController","itemsToAdd","addProductToCollection","removeProductFromCollection","saveCollection","product_id","Collection","EditContentTranslationsController","$model","selectedProducts","Content","idx","quantity","getImagesContainer","author","updateContent","prod","parseInt","selector","published","meta","twitter","facebook","computeSeoTags","saveContent","hideErrors","setPublishing","deleteContent","content_id","product_ids","p_map","Product","success","filterVariantProps","variantsDefinition","getVariantStyle","r","color","updateProduct","loadCategories","loadBrands","price","stock_type","stock_status","has_variants","productError","newCustomProperty","Forms","customPropertiesNames","errorField","saveProduct","props_to_validate","known_props","GroupedProduct","Coupon","hasExpirationDate","limitedUsage","toggleCouponExpiration","expiration_date","toggleCouponUsage","usages_left","clearTargetId","target_id","addCondition","conditions","newCondition","addEffect","effects","newEffect","targetProduct","target_type","selectProductAsTarget","resetTargetProduct","handleCategoryChange","discount_type","randomizeCode","Math","random","substr","toUpperCase","updateCouponExpiration","updateCouponUsage","alerts","this_week","this_month","ordersToManage","orders_data","orders_labels","last_30_days","last_30_days_labels","round","orders_volume_data","orders_count_data","orders_volume_labels","unshift","parseFloat","Number","datasets","setNextInvoiceNumber","applicationSettings","lastNumber","number","invoices_prefix","isNaN","sort","pop","fillDataFromOrder","order_id","company","city","state","postal_code","vat","customer","date_created","date_due","lineItems","shipping_total","payment_method","payment_method_total","coupon_total","promotion_total","billing_address","ordersQuery","loadNextOrders","loadPreviousOrders","selectOrder","customerStates","companyStates","getInvoiceTotal","updateCompanyStates","updateCustomerStates","saveInvoice","goToOrder","Invoice","addLineItem","debug","toDate","currencies","timezones","buildURL","from_currency_code","to_currency_code","compare","activeLocalesToString","activeLocales","activeCurrenciesToString","activeCurrencies","rate","name_plus_code","saved_currencies","currency","saved_currency","new_currency_obj","addCurrency","updateSettings","removeCurrency","applyExchangeRate","currencyToApply","rates","applyAllExchangeRates","exchangeRates","addLocale","l","removeLocale","inspectFile","file","inspectedFile","formatFileSize","size","mb","gb","updateInspectedFile","deleteMedia","media_id","MediaManagerControllerDependencies","MediaManagerController","pos","showMediaManagerModal","NotificationsPresets","invoices.create","orders.create","users.create","users.recoverPassword","orders.update.processing","orders.update.completed","templateVariablesLabels","introduction","productLabel","priceLabel","customerInformationLabel","shippingAddressLabel","billingAddressLabel","tracking_code_introduction","redirect_url","buttonLabel","eventKeys","updateNotificationPreset","tplKey","toggleNotification","subject","sendCopyToOwner","sampleData","setPaidFlag","paid","successful","jsonToCsv","json","order_fields","fields","csv","row","fieldName","buildDownload","encodedUri","encodeURI","link","document","createElement","setAttribute","appendChild","click","isOperator","timestampToDate","months","bulkExport","downloadCSV","bulkJSONExport","exportAsJSON","bulkUpdateStatus","bulkStatusChange","Alert","onConfirm","array_to_download","to_transform","order_data","items_total","taxes_total","ks","shipping_address","product_props","prod_data","prop","variant","variants_counter","variant_name","nullOrUndefined","pushState","$$encodeUriSegment","deleteOrder","removeFilterByName","removeFilterByPosition","setQueryParam","deleteQueryParam","sortingAttributes","marketcloud","saveOrder","toggleProductsModal","loadInventory","addItemToOrder","loadAddresses","assignDataToShipments","Array","isArray","shipments","shipment","delivery_date","getLineItemPrice","lineItem","price_discount","getLineItemTaxes","tax_rate","applied_tax_rate","syntaxHighlight","RegExp","match","addressToEdit","newShipment","tracking_code","tracking_link","saveShipmentAndFullfill","newPayment","amount","savePaymentAndSetToProcessing","showEditAddressDialog","onUpdateOrder","res","addingProduct","editingOrder","editOrder","onRemoveItemFromOrder","onAddProduct","onCloseAddingProduct","selectedVariant","variant_id","saveAddress","refundedProducts","refunds","refund","line_items","showRefundModal","newRefund","reason","restock_refunded_items","quantityInOrder","updateNewRefund","saveRefund","refundErrorMessage","getVariantClass","classes","getSelectedVariantValues","getSelectedVariantKeysAndValues","updateSelectedVariantForProduct","selectedVariantData","productVariants","variants","findObjectWithKeyValue","object","val","updateStatus","showHours","the_date","getHours","getMinutes","inspectObject","numb","fullfill","setToProcessing","updateShipmentUrl","trackingCode","shipmetUrlStructures","gls","postaSlovenije","shipmentURIPreset","saveShipment","remove","parent","append","shipmentToSave","updateShipment","shipmentToEdit","shipmentToEditIndex","showShipmentModal","showEditShipmentModal","showPaymentModal","orderToCSV","createPDFInvoice","invoice_id","invoiceUrl","assign","createPDFCreditNote","refundUrl","savePayment","EditProductTranslationsController","localeName","v_name","variant_values_translations","variant_values","values","customPropertiesDataLocales","getTranslatedValueForCustomProperty","customPropertiesForSingleLocale","included_products","tempProd","selected_variant_id","addProductsCardConfig","addNewList","lists","required","removeList","showAddProductsToListModal","currentList","opt","included_items","newProduct","addEmptyVariant","catchField","skipSaving","to_save","options","option","this_option_ids","addNewOption","removeOption","showAddProductsToOptionModal","currentOption","importData","failures","productWithoutVariants","newPromise","msg","warning","showBulkControls","selections","showing_attributes","reserved_attributes","available_attributes","new_attributes","types","toggleColumn","filterColumnNamesPattern","filterColumnNames","sortByColumn","columnName","isItemSelected","toggleItemSelection","$watch","newValue","oldValue","tmp","bulkSetPublishing","flag","bulkCSVExport","_data","bucket","flatten","_csv","JSONToCSV","exportAsCSV","importProducts","chooseJSONFile","importMode","querySelector","chooseCSVFile","JSONFileChanged","getElementById","files","reader","FileReader","readAsText","onload","evt","jsonLines","importJSON","onerror","CSVFileChanged","csvFileContent","productsToImport","CSVToJSON","unflatten","uploadJSON","fileContent","uploadCSV","lines","invalidItems","line","ProductWithVariants","Variant","cloneProduct","product_to_duplicate","product_to_save","_id","alterColumnNames","q","TypeError","deleteProduct","prod_id","selectedCategories","cats","cat","setMainCategoryToLast","newVariant","saveNewVariant","variantToSave","deleteVariant","stock_level","attachInheritedProperties","properties_to_inherit","getArrayOfVariants2","combine","v1","v2","output","_out","val1","val2","counter","out","addedVariants","applyTemplate","tpl","addedVariants2","newAddedVariant","computedVariants","inspect","updateStockManagementForVariants","variantNames","variantName","$index","updateVariantsConfiguration","temp_ComputedVariants","overwrites","failedValidator","min","max","variantsToSave","savedProduct","EditSimpleProductController","kk","$promotionValidation","Promotion","$newConditionValidation","PromotionCondition","removeCondition","removeEffect","$newEffectValidation","PromotionEffect","priority","resource_name","$dependencies","getPaginationFromHTTPResponse","bulkUpdate","toggle","resetQuery","queryOverrides","resource_id","clone","instance","apply_discounts_before_taxes","symbol","tax_options","refreshApplicationData","timezone","tax_type","email_address","company_name","company_taxid","company_country","company_state","company_city","company_address","company_postalcode","es_weights","logo","shippingRequest","availableRules","getShippingRules","howManyRules","availability","base_cost","per_item_cost","zones","newRule","addRule","removeRule","ruleNameToDescription","newZone","addZone","removeZone","updateShipping","Shipping","deleteShipping","shippingRule","filterCountries","saveShipping","StaticContent","tax_rates","countriesWithTaxRates","self","states","addRate","postcode","deleteRate","updateCity","updatePostcode","updateStates","saveTax","Tax","csvToJson","currentline","j","validateTaxRates","testFunction","every","Rate","directive","restrict","attrs","onChangeHandler","$eval","customOnChange","bind","importCSV","handleFileSelect","f","theFile","csv_file","new_rates","loadRatesFromCountry","recurse","cur","isEmpty","getTranslatableProperties","translatables","NewUserController","password","registered_with","copyShippingAddressToBillingAddress","saveUser","newAttributeName","userError","newAttributeValue","property_name","addresses","newAddress","user_id","errpr","toggleAddressVisibility","expanded","User","user.id","s","validationMessage","deleteVariable","variable_id","originalVariantData","product_merge_variant","variantDefiningProperties","currentVariantId","updateVariant","variantProperties","toSend","setCurrentVariant","variantId","transclude","initials","width","bgcolor","textColor","wrapper","pictureResolution","pixelated","roundShape","imgClass","style","string","cornerRadius","pictureFormat","colorsPalette","autoColor","fontWeight","fontScale","textShadow","maxLength","upperCase","checkValues","undefined","_bind","_textcolor","_picture_resolution","_long","_wrapper","_img_width","_pixelated","_img_styling","_roundShape","_wrapper_styling","_corner_radius","_extra_classes","_extra_img_classes","_extra_styles","_str","getInitialsFromString","_picture_format","_colors_palette","_bgcolor","_autoColor","colorIndex","lon","charIndex","charCodeAt","_font_weight","_font_scale","_text_shadow","generateAvatar","w","h","textcolor","bgImage","canvas","ctx","_font_size","WIDTH","HEIGHT","now","height","getContext","fillStyle","fillRect","font","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","textAlign","fillText","toDataURL","len","render","imgData","html","replacementElement","currentElement","replaceWith","mc_palette","dict","chosenColorPosition","chosenColor","require","ngModel","read","stripBr","$setViewValue","$render","$viewValue","$document","elem","attr","submenu","stopImmediatePropagation","stopPropagation","src","fallbackSrc","$set","$parse","model","fileModel","modelSetter","multiple","$timeout","$attr","ngShow","focus","ngHide","NUMBER_REGEXP","DEFAULT_PRECISION","el","ngModelCtrl","num","pow","precision","formatPrecision","isPrecisionValid","isValueValid","updateValuePrecision","modelValue","$modelValue","changeViewValue","lastValidViewValue","$commitViewValue","minVal","maxVal","isDefined","isUndefined","$parsers","$isEmpty","$validators","ngMin","$observe","$validate","ngMax","$formatters","helper","support","CanvasRenderingContext2D","isFile","File","isImage","lastIndexOf","attributes","onLoadFile","img","Image","onLoadImage","drawImage","ngThumb","readAsDataURL","which","ngEnter","$viewChangeListeners","onChangeAsync","onFileChange","AccountFactory","Factory","ApplicationFactory","CacheFactory","del","delByPattern","pattern","has","LocalesFactory","af-ZA","original","ar","bg-BG","ca-AD","cs-CZ","cy-GB","da-DK","de-AT","de-CH","de-DE","el-GR","en-GB","alpha2","en-US","es-CL","es-ES","es-MX","et-EE","eu","fa-IR","fi-FI","fr-CA","fr-FR","he-IL","hr-HR","hu-HU","id-ID","is-IS","it-IT","ja-JP","km-KH","ko-KR","lt-LT","lv-LV","mn-MN","nb-NO","nl-NL","nn-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sr-RS","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW","jsonToQueryString","MarketcloudFactory","$cache","request","endpoint","cacheKey","deletionPattern","resourceFactory","subResourceFactory","sub_resource_name","parent_id","ModelsFactory","Schematic","Types","Notifications","Schema","Bundle","elements","Payment","payment_method_id","PaymentMethod","cost_type","whitelist","fixed_fee","percentage_fee","BundleEntry","bundle_price","pricing_rule","CategoryNew","CollectionEntry","ContentAuthor","CartEntry","CartUpdateEntry","Cart","CartUpdate","op","discount_value","filename","Notification","from_name","from_email","TaxRate","Currency","formatting","sku","weigth","depth","store_id","InvoiceLineItem","GroupedProductEntry","pricing_method","Order","shipping_address_id","billing_address_id","display_items_total","display_total","notes","shipping_fee","Address","full_name","address1","address2","phone_number","alternate_phone_number","ShippingZone","min_price","max_price","min_weight","max_weight","Store","owner_email","custom_attributes","Customer","Variable","Shipment","NotificationsPresetsFactory","PaginationFactory","fromHTTPResponse","httpResponse","getCommonPublicProfile","findOne","getAllFalseProfile","getCommonUserProfile","getCommonAdminProfile","publicAccessMap","patch","checkout","stores","authenticate","userAccessMap","adminAccessMap","admin","StormConfigurationFactory","loadFromStorage","storedJson","localStorage","getItem","LOCALSTORAGE_KEY","persistToStorage","setItem","persist","appendTo","TableManagerFactory","country_code","state_code","UtilsFactory","JSONExport","CSVExport","strhash","hash","bytes","ch","chunk_len","ceil","floor","resultholder","exec","rows","header","header_fields","objects","row_fields","firstRow","buf","field","ValidationService","Service","getErrorMessage","hasClass","scrollTop","offset","top"],"mappings":"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","file":"app.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ((function(modules) {\n\t// Check all modules for deduplicated modules\n\tfor(var i in modules) {\n\t\tif(Object.prototype.hasOwnProperty.call(modules, i)) {\n\t\t\tswitch(typeof modules[i]) {\n\t\t\tcase \"function\": break;\n\t\t\tcase \"object\":\n\t\t\t\t// Module can be created from a template\n\t\t\t\tmodules[i] = (function(_m) {\n\t\t\t\t\tvar args = _m.slice(1), fn = modules[_m[0]];\n\t\t\t\t\treturn function (a,b,c) {\n\t\t\t\t\t\tfn.apply(this, [a,b,c].concat(args));\n\t\t\t\t\t};\n\t\t\t\t}(modules[i]));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// Module is a copy of another module\n\t\t\t\tmodules[i] = modules[modules[i]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn modules;\n}([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t//require('./src/app.js');\n\t\n\tfunction requireAll(requireContext) {\n\t  return requireContext.keys().map(requireContext);\n\t}\n\t\n\t// Require all JS files, including subdirectories\n\t// This will require every controller/factory/service/component\n\tvar modules = requireAll(__webpack_require__(1));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./app.js\": 2,\n\t\t\"./components/activeFilters/activeFilters.component.js\": 3,\n\t\t\"./components/addProductsCard/addProductsCard.component.js\": 4,\n\t\t\"./components/addressForm/addressForm.component.js\": 5,\n\t\t\"./components/application/application.component.js\": 6,\n\t\t\"./components/autocomplete/autocomplete.component.js\": 7,\n\t\t\"./components/backButton/backButton.component.js\": 8,\n\t\t\"./components/brandsSelector/brandsSelector.component.js\": 9,\n\t\t\"./components/categoriesSelector/categoriesSelector.component.js\": 10,\n\t\t\"./components/customAttributes/customAttributes.component.js\": 11,\n\t\t\"./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js\": 12,\n\t\t\"./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js\": 13,\n\t\t\"./components/dataTable/dataTable.component.js\": 14,\n\t\t\"./components/errorMessages/errorMessages.component.js\": 15,\n\t\t\"./components/flagIcon/flagIcon.component.js\": 16,\n\t\t\"./components/imageSelector/imageSelector.component.js\": 17,\n\t\t\"./components/imageThumbnail/imageThumbnail.component.js\": 18,\n\t\t\"./components/imagesCard/imagesCard.component.js\": 19,\n\t\t\"./components/linkHelpText/linkHelpText.component.js\": 20,\n\t\t\"./components/navbar/navbar.component.js\": 21,\n\t\t\"./components/paginationNav/paginationNav.component.js\": 22,\n\t\t\"./components/paginationSelector/paginationSelector.component.js\": 23,\n\t\t\"./components/resourcePicker/resourcePicker.component.js\": 24,\n\t\t\"./components/seoForm/seoForm.component.js\": 25,\n\t\t\"./components/sidebar/sidebar.component.js\": 26,\n\t\t\"./components/sortingSelector/sortingSelector.component.js\": 27,\n\t\t\"./components/switch/switch.component.js\": 28,\n\t\t\"./components/taxesSelector/taxesSelector.component.js\": 29,\n\t\t\"./components/toolbarSearch/toolbarSearch.component.js\": 30,\n\t\t\"./controllers/PaymentMethods.controller.js\": 31,\n\t\t\"./controllers/analytics.controller.js\": 32,\n\t\t\"./controllers/application/acl.controller.js\": 33,\n\t\t\"./controllers/application/application.new.controller.js\": 34,\n\t\t\"./controllers/application/applications.list.controller.js\": 35,\n\t\t\"./controllers/application/billing.controller.js\": 36,\n\t\t\"./controllers/application/collaborators.controller.js\": 37,\n\t\t\"./controllers/application/deploy.controller.js\": 38,\n\t\t\"./controllers/application/integrations.controller.js\": 39,\n\t\t\"./controllers/application/navigation.controller.js\": 40,\n\t\t\"./controllers/application/overview.controller.js\": 41,\n\t\t\"./controllers/application/settings.controller.js\": 42,\n\t\t\"./controllers/application/webhooks.controller.js\": 43,\n\t\t\"./controllers/brandTranslations.controller.js\": 44,\n\t\t\"./controllers/brands/brands.edit.js\": 45,\n\t\t\"./controllers/brands/brands.list.js\": 46,\n\t\t\"./controllers/brands/brands.new.js\": 47,\n\t\t\"./controllers/categories/categories.edit.js\": 48,\n\t\t\"./controllers/categories/categories.list.js\": 49,\n\t\t\"./controllers/categories/categories.new.js\": 50,\n\t\t\"./controllers/categoryTranslations.controller.js\": 51,\n\t\t\"./controllers/collectionTranslations.controller.js\": 52,\n\t\t\"./controllers/collections/collections.controller.js\": 53,\n\t\t\"./controllers/collections/collections.create.js\": 54,\n\t\t\"./controllers/collections/collections.edit.js\": 55,\n\t\t\"./controllers/collections/collections.new.js\": 56,\n\t\t\"./controllers/contentTranslations.controller.js\": 57,\n\t\t\"./controllers/contents/content.edit.js\": 58,\n\t\t\"./controllers/contents/content.new.js\": 59,\n\t\t\"./controllers/contents/contents.list.js\": 60,\n\t\t\"./controllers/contents/groupedProducts.edit.js\": 61,\n\t\t\"./controllers/contents/groupedProducts.new.js\": 62,\n\t\t\"./controllers/coupons/coupon.edit.js\": 63,\n\t\t\"./controllers/coupons/coupons.new.js\": 64,\n\t\t\"./controllers/deploy.js\": 65,\n\t\t\"./controllers/home.js\": 66,\n\t\t\"./controllers/integrations.js\": 67,\n\t\t\"./controllers/invoices/invoice.new.js\": 68,\n\t\t\"./controllers/invoices/invoices.edit.js\": 69,\n\t\t\"./controllers/localization.controller.js\": 70,\n\t\t\"./controllers/media.list.js\": 71,\n\t\t\"./controllers/media_manager.controller.js\": 72,\n\t\t\"./controllers/notifications/notifications.edit.js\": 73,\n\t\t\"./controllers/notifications/notifications.js\": 74,\n\t\t\"./controllers/notifications/notifications.new.js\": 75,\n\t\t\"./controllers/notifications/notifications.preview.js\": 76,\n\t\t\"./controllers/notifications/notifications.translations.js\": 77,\n\t\t\"./controllers/orders/orders.list.js\": 78,\n\t\t\"./controllers/orders/orders.new.js\": 79,\n\t\t\"./controllers/orders/orders.view.js\": 80,\n\t\t\"./controllers/productTranslations.controller.js\": 81,\n\t\t\"./controllers/products/bundledProduct.edit.js\": 82,\n\t\t\"./controllers/products/bundledProduct.new.js\": 83,\n\t\t\"./controllers/products/configurableProduct.edit.js\": 84,\n\t\t\"./controllers/products/configurableProduct.new.js\": 85,\n\t\t\"./controllers/products/products.list.js\": 86,\n\t\t\"./controllers/products/productsWithVariants.edit.js\": 87,\n\t\t\"./controllers/products/productsWithVariants.new.js\": 88,\n\t\t\"./controllers/products/simpleProduct.edit.js\": 89,\n\t\t\"./controllers/products/simpleProduct.new.js\": 90,\n\t\t\"./controllers/promotions/promotions.edit.js\": 91,\n\t\t\"./controllers/promotions/promotions.new.js\": 92,\n\t\t\"./controllers/resource.list.js\": 93,\n\t\t\"./controllers/settings.controller.js\": 94,\n\t\t\"./controllers/shippingMethods/shipping.edit.js\": 95,\n\t\t\"./controllers/shippingMethods/shippings.list.js\": 96,\n\t\t\"./controllers/shippingMethods/shippings.new.js\": 97,\n\t\t\"./controllers/sidebar.js\": 98,\n\t\t\"./controllers/staticContents/staticContent.new.js\": 99,\n\t\t\"./controllers/staticContents/staticContents.edit.js\": 100,\n\t\t\"./controllers/taxes/taxes.edit.js\": 101,\n\t\t\"./controllers/taxes/taxes.new.js\": 102,\n\t\t\"./controllers/translations.js\": 103,\n\t\t\"./controllers/users/users.list.js\": 104,\n\t\t\"./controllers/users/users.new.js\": 105,\n\t\t\"./controllers/users/users.view.js\": 106,\n\t\t\"./controllers/variables/variables.edit.js\": 107,\n\t\t\"./controllers/variables/variables.list.js\": 108,\n\t\t\"./controllers/variables/variables.new.js\": 109,\n\t\t\"./controllers/variants.edit.js\": 110,\n\t\t\"./controllers/variants/variants.list.controller.js\": 111,\n\t\t\"./controllers/webhooks.js\": 112,\n\t\t\"./directives/avatar.directive.js\": 113,\n\t\t\"./directives/contenteditable.directive.js\": 114,\n\t\t\"./directives/dropdown.directive.js\": 115,\n\t\t\"./directives/fallback_src.js\": 116,\n\t\t\"./directives/fileModel.directive.js\": 117,\n\t\t\"./directives/focusOnShow.directive.js\": 118,\n\t\t\"./directives/money.directive.js\": 119,\n\t\t\"./directives/ng-thumb.directive.js\": 120,\n\t\t\"./directives/ng_enter.js\": 121,\n\t\t\"./directives/onChangeAsync.directive.js\": 122,\n\t\t\"./directives/onFileChange.directive.js\": 123,\n\t\t\"./factories/account.factory.js\": 124,\n\t\t\"./factories/application.factory.js\": 125,\n\t\t\"./factories/cache.factory.js\": 126,\n\t\t\"./factories/locales.factory.js\": 127,\n\t\t\"./factories/marketcloud.factory.js\": 128,\n\t\t\"./factories/models.factory.js\": 129,\n\t\t\"./factories/notificationsPresets.factory.js\": 130,\n\t\t\"./factories/pagination.factory.js\": 131,\n\t\t\"./factories/rolesPresets.factory.js\": 132,\n\t\t\"./factories/stormConfiguration.factory.js\": 133,\n\t\t\"./factories/tableManager.factory.js\": 134,\n\t\t\"./factories/taxrates.factory.js\": 135,\n\t\t\"./factories/utils.factory.js\": 136,\n\t\t\"./factories/validation.service.js\": 137\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 1;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t  /* globals angular, marketcloud, notie, API_BASE_URL */\n\t\n\t  /**\r\n\t   * The dashboard version, this is used for reporting\r\n\t   * @type {String}\r\n\t   */\n\t\n\t  window.VERSION = '1.9.1';\n\t\n\t  /**\r\n\t   * [The base url for api calls]\r\n\t   * @type {String}\r\n\t   */\n\t  window.API_BASE_URL = '/api/v0';\n\t\n\t  /**\r\n\t   *  Error reporting facility\r\n\t   **/\n\t  window.LAST_ERROR = null;\n\t\n\t  /**\r\n\t   * Angular Selectize2\r\n\t   * https://github.com/machineboy2045/angular-selectize\r\n\t   **/\n\t\n\t  var app = angular.module('DataDashboard', ['ngRoute', 'ngMessages', 'ngTagsInput', 'angular-loading-bar', 'frapontillo.bootstrap-switch', 'ngSanitize', 'angularFileUpload', 'Marketcloud.Shared', 'angularMoment', 'chart.js', 'trumbowyg-ng', 'moment-picker', 'dndLists']);\n\t\n\t  /*\r\n\t   *  Since angular 1.6.0 The default location hashPrefix is the hashBang\r\n\t   *  In order to keep our links we set it to '' empty string.\r\n\t   */\n\t  app.config(['$locationProvider', function ($locationProvider) {\n\t    $locationProvider.hashPrefix('');\n\t  }]);\n\t\n\t  app.config(['$compileProvider', function ($compileProvider) {\n\t    $compileProvider.debugInfoEnabled(false);\n\t  }]);\n\t\n\t  app.run(function () {\n\t    notie.setOptions({\n\t\n\t      colorSuccess: '#27ae60',\n\t      colorWarning: '#f39c12',\n\t      colorError: '#c0392b',\n\t      colorInfo: '#2980b9',\n\t      colorNeutral: '#95a5a6',\n\t      colorText: '#FFFFFF',\n\t      dateMonths: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'], // For other languages\n\t      animationDelay: 300, // Be sure to also change \"transition: all 0.3s ease\" variable in .scss file\n\t      backgroundClickDismiss: true\n\t    });\n\t  });\n\t\n\t  app.run(['StormConfiguration', '$http', function (Configuration, $http) {\n\t    var theme = Configuration.get('theme');\n\t    Configuration.applyTheme(theme);\n\t    return;\n\t  }]);\n\t\n\t  /*\r\n\t    This is for sending complex JSON params\r\n\t  */\n\t  app.config(['$httpProvider', function ($httpProvider) {\n\t    $httpProvider.defaults.paramSerializer = '$httpParamSerializerJQLike';\n\t  }]);\n\t\n\t  /*\r\n\t    Catching angular errors and sending them to the server\r\n\t   */\n\t  app.factory('$exceptionHandler', ['$injector', function ($injector) {\n\t\n\t    return function myExceptionHandler(exception, cause) {\n\t\n\t      var $http = $injector.get('$http');\n\t      var $log = $injector.get('$log');\n\t      var $getBrowser = $injector.get('GetBrowser');\n\t\n\t      $log.error(exception);\n\t\n\t      // Not logging the same error over and over for each session\n\t      if (window.LAST_ERROR === exception.toString()) {\n\t        console.info('Not logging this error instance, because it was already logged.');\n\t        return;\n\t      }\n\t\n\t      window.LAST_ERROR = exception.toString();\n\t      $http({\n\t        method: 'POST',\n\t        url: '/logs',\n\t        data: {\n\t          type: 'frontend-error',\n\t          source: 'data-dashboard',\n\t          browser: $getBrowser(),\n\t          url: window.location.href,\n\t          error: {\n\t            error: exception.toString(),\n\t            stack: exception.stack || null,\n\t            cause: cause || null\n\t          }\n\t        }\n\t      }).then(function (response) {\n\t        $log.warn('An error was logged.');\n\t      }).catch(function (response) {\n\t        $log.warn('Unable to log errors, if you see this message, please contact us at info@marketcloud.studio404.net .Thank you.');\n\t      });\n\t      return true;\n\t    };\n\t  }]);\n\t\n\t  app.run(['$rootScope', '$route', '$application', '$account', '$location', function ($rootScope, $route, $application, $account, $location) {\n\t\n\t    $rootScope.application = window.current_application;\n\t    $rootScope.user = window.user;\n\t\n\t    $application.set(window.current_application);\n\t    $account.set(window.user);\n\t\n\t    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n\t\n\t      var nextRouteName = next.$$route.name;\n\t      var currentUserRole = $application.get(\"role\");\n\t\n\t      // Admins and owners have all powers\n\t      if (currentUserRole == 'admin' || currentUserRole === 'owner') return;\n\t\n\t      // Checking for explicit denyrules\n\t      if (next.$$route.acl) {\n\t        var deniedRoles = next.$$route.acl.deny || [];\n\t\n\t        if (deniedRoles.indexOf(currentUserRole) > -1) {\n\t          notie.alert(2, \"Access restricted for users with role \" + currentUserRole, 2);\n\t\n\t          // We also hide the loading animation to prevent the view from\n\t          // being hidden\n\t          $rootScope.$evalAsync(function () {\n\t            $rootScope.showLoadingAnimation = false;\n\t\n\t            // If the entry point is an invalid route, we must\n\t            // send them to home, otherwise they will not see any route.\n\t            if (!current) $location.path('/');\n\t          });\n\t\n\t          // Cancel the route change event\n\t          event.preventDefault();\n\t        }\n\t      }\n\t\n\t      console.log(\"Next route is \" + nextRouteName + \" and your role is \" + currentUserRole);\n\t    });\n\t\n\t    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n\t      $rootScope.showLoadingAnimation = true;\n\t    });\n\t    $rootScope.$on('$routeChangeError', function () {\n\t      $rootScope.showLoadingAnimation = false;\n\t    });\n\t    $rootScope.$on('$routeChangeSuccess', function () {\n\t\n\t      // if ($application.announcementWasSeenInThisSession !== true) {\n\t      //   notie.alert(4,'Please take time to review our <a href=\"/announcement\" target=\"_blank\" style=\"color:white;text-decoration:underline\">important announcement</a>')\n\t      // }\n\t      // $application.announcementWasSeenInThisSession = true\n\t      var _route = angular.copy($route.current.$$route);\n\t\n\t      // Fallback route name\n\t      var routeName = 'unknown';\n\t\n\t      if (_route && _route.name) routeName = _route.name;\n\t\n\t      $rootScope.showLoadingAnimation = false;\n\t\n\t      // Sidebar controller listens for this event (sidebar.js)\n\t      $rootScope.$broadcast('$dashboardSectionChange', {\n\t        section: routeName\n\t      });\n\t    });\n\t  }]);\n\t\n\t  app.run(['$window', '$rootScope', function ($window, $rootScope) {\n\t\n\t    $rootScope.online = navigator.onLine;\n\t\n\t    $window.addEventListener('offline', function () {\n\t      notie.alert(2, 'You are currently offline. Waiting for connection..');\n\t      $rootScope.$apply(function () {\n\t        $rootScope.online = false;\n\t      });\n\t    }, false);\n\t\n\t    $window.addEventListener('online', function () {\n\t      notie.alertHide();\n\t      $rootScope.$apply(function () {\n\t        $rootScope.online = true;\n\t      });\n\t    }, false);\n\t  }]);\n\t\n\t  /*\r\n\t    This interceptor makes sure that if the token expires,\r\n\t    the browser reloads to get a new one.\r\n\t      We  might consider to expose a \"refresh token\" endpoint\r\n\t    but for now... we keep it simple\r\n\t   */\n\t  app.service('authInterceptor', ['$q', function ($q) {\n\t    var service = this;\n\t\n\t    service.responseError = function (response) {\n\t      if (response.status === 401) {\n\t        notie.alert(4, 'Session expired, reloading page...');\n\t        window.location.reload();\n\t      }\n\t      return $q.reject(response);\n\t    };\n\t  }]).config(['$httpProvider', function ($httpProvider) {\n\t    $httpProvider.interceptors.push('authInterceptor');\n\t  }]);\n\t\n\t  app.run(['$rootScope', '$location', function ($root, $location) {\n\t    $root.$on('$routeChangeError', function (event, route, args, response) {\n\t\n\t      if (response.status >= 500) $location.path('/error');else if (response.status === 400) {\n\t        notie.alert(2, 'An error has occurred. Please check the data you entered', 1);\n\t      } else {\n\t        console.log(\"$routeChangeError\", response);\n\t        notie.alert(2, 'An error has occurred.', 1);\n\t      }\n\t    });\n\t  }]);\n\t\n\t  app.config(['$routeProvider', function ($routeProvider) {\n\t    $routeProvider.when('/applications/list', {\n\t      name: 'applications',\n\t      templateUrl: '/modules/data_dashboard/templates/list_applications.html',\n\t      controller: 'ListApplicationsController'\n\t    }).when('/applications/new', {\n\t      name: 'applications.new',\n\t      templateUrl: '/modules/data_dashboard/templates/new_application.html',\n\t      controller: 'CreateApplicationController'\n\t    }).when('/analytics', {\n\t      name: 'analytics',\n\t      templateUrl: '/modules/data_dashboard/templates/analytics.html',\n\t      controller: 'AnalyticsController',\n\t      resolve: {\n\t        analytics: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.orders.list({\n\t            $created_at_gt: _from.getTime(),\n\t            $created_at_lt: _to.getTime(),\n\t            per_page: 9999\n\t          });\n\t        }],\n\t\n\t        customers: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.users.list({\n\t            $created_at_gt: _from.toISOString(),\n\t            $created_at_lt: _to.toISOString(),\n\t            per_page: 9999\n\t          });\n\t        }],\n\t        carts: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.carts.list({\n\t            $created_at_gt: _from.toISOString(),\n\t            $created_at_lt: _to.toISOString(),\n\t            per_page: 9999\n\t          });\n\t        }]\n\t      }\n\t    }).when('/', {\n\t      name: 'home',\n\t      templateUrl: '/modules/data_dashboard/templates/home.html',\n\t      controller: 'HomeController',\n\t      resolve: {\n\t        analytics: ['$http', function ($http) {\n\t\n\t          var one_month_ago = new Date();\n\t          one_month_ago.setMonth(one_month_ago.getMonth() - 1);\n\t          one_month_ago.setHours(0, 0, 0, 0);\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/orders',\n\t\n\t            params: {\n\t              $created_at_gt: one_month_ago.getTime(),\n\t              per_page: 99999\n\t            },\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          });\n\t        }]\n\t      }\n\t    }).when('/error', {\n\t      templateUrl: '/modules/data_dashboard/templates/error.html'\n\t    }).when('/bundled_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\n\t      controller: 'NewBundledProductController'\n\t    }).when('/bundled_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\n\t      controller: 'EditBundledProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    })\n\t    /*\r\n\t    .when('/groupedProducts/create', {\r\n\t      name: 'products.create',\r\n\t      templateUrl: '/modules/data_dashboard/templates/new_grouped_product.html',\r\n\t      controller: 'NewGroupedProductController'\r\n\t    })\r\n\t    .when('/groupedProducts/:productId/edit', {\r\n\t      name: 'products.edit',\r\n\t      templateUrl: '/modules/data_dashboard/templates/edit_grouped_product.html',\r\n\t      controller: 'EditGroupedProductController',\r\n\t      resolve: {\r\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n\t          return $marketcloud.products.getById($route.current.params.productId);\r\n\t        }]\r\n\t      }\r\n\t    })\r\n\t    .when('/bundled_product/create', {\r\n\t      name: 'products.create',\r\n\t      templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\r\n\t      controller: 'NewBundledProductController'\r\n\t    })\r\n\t    .when('/bundled_product/:productId/edit', {\r\n\t      name: 'products.edit',\r\n\t      templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\r\n\t      controller: 'EditBundledProductController',\r\n\t      resolve: {\r\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n\t          return $marketcloud.products.getById($route.current.params.productId);\r\n\t        }]\r\n\t      }\r\n\t    })\r\n\t    .when('/configurable_product/create', {\r\n\t      name: 'products.create',\r\n\t      templateUrl: '/modules/data_dashboard/templates/new_configurable_product.html',\r\n\t      controller: 'NewConfigurableProductController'\r\n\t    })\r\n\t    .when('/configurable_product/:productId/edit', {\r\n\t      name: 'products.edit',\r\n\t      templateUrl: '/modules/data_dashboard/templates/edit_configurable_product.html',\r\n\t      controller: 'EditConfigurableProductController',\r\n\t      resolve: {\r\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n\t          return $marketcloud.products.getById($route.current.params.productId);\r\n\t        }]\r\n\t      }\r\n\t    }))*/\n\t    .when('/products', {\n\t      name: 'products.list',\n\t      templateUrl: '/modules/data_dashboard/templates/products.html',\n\t      controller: 'ListProductsController',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        products: ['$marketcloud', 'StormConfiguration', '$route', '$location', function ($marketcloud, configuration, $route, $location) {\n\t\n\t          // Fetching filters from storage\n\t          var filters = configuration.get(\"products_list_active_filters\") || [];\n\t\n\t          // Default query to products endpoint\n\t          var query = {\n\t            page: 1\n\t          };\n\t\n\t          // Adding filters to query\n\t          filters.forEach(function (filter) {\n\t            query[filter.name] = filter.value;\n\t          });\n\t\n\t          // Applying Url query\n\t          var urlQuery = {};\n\t          try {\n\t            urlQuery = JSON.parse($location.search().query);\n\t          } catch (e) {\n\t            urlQuery = {};\n\t          }\n\t\n\t          for (var k in urlQuery) {\n\t            query[k] = urlQuery[k];\n\t          }\n\t\n\t          // Executing the query\n\t          return $marketcloud.products.list(query);\n\t        }]\n\t      }\n\t    }).when('/product_with_variants/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_productWithVariants.html',\n\t      controller: 'NewProductWithVariantsController'\n\t    }).when('/product_with_variants/create2', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_productWithVariants2.html',\n\t      controller: 'NewProductWithVariantsController'\n\t    }).when('/simple_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_simple_product.html',\n\t      controller: 'NewSimpleProductController'\n\t    }).when('/simple_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_simple_product.html',\n\t      controller: 'EditSimpleProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/product_with_variants/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_productWithVariants.html',\n\t      controller: 'EditProductWithVariantsController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/products/:productId/variants', {\n\t      name: 'products.variants.list',\n\t      templateUrl: '/modules/data_dashboard/templates/list_variants.html',\n\t      controller: 'ListVariantsController',\n\t      resolve: {\n\t        resolvedProduct: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/products/:productId/variants/:variantId', {\n\t      name: 'products.variants.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n\t      controller: 'EditVariantController',\n\t      resolve: {\n\t        resolvedProduct: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/resource/:resourceName', {\n\t      name: '',\n\t      templateUrl: function templateUrl(params) {\n\t        return '/modules/data_dashboard/templates/resources.html';\n\t      },\n\t      //templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud[$route.current.params.resourceName].list();\n\t        }],\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/products/:productId/translations', {\n\t      name: 'products.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/product_translations.html',\n\t      controller: 'EditProductTranslationsController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', '$q', '$location', function ($marketcloud, $route, $q, $location) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/categories/:id/translations', {\n\t      name: 'categories.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/category_translations.html',\n\t      controller: 'EditCategoryTranslationsController',\n\t      resolve: {\n\t        category: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.categories.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/brands/:id/translations', {\n\t      name: 'brands.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/brand_translations.html',\n\t      controller: 'EditBrandTranslationsController',\n\t      resolve: {\n\t        brand: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.brands.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/collections/:id/translations', {\n\t      name: 'collections.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/collection_translations.html',\n\t      controller: 'EditCollectionTranslationsController',\n\t      resolve: {\n\t        collection: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.collections.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/contents/:id/translations', {\n\t      name: 'contents.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/content_translations.html',\n\t      controller: 'EditContentTranslationsController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.contents.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/invoices/create/:orderId?', {\n\t      name: 'invoices.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_invoice.html',\n\t      controller: 'NewInvoiceController',\n\t      resolve: {\n\t        parentOrder: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          if ($route.current.params.orderId) return $marketcloud.orders.getById($route.current.params.orderId);else return {};\n\t        }],\n\t        orders: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.orders.list({ per_page: 5 });\n\t        }]\n\t      }\n\t    }).when('/invoices/:invoiceId/edit', {\n\t      name: 'invoices.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_invoice.html',\n\t      controller: 'EditInvoiceController',\n\t      resolve: {\n\t        invoice: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.invoices.getById($route.current.params.invoiceId);\n\t        }]\n\t      }\n\t    }).when('/invoices/', {\n\t      name: 'invoices.list',\n\t      templateUrl: '/modules/data_dashboard/templates/invoices.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.invoices.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'invoices';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/payments/', {\n\t      name: 'payments.list',\n\t      templateUrl: '/modules/data_dashboard/templates/payments.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.payments.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'payments';\n\t        },\n\t        dependencies: ['$q', '$marketcloud', function ($q, $marketcloud) {\n\t          return $q.all({\n\t            events: $marketcloud.events.list({\n\t              \"request.path\": \"/v0/payments\"\n\t            })\n\t          });\n\t        }]\n\t      }\n\t    }).when('/payments/alerts', {\n\t      name: 'payments.alerts.list',\n\t      templateUrl: '/modules/data_dashboard/templates/payments_alerts.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$http', function ($http) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: window.API_BASE_URL + '/payments/alerts',\n\t            headers: {\n\t              'Content-Type': 'application/json',\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'events';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/orders', {\n\t      name: 'orders.list',\n\t      templateUrl: '/modules/data_dashboard/templates/orders.html',\n\t      controller: 'OrdersController',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        ordersResponse: ['$marketcloud', '$route', '$location', 'StormConfiguration', function ($marketcloud, $route, $location, configuration) {\n\t\n\t          // Fetching filters from storage\n\t          var filters = configuration.get(\"orders_list_active_filters\") || [];\n\t\n\t          // Default query to products endpoint\n\t          var query = {\n\t            page: 1\n\t          };\n\t\n\t          // Adding filters to query\n\t          filters.forEach(function (filter) {\n\t            query[filter.name] = filter.value;\n\t          });\n\t\n\t          // Applying Url query\n\t          var urlQuery = {};\n\t          try {\n\t            urlQuery = JSON.parse($location.search().query);\n\t          } catch (e) {\n\t            urlQuery = {};\n\t          }\n\t\n\t          for (var k in urlQuery) {\n\t            query[k] = urlQuery[k];\n\t          }\n\t\n\t          return $marketcloud.orders.list(query);\n\t        }]\n\t      }\n\t    }).when('/orders/create', {\n\t      name: 'orders.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_order.html',\n\t      controller: 'NewOrderController'\n\t    }).when('/orders/:orderId/view', {\n\t      name: 'orders.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/order.html',\n\t      controller: 'OrderController',\n\t      resolve: {\n\t        order: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.orders.getById($route.current.params.orderId);\n\t        }],\n\t        shippingMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.shippings.list();\n\t        }],\n\t        paymentMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.paymentMethods.list();\n\t        }]\n\t      }\n\t    }).when('/users', {\n\t      name: 'users.list',\n\t      templateUrl: '/modules/data_dashboard/templates/users.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.users.list({\n\t            page: 1,\n\t            per_page: 20,\n\t            expand: 'orders'\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'users';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/users/create', {\n\t      name: 'users.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_user.html',\n\t      controller: 'NewUserController'\n\t    }).when('/users/:userId/view', {\n\t      name: 'users.view',\n\t      templateUrl: '/modules/data_dashboard/templates/user.html',\n\t      controller: 'UserController',\n\t      resolve: {\n\t        user: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.users.getById($route.current.params.userId);\n\t        }]\n\t      }\n\t    }).when('/categories', {\n\t      name: 'categories.list',\n\t      templateUrl: '/modules/data_dashboard/templates/categories.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.categories.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'categories';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/categories/:categoryId/edit', {\n\t      name: 'categories.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_category.html',\n\t      controller: 'EditCategoryController',\n\t      resolve: {\n\t        category: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.categories.getById($route.current.params.categoryId);\n\t        }]\n\t      }\n\t    }).when('/categories/create', {\n\t      name: 'categories.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_category.html',\n\t      controller: 'CategoryController'\n\t    }).when('/brands', {\n\t      name: 'brands.list',\n\t      templateUrl: '/modules/data_dashboard/templates/brands.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.brands.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'brands';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/brands/:brandId/edit', {\n\t      name: 'brands.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_brand.html',\n\t      controller: 'EditBrandController',\n\t      resolve: {\n\t        brand: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.brands.getById($route.current.params.brandId);\n\t        }]\n\t      }\n\t    }).when('/brands/create', {\n\t      name: 'brands.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_brand.html',\n\t      controller: 'BrandController'\n\t    }).when('/collections', {\n\t      name: 'collections.list',\n\t      templateUrl: '/modules/data_dashboard/templates/collections.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.collections.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'collections';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/collections/:collectionId/edit', {\n\t      name: 'collections.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_collection.html',\n\t      controller: 'EditCollectionController',\n\t      resolve: {\n\t        collection: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.collections.getById($route.current.params.collectionId);\n\t        }]\n\t      }\n\t    }).when('/collections/create', {\n\t      name: 'collections.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_collection.html',\n\t      controller: 'CreateCollectionController'\n\t    }).when('/integrations', {\n\t      name: 'integrations.list',\n\t      templateUrl: '/modules/data_dashboard/templates/integrations.html',\n\t      controller: 'IntegrationsController'\n\t    }).when('/integrations/braintree', {\n\t      name: 'integrations.braintree',\n\t      templateUrl: '/modules/data_dashboard/templates/integration_braintree.html',\n\t      controller: 'IntegrationBraintreeController',\n\t      resolve: {\n\t        BraintreeIntegration: ['$http', function ($http) {\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/integrations/braintree',\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          }).then(function (response) {\n\t\n\t            return new Promise(function (resolve) {\n\t              resolve(response);\n\t            });\n\t          }).catch(function () {\n\t            return new Promise(function (resolve) {\n\t              resolve(null);\n\t            });\n\t          });\n\t        }]\n\t      }\n\t    }).when('/integrations/stripe', {\n\t      name: 'integrations.stripe',\n\t      templateUrl: '/modules/data_dashboard/templates/integration_stripe.html',\n\t      controller: 'IntegrationStripeController',\n\t      resolve: {\n\t        StripeIntegration: ['$http', function ($http) {\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/integrations/stripe',\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          }).then(function (response) {\n\t\n\t            return new Promise(function (resolve) {\n\t              resolve(response);\n\t            });\n\t          }).catch(function () {\n\t            return new Promise(function (resolve) {\n\t              resolve(null);\n\t            });\n\t          });\n\t        }]\n\t      }\n\t    }).when('/contents', {\n\t      name: 'contents.list',\n\t      templateUrl: '/modules/data_dashboard/templates/contents.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.contents.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'contents';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/contents/create', {\n\t      name: 'contents.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_content.html',\n\t      controller: 'ContentController'\n\t    }).when('/contents/:contentId/edit', {\n\t      name: 'contents.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_content.html',\n\t      controller: 'EditContentController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.contents.getById($route.current.params.contentId);\n\t        }]\n\t      }\n\t    }).when('/contents/static', {\n\t      name: 'staticContents.list',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/staticContents.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.staticContents.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'staticContents';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/contents/static/create', {\n\t      name: 'staticContents.create',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/new_staticContent.html',\n\t      controller: 'CreateStaticContentController'\n\t    }).when('/contents/static/:contentId/edit', {\n\t      name: 'staticContents.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/edit_staticContents.html',\n\t      controller: 'EditStaticContentController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.staticContents.getById($route.current.params.contentId);\n\t        }]\n\t      }\n\t    }).when('/events', {\n\t      name: 'events.list',\n\t      templateUrl: '/modules/data_dashboard/templates/events.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.events.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'events';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/variables', {\n\t      name: 'variables.list',\n\t      templateUrl: '/modules/data_dashboard/templates/variables.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.variables.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'variables';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/variables/create', {\n\t      name: 'variables.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_variable.html',\n\t      controller: 'CreateVariableController'\n\t    }).when('/variables/:variableId/edit', {\n\t      name: 'variables.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_variable.html',\n\t      controller: 'EditVariableController',\n\t      resolve: {\n\t        variable: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.variables.getById($route.current.params.variableId);\n\t        }]\n\t      }\n\t    }).when('/media', {\n\t      name: 'media.list',\n\t      templateUrl: '/modules/data_dashboard/templates/media.html',\n\t      controller: 'MediaListController',\n\t      resolve: {\n\t        media: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.media.list();\n\t        }]\n\t      }\n\t\n\t    }).when('/promotions', {\n\t      name: 'promotions.list',\n\t      templateUrl: '/modules/data_dashboard/templates/promotions.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.promotions.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'promotions';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/promotions/create', {\n\t      name: 'promotions.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_promotion.html',\n\t      controller: 'NewPromotionController'\n\t    }).when('/promotions/:id/edit', {\n\t      name: 'promotions.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_promotion.html',\n\t      controller: 'EditPromotionController',\n\t      resolve: {\n\t        promotion: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.promotions.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/coupons', {\n\t      name: 'coupons.list',\n\t      templateUrl: '/modules/data_dashboard/templates/coupons.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.coupons.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'coupons';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/coupons/create', {\n\t      name: 'coupons.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_coupon.html',\n\t      controller: 'NewCouponController'\n\t    }).when('/coupons/:id/edit', {\n\t      name: 'coupons.create',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_coupon.html',\n\t      controller: 'EditCouponController',\n\t      resolve: {\n\t        coupon: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.coupons.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/shippings', {\n\t      redirectTo: '/system/shippings'\n\t    }).when('/shippings/create', {\n\t      redirectTo: '/system/shippings/create'\n\t    }).when('/shippings/:shippingId/edit', {\n\t      redirectTo: '/system/shippings/:shippingId/edit'\n\t    }).when('/system/taxes', {\n\t      name: 'system.taxes.list',\n\t      templateUrl: '/modules/data_dashboard/templates/taxes.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.taxes.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'taxes';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/system/taxes/create', {\n\t      name: 'system.taxes.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_tax.html',\n\t      controller: 'CreateTaxController'\n\t    }).when('/system/taxes/:id/edit', {\n\t      name: 'system.taxes.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_tax.html',\n\t      controller: 'EditTaxController',\n\t      resolve: {\n\t        tax: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.taxes.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/system/shippings', {\n\t      name: 'system.shippings.list',\n\t      templateUrl: '/modules/data_dashboard/templates/shippings.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.shippings.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'shippings';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/system/shippings/create', {\n\t      name: 'system.shippings.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_shipping.html',\n\t      controller: 'CreateShippingController'\n\t    }).when('/system/shippings/:shippingId/edit', {\n\t      name: 'system.shippings.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_shipping.html',\n\t      controller: 'EditShippingController',\n\t      resolve: {\n\t        shipping: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.shippings.getById($route.current.params.shippingId);\n\t        }]\n\t      }\n\t    }).when('/system/settings', {\n\t      name: 'system.settings',\n\t      templateUrl: '/modules/data_dashboard/templates/settings.html',\n\t      controller: 'SettingsController'\n\t    }).when('/system/localization', {\n\t      name: 'system.localization',\n\t      templateUrl: '/modules/data_dashboard/templates/localization.html',\n\t      controller: 'LocalizationController'\n\t    }).when('/system/payments', {\n\t      name: 'system.payments',\n\t      templateUrl: '/modules/data_dashboard/templates/paymentMethods.html',\n\t      controller: 'PaymentMethodsController',\n\t      resolve: {\n\t        paymentMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.paymentMethods.list();\n\t        }]\n\t      }\n\t    }).when('/notifications', {\n\t      name: 'notifications',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications.html',\n\t      controller: 'NotificationsController',\n\t      resolve: {\n\t        notifications: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.notifications.list();\n\t        }]\n\t      }\n\t    }).when('/notifications/:notificationId/edit', {\n\t      name: 'notifications.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_notification.html',\n\t      controller: 'EditNotificationController',\n\t      resolve: {\n\t        notification: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.notifications.getById($route.current.params.notificationId);\n\t        }]\n\t      }\n\t    }).when('/notifications/:notificationId/translations', {\n\t      name: 'notifications.translation',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications_translation.html',\n\t      controller: 'TranslateNotificationController',\n\t      resolve: {\n\t        notification: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.notifications.getById($route.current.params.notificationId);\n\t        }]\n\t      }\n\t    }).when('/notifications/create', {\n\t      name: 'notifications.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_notification.html',\n\t      controller: 'NewNotificationController'\n\t    }).when('/notifications/preview/:data', {\n\t      name: 'notifications.preview',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications_preview.html',\n\t      controller: 'PreviewNotificationController',\n\t      resolve: {\n\t        notification: ['$route', function ($route) {\n\t          return atob($route.current.params.data);\n\t        }]\n\t      }\n\t    }).when('/application/billing', {\n\t      name: 'application.billing',\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_billing.html',\n\t      controller: 'ApplicationBillingController',\n\t      resolve: {\n\t        account: ['$http', function (http) {\n\t          return http({\n\t            method: 'GET',\n\t            url: '/account/get'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application', {\n\t      redirectTo: '/application/overview',\n\t      acl: {\n\t        deny: ['guest']\n\t      }\n\t    }).when('/application/overview', {\n\t      name: 'application.overview',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_overview.html',\n\t      controller: 'ApplicationOverviewController'\n\t    }).when('/application/settings', {\n\t      name: 'application.settings',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_settings.html',\n\t      controller: 'ApplicationSettingsController'\n\t    }).when('/application/deploy', {\n\t      name: 'application.deploy',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_deploy.html',\n\t      controller: 'DeployController'\n\t    }).when('/application/integrations', {\n\t      name: 'application.integrations',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_integrations.html',\n\t      controller: 'IntegrationsController'\n\t    }).when('/application/webhooks', {\n\t      name: 'application.webhooks',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_webhooks.html',\n\t      controller: 'WebhooksController',\n\t      resolve: {\n\t        webhooks: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get(\"id\") + '/webhooks'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/collaborators', {\n\t      name: 'application.collaborators',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_collaborators.html',\n\t      controller: 'CollaboratorsController',\n\t      resolve: {\n\t        collaborators: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/collaborators'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/acl', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/roles.html',\n\t      controller: 'ACLController',\n\t      resolve: {\n\t        roles: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/roles'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/acl/new', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/new_role.html',\n\t      controller: 'NewRoleController'\n\t    }).when('/application/acl/:roleId/edit', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/edit_role.html',\n\t      controller: 'EditRoleController',\n\t      resolve: {\n\t        role: ['$route', '$http', '$application', function ($route, $http, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/roles/' + $route.current.params.roleId\n\t          });\n\t        }]\n\t      }\n\t    }).otherwise({\n\t      redirectTo: '/'\n\t    });\n\t  }]);\n\t\n\t  module.exports = app;\n\t})();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ActiveFiltersController', ['$scope', 'StormConfiguration', function (scope, StormConfiguration) {\n\t\n\t  var ctrl = this;\n\t\n\t  scope.newFilter = {\n\t    name: '',\n\t    value: null\n\t  };\n\t\n\t  var notFilters = ['per_page', 'page', 'sort_by', 'sort_order'];\n\t\n\t  this.$onInit = function () {\n\t\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.query = this.query || {};\n\t\n\t    // An array of attributes name from the parent controller\n\t    scope.filterAttributes = this.filterAttributes;\n\t\n\t    // Initializing filters\n\t    scope.filters = StormConfiguration.get('products_list_active_filters') || [];\n\t\n\t    for (var k in ctrl.query) {\n\t      if (notFilters.indexOf(k) === -1) {\n\t        scope.filters.push({\n\t          name: k,\n\t          value: ctrl.query[k]\n\t        });\n\t      }\n\t    }\n\t\n\t    scope.persistFilters = StormConfiguration.get('products_list_persist_filters') || false;\n\t    scope.persistFilters = Boolean(scope.persistFilter);\n\t  };\n\t\n\t  /*\r\n\t   *  This function returns the guessed type for a property found in products\r\n\t   *\r\n\t   *  @param {String} Product key name to test\r\n\t   *\r\n\t   *  @return {String} THe name of the guessed type for the specified key\r\n\t   */\n\t  var inferFilterType = function inferFilterType(key) {\n\t    if (typeof scope.ctrl.resources === 'undefined') {\n\t      return null;\n\t    }\n\t\n\t    var _resource = scope.ctrl.resources.find(function (item) {\n\t      return item.hasOwnProperty(key);\n\t    });\n\t    // Key is the property name we should analyze on the model\n\t\n\t    if (_resource) {\n\t      return _typeof(_resource[key]);\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  scope.isFilterSet = function (key) {\n\t    return scope.filters.filter(function (filter) {\n\t      return filter.name === key;\n\t    }).length > 0;\n\t  };\n\t\n\t  /*\r\n\t   *  Filters out empty filters. Means that we will not show filters that are half created.\r\n\t   */\n\t  scope.filterIsNotEmpty = function (item, index, array) {\n\t    return item.name !== '' && item.value !== null;\n\t  };\n\t\n\t  /*\r\n\t   *    View function that selects which control to show for this particular filter\r\n\t   *\r\n\t   *  @return {String} A string label identifying the type of input\r\n\t   */\n\t  scope.getControlForFilter = function (filter) {\n\t\n\t    if (filter.name === 'type') {\n\t      return 'productTypeSelector';\n\t    }\n\t\n\t    if (filter.name === 'category_id') {\n\t      return 'categorySelectorInput';\n\t    }\n\t\n\t    if (filter.name === 'brand_id') {\n\t      return 'brandSelectorInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'number') {\n\t      return 'numberInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'string') {\n\t      return 'textInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'boolean') {\n\t      return 'booleanInput';\n\t    }\n\t\n\t    // else\n\t\n\t    return 'disabledInput';\n\t  };\n\t\n\t  /*\r\n\t   *  Adds an empty filter\r\n\t   */\n\t  scope.addFilter = function (filter) {\n\t    if (!filter) scope.filters.push({\n\t      name: '',\n\t      value: null\n\t    });else scope.filters.push(filter);\n\t  };\n\t\n\t  scope.saveNewFilterAndApply = function () {\n\t    scope.addFilter(scope.newFilter);\n\t    console.log(\"Saving this new filters\", scope.newFilter);\n\t    scope.applyFilters();\n\t    scope.newFilter = {\n\t      name: '',\n\t      value: null\n\t    };\n\t    $('#singleFilterModal').modal('hide');\n\t  };\n\t\n\t  scope.humanReadableFilterValue = function (filter) {\n\t\n\t    if ('object' === _typeof(filter.value)) {\n\t      if (filter.value.hasOwnProperty('$regex')) {\n\t        return filter.value.$regex;\n\t      }\n\t    }\n\t\n\t    if ('type' === filter.name) {\n\t      return filter.value.replace(/\\_/g, \" \");\n\t    }\n\t\n\t    // If we don't know how to handle it:\n\t    return filter.value;\n\t  };\n\t\n\t  /*\r\n\t   *  @param {Number} index The position of the filter to remove\r\n\t   *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\r\n\t   */\n\t  scope.removeFilter = function (index, applyToQuery) {\n\t    if (typeof applyToQuery === 'undefined') {\n\t      applyToQuery = true;\n\t    }\n\t\n\t    var filterToRemove = scope.filters.splice(index, 1);\n\t\n\t    filterToRemove = filterToRemove[0];\n\t\n\t    delete scope.ctrl.query[filterToRemove.name];\n\t\n\t    if (applyToQuery === true) {\n\t      scope.applyFilters();\n\t    }\n\t  };\n\t\n\t  scope.applyFilters = function () {\n\t    scope.filters.forEach(function (filter) {\n\t      scope.ctrl.query[filter.name] = filter.value;\n\t    });\n\t\n\t    ctrl.onUpdate({\n\t      filters: scope.filters\n\t    });\n\t    $('#filtersModal').modal('hide');\n\t\n\t    //if (scope.persistFilters === true)\n\t    StormConfiguration.set('products_list_active_filters', scope.filters);\n\t  };\n\t}]);\n\tapp.component('activeFilters', {\n\t  templateUrl: '/modules/data_dashboard/src/components/activeFilters/activeFilters.component.html',\n\t  controller: 'ActiveFiltersController',\n\t  bindings: {\n\t    query: '=', // We need access to the controller's query\n\t    filterAttributes: '=', // We need a list of property names to be sued as filters\n\t    onUpdate: '&', // THis will notify the controller that filters changed\n\t    resources: '=' // We need the list of resources to be able to infer which filters to display\n\t  }\n\t});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\t/*\r\n\t* @attribute overrides {object} set of overrides to apply\r\n\t          when querying marketcloud\r\n\t*\r\n\t*/\n\tapp.controller('addProductsCardController', ['$scope', '$element', '$attrs', '$marketcloud', function (scope, $element, $attrs, $marketcloud) {\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.config = this.config || {\n\t      additionalFields: [\n\t        // {name : \"quantity\", type : \"number\", required : true}\n\t      ]\n\t    };\n\t\n\t    scope.swapArrayItemPosition = function (sourceIndex, destinationIndex, arr) {\n\t      if (!arr[sourceIndex] || !arr[destinationIndex]) return;\n\t\n\t      var temp = angular.copy(arr[destinationIndex]);\n\t      arr[destinationIndex] = arr[sourceIndex];\n\t      arr[sourceIndex] = temp;\n\t    };\n\t\n\t    // Flag to show/hide the list\n\t    scope.showTheList = false;\n\t\n\t    // Object to hold the query data\n\t    scope.query = {};\n\t\n\t    // Here we save the products we get from marketcloud\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  // Shows the list of choices\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  // Hides the list of choices\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  /*\r\n\t   *  Pushes an item into the array of selected items and resets the search regex\r\n\t   */\n\t  scope.addProduct = function (product) {\n\t    scope.ctrl.items.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProduct = function (i) {\n\t    scope.ctrl.items.splice(i, 1);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    // We only want to fetch simple products here\n\t    // TODO, this should be an attribute\n\t    if (scope.ctrl.overrides) {\n\t      for (var k in scope.ctrl.overrides) {\n\t        query[k] = scope.ctrl.overrides[k];\n\t      }\n\t    }\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.ctrl.items.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\tapp.component('addProductsCard', {\n\t  templateUrl: '/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.html',\n\t  controller: 'addProductsCardController',\n\t  bindings: {\n\t    items: '=',\n\t    config: '=',\n\t    overrides: '=', // overrides to the query\n\t    title: '@',\n\t    onUpdate: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('AddressFormController', ['$scope', 'Countries', function ($scope, Countries) {\n\t\n\t  this.$onInit = function () {\n\t\n\t    // Initializing the array of countries taken from the service\n\t    $scope.countries = Countries;\n\t\n\t    // Linking the local address object to the parent scope object\n\t    $scope.address = this.address;\n\t  };\n\t}]);\n\t\n\tapp.component('addressForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/addressForm/addressForm.component.html',\n\t  controller: 'AddressFormController',\n\t  bindings: {\n\t    address: '='\n\t  }\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tvar ApplicationController = ['$scope', function (scope) {\n\t\n\t  /*\r\n\t  * Due to https://github.com/angular/angular.js/commit/bcd0d4d896d0dfdd988ff4f849c1d40366125858\r\n\t  *\r\n\t  * From AngularJS >= 1.6.x pre-assigning bindings on controller instances is disabled by default.\r\n\t  */\n\t  this.$onInit = function () {\n\t    scope.application = this.applicationData;\n\t  };\n\t\n\t  scope.percentage = function (app) {\n\t    var v = app.api_calls_quota_left;\n\t    var t = app.api_calls_quota_max;\n\t    return v / t * 100;\n\t  };\n\t}];\n\t\n\tapp.component('application', {\n\t  templateUrl: '/modules/data_dashboard/src/components/application/application.component.html',\n\t  controller: ApplicationController,\n\t  bindings: {\n\t    applicationData: '='\n\t  }\n\t});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('autocompleteController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  // Since angular 1.6 component initialization must be inside the $onInit call\n\t  // to allow the use of ES6 classes as component controllers\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The list of values\n\t    scope.ctrl.suggestionList = angular.copy(scope.ctrl.items);\n\t\n\t    // Flag to toggle the suggestion list\n\t    scope.showTheList = false;\n\t\n\t    // Here ww handle the initial selection if the model already has a value\n\t    var initiallySelected = scope.ctrl.suggestionList.filter(function (item) {\n\t      if (item === scope.ctrl.myModel) return true;\n\t      if (item[scope.ctrl.value] === scope.ctrl.myModel) return true;\n\t\n\t      return false;\n\t    });\n\t\n\t    if (initiallySelected.length > 0) {\n\t\n\t      scope.selectItem(initiallySelected[0]);\n\t    }\n\t  };\n\t\n\t  /*\r\n\t   * Filters the suggestion list by query. This updates the suggestion list showing\r\n\t   * only those results that are matching the query.\r\n\t   */\n\t  scope.filter = function () {\n\t\n\t    var toMatch = scope.ctrl.selectedLabel.toLowerCase();\n\t\n\t    scope.ctrl.items = scope.ctrl.suggestionList.filter(function (i) {\n\t\n\t      // If the value attribute is provided we use it to look for a particular property\n\t      if (scope.ctrl.value) {\n\t\n\t        return i[scope.ctrl.value].toLowerCase().indexOf(toMatch) > -1;\n\t      } else {\n\t\n\t        return i.toLowerCase().indexOf(toMatch) > -1;\n\t      }\n\t    });\n\t  };\n\t\n\t  /*\r\n\t   * Makes the suggestion list visible\r\n\t   */\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  /*\r\n\t   * Makes the suggestion list invisible\r\n\t   */\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.handleNewItems = function () {\n\t    if (scope.ctrl.allowNewElements) {\n\t\n\t      scope.ctrl.myModel = scope.ctrl.selectedLabel;\n\t      scope.hideList();\n\t    }\n\t  };\n\t\n\t  /**\r\n\t   * Selects the clicked item as a chosen value\r\n\t   */\n\t  scope.selectItem = function (item) {\n\t\n\t    console.log(\"selectItem called on \", item);\n\t\n\t    // If the component has a label attribute, we want to show that label\n\t    // insteand of the actually chosen value\n\t    if (scope.ctrl.label) {\n\t      scope.ctrl.selectedLabel = item[scope.ctrl.label];\n\t    } else {\n\t      // Otherwise we want to select the actual value.\n\t      scope.ctrl.selectedLabel = item;\n\t    }\n\t\n\t    if (scope.ctrl.value) {\n\t      scope.ctrl.myModel = item[scope.ctrl.value];\n\t    } else {\n\t      scope.ctrl.myModel = item;\n\t    }\n\t\n\t    // update the query to reflect the model value\n\t    // scope.ctrl.myModel = scope.ctrl.myModel;\n\t\n\t    // After the choice, we hide the list\n\t    scope.showTheList = false;\n\t\n\t    // Fucking AngularJS ng-changes triggers before the update cycle is complete\n\t    window.setTimeout(scope.ctrl.onSelected, 1);\n\t  };\n\t}]);\n\tapp.component('autocomplete', {\n\t  templateUrl: '/modules/data_dashboard/src/components/autocomplete/autocomplete.component.html',\n\t  controller: 'autocompleteController',\n\t  bindings: {\n\t    allowNewElements: '@',\n\t    myModel: '=', // The model\n\t    items: '=', // The source for autocomplete suggestions\n\t    onSelected: '&', // Hook called when an item is selected\n\t    label: '@', // The property to use as a label for suggestions,\n\t    value: '@', // The property to use as a value for suggestions,\n\t    inputClasses: '@' // Classes to add to the input\n\t  }\n\t});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('BackButtonController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  scope.goBack = function () {\n\t    history.back();\n\t  };\n\t}]);\n\t\n\tapp.component('backButton', {\n\t  template: '<a class=\"link pull-right\" ng-click=\"goBack()\"><i class=\"fa fa-long-arrow-left\"></i> <span class=\"xs-hidden\">Back</span></a>',\n\t  controller: 'BackButtonController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('BrandsSelectorController', BrandsSelectorController).component('brandsSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.html',\n\t  controller: 'BrandsSelectorController',\n\t  bindings: {\n\t    brand: '=',\n\t    enableCreateBrand: '@',\n\t    onError: '&'\n\t  }\n\t});\n\t\n\tBrandsSelectorController.$inject = ['$marketcloud', '$scope', '$element'];\n\t\n\tfunction BrandsSelectorController($marketcloud, scope, $elem) {\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    scope.newBrand = {};\n\t\n\t    ctrl.modal = $($elem).find('.modal')[0];\n\t\n\t    scope.enableCreateBrand = this.enableCreateBrand || true;\n\t\n\t    scope.ctrl.query = {\n\t      name: {\n\t        $regex: '',\n\t        $options: 'i'\n\t      }\n\t    };\n\t  };\n\t\n\t  scope.showModal = function () {\n\t    $(ctrl.modal).modal('show');\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      scope.ctrl.brands.push(response.data.data);\n\t      scope.newBrand = {};\n\t      scope.ctrl.brand = response.data.data.id;\n\t      return $marketcloud.brands.list();\n\t    }).then(function (response) {\n\t      scope.ctrl.brands = response.data.data;\n\t      $(ctrl.modal).modal('hide');\n\t    }).catch(function (response) {\n\t      $(ctrl.modal).hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.setSelectedBrand = function (brand) {\n\t    scope.brand = brand;\n\t    scope.ctrl.brand = brand.id;\n\t    scope.ctrl.onChange({\n\t      brand: brand.id\n\t    });\n\t  };\n\t\n\t  // Uses the input box in the component to filter the wanted brand\n\t  scope.filterBrands = function () {\n\t    $marketcloud.brands.list(scope.ctrl.query).then(function (response) {\n\t      ctrl.brands = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred while fetching brands, please retry.', 2);\n\t    });\n\t  };\n\t\n\t  function initializeData() {\n\t    // Initial fetch of brands\n\t    $marketcloud.brands.list().then(function (response) {\n\t      ctrl.brands = response.data.data;\n\t\n\t      var currentBrand = null;\n\t      // Look for the currently selected brand, if any\n\t      ctrl.brands.forEach(function (brand) {\n\t        if (brand.id === scope.ctrl.brand) {\n\t          currentBrand = brand;\n\t        }\n\t      });\n\t\n\t      // If found, we initialize the current brand\n\t      if (currentBrand !== null) {\n\t        scope.brand = currentBrand;\n\t      } else {\n\t        // Otherwise we must fetch it\n\t        return $marketcloud.brands.getById(scope.ctrl.brand);\n\t      }\n\t    }).then(function (response) {\n\t      if (response.data.data) {\n\t        scope.brand = response.data.data;\n\t      }\n\t    }).catch(function (response) {\n\t      ctrl.onError(response);\n\t    });\n\t  }\n\t\n\t  initializeData();\n\t}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('CategoriesSelectorController', CategoriesSelectorController).component('categoriesSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.html',\n\t  controller: 'CategoriesSelectorController',\n\t  bindings: {\n\t    enableCreateCategory: '@',\n\t    category: '=',\n\t    onError: '&',\n\t    onChange: '&',\n\t    clearInput: '&'\n\t  }\n\t});\n\t\n\tCategoriesSelectorController.$inject = ['$marketcloud', '$scope', '$element'];\n\t\n\tfunction CategoriesSelectorController($marketcloud, scope, $elem) {\n\t\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = this;\n\t    scope.newCategory = {};\n\t    ctrl.modal = $($elem).find('.modal')[0];\n\t\n\t    scope.clearInput = ctrl.clearInput || false;\n\t    scope.enableCreateCategory = ctrl.enableCreateCategory || true;\n\t\n\t    scope.ctrl.query = {\n\t      name: {\n\t        $regex: \"\",\n\t        $options: 'i'\n\t      }\n\t    };\n\t  };\n\t\n\t  scope.showModal = function () {\n\t    $(ctrl.modal).modal('show');\n\t  };\n\t\n\t  function initializeData() {\n\t    // Initial fetch of categories\n\t    $marketcloud.categories.list().then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t\n\t      var currentCategory = null;\n\t      // Look for the currently selected category, if any\n\t      ctrl.categories.forEach(function (category) {\n\t        if (category.id === scope.ctrl.category) currentCategory = category;\n\t      });\n\t\n\t      // If found, we initialize the current category\n\t      if (null !== currentCategory && !scope.clearInput) {\n\t        scope.category = currentCategory;\n\t      } else {\n\t        // Otherwise we must fetch it\n\t        return $marketcloud.categories.getById(scope.ctrl.category);\n\t      }\n\t    }).then(function (response) {\n\t      if (response.data.data && !scope.clearInput) {\n\t        scope.category = response.data.data;\n\t      }\n\t    }).catch(function (response) {\n\t      ctrl.onError(response);\n\t    });\n\t  }\n\t\n\t  initializeData();\n\t\n\t  scope.setSelectedCategory = function (category) {\n\t    scope.category = category;\n\t    scope.ctrl.category = category.id;\n\t    scope.ctrl.onChange({\n\t      category: category.id\n\t    });\n\t\n\t    /**\r\n\t     * FIXME: Handle multiple or single categories per product\r\n\t     * Currently, for sake of Epoteka integration we are saving multiple categories as a string\r\n\t     * e.g. 1523,6523,3123\r\n\t     * In future, this should be handled in an array!!!!\r\n\t     * FIXME:\r\n\t     */\n\t\n\t    console.log(scope.clearInput);\n\t    if (scope.clearInput) {\n\t      delete scope.category;\n\t    }\n\t\n\t    /**\r\n\t     * Emiting the selected category to the parent component and handling it there\r\n\t     * TODO: Transfer entire logic to categories selector component\r\n\t     */\n\t\n\t    scope.$emit('selectedCategory', {\n\t      text: category.path,\n\t      category_id: category.id\n\t    });\n\t  };\n\t\n\t  // Uses the input box in the component to filter the wanted category\n\t  scope.filterCategories = function () {\n\t    $marketcloud.categories.list(scope.ctrl.query).then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred while fetching categories, please retry.', 2);\n\t    });\n\t  };\n\t\n\t  // Saves a new category\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      ctrl.categories.push(response.data.data);\n\t      scope.newCategory = {};\n\t\n\t      scope.$emit('selectedCategory', {\n\t        text: response.data.data.path,\n\t        category_id: response.data.data.id\n\t      });\n\t      return $marketcloud.categories.list();\n\t    }).then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t      $(ctrl.modal).modal('hide');\n\t    }).catch(function (response) {\n\t      $(ctrl.modal).hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CustomAttributesFormController', ['$scope', '$element', '$attrs', 'moment', function (scope, $element, $attrs, $moment) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t    scope.inObject = false;\n\t    scope.btnText = 'Add';\n\t\n\t    scope.resource = this.resource;\n\t\n\t    scope.properties = this.properties || {};\n\t    scope.type = this.type || {};\n\t\n\t    // Keeping a reference for nesting\n\t    scope.rootObject = scope.properties;\n\t\n\t    scope.newAttribute = {\n\t      name: null,\n\t      value: null,\n\t      type: null\n\t\n\t      // Initializing propertyTypes object\n\t    };computePropertiesTypes();\n\t\n\t    scope.resetNewAttributeValue = function () {\n\t      switch (scope.newAttribute.type) {\n\t        case 'string':\n\t          scope.newAttribute.value = '';\n\t          return;\n\t        case 'number':\n\t          scope.newAttribute.value = 0;\n\t          return;\n\t        case 'boolean':\n\t          scope.newAttribute.value = true;\n\t      }\n\t    };\n\t\n\t    scope.newAttribute.type = 'string';\n\t\n\t    scope.availableTypes = [{\n\t      name: 'String',\n\t      value: 'string'\n\t    }, {\n\t      name: 'Number',\n\t      value: 'number'\n\t    }, {\n\t      name: 'Boolean',\n\t      value: 'boolean'\n\t    }, {\n\t      name: 'RichText',\n\t      value: 'richtext'\n\t    }, {\n\t      name: 'URL/Media',\n\t      value: 'URL'\n\t    }, {\n\t      name: 'List',\n\t      value: 'list'\n\t    }];\n\t  };\n\t\n\t  scope.containerForNewMediaAttribute = [];\n\t\n\t  scope.containersForExistingMediaAttributes = {};\n\t\n\t  scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t    scope.newAttribute.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t  });\n\t\n\t  scope.propertiesTypes = {};\n\t\n\t  function computePropertiesTypes() {\n\t    for (var k in scope.properties) {\n\t      scope.propertiesTypes[k] = _typeof(scope.properties[k]);\n\t\n\t      if (scope.type[k] === 'list') {\n\t        scope.properties[k] = scope.properties[k].split(',').map(function (item) {\n\t          return item.trim();\n\t        });\n\t        scope.propertiesTypes[k] = 'object';\n\t      }\n\t\n\t      if (scope.isNull(k) === true) {\n\t        scope.propertiesTypes[k] = 'null';\n\t      }\n\t\n\t      if (scope.isRichText(scope.properties[k]) === true) {\n\t        scope.propertiesTypes[k] = 'richtext';\n\t      }\n\t\n\t      if (scope.isURL(scope.properties[k]) === true) {\n\t        scope.propertiesTypes[k] = 'URL';\n\t        scope.containersForExistingMediaAttributes[k] = [scope.properties[k]];\n\t        scope.$watchCollection('containersForExistingMediaAttributes.' + k, function () {\n\t          // If the value is null, it means that we just deleted it, so we don't have to re-update it\n\t          if (scope.properties[k] === null) {\n\t            return;\n\t          }\n\t          if (scope.containersForExistingMediaAttributes[k]) {\n\t            scope.properties[k] = scope.containersForExistingMediaAttributes[k][scope.containersForExistingMediaAttributes[k].length - 1];\n\t          }\n\t        });\n\t      }\n\t    }\n\t  }\n\t\n\t  scope.isBoolean = function (d) {\n\t    return typeof d === 'boolean';\n\t  };\n\t\n\t  scope.isString = function (d) {\n\t    return typeof d === 'string' && !scope.isRichText(d) && !scope.isURL(d);\n\t  };\n\t\n\t  scope.isNull = function (key) {\n\t    return scope.properties[key] === null;\n\t  };\n\t\n\t  scope.isURL = function (d) {\n\t    if (!d || typeof d.indexOf !== 'function') {\n\t      return false;\n\t    }\n\t    return d.indexOf('http://') === 0 || d.indexOf('https://') === 0;\n\t  };\n\t\n\t  scope.isRichText = function (str) {\n\t    if (typeof str !== 'string') {\n\t      return false;\n\t    }\n\t\n\t    var doc = new DOMParser().parseFromString(str, 'text/html');\n\t    return [].slice.call(doc.body.childNodes).some(function (node) {\n\t      return node.nodeType === 1;\n\t    });\n\t  };\n\t\n\t  scope.isNumber = function (d) {\n\t    return typeof d === 'number';\n\t  };\n\t\n\t  scope.isObject = function (d) {\n\t    if (d === null) {\n\t      return false;\n\t    }\n\t\n\t    return (typeof d === 'undefined' ? 'undefined' : _typeof(d)) === 'object';\n\t  };\n\t\n\t  scope.typeof = function (o) {\n\t    return typeof o === 'undefined' ? 'undefined' : _typeof(o);\n\t  };\n\t\n\t  scope.hasCustomProperties = function () {\n\t    return Object.keys(scope.properties).length > 0;\n\t  };\n\t\n\t  scope.addCustomProperty = function () {\n\t    scope.errorMessage = null;\n\t    if (scope.resource.hasOwnProperty(scope.newAttribute.name)) {\n\t      // scope.productError = \"CUSTOM_PROPERTY_NAME_ALREADY_EXISTS\";\n\t      scope.errorMessage = 'Name already exists';\n\t    } else if (scope.newAttribute.name !== 0 && !scope.newAttribute.name) {\n\t      scope.errorMessage = 'Please, enter a valid property name';\n\t    } else if (scope.inObject && scope.properties.indexOf(scope.newAttribute.value) !== -1) {\n\t      scope.errorMessage = 'Duplicated value';\n\t    } else {\n\t      scope.properties[scope.newAttribute.name] = scope.newAttribute.value;\n\t      scope.type[scope.newAttribute.name] = scope.newAttribute.type;\n\t\n\t      scope.newAttribute.value = null;\n\t      scope.newAttribute.name = null;\n\t\n\t      if (scope.inObject) {\n\t        scope.newAttribute.name = scope.properties.length;\n\t      }\n\t      scope.btnText = 'Add';\n\t      // Re-calculating types\n\t      computePropertiesTypes();\n\t    }\n\t  };\n\t\n\t  scope.deleteCustomProperty = function (propertyName) {\n\t    // delete scope.properties[propertyName]\n\t\n\t    scope.properties[propertyName] = null;\n\t    // Re-calculating types\n\t    if (scope.inObject) {\n\t      scope.properties.splice(propertyName, 1);\n\t      scope.newAttribute.name = scope.properties.length;\n\t    }\n\t    computePropertiesTypes();\n\t  };\n\t\n\t  scope.editCustomProperty = function (propertyName) {\n\t    scope.newAttribute.name = propertyName;\n\t    scope.newAttribute.value = scope.properties[propertyName];\n\t    scope.newAttribute.type = scope.propertiesTypes[propertyName];\n\t    scope.btnText = 'edit';\n\t  };\n\t\n\t  scope.propertiesStack = [];\n\t\n\t  // Goes inside the properties object to show nested properties\n\t  scope.showRecursiveObjectEditor = function (propertyName) {\n\t    // Pushing the new level into the stack\n\t    scope.propertiesStack.push(propertyName);\n\t\n\t    // Getting the pointer to the root of the object\n\t    scope.properties = scope.rootObject;\n\t\n\t    // Digging into the object's nested properties to find the wanted\n\t    for (var i = 0; i < scope.propertiesStack.length; i++) {\n\t      if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\n\t        scope.properties = scope.properties[scope.propertiesStack[i]];\n\t      } else {\n\t        break;\n\t      }\n\t    }\n\t\n\t    scope.newAttribute.name = scope.properties.length;\n\t    scope.newAttribute.type = 'string';\n\t    scope.inObject = true;\n\t\n\t    // Recalculating the propertiesTypes object for the current properties object\n\t    computePropertiesTypes();\n\t  };\n\t  // Goes to a specific nested level\n\t  scope.goToNestedStep = function (index) {\n\t    // Getting the pointer to the root of the object\n\t    scope.properties = scope.rootObject;\n\t\n\t    if (index === 0) {\n\t      scope.inObject = false;\n\t      scope.newAttribute.name = null;\n\t      scope.btnText = 'Add';\n\t    }\n\t\n\t    // Adjusting the stack to the wanted level\n\t    scope.propertiesStack = scope.propertiesStack.slice(0, index);\n\t\n\t    for (var i = 0; i < index; i++) {\n\t      if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\n\t        scope.properties = scope.properties[scope.propertiesStack[i]];\n\t      } else {\n\t        break;\n\t      }\n\t    }\n\t    // Re-calculating types\n\t    computePropertiesTypes();\n\t  };\n\t}]);\n\t\n\tapp.component('customAttributesForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/customAttributes/customAttributes.component.html',\n\t  controller: 'CustomAttributesFormController',\n\t  bindings: {\n\t    properties: '=',\n\t    resource: '=',\n\t    onError: '&',\n\t    disableAdd: '=',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DashboardBreadcrumbController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  scope.goBack = function () {\n\t    history.back();\n\t  };\n\t}]);\n\t\n\tapp.component('dashboardBreadcrumb', {\n\t  template: '<a href=\"#\" class=\"link pull-right\"><i class=\"fa fa-long-arrow-left\"></i> Back</a>',\n\t  controller: 'DashboardBreadcrumbController',\n\t  bindings: {\n\t    resourceName: '='\n\t  }\n\t});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('McDataTableController', ['$scope', function (scope) {\n\t  this.$onInit = function () {\n\t    var ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    scope.columns = ctrl.columns || Object.keys(scope.ctrl.data[0]);\n\t  };\n\t}]);\n\t\n\tapp.component('mcDataTable', {\n\t  templateUrl: '/modules/data_dashboard/src/components/dataTable/dataTable.component.html',\n\t  controller: 'McDataTableController',\n\t  bindings: {\n\t    data: '=',\n\t    columns: '=?'\n\t  }\n\t});\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('ErrorMessagesController', ErrorMessagesController).component('errorMessages', {\n\t  templateUrl: '/modules/data_dashboard/src/components/errorMessages/errorMessages.component.html',\n\t  controller: 'ErrorMessagesController',\n\t  bindings: {\n\t    validation: '<',\n\t    propertyName: '@',\n\t    modelName: '@',\n\t    onError: '&',\n\t\n\t    messageMin: '@',\n\t    messageMax: '@',\n\t    messageRequired: '@',\n\t    messageType: '@'\n\t  }\n\t});\n\t\n\tErrorMessagesController.$inject = ['$scope', '$models'];\n\t\n\tfunction ErrorMessagesController(scope, Models) {\n\t  if (!Models) {\n\t    throw new Error('ErrorMessages Component requires Models factory. errorMessages.component.js');\n\t  }\n\t\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    if (ctrl.modelName) {\n\t      if (!Models.hasOwnProperty(ctrl.modelName)) {\n\t        throw new Error('Cannot find model with name ' + ctrl.modelName);\n\t      }\n\t\n\t      ctrl.schema = angular.copy(Models[ctrl.modelName].schema);\n\t      if (!ctrl.schema) {\n\t        console.log(\"Lo schema non ha il mio model \" + ctrl.modelName, Models);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.$onChanges = function (changes) {\n\t    // var validation = changes.validation.currentValue;\n\t\n\t    // if (validation.invalidPropertyName === this.propertyName)\n\t    //     $('html, body').animate({\n\t    //       scrollTop: $(\"[property-name='\"+validation.invalidPropertyName+\"']\").offset().top - 200\n\t    //     }, 500);\n\t  };\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('FlagIconController', ['$scope', 'Countries', function (scope, countries) {\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t    var countryObject = countries.find(function (item) {\n\t      return item.name.toLowerCase() === ctrl.country.toLowerCase();\n\t    });\n\t\n\t    if (!countryObject) ctrl.countryCode = ctrl.country;else ctrl.countryCode = countryObject.code;\n\t  };\n\t\n\t  scope.getFlagClassName = function () {\n\t    return 'flag-icon-' + ctrl.countryCode.toLowerCase();\n\t  };\n\t}]);\n\t\n\tapp.component('flagIcon', {\n\t  template: '<span class=\"flag-icon\" ng-class=\"getFlagClassName()\"></span>',\n\t  controller: 'FlagIconController',\n\t  bindings: {\n\t    country: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar ImageSelectorControllerDependencies = ['$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'];\n\t\n\tvar ImageSelectorController = function ImageSelectorController(scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    // Reference to the controller\n\t    ctrl = this;\n\t\n\t    // List of image urls\n\t    ctrl.images = ctrl.images || [];\n\t\n\t    // List of image objects\n\t    // ctrl.media = ctrl.media || [];\n\t\n\t    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete;\n\t\n\t    /* Component configuration from attributes */\n\t    // The classes used to style the button\n\t    scope.buttonClass = $attrs.buttonClass;\n\t\n\t    // The text displayed on the button\n\t    scope.buttonText = $attrs.buttonText;\n\t\n\t    // The icon displayed on the button\n\t    scope.buttonIcon = $attrs.buttonIcon || null;\n\t\n\t    var tabs = $attrs.tabs || 'library,from_disk,from_url';\n\t\n\t    // This will hold an array of tab names\n\t    // The component will show only those tabs\n\t    // whose name is in this array\n\t    //\n\t    // The first tab will be the active one.\n\t    // TODO to improve this, we can add an attribute \"activeTab\"\n\t\n\t    scope.tabs = tabs.split(',');\n\t\n\t    // This is the name of the parent function which will return a reference to the image container\n\t    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n\t  };\n\t\n\t  /* Uploader configuration */\n\t  scope.uploader = new FileUploader({\n\t    url: window.API_BASE_URL + '/media',\n\t    arrayKey: '',\n\t    headers: {\n\t      'Authorization': window.public_key + ':' + window.token\n\t    },\n\t    filters: []\n\t  });\n\t\n\t  // When closeDialog is called from within the component\n\t  // we notify the parent component/controller by calling the on-close-dialog\n\t  // callback\n\t  scope.closeDialog = function () {\n\t    ctrl.onCloseDialog();\n\t  };\n\t\n\t  scope.openDialog = function () {\n\t    ctrl.onOpenDialog();\n\t  };\n\t\n\t  scope.uploadImages = function () {\n\t    ctrl.onUploadImages();\n\t  };\n\t\n\t  scope.image = {};\n\t  scope.media_files = [];\n\t  scope.loadingMediaFiles = false;\n\t\n\t  // Used to keep filters and pagination state\n\t  scope.query = {};\n\t\n\t  // Initializing the pagination object to null\n\t  // This allows for convenient check on view pagination === null => dont show pagination\n\t  scope.pagination = null;\n\t\n\t  scope.loadMedias = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t    /* $http({\r\n\t        method: 'GET',\r\n\t        url: window.API_BASE_URL + '/media',\r\n\t        headers: {\r\n\t          Authorization: window.public_key\r\n\t        }\r\n\t      }) */\n\t    $marketcloud.media.list(query || {}).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.loadMore = function () {\n\t    var pageToFetch = scope.media_files.length / 20 + 1;\n\t    $marketcloud.media.list({ page: pageToFetch }).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t\n\t      scope.media_files = scope.media_files.concat(response.data.data);\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t\n\t    if (!query) {\n\t      query = scope.query || {};\n\t    }\n\t\n\t    $marketcloud.media.list(query).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  // Calling it right now because we want to initialize the media library\n\t  if (scope.media_files.length === 0) {\n\t    scope.loadMedias();\n\t  }\n\t\n\t  scope.showProgressBar = false;\n\t  scope.uploadingImages = false;\n\t\n\t  scope.howManySelectedMedia = function () {\n\t    return ctrl.images.length;\n\t  };\n\t\n\t  scope.addSelectedFromLibrary = function () {\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('hide');\n\t    /* $('#ImageSelectorModal').modal('hide') */\n\t  };\n\t\n\t  scope.isImageSelected = function (image) {\n\t    return ctrl.images.indexOf(image.url) > -1;\n\t  };\n\t  scope.selectImage = function (image) {\n\t    ctrl.image = image.url;\n\t    scope.closeDialog();\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('hide');\n\t  };\n\t\n\t  var removeImage = function removeImage(image) {\n\t    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n\t    var pos = ctrl.images.indexOf(image.url);\n\t    if (pos > -1) {\n\t      ctrl.images.splice(pos, 1);\n\t    }\n\t\n\t    // Rimuovo il media\n\t    /* for (var i =0; i< ctrl.media.length;i++) {\r\n\t      if (ctrl.media[i].url === image.url)\r\n\t        ctrl.media.splice(i,1);\r\n\t    } */\n\t  };\n\t\n\t  scope.uploader.onCompleteAll = function () {\n\t    scope.loadMedias();\n\t    scope.showProgressBar = false;\n\t    scope.uploadingImages = false;\n\t    scope.uploader.clearQueue();\n\t\n\t    // Checking if we need to close the dialog\n\t    if (scope.closeOnUploadComplete === 'true') {\n\t      scope.closeDialog();\n\t      /* $('#ImageSelectorModal').modal('hide') */\n\t      var modal = $element.find('#ImageSelectorModal');\n\t      $(modal).modal('hide');\n\t    }\n\t\n\t    if (ctrl.onUploadComplete) {\n\t      ctrl.onUploadComplete();\n\t    }\n\t  };\n\t\n\t  scope.uploader.onProgressAll = function (progress) {};\n\t\n\t  scope.uploader.onErrorItem = function (item, response, status, headers) {\n\t    var err = new Error('Error uploading an item');\n\t    err.response = response;\n\t    err.status = status;\n\t    err.headers = headers;\n\t    $exceptionHandler(err);\n\t  };\n\t\n\t  scope.chooseFileFromStorage = function () {\n\t    $('#chooseFileFromStorageButton').trigger('click');\n\t  };\n\t\n\t  scope.uploadSelectedImages = function () {\n\t    scope.showProgressBar = true;\n\t    scope.uploadingImages = true;\n\t    scope.uploader.uploadAll();\n\t  };\n\t\n\t  scope.addImageFromUrl = function () {\n\t    ctrl.images.push(scope.image.url);\n\t    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n\t    scope.image.url = null;\n\t  };\n\t\n\t  scope.showImageSelectorModal = function () {\n\t    /* $('#ImageSelectorModal').modal('show') */\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('show');\n\t\n\t    // Notifying the parent\n\t    scope.openDialog();\n\t  };\n\t};\n\t\n\tImageSelectorController.$inject = ImageSelectorControllerDependencies;\n\t\n\tangular.module('DataDashboard').controller('ImageSelectorController', ImageSelectorController);\n\t\n\tangular.module('DataDashboard').component('imageSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imageSelector/imageSelector.component.html',\n\t  controller: 'ImageSelectorController',\n\t  bindings: {\n\t    onCloseDialog: '&',\n\t    onOpenDialog: '&',\n\t    onUploadComplete: '&',\n\t    image: '=?',\n\t    buttonClass: '@',\n\t    buttonIcon: '@',\n\t    buttonText: '@',\n\t    closeOnUploadComplete: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ImageThumbnailController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // Boolean flag to control display/hide of the overlay\n\t    scope.ctrl.showOverlay = false;\n\t  };\n\t\n\t  scope.edit = function () {\n\t    scope.ctrl.onEdit();\n\t    $element.find('#editImageModal').modal('show');\n\t  };\n\t  scope.delete = function () {\n\t    scope.ctrl.onDelete();\n\t  };\n\t\n\t  scope.zoom = function () {\n\t    $element.find('#zoomImageModal').modal('show');\n\t  };\n\t\n\t  scope.showOverlay = function () {\n\t    scope.ctrl.showOverlay = true;\n\t  };\n\t  scope.hideOverlay = function () {\n\t    scope.ctrl.showOverlay = false;\n\t  };\n\t\n\t  scope.toggleEditImageModal = function (image) {\n\t    $element.find('#editImageModal').modal('hide');\n\t  };\n\t}]);\n\tapp.component('imageThumbnail', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.html',\n\t  controller: 'ImageThumbnailController',\n\t  bindings: {\n\t    imageSrc: '=',\n\t    image: '=',\n\t    onEdit: '&',\n\t    onDelete: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction ImagesCardController(scope) {\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t  };\n\t\n\t  scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n\t    var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\n\t\n\t    // We ensure that the indexes exist\n\t    if (fromIndex > target.length - 1) return;\n\t\n\t    // First we remove the element to move\n\t    target.splice(fromIndex, 1);\n\t\n\t    // Then we add it to the desired position\n\t    target.splice(toIndex, 0, toMove);\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    var removed = scope.ctrl.items.splice(i, 1);\n\t    scope.ctrl.onRemove(removed[0]);\n\t  };\n\t}\n\t\n\tImagesCardController.$inject = ['$scope'];\n\t\n\tangular.module('DataDashboard').controller('ImagesCardController', ImagesCardController).component('imagesCard', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imagesCard/imagesCard.component.html',\n\t  controller: 'ImagesCardController',\n\t  bindings: {\n\t    items: '=',\n\t    onRemove: '&',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('LinkHelpTextController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The text to display\n\t    scope.ctrl.text = this.text;\n\t\n\t    // The label to display\n\t    scope.ctrl.label = this.label;\n\t\n\t    scope.showHelpText = false;\n\t  };\n\t\n\t  scope.toggleHelpText = function () {\n\t    scope.showHelpText = !scope.showHelpText;\n\t  };\n\t}]);\n\tapp.component('linkHelpText', {\n\t  templateUrl: '/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.html',\n\t  controller: 'LinkHelpTextController',\n\t  bindings: {\n\t    text: '@',\n\t    label: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('NavbarController', ['$scope', '$application', '$account', function ($scope, $application, $account) {\n\t\n\t  $scope.application = $application.get();\n\t  $scope.user = $account.get();\n\t}]);\n\t\n\tapp.component('navbar', {\n\t  templateUrl: '/modules/data_dashboard/src/components/navbar/navbar.component.html',\n\t  controller: 'NavbarController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaginationNavController', ['$scope', '$element', '$attrs', '$marketcloud', function (scope, $element, $attrs, $marketcloud) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.ctrl.onChangePage({\n\t      page: page_number\n\t    });\n\t  };\n\t\n\t  scope.getListOfPages = function () {\n\t    var np = scope.ctrl.pagination.numberOfPages;\n\t    var cp = scope.ctrl.pagination.currentPage;\n\t\n\t    var arr = [];\n\t    var initialPage = cp - 2;\n\t    if (initialPage <= 0) {\n\t      initialPage = 1;\n\t    }\n\t    var lastPage = cp + 2;\n\t    if (lastPage > np) {\n\t      lastPage = np;\n\t    }\n\t\n\t    for (var i = initialPage; i < lastPage; i++) {\n\t      arr.push(i);\n\t    }\n\t\n\t    return arr;\n\t  };\n\t}]);\n\tapp.component('paginationNav', {\n\t  templateUrl: '/modules/data_dashboard/src/components/paginationNav/paginationNav.component.html',\n\t  controller: 'PaginationNavController',\n\t  bindings: {\n\t    pagination: '=',\n\t    onChangePage: '&'\n\t\n\t  }\n\t});\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaginationSelectorController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t\n\t    scope.ctrl = this;\n\t    scope.ctrl.perPage = this.perPage || this.config.defaultPageSize;\n\t    scope.ctrl.page = this.page || this.config.defaultPageNumber;\n\t\n\t    this.updatePageCounters();\n\t  };\n\t\n\t  // If the parent controller's pagination changes\n\t  // we have to update our reference\n\t  this.$onChanges = function (changes) {\n\t\n\t    // Whenever the parent controller refreshes data updating the query\n\t    // we must update our reference to pagination\n\t    if (changes.pagination) {\n\t      ctrl.pagination = changes.pagination.currentValue;\n\t\n\t      // We have to be sure that scope is already there\n\t      if (scope && scope.ctrl) {\n\t        ctrl.updatePageCounters();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.updatePageCounters = function () {\n\t    scope.pages = [];\n\t    for (var i = 1; i <= this.pagination.numberOfPages; i++) {\n\t      scope.pages.push(i);\n\t    }\n\t\n\t    // We find the positions of the first and the last displayed item\n\t    scope.first = (scope.ctrl.page - 1) * scope.ctrl.perPage + 1;\n\t    scope.last = scope.ctrl.page * scope.ctrl.perPage - 1;\n\t\n\t    // If there are less items than the perPage value, we adjust the \"last\" value\n\t    if (scope.last > scope.ctrl.pagination.count) {\n\t      scope.last = scope.ctrl.pagination.count;\n\t    }\n\t  };\n\t\n\t  this.config = {\n\t    availablePageSizes: [10, 20, 50, 100],\n\t    defaultPageSize: 20,\n\t    defaultPageNumber: 1\n\t\n\t    // this function triggers the callback specified as onChangePageSize\n\t  };scope.setPageSize = function (pageSize) {\n\t\n\t    var newSize = scope.ctrl.perPage;\n\t\n\t    if (pageSize) newSize = pageSize;\n\t\n\t    scope.ctrl.onChangePageSize({\n\t      per_page: newSize\n\t    }).then(function () {\n\t      ctrl.updatePageCounters();\n\t    });\n\t  };\n\t\n\t  scope.setPageNumber = function (pageNumber) {\n\t\n\t    if (pageNumber <= 0) {\n\t      console.info(\"Cannot set page <= 0. Ignoring setPageNumber() call.\");\n\t      return;\n\t    }\n\t\n\t    if (pageNumber > scope.ctrl.pagination.numberOfPages) {\n\t      console.info(\"Cannot set page > pagination.numberOfPages. Ignoring setPageNumber() call.\");\n\t      return;\n\t    }\n\t\n\t    scope.ctrl.onChangePageNumber({\n\t      page: pageNumber\n\t    }).then(function () {\n\t      ctrl.updatePageCounters();\n\t    });\n\t  };\n\t}]);\n\tapp.component('paginationSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.html',\n\t  controller: 'PaginationSelectorController',\n\t  bindings: {\n\t    perPage: '=',\n\t    page: '=',\n\t    pagination: '<', // We don't need to modify this, we just use it to listen for changes and read data\n\t    onChangePageSize: '&',\n\t    onChangePageNumber: '&'\n\t\n\t  }\n\t});\n\n/***/ }),\n/* 24 */\n13,\n/* 25 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('SEOFormController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The SEO object holds all SEO related data\n\t    scope.ctrl.seo = this.seo;\n\t\n\t    // The active tab key\n\t    scope.activeSeoTab = 'meta';\n\t  };\n\t\n\t  scope.showSeoTab = function (tabname) {\n\t    scope.activeSeoTab = tabname;\n\t  };\n\t}]);\n\tapp.component('seoForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/seoForm/seoForm.component.html',\n\t  controller: 'SEOFormController',\n\t  bindings: {\n\t    seo: '=',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SidebarController', ['$scope', '$http', '$routeParams', '$location', '$rootScope', '$route', '$application', '$window', 'StormConfiguration', function ($scope, $http, $params, $location, $root, $route, $application, $window, Configuration) {\n\t  $scope.showingSubSidebar = false;\n\t\n\t  $scope.currentSidebarSection = null;\n\t\n\t  $scope.currentSection = null;\n\t\n\t  $scope.sidebarIsExpanded = true;\n\t\n\t  $scope.subEntriesGroupToShow = null;\n\t\n\t  $scope.subSideBars = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t\n\t  $scope.StormConfiguration = {};\n\t  $scope.StormConfiguration = Configuration.get();\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    if (args.section) {\n\t\n\t      $scope.currentSection = args.section.split('.')[0];\n\t      $scope.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      $root.currentSection = args.section.split('.')[0];\n\t      $root.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n\t        $scope.hideSubSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.switchToApp = function (app_id) {\n\t    var current_app_id = $application.get().id;\n\t    // We just need to swap the current urls with the desired app id\n\t    var url = '/applications/' + app_id + '/dashboard#/';\n\t\n\t    window.location.href = url;\n\t  };\n\t\n\t  $scope.showSubEntries = function (id) {\n\t    $scope.subEntriesGroupToShow = id;\n\t  };\n\t  $scope.hideAllSubEntries = function () {\n\t    for (var k in $scope.subEntriesGroupShown) {\n\t      $scope.subEntriesGroupShown[k] = false;\n\t    }\n\t  };\n\t\n\t  $scope.subEntriesGroupShown = {\n\t    inventory: false,\n\t    system: false\n\t\n\t    // find workaround with $window, since currently using $window doesnt work\n\t  };this.mql = window.matchMedia('screen and (max-width:1000px)');\n\t\n\t  this.mql.addListener(function (mq) {\n\t    console.log(\"matchMedia Listener\");\n\t    if (mq.matches) {\n\t      if (true === $scope.sidebarIsExpanded) {\n\t        $scope.toggleSidebar();\n\t      }\n\t    } else {\n\t      // When the screen size grows bigger, we expand the sidebar,\n\t      // not required but probably wanted by the user\n\t      if (false === $scope.sidebarIsExpanded) {\n\t        $scope.toggleSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.toggleSidebar = function () {\n\t\n\t    var movement = \"-=200\";\n\t    var duration = 500;\n\t\n\t    if ($scope.sidebarIsExpanded === false) {\n\t      movement = '+=200';\n\t\n\t      // if we are closing the sidebar, we also close sub-sections in it\n\t      $scope.hideAllSubEntries();\n\t    }\n\t\n\t    $(\"#page-wrapper\").animate({\n\t      \"margin-left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".dashboard-section-header\").animate({\n\t      \"left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".sidebar-footer\").animate({\n\t      \"left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".sidebar\").not('.sub-sidebar').animate({\n\t      left: movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false,\n\t      done: function done() {\n\t\n\t        if (true === $scope.sidebarIsExpanded) {\n\t          $(\"a.entry .fa\").addClass(\"pull-right\");\n\t          $scope.sidebarIsExpanded = false;\n\t        } else {\n\t          $scope.sidebarIsExpanded = true;\n\t          $(\"a.entry .fa\").removeClass(\"pull-right\");\n\t        }\n\t\n\t        $scope.$apply();\n\t      }\n\t    });\n\t  };\n\t\n\t  $scope.toggleSidebar = function () {\n\t\n\t    if (true === $scope.sidebarIsExpanded) {\n\t      angular.element('.sidebar').addClass('collapsed');\n\t      angular.element('.sidebar').removeClass('expanded');\n\t      angular.element('#page-wrapper').addClass('expanded');\n\t      angular.element('#page-wrapper').removeClass('collapsed');\n\t      $scope.hideAllSubEntries();\n\t      $scope.sidebarIsExpanded = false;\n\t    } else {\n\t      angular.element('.sidebar').addClass('expanded');\n\t      angular.element('.sidebar').removeClass('collapsed');\n\t      angular.element('#page-wrapper').addClass('collapsed');\n\t      angular.element('#page-wrapper').removeClass('expanded');\n\t      $scope.sidebarIsExpanded = true;\n\t    }\n\t  };\n\t\n\t  $scope.toggleSubEntries = function (group_id) {\n\t    // group_id is the name of the dashboard section\n\t    // a section is a group of logical views\n\t    // e.g. inventory is a group of views related to inventory management\n\t    $scope.currentSection = group_id;\n\t\n\t    if (false === $scope.sidebarIsExpanded) $scope.toggleSidebar();\n\t\n\t    $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id];\n\t  };\n\t\n\t  $scope.saveStormConfiguration = function () {\n\t\n\t    for (var k in $scope.StormConfiguration) {\n\t      Configuration.set(k, $scope.StormConfiguration[k], true);\n\t    }\n\t\n\t    if ($scope.StormConfiguration.hasOwnProperty(\"theme\")) Configuration.applyTheme($scope.StormConfiguration.theme);\n\t  };\n\t\n\t  $scope.showSubSidebar = function (id) {\n\t\n\t    $scope.showingSubSidebar = true;\n\t\n\t    var sidebars = ['inventory', 'system', 'contents'];\n\t\n\t    if (sidebars.indexOf(id) < 0) {\n\t      return false;\n\t    }\n\t\n\t    $scope.currentSidebarSection = id;\n\t  };\n\t\n\t  $scope.hideSubSidebar = function () {\n\t    $scope.showingSubSidebar = false;\n\t  };\n\t}]);\n\t\n\tapp.component('sidebar', {\n\t  templateUrl: '/modules/data_dashboard/src/components/sidebar/sidebar.component.html',\n\t  controller: 'SidebarController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('sortingSelectorController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t    scope.ctrl.query = this.query || {};\n\t\n\t    if (!scope.ctrl.query.sort_by) scope.ctrl.query.sort_by = 'id';\n\t    if (!scope.ctrl.query.sort_order) scope.ctrl.query.sort_order = 'DESC';\n\t\n\t    scope.ctrl.resourceAttributes = this.resourceAttributes || [];\n\t  };\n\t\n\t  scope.applySorting = function () {\n\t    console.log(\"sortingSelector.applySorting\", {\n\t      sort_by: scope.ctrl.query.sort_by,\n\t      sort_order: scope.ctrl.query.sort_order\n\t    });\n\t    scope.ctrl.onUpdate({\n\t      sort_by: scope.ctrl.query.sort_by,\n\t      sort_order: scope.ctrl.query.sort_order\n\t    });\n\t\n\t    $(\"#sortingModal\").modal('hide');\n\t  };\n\t}]);\n\t\n\tapp.component('sortingSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.html',\n\t  controller: 'sortingSelectorController',\n\t  bindings: {\n\t    query: '=',\n\t    resourceAttributes: '=',\n\t    onUpdate: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('SwitchController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.value = this.value;\n\t\n\t    // Theme is success danger info primary warning default\n\t    scope.ctrl.theme = $attrs.theme || 'info';\n\t\n\t    scope.ctrl.align = $attrs.align || '';\n\t  };\n\t\n\t  $element.on('click', function () {\n\t    if (scope.ctrl.readOnly === true) {\n\t      return;\n\t    }\n\t\n\t    scope.ctrl.value = !scope.ctrl.value;\n\t\n\t    // Params must be wrapped in an object\n\t    // then when using the on-update attribute i can write\n\t    // on-update=\"somfunc(params)\"\n\t\n\t    scope.$apply();\n\t\n\t    scope.ctrl.onUpdate();\n\t  });\n\t}]);\n\tapp.component('switch', {\n\t  templateUrl: '/modules/data_dashboard/src/components/switch/switch.component.html',\n\t  controller: 'SwitchController',\n\t  bindings: {\n\t    value: '=',\n\t    onUpdate: '&',\n\t    class: '@',\n\t    align: '@',\n\t    readOnly: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('TaxesSelectorController', TaxesSelectorController).component('taxesSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.html',\n\t  controller: 'TaxesSelectorController',\n\t  bindings: {\n\t    tax: '=',\n\t    onError: '&',\n\t    onChange: '&'\n\t  }\n\t});\n\t\n\tTaxesSelectorController.$inject = ['$marketcloud', '$scope'];\n\t\n\tfunction TaxesSelectorController($marketcloud, scope) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t  };\n\t\n\t  $marketcloud.taxes.list().then(function (response) {\n\t    scope.ctrl.taxes = response.data.data;\n\t  }).catch(function (response) {\n\t    scope.ctrl.onError(response);\n\t  });\n\t}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ToolbarSearchController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t  scope.searchWord = '';\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.query = {};\n\t\n\t    if (!this.propertyName) this.propertyName = \"name\";\n\t\n\t    scope.ctrl.query[ctrl.propertyName] = {\n\t      $options: 'i',\n\t      $regex: ''\n\t    };\n\t  };\n\t\n\t  scope.onQueryChange = function () {\n\t\n\t    scope.ctrl.query[ctrl.propertyName][\"$regex\"] = scope.searchWord;\n\t    return scope.ctrl.onUpdate({\n\t      query: scope.ctrl.query\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.component('toolbarSearch', {\n\t  templateUrl: '/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.html',\n\t  controller: 'ToolbarSearchController',\n\t  bindings: {\n\t    onUpdate: '&',\n\t    propertyName: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaymentMethodsController', ['$scope', '$http', '$marketcloud', '$location', 'paymentMethods', function (scope, http, $marketcloud, location, paymentMethods) {\n\t  scope.paymentMethods = paymentMethods.data.data;\n\t  /* scope.integrations = integrations.data.data; */\n\t  scope.modalMode = 'update';\n\t  scope.paymentMethod = {\n\t    name: '',\n\t    description: '',\n\t    active: false\n\t\n\t  };\n\t\n\t  scope.loadPaymentMethods = function () {\n\t    $marketcloud.paymentMethods.list().then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An erro has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.availableChargeOptions = [{\n\t    label: 'No additional charge',\n\t    value: 'no_cost'\n\t  }, {\n\t    label: 'Fixed fee',\n\t    value: 'fixed_fee'\n\t  }, {\n\t    label: 'Percentage based fee',\n\t    value: 'percentage_fee'\n\t  }, {\n\t    label: 'Fixed plus percentage',\n\t    value: 'fixed_plus_percentage'\n\t  }];\n\t\n\t  scope.delete = function (payment) {\n\t\n\t    payment = payment || scope.payment;\n\t\n\t    $marketcloud.paymentMethods.delete(payment.id).then(function (response) {\n\t      notie.alert(1, 'Payment method deleted.', 1.5);\n\t      scope.payment = {};\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t\n\t  scope.save = function () {\n\t    $marketcloud.paymentMethods.save(scope.payment).then(function (response) {\n\t      notie.alert(1, 'Payment method created.', 1.5);\n\t      scope.payment = {};\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t  scope.createPayment = function () {\n\t    scope.modalMode = 'create';\n\t    scope.payment = {};\n\t    $('#addManualPaymentMethodModal').modal('show');\n\t  };\n\t  scope.editPayment = function (payment) {\n\t    scope.modalMode = 'update';\n\t\n\t    scope.payment = payment;\n\t\n\t    $('#addManualPaymentMethodModal').modal('show');\n\t  };\n\t\n\t  scope.update = function (updates) {\n\t    var payload = updates || scope.payment;\n\t\n\t    $marketcloud.paymentMethods.update(scope.payment.id, payload).then(function (response) {\n\t      notie.alert(1, 'Payment method updated.', 1.5);\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t\n\t  scope.togglePaymentMethod = function (paymentMethod) {\n\t    $marketcloud.paymentMethods.update(paymentMethod.id, paymentMethod).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('AnalyticsController', ['$scope', '$http', '$routeParams', 'analytics', 'moment', 'carts', 'customers', '$location', function (scope, http, params, analytics, moment, carts, customers, $location) {\n\t\n\t    scope.currentRange = \"This month\";\n\t    if ($location.search().range) scope.currentRange = $location.search().range;\n\t\n\t    var today = new Date();\n\t    today.setHours(0, 0, 0, 0);\n\t    today = today.getTime();\n\t\n\t    var yesterday = new Date();\n\t    yesterday.setDate(yesterday.getDate() - 1);\n\t    yesterday.setHours(0, 0, 0, 0);\n\t    yesterday = yesterday.getTime();\n\t\n\t    var oneWeekAgo = new Date();\n\t    oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n\t    oneWeekAgo.setHours(0, 0, 0, 0);\n\t    oneWeekAgo = oneWeekAgo.getTime();\n\t\n\t    var orders = analytics.data.data;\n\t\n\t    var salesVolumePerDay = {};\n\t\n\t    var numberOfOrdersPerDay = {};\n\t\n\t    orders.filter(function (x) {\n\t        // We consider only orders not canceled or refunded or failed for the analytics\n\t        var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t        return invalid_orders.indexOf(x.status) < 0;\n\t    }).map(function (x) {\n\t        return {\n\t            created_at: x.created_at,\n\t            total: x.total\n\t        };\n\t    }).forEach(function (x) {\n\t        var d = new Date(x.created_at);\n\t        var month = String(d.getMonth() + 1);\n\t        if (month.length < 2) {\n\t            month = '0' + month;\n\t        }\n\t        var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t        if (!salesVolumePerDay[day]) {\n\t            salesVolumePerDay[day] = 0;\n\t        }\n\t\n\t        salesVolumePerDay[day] += x.total;\n\t\n\t        if (!numberOfOrdersPerDay[day]) numberOfOrdersPerDay[day] = 0;\n\t\n\t        numberOfOrdersPerDay[day]++;\n\t    });\n\t\n\t    var goodOrders = orders.filter(function (x) {\n\t        // We consider only orders not canceled or refunded or failed for the analytics\n\t        var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t        return invalid_orders.indexOf(x.status) < 0;\n\t    });\n\t\n\t    // Given a date object\n\t    // returns yyyy-mm-dd\n\t    function getDateKeyFromDate(d) {\n\t        var month = String(d.getMonth() + 1);\n\t\n\t        if (month.length < 2) month = '0' + month;\n\t\n\t        var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t        return day;\n\t    }\n\t\n\t    var ordersPerDay = {};\n\t\n\t    // We have to prefill days labels\n\t\n\t\n\t    var d = new Date();\n\t    switch (scope.currentRange.toLowerCase()) {\n\t        case \"this month\":\n\t            for (var i = 1; i < 30; i++) {\n\t                var key = getDateKeyFromDate(d);\n\t                ordersPerDay[key] = [];\n\t                d.setDate(d.getDate() - i);\n\t            }\n\t            break;\n\t\n\t        case \"this week\":\n\t            for (var i = 1; i < 7; i++) {\n\t                var key = getDateKeyFromDate(d);\n\t                ordersPerDay[key] = [];\n\t                d.setDate(d.getDate() - i);\n\t            }\n\t            break;\n\t\n\t        case \"yesterday\":\n\t            var yesterday = new Date();\n\t            yesterday.setDate(yesterday.getDate() - 1);\n\t            var key = getDateKeyFromDate(yesterday);\n\t            ordersPerDay[key] = [];\n\t            break;\n\t\n\t        case \"today\":\n\t            var today = new Date();\n\t            var key = getDateKeyFromDate(today);\n\t            ordersPerDay[key] = [];\n\t            break;\n\t    }\n\t\n\t    goodOrders.forEach(function (order) {\n\t        var d = new Date(order.created_at);\n\t\n\t        var day = getDateKeyFromDate(d);\n\t\n\t        if (ordersPerDay[day]) ordersPerDay[day].push(order);else ordersPerDay[day] = [order];\n\t    });\n\t\n\t    scope.dateLabels = Object.keys(ordersPerDay);\n\t    scope.formattedDateLabels = scope.dateLabels.map(function (label) {\n\t        return moment(label, 'YYYY-M-DD').format('MMM Do');\n\t    });\n\t\n\t    scope.ordersVolumePerDay = [];\n\t    scope.ordersCountPerDay = [];\n\t\n\t    scope.dateLabels.forEach(function (date) {\n\t        var numberOfOrdersThisDate = ordersPerDay[date].length;\n\t        var salesThisDate = ordersPerDay[date].map(function (order) {\n\t            return order.total;\n\t        }).reduce(function (a, b) {\n\t            return a + b;\n\t        }, 0);\n\t\n\t        scope.ordersCountPerDay.push(numberOfOrdersThisDate);\n\t        scope.ordersVolumePerDay.push(salesThisDate);\n\t    });\n\t\n\t    scope.totalOrdersValue = goodOrders.map(function (order) {\n\t        return order.total;\n\t    }).reduce(function (a, b) {\n\t        return a + b;\n\t    }, 0).toFixed(2);\n\t\n\t    scope.totalOrdersCount = goodOrders.length;\n\t    /*\r\n\t     *\tHere we feed the Chart.js chart on the dashboard homepage\r\n\t     *\r\n\t     *\tThis chart shows orders volume for this month (last 30 days)\r\n\t     */\n\t\n\t    scope.chartOptions = {\n\t        scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n\t    };\n\t\n\t    scope.chartOptions = {\n\t        scales: {\n\t            xAxes: [{\n\t                gridLines: {\n\t                    display: false\n\t                }\n\t            }],\n\t            yAxes: [{\n\t                scaleLabel: {\n\t                    display: true,\n\t                    labelString: scope.application.currency_code\n\t                }\n\t            }]\n\t        }\n\t    };\n\t\n\t    carts = carts.data.data;\n\t\n\t    customers = customers.data.data;\n\t\n\t    scope.totalCustomersCount = customers.length;\n\t\n\t    var totalCartsCount = carts.length;\n\t    scope.totalCartsCount = totalCartsCount;\n\t\n\t    // Carts with item inside\n\t    var abandonedCarts = carts.filter(function (cart) {\n\t        return cart.status === \"open\" && cart.items.length > 0;\n\t    });\n\t    var abandonedCartsCount = abandonedCarts.length;\n\t\n\t    // Empty carts\n\t    var emptyCartsCount = carts.filter(function (cart) {\n\t        return cart.status === \"open\" && cart.items.length === 0;\n\t    }).length;\n\t\n\t    //\n\t    var convertedCartsCount = carts.filter(function (cart) {\n\t        return cart.status === \"closed\";\n\t    }).length;\n\t\n\t    scope.abandonedCartsTotalValue = abandonedCarts.map(function (cart) {\n\t        return cart.total;\n\t    }).reduce(function (a, b) {\n\t        return a + b;\n\t    }, 0);\n\t\n\t    scope.CartsDatasets = [abandonedCartsCount, emptyCartsCount, convertedCartsCount];\n\t\n\t    scope.CartsLabels = ['Abandoned', 'Empty', 'Converted'];\n\t\n\t    scope.CartsChartOptions = {\n\t        legend: {\n\t            display: true,\n\t            position: 'bottom'\n\t        }\n\t\n\t    };\n\t\n\t    scope.setCurrentTimeRange = function (range) {\n\t\n\t        range = range.toLowerCase();\n\t\n\t        scope.currentRange = range;\n\t\n\t        return $location.path('/analytics').search(\"range\", range);\n\t    };\n\t\n\t    var totalCartValue = carts.map(function (cart) {\n\t        return cart.total;\n\t    }).reduce(function (a, b) {\n\t        return a + b;\n\t    }, 0);\n\t\n\t    scope.averageCartValue = 0;\n\t\n\t    if (totalCartValue > 0) scope.averageCartValue = (totalCartValue / carts.length).toFixed(2);\n\t\n\t    var totalOrdersValue = orders.map(function (order) {\n\t        return order.total;\n\t    }).reduce(function (a, b) {\n\t        return a + b;\n\t    }, 0);\n\t\n\t    scope.averageOrderValue = 0;\n\t\n\t    if (totalOrdersValue > 0) scope.averageOrderValue = (totalOrdersValue / orders.length).toFixed(2);\n\t}]);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', 'role', '$location', function (scope, http, $application, rootScope, rolePresets, role, location) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.collaborators';\n\t\n\t  scope.role = role.data.data;\n\t\n\t  scope.preset_name = 'public';\n\t  scope.errors = {};\n\t\n\t  scope.presets = rolePresets;\n\t  scope.applyPreset = function () {\n\t    if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.presets[scope.preset_name]) {\n\t      scope.role.endpoints[k] = scope.presets[scope.preset_name][k];\n\t    }\n\t  };\n\t  scope.clearErrors = function () {\n\t    scope.errors = {};\n\t  };\n\t  scope.formHasErrors = function () {\n\t    return Object.keys(scope.errors).length > 0;\n\t  };\n\t  var validateRole = function validateRole() {\n\t    scope.clearErrors();\n\t    if (scope.role.name.length > 253) {\n\t      scope.errors.name = 'Name too long';\n\t\n\t      return false;\n\t    }\n\t\n\t    if (scope.role.name.length < 1) {\n\t      scope.errors.name = 'Name too short';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t  scope.updateRole = function () {\n\t    if (!validateRole()) {\n\t      return;\n\t    }\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/roles/' + scope.role.id,\n\t      data: scope.role\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role successfuly created.', 1.5);\n\t      location.path('#/application/acl');\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('NewRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', '$location', function (scope, http, $application, rootScope, rolePresets, location) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.acl';\n\t\n\t  scope.preset_name = 'public';\n\t  scope.errors = {};\n\t  scope.newRole = {\n\t    name: '',\n\t    description: '',\n\t    endpoints: angular.copy(rolePresets.public)\n\t  };\n\t  scope.presets = rolePresets;\n\t  scope.applyPreset = function () {\n\t    if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.presets[scope.preset_name]) {\n\t      scope.newRole.endpoints[k] = scope.presets[scope.preset_name][k];\n\t    }\n\t  };\n\t  scope.clearErrors = function () {\n\t    scope.errors = {};\n\t  };\n\t  scope.formHasErrors = function () {\n\t    return Object.keys(scope.errors).length > 0;\n\t  };\n\t  var validateRole = function validateRole() {\n\t    scope.clearErrors();\n\t    if (scope.newRole.name.length > 253) {\n\t      scope.errors.name = 'Name too long';\n\t\n\t      return false;\n\t    }\n\t\n\t    if (scope.newRole.name.length < 1) {\n\t      scope.errors.name = 'Name too short';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t  scope.saveRole = function () {\n\t    if (!validateRole()) {\n\t      return;\n\t    }\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/roles',\n\t      data: scope.newRole\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role successfuly created.', 1.5);\n\t      location.path('/applications/' + scope.application.id + '/acl');\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('ACLController', ['$scope', '$http', 'roles', '$application', '$rootScope', function (scope, http, roles, $application, rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.acl';\n\t\n\t  scope.roles = roles.data.data;\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/roles'\n\t    }).then(function (response) {\n\t      scope.roles = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading roles.', 1);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (role) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/roles/' + role.id\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, role not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateApplicationController', ['$scope', '$http', '$location', '$rootScope', function (scope, http, location, $rootScope) {\n\t\n\t    scope.application = {};\n\t\n\t    scope.create = function () {\n\t        scope._invalid = null;\n\t        var validation = window.Models.Application.validate(scope.application);\n\t        if (false === validation.valid) {\n\t            scope._invalid = validation.invalidPropertyName;\n\t        }\n\t        http({\n\t            method: 'POST',\n\t            url: '/applications',\n\t            data: scope.application\n\t        }).then(function (response) {\n\t            notie.alert(1, \"Application created\", 1.5);\n\t            location.path('#/applications/list');\n\t        }).catch(function (error) {\n\t            notie.alert(3, \"An error has occurred, please try again\", 1.5);\n\t        });\n\t    };\n\t}]);\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ListApplicationsController', ['$scope', function (scope) {\n\t\n\t  scope.applications = window.applications;\n\t}]);\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ApplicationBillingController', ['$scope', '$http', '$rootScope', '$application', '$account', function (scope, http, rootScope, $application, $account) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  rootScope.currentSection = 'application.billing';\n\t\n\t  // The form's step\n\t  scope.step = 1;\n\t\n\t  // The selected plan\n\t  scope.selected_plan = null;\n\t\n\t  // the error message\n\t  scope.error = null;\n\t\n\t  scope.invalidPropertyName = null;\n\t\n\t  // holds the card data\n\t  scope.card = {};\n\t\n\t  // idle, processing, error, success\n\t  scope.creditCardFormState = 'idle';\n\t\n\t  scope.showYearlyPlans = false;\n\t\n\t  scope.goToStep = function (step) {\n\t    scope.step = step;\n\t  };\n\t\n\t  // Loads the current user information like profile and billing\n\t  scope.account = $account.get();\n\t\n\t  scope.selectPlan = function (plan_id) {\n\t    scope.plans.forEach(function (plan) {\n\t      if (plan.id === plan_id) {\n\t        scope.selected_plan = plan;\n\t      }\n\t    });\n\t    console.log('selected_plan', scope.selected_plan);\n\t    scope.goToStep(2);\n\t  };\n\t\n\t  var validateCard = function validateCard() {\n\t    scope.error = null;\n\t\n\t    if (!Stripe.card.validateExpiry(scope.card.exp_month, scope.card.exp_year)) {\n\t      scope.error = 'The card\\'s expiration is invalid';\n\t      scope.invalidPropertyName = 'card.expiry';\n\t    }\n\t\n\t    if (!Stripe.card.validateCVC(scope.card.cvc)) {\n\t      scope.error = 'The card\\'s cvc is invalid';\n\t      scope.invalidPropertyName = 'card.cvc';\n\t    }\n\t\n\t    if (!Stripe.card.validateCardNumber(scope.card.number)) {\n\t      scope.error = 'The card\\'s number is invalid';\n\t      scope.invalidPropertyName = 'card.number';\n\t    }\n\t\n\t    return scope.error === null;\n\t  };\n\t\n\t  scope.updateApplicationSubscription = function () {\n\t    scope.creditCardFormState = 'processing';\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + application.id + '/billing',\n\t      data: {\n\t        plan_id: scope.selected_plan.id\n\t      }\n\t    }).then(function (response) {\n\t      scope.goToStep(3);\n\t      scope.creditCardFormState = 'success';\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      scope.error = error;\n\t      notie.alert(2, error.data.errors[0].message || 'Payment failed, please check your billing information.');\n\t      scope.creditCardFormState = 'error';\n\t    });\n\t  };\n\t\n\t  scope.filterByInterval = function (value, index, arr) {\n\t    if (scope.showYearlyPlans === true) {\n\t      return value.interval === 'yearly';\n\t    } else {\n\t      return value.interval === 'monthly';\n\t    }\n\t  };\n\t\n\t  scope.plans = [];\n\t\n\t  http.get('/applications/' + scope.application.id + '/plans').then(function (response) {\n\t    console.log('PLANS', response.data);\n\t    scope.plans = response.data.data;\n\t\n\t    scope.plans.forEach(function (plan) {\n\t      plan.api_calls_quota_max = plan.api_calls_quota_max / 1000;\n\t      plan.api_calls_quota_max = plan.api_calls_quota_max + 'K';\n\t    });\n\t  }).catch(function (error) {\n\t    console.log(error);\n\t  });\n\t}]);\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CollaboratorsController', ['$scope', '$http', 'collaborators', '$application', '$rootScope', function (scope, http, collaborators, $application, rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.collaborators';\n\t\n\t  scope.mode = null;\n\t\n\t  scope.collaborators = collaborators.data.data;\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/collaborators'\n\t    }).then(function (response) {\n\t      scope.collaborators = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading collaborators.', 1);\n\t    });\n\t  };\n\t\n\t  /* scope.edit = function(collaborator) {\r\n\t    scope.newCollaborator = collaborator;\r\n\t    scope.showUpdateModal();\r\n\t  };\r\n\t  scope.showUpdateModal = function() {\r\n\t    scope.mode = 'update';\r\n\t    $('#newCollaboratorModal').modal('show');\r\n\t  }; */\n\t\n\t  scope.showCreateModal = function () {\n\t    scope.mode = 'create';\n\t    $('#newCollaboratorModal').modal('show');\n\t  };\n\t\n\t  scope.saveCollaborator = function () {\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/collaborators',\n\t      data: scope.newCollaborator\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly created', 1.5);\n\t      scope.newCollaborator = {};\n\t      $('#newCollaboratorModal').modal('hide');\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not created', 1.5);\n\t      scope.newCollaborator = {};\n\t    });\n\t  };\n\t\n\t  scope.updateCollaborator = function (collaborator) {\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email,\n\t      data: {\n\t        role: collaborator.role\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not updated', 1);\n\t      scope.newCollaborator = {};\n\t    });\n\t  };\n\t\n\t  scope.delete = function (collaborator) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DeployController', ['$scope', '$rootScope', '$application', function (scope, $rootScope, $application) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  scope.selectedTemplate = null;\n\t\n\t  $rootScope.application = application;\n\t  $rootScope.currentSection = 'application.deploy';\n\t\n\t  scope.getHerokuURL = function () {\n\t    var str = 'https://heroku.com/deploy';\n\t    str += '?template=' + scope.selectedTemplate;\n\t    str += '&env[MARKETCLOUD_PUBLIC_KEY]=' + encodeURIComponent(scope.application.public_key);\n\t    str += '&env[MARKETCLOUD_SECRET_KEY]=' + encodeURIComponent(scope.application.secret_key);\n\t    return str;\n\t  };\n\t}]);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('IntegrationsController', function ($scope, $http, $application, $rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  $scope.integrations = [{\n\t    name: 'braintree',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n\t    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n\t    links: {\n\t      'view': '/documentation/integrations/braintree'\n\t    }\n\t  }, {\n\t    name: 'stripe',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n\t    description: 'Web and mobile payments. Built for developers.',\n\t    links: {\n\t      'view': '/documentation/integrations/stripe'\n\t    }\n\t  }, {\n\t    name: 'facebook',\n\t    tags: ['authentication'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n\t    description: 'Facebook authentication',\n\t    links: {\n\t      'view': '/documentation/guides/facebook-login'\n\t    }\n\t  }];\n\t  rootScope.currentSection = 'application.integrations';\n\t});\n\t\n\tapp.controller('IntegrationStripeController', function ($scope, $http, $routeParams, StripeIntegration) {\n\t  console.log('Integration status', StripeIntegration);\n\t\n\t  /*\r\n\t   *  The integration states are\r\n\t   *\r\n\t   *  Not installed\r\n\t   *  Installed inactive\r\n\t   *  Installed active\r\n\t   *\r\n\t   *  Installed means that the oauth flow was completed and we have the data\r\n\t   *  StripeIntegration is the object we use to inject the integration state fetched from the api\r\n\t   *\r\n\t   *  If it's null, we conclude that it is not installed\r\n\t   */\n\t  if (StripeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.StripeIntegration = StripeIntegration;\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  // TODO\n\t  // Lo switch deve essere visibile se e solo se l'integrazione è installata. così da\n\t  // non essere clicccabile altrimenti.\n\t\n\t  $scope.toggleIntegration = function () {\n\t    alert($scope.StripeIntegration.isActive);\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/stripe',\n\t      data: {\n\t        isActive: $scope.StripeIntegration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t});\n\t\n\tapp.controller('IntegrationBraintreeController', function ($scope, $http, $routeParams, BraintreeIntegration) {\n\t  // This bool is used to show/hide credentials form\n\t  // This form is used to update the credentials\n\t  $scope.displayCredentialsForm = false;\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  $scope.braintreeConfiguration = BraintreeIntegration.data.data;\n\t\n\t  $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data);\n\t\n\t  // If the integration is not enabled we initialize it to false\n\t  if (!$scope.braintreeUpdate.hasOwnProperty('isActive')) {\n\t    $scope.braintreeUpdate.isActive = false;\n\t  }\n\t\n\t  $scope.toggleCredentialsForm = function () {\n\t    $scope.displayCredentialsForm = !$scope.displayCredentialsForm;\n\t  };\n\t\n\t  $scope.showModal = function () {\n\t    $('#BraintreeCredentialsModal').modal('show');\n\t  };\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: {\n\t        isActive: $scope.braintreeConfiguration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t  $scope.saveBraintreeConfiguration = function () {\n\t    var payload = {\n\t      environment: $scope.braintreeUpdate.environment,\n\t      isActive: $scope.braintreeUpdate.isActive\n\t\n\t      // If the user also changed the config,\n\t    };if ($scope.braintreeUpdate.merchantId && $scope.braintreeUpdate.publicKey && $scope.braintreeUpdate.privateKey) {\n\t      payload.merchantId = $scope.braintreeUpdate.merchantId;\n\t      payload.publicKey = $scope.braintreeUpdate.publicKey;\n\t      payload.privateKey = $scope.braintreeUpdate.privateKey;\n\t    }\n\t\n\t    console.log('PUTTING', payload);\n\t    $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: payload\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t      $('#BraintreeCredentialsModal').modal('hide');\n\t      $scope.braintreeConfiguration = angular.copy({\n\t        environment: payload.environment,\n\t        isActive: payload.isActive\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t});\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('NavigationController', ['$scope', '$route', '$rootScope', '$application', function ($scope, $route, $rootScope, $application) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  // $rootScope.$broadcast('$dashboardSectionChange',{section : $route.current.$$route.name});\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    // $scope.currentSection = args.section.split('.')[0];\n\t    $scope.currentSection = args.section;\n\t\n\t    $scope.showNavigation = $scope.currentSection !== 'home' && $scope.currentSection !== 'create';\n\t  });\n\t}]);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ApplicationOverviewController', ['$scope', '$http', '$application', '$rootScope', function (scope, http, $application, rootScope) {\n\t  scope.activities = [];\n\t\n\t  // Not loading activities as a route resolve\n\t  // this is because the http method is still quite slow.\n\t  // so we load it after showing the view.\n\t  http({\n\t    url: '/applications/' + $application.get(\"id\") + '/activity',\n\t    method: 'GET'\n\t  }).then(function (response) {\n\t    scope.activities = response.data.data;\n\t  });\n\t\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  // TODO grab statistical information\n\t\n\t  rootScope.currentSection = 'application.overview';\n\t\n\t  function getNextMonth(date) {\n\t    var next_month = new Date(date);\n\t    next_month.setMonth(date.getMonth() + 1);\n\t    return next_month;\n\t  }\n\t\n\t  scope.kilobytesToGigabytes = function (kb) {\n\t    return kb / 1024 / 1024;\n\t  };\n\t\n\t  scope.application.renew_date;\n\t  scope.getMethodCSSClass = function (a) {\n\t    var cls = null;\n\t    switch (a.method) {\n\t      case 'GET':\n\t        cls = 'label-success';\n\t        break;\n\t      case 'POST':\n\t        cls = 'label-info';\n\t        break;\n\t      case 'PUT':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'PATCH':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'DELETE':\n\t        cls = 'label-danger';\n\t        break;\n\t      default:\n\t        cls = 'label-success';\n\t        break;\n\t\n\t    }\n\t    return cls;\n\t  };\n\t}]);\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.factory('BillingPlans', function () {\n\t  var BILLING_PLANS = {\n\t    'free': {\n\t      name: 'free',\n\t      id: 'free',\n\t      price_monthly: 0,\n\t      price_yearly: 0,\n\t      api_calls_quota_max: '5000',\n\t      storage: 0.5\n\t    },\n\t    'month-19': {\n\t      name: 'cumulus',\n\t      id: 'month-19',\n\t      price_monthly: 19,\n\t      price_yearly: 190,\n\t      api_calls_quota_max: '100000',\n\t      storage: 1\n\t    },\n\t    'month-49': {\n\t      name: 'stratus',\n\t      id: 'month-49',\n\t      price_monthly: 49,\n\t      price_yearly: 490,\n\t      api_calls_quota_max: '450000',\n\t      storage: 2\n\t    },\n\t    'month-99': {\n\t      name: 'nimbo stratus',\n\t      id: 'month-99',\n\t      price_monthly: 99,\n\t      price_yearly: 990,\n\t      api_calls_quota_max: '1500000',\n\t      storage: 5\n\t    }\n\t  };\n\t  return BILLING_PLANS;\n\t});\n\t\n\tapp.controller('ApplicationSettingsController', ['$scope', '$application', '$http', '$location', '$rootScope', 'BillingPlans', function (scope, $application, $http, $location, rootScope, BillingPlans) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  rootScope.currentSection = 'application.settings';\n\t\n\t  scope.plans = BillingPlans;\n\t\n\t  scope.currentPlan = null;\n\t\n\t  for (var k in BillingPlans) {\n\t    if (scope.application.plan_name === BillingPlans[k].name) {\n\t      scope.currentPlan = BillingPlans[k];\n\t    }\n\t  }\n\t\n\t  scope.updateApplication = function () {\n\t    var update = {\n\t      url: scope.application.url,\n\t      name: scope.application.name\n\t    };\n\t\n\t    $http.put('/applications/' + scope.application.id, update).then(function (response) {\n\t      notie.alert(1, 'The application has been updated.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteApplication = function () {\n\t    notie.confirm('Do you really want to delete the application? It is not reversible!', 'Confirm', 'Cancel', function () {\n\t      $http.delete('/applications/' + scope.application.id).then(function (response) {\n\t        notie.alert(1, 'The application has been deleted.', 1.5);\n\t        $location.path('/');\n\t      }).catch(function (response) {\n\t        notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t      });\n\t    });\n\t  };\n\t\n\t  scope.regenerateKeys = function () {\n\t    notie.confirm('Do you really want to update the application\\'s keys?', 'Confirm', 'Cancel', function () {\n\t      $http.put('/applications/' + scope.application.id + '/regenerateKeys').then(function (response) {\n\t        scope.application.public_key = response.data.data.public_key;\n\t        scope.application.secret_key = response.data.data.secret_key;\n\t        notie.alert(1, 'Keys regenerated correctly.', 1.5);\n\t      }).catch(function (response) {\n\t        notie.alert(3, 'An error has occurred. Please retry', 1.5);\n\t      });\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('WebhooksController', ['$scope', '$http', 'webhooks', '$application', '$rootScope', function (scope, http, webhooks, $application, rootScope) {\n\t  rootScope.currentSection = 'application.webhooks';\n\t\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  scope.mode = null;\n\t  scope.error = null;\n\t  scope.invalidPropertyName = null;\n\t\n\t  scope.application = application;\n\t  scope.webhooks = webhooks.data.data;\n\t\n\t  scope.newWebhook = {};\n\t\n\t  var webhookMethods = ['create', 'update', 'delete'];\n\t\n\t  var webhookResources = ['addresses', 'brands', 'carts', 'categories', 'collections', 'contents', 'coupons', 'invoices', 'files', 'orders', 'paymentMethods', 'products', 'promotions', 'stores', 'taxes', 'users', 'variables'];\n\t\n\t  /* scope.events = [\r\n\t    'products.create',\r\n\t    'products.delete',\r\n\t    'products.update',\r\n\t    'brands.create',\r\n\t    'brands.delete',\r\n\t    'brands.update',\r\n\t    'categories.create',\r\n\t    'categories.delete',\r\n\t    'categories.update',\r\n\t    'orders.create',\r\n\t    'orders.delete',\r\n\t    'orders.update',\r\n\t    'carts.create',\r\n\t    'carts.delete',\r\n\t    'carts.update',\r\n\t    'payments.create',\r\n\t    'payments.delete',\r\n\t    'payments.update',\r\n\t    'shippings.create',\r\n\t    'shippings.delete',\r\n\t    'shippings.update',\r\n\t    'users.create',\r\n\t    'users.update',\r\n\t    'users.delete'\r\n\t  ]; */\n\t\n\t  scope.events = [];\n\t\n\t  webhookResources.forEach(function (resource) {\n\t    webhookMethods.forEach(function (method) {\n\t      scope.events.push(resource + '.' + method);\n\t    });\n\t  });\n\t\n\t  scope.events.splice(scope.events.indexOf(\"orders.delete\"), 0, \"payments.create\");\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/webhooks'\n\t    }).then(function (response) {\n\t      console.log('LOAD', response);\n\t      scope.webhooks = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading webhooks.', 1);\n\t    });\n\t  };\n\t\n\t  scope.edit = function (hook) {\n\t    scope.newWebhook = hook;\n\t    scope.showUpdateModal();\n\t  };\n\t\n\t  scope.showUpdateModal = function () {\n\t    scope.mode = 'update';\n\t    $('#newWebhookModal').modal('show');\n\t  };\n\t\n\t  scope.showCreateModal = function () {\n\t    scope.mode = 'create';\n\t    scope.newWebhook = {};\n\t    $('#newWebhookModal').modal('show');\n\t  };\n\t\n\t  scope.validateWebhook = function () {\n\t    scope.error = null;\n\t    scope.invalidPropertyName = null;\n\t    if (scope.validateUrl() === false) {\n\t      scope.error = 'The URL is not valid. Remember to specify the protocol http:// or https:// at the beginning.';\n\t      scope.invalidPropertyName = 'url';\n\t      return false;\n\t    }\n\t\n\t    if (!scope.newWebhook.event) {\n\t      scope.error = 'Please select a valid event from the menu';\n\t      scope.invalidPropertyName = 'event';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  scope.saveWebhook = function () {\n\t    if (!scope.validateWebhook()) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/webhooks',\n\t      data: scope.newWebhook\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly created', 1);\n\t      scope.newWebhook = {};\n\t      $('#newWebhookModal').modal('hide');\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not created', 1);\n\t      scope.newWebhook = {};\n\t    });\n\t  };\n\t\n\t  scope.validateUrl = function () {\n\t    var regex = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i;\n\t    return regex.test(scope.newWebhook.url);\n\t  };\n\t\n\t  scope.updateWebhook = function () {\n\t    if (!scope.validateWebhook()) {\n\t      return;\n\t    }\n\t\n\t    var update = {\n\t      event: scope.newWebhook.event,\n\t      url: scope.newWebhook.url\n\t    };\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/webhooks/' + scope.newWebhook.id,\n\t      data: update\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly updated', 1);\n\t      scope.newWebhook = {};\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not updated', 1);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (hook) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/webhooks/' + hook.id\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditBrandTranslationsController', EditBrandTranslationsController);\n\t\n\t  EditBrandTranslationsController.$inject = ['$scope', '$marketcloud', 'brand', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditBrandTranslationsController(scope, $marketcloud, brand, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.brand = brand.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.brand.locales[scope.currentLocale.code].slug = getSlugFromString(scope.brand.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.brand.hasOwnProperty('locales')) {\n\t      scope.brand.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.brand.locales.hasOwnProperty(locale.code)) {\n\t        scope.brand.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.brand.locales)\n\t      };\n\t\n\t      $marketcloud.brands.update(scope.brand.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditBrandController', ['$scope', '$http', 'brand', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, brandResponse, location, $marketcloud, $utils, $validation, $models) {\n\t  scope.brand = brandResponse.data.data;\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.brand) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.brand[k];\n\t      delete scope.brand[k];\n\t    }\n\t  }\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.brand.images.splice(i, 1);\n\t  };\n\t\n\t  scope.updateBrand = function () {\n\t    scope.brand.image_url = scope.brand.images[0];\n\t\n\t    var toSave = angular.copy(scope.brand);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.brands.update(scope.brand.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Brand successfully update.', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Brand.schema, '[ng-model=\"brand.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.brand.slug = $utils.getSlugFromString(scope.brand.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('BrandsController', ['$scope', '$marketcloud', 'brands', function (scope, $marketcloud, resources) {\n\t  scope.brands = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    return scope.loadData({ page: page_number });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.brands.list(query).then(function (response) {\n\t      scope.brands = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteBrand = function (brand_id, index) {\n\t    $marketcloud.brands.delete(brand_id).then(function (response) {\n\t      scope.loadData({\n\t        page: scope.currentPage\n\t      });\n\t      notie.alert(1, 'Brand deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('BrandController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t\n\t  scope.newBrand = {};\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  // For imageThumbnail\n\t  scope.removeImage = function (i) {\n\t    scope.newBrand.images.splice(i, 1);\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.newBrand.slug = $utils.getSlugFromString(scope.newBrand.name);\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    scope.newBrand.image_url = scope.newBrand.images[0];\n\t\n\t    var toSave = angular.copy(scope.newBrand);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.brands.save(toSave).then(function (response) {\n\t      notie.alert(1, 'Brand saved', 1.5);\n\t      location.path('/brands');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Brand.schema, '[ng-model=\"newBrand.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditCategoryController', ['$scope', '$http', 'category', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, category, location, $marketcloud, $utils, $validation, $models) {\n\t  scope.loadingData = true;\n\t\n\t  scope.category = category.data.data;\n\t\n\t  scope.categories = [];\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'parent_id', 'path', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.category) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.category[k];\n\t      delete scope.category[k];\n\t    }\n\t  }\n\t\n\t  // For image thumbnail\n\t  scope.removeImage = function (i) {\n\t    scope.category.images.splice(i, 1);\n\t  };\n\t\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.updateCategory = function () {\n\t    scope.category.image_url = scope.category.images[0];\n\t\n\t    var toSave = angular.copy(scope.category);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    $marketcloud.categories.update(category.data.data.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Category updated with success ', 2);\n\t      location.path('/categories');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Category.schema, '[ng-model=\"category.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.category.slug = $utils.getSlugFromString(scope.category.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CategoriesController', ['$scope', 'categories', '$q', '$marketcloud', function (scope, resources, $q, $marketcloud) {\n\t  scope.categories = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    scope.categories.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.categories.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (category) {\n\t        promises.push($marketcloud.categories.delete(category.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadPage(scope.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.categories.list(query).then(function (response) {\n\t      scope.categories = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteCategory = function (category_id, index) {\n\t    $marketcloud.categories.delete(category_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Category deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CategoryController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t\n\t  scope.customPropertiesData = {};\n\t  scope.newCategory = {};\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(3, 'An error has occurred. Please retry', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = $models.Category.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'parent_id', 'path', 'updated_at', 'created_at');\n\t\n\t  // For image thumbnails\n\t  scope.removeImage = function (i) {\n\t    scope.newCategory.images.splice(i, 1);\n\t  };\n\t\n\t  scope.saveCategory = function () {\n\t    scope.newCategory.image_url = scope.newCategory.images[0];\n\t\n\t    var toSave = angular.copy(scope.newCategory);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.categories.save(toSave).then(function (response) {\n\t      notie.alert(1, 'Category saved', 1.5);\n\t      location.path('/categories');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validationObject = response.data.errors[0];\n\t        var invalidPropertyName = validationObject.invalidPropertyName;\n\t\n\t        $validation.showErrorMessage(validationObject, $models.Category.schema, '[ng-model=\"newCategory.' + invalidPropertyName + '\"]');\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.newCategory.slug = $utils.getSlugFromString(scope.newCategory.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditCategoryTranslationsController', EditCategoryTranslationsController);\n\t\n\t  EditCategoryTranslationsController.$inject = ['$scope', '$marketcloud', 'category', '$http', '$location', '$application', 'LocalesFactory'];\n\t\n\t  function EditCategoryTranslationsController(scope, $marketcloud, category, $http, $location, $application, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.category = category.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').filter(function (localeCode) {\n\t      // When splitting an empty string, we get [\"\"]\n\t      return localeCode !== '';\n\t    }).map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.category.hasOwnProperty('locales')) {\n\t      scope.category.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.category.locales.hasOwnProperty(locale.code)) {\n\t        scope.category.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.category.locales[scope.currentLocale.code].slug = getSlugFromString(scope.category.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      if (scope.currentLocale) {\n\t        return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t      }\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.category.locales)\n\t      };\n\t\n\t      $marketcloud.categories.update(scope.category.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditCollectionTranslationsController', EditCollectionTranslationsController);\n\t\n\t  EditCollectionTranslationsController.$inject = ['$scope', '$marketcloud', 'collection', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditCollectionTranslationsController(scope, $marketcloud, collection, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.collection = collection.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.collection.hasOwnProperty('locales')) {\n\t      scope.collection.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.collection.locales.hasOwnProperty(locale.code)) {\n\t        scope.collection.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.collection.locales[scope.currentLocale.code].slug = getSlugFromString(scope.collection.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.collection.locales)\n\t      };\n\t\n\t      $marketcloud.collections.update(scope.collection.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CollectionController', ['$scope', '$http', '$marketcloud', '$location', '$utils', function (scope, http, $marketcloud, location, $utils) {\n\t\n\t\tscope.collection = {\n\t\t\titems: []\n\t\t};\n\t\n\t\tscope.products = [];\n\t\tscope.itemsToAdd = [];\n\t\n\t\tscope.query = {};\n\t\n\t\tscope.prepareRegex = function () {\n\t\t\tscope.query.name.$options = 'i';\n\t\t};\n\t\n\t\tscope.addProductToCollection = function (product) {\n\t\t\tscope.itemsToAdd.push(product);\n\t\t\tscope.query.name.$regex = '';\n\t\t\tscope.products = [];\n\t\t};\n\t\n\t\tscope.removeProductFromCollection = function (i) {\n\t\t\tscope.itemsToAdd.splice(i, 1);\n\t\t};\n\t\n\t\tscope.showTheList = false;\n\t\tscope.showList = function () {\n\t\t\tscope.showTheList = true;\n\t\t};\n\t\tscope.hideList = function () {\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tscope.showTheList = false;\n\t\t\t\tscope.$apply();\n\t\t\t}, 200);\n\t\t};\n\t\tscope.loadProducts = function (query) {\n\t\t\tquery = query || scope.query;\n\t\n\t\t\t$marketcloud.products.list(query).then(function (response) {\n\t\n\t\t\t\tscope.products = response.data.data.filter(function (item) {\n\t\t\t\t\treturn scope.itemsToAdd.map(function (i) {\n\t\t\t\t\t\treturn i.id;\n\t\t\t\t\t}).indexOf(item.id) < 0;\n\t\t\t\t});\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred. Please try again');\n\t\t\t});\n\t\t};\n\t\n\t\tscope.loadProducts();\n\t\n\t\tscope.saveCollection = function () {\n\t\t\tscope.collection.items = scope.itemsToAdd.map(function (item) {\n\t\t\t\treturn { product_id: item.id };\n\t\t\t});\n\t\t\t$marketcloud.collections.save(scope.collection).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Collection saved', 1.5);\n\t\t\t\tlocation.path('/collections');\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(2, 'An error has occurred, please try again', 1.5);\n\t\t\t});\n\t\t};\n\t}]);\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location', function (scope, http, $marketcloud, location) {\n\t  scope.collection = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.query = {};\n\t\n\t  // Slug related functions\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.save(scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t      location.path('/collections');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditCollectionController', ['$scope', '$http', '$marketcloud', '$location', 'collection', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, collection, $utils, $validation, $models) {\n\t  scope.collection = collection.data.data;\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = angular.copy(scope.collection.items);\n\t\n\t  scope.query = {};\n\t\n\t  // This will hold custom properties for further processing\n\t  scope.customPropertiesData = {};\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Collection.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'application_id', 'seo');\n\t\n\t  for (var k in scope.collection) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.collection[k];\n\t      delete scope.collection[k];\n\t    }\n\t  }\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = $utils.getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t\n\t    // let's re-assemble the custom properties first.\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.update(scope.collection.id, scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Collection.schema, '[ng-model=\"collection.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t  scope.collection = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.query = {};\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = $utils.getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.save(scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t      location.path('/collections');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Collection.schema, '[ng-model=\"collection.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditContentTranslationsController', EditContentTranslationsController);\n\t\n\t  EditContentTranslationsController.$inject = ['$scope', '$marketcloud', 'content', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditContentTranslationsController(scope, $marketcloud, content, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.content = content.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.content.hasOwnProperty('locales')) {\n\t      scope.content.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.content.locales.hasOwnProperty(locale.code)) {\n\t        scope.content.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.content.locales[scope.currentLocale.code].slug = getSlugFromString(scope.content.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.content.locales)\n\t      };\n\t\n\t      $marketcloud.contents.update(scope.content.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditContentController', ['$scope', '$http', 'content', '$location', '$marketcloud', 'moment', '$utils', '$validation', '$models', function (scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n\t  scope.content = content.data.data;\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.selectedProducts = [];\n\t\n\t  if (scope.content.products && scope.content.products.length > 0) {\n\t    scope.selectedProducts = scope.content.products;\n\t  }\n\t\n\t  scope.content.date = $moment(scope.content.date);\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Content.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'published', 'category', 'date', 'updated_at', 'created_at', 'type');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.content) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.content[k];\n\t      delete scope.content[k];\n\t    }\n\t  }\n\t\n\t  scope.removeProduct = function (idx) {\n\t    scope.selectedProducts.splice(idx, 1);\n\t  };\n\t\n\t  scope.addProduct = function (product) {\n\t    product.quantity = 1;\n\t\n\t    scope.selectedProducts.push(product);\n\t\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.content.author.images.splice(i, 1);\n\t  };\n\t\n\t  scope.updateContent = function () {\n\t    var toSave = angular.copy(scope.content);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    var products = scope.selectedProducts.map(function (prod) {\n\t      return parseInt(prod.id);\n\t    });\n\t\n\t    toSave.items = products;\n\t\n\t    $marketcloud.contents.update(scope.content.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Content updated with success', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Content.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ContentController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$validation', '$models', '$account', function (scope, http, location, $marketcloud, $utils, $validation, $models, $account) {\n\t\n\t  scope.content = {\n\t    title: '',\n\t    slug: '',\n\t    text: '',\n\t    published: false,\n\t    items: [],\n\t    author: {\n\t      name: $account.get('full_name'),\n\t      description: '',\n\t      images: [$account.get('image_url')]\n\t\n\t    },\n\t    seo: {\n\t      meta: {},\n\t      twitter: {},\n\t      facebook: {}\n\t    }\n\t  };\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.selectedProducts = [];\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.content.author.images.splice(i, 1);\n\t  };\n\t\n\t  // This function is invoked when a seo property\n\t  // changes.\n\t  scope.computeSeoTags = function () {};\n\t\n\t  scope.removeProduct = function (idx) {\n\t    scope.selectedProducts.splice(idx, 1);\n\t  };\n\t\n\t  scope.addProduct = function (product) {\n\t    product.quantity = 1;\n\t\n\t    scope.selectedProducts.push(product);\n\t\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t  scope.saveContent = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.content[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    var products = scope.selectedProducts.map(function (prod) {\n\t      return parseInt(prod.id);\n\t    });\n\t\n\t    if (products.length > 0) {\n\t      scope.content.items = products;\n\t    }\n\t\n\t    $validation.hideErrors();\n\t    $marketcloud.contents.save(scope.content).then(function (response) {\n\t      // title text author\n\t      notie.alert(1, 'Content saved', 2);\n\t      location.path('/contents');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Content.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ContentsController', ['$scope', '$http', 'contents', '$marketcloud', function (scope, http, resources, $marketcloud) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    per_page: 20\n\t\n\t    // Initial data resolved from the router\n\t  };scope.contents = resources.data.data;\n\t\n\t  scope.loadPage = function (p) {\n\t    return scope.loadData({ page: p });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.contents.list(query).then(function (response) {\n\t      scope.contents = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t  scope.setPublishing = function (content) {\n\t    return http({\n\t      method: 'PUT',\n\t      url: API_BASE_URL + '/contents/' + content.id,\n\t      data: {\n\t        published: content.published\n\t      },\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteContent = function (content_id, index) {\n\t    $marketcloud.contents.delete(content_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Content deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditGroupedProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.itemsToAdd = [];\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  var product_ids = scope.product.items.map(function (product) {\n\t    return product.product_id;\n\t  });\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    scope.product.items.forEach(function (i) {\n\t      p_map[i.product_id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the grouped product, such as the quantity\n\t    scope.itemsToAdd = response.data.data.map(function (prod) {\n\t      var p = angular.copy(prod);\n\t      p.quantity = p_map[p.id]['quantity'];\n\t      return p;\n\t    });\n\t    // scope.product.items = response.data.data;\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'items');\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  /* $http({\r\n\t  \tmethod: 'GET',\r\n\t  \turl: API_BASE_URL+'/categories',\r\n\t  \theaders: {\r\n\t  \t\tAuthorization: window.public_key + ':' + window.token\r\n\t  \t}\r\n\t  }) */\n\t  $marketcloud.categories.list().success(function (response) {\n\t    scope.categories = response.data;\n\t  }).error(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 2);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().success(function (response) {\n\t    scope.brands = response.data;\n\t  }).error(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 2);\n\t  });\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    scope.product.items = scope.itemsToAdd.map(function (item) {\n\t      return { product_id: item.id, quantity: item.quantity };\n\t    });\n\t\n\t    $marketcloud.products.update(scope.product.id, scope.product).success(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).error(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewGroupedProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.error = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).success(function (response) {\n\t      scope.categories = response.data;\n\t    }).error(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).success(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).error(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).success(function (response) {\n\t      scope.brands = response.data;\n\t    }).error(function () {\n\t      console.log('An error has occurred while loading brands');\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).success(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).error(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'grouped_product',\n\t    price: 0,\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    has_variants: false,\n\t    published: true,\n\t    items: []\n\t\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.saveProduct = function () {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t        console.log('Un null');\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t    /* var validation = Models.GroupedProduct.validate(scope.product);\r\n\t    \t\tif (validation.valid === false) {\r\n\t    \tscope.errorField = validation.invalidPropertyName;\r\n\t    \t\t\tif (validation.failedValidator === 'required')\r\n\t    \t\tscope.error = 'The ' + scope.errorField + ' field is required';\r\n\t    \telse if (validation.failedValidator === 'min') {\r\n\t    \t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\r\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\r\n\t    \t\telse\r\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\r\n\t    \t\t\t} else if (validation.failedValidator === 'max') {\r\n\t    \t\t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\r\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\r\n\t    \t\telse\r\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\r\n\t    \t} else {\r\n\t    \t\tscope.error = 'The ' + scope.errorField + ' field has an invalid value ('+props_to_validate[scope.errorField]+')';\r\n\t    \t}\r\n\t    \treturn;\r\n\t    } */\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t    console.log('Saving this prod', scope.product);\n\t\n\t    scope.product.items = scope.product.items.map(function (item) {\n\t      return { product_id: item.id };\n\t    });\n\t\n\t    $marketcloud.products.save(scope.product).success(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).error(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditCouponController', ['$scope', '$http', '$marketcloud', '$location', '$validation', '$models', 'coupon', function (scope, http, $marketcloud, location, $validation, $models, coupon) {\n\t  scope.coupon = coupon.data.data;\n\t\n\t  scope.save = function () {\n\t    $validation.hideErrors();\n\t    $marketcloud.coupons.update(scope.coupon.id, scope.coupon).then(function (response) {\n\t      notie.alert(1, 'Coupon updated', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Coupon.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  if ('expiration_date' in scope.coupon) {\n\t    scope.hasExpirationDate = true;\n\t  }\n\t\n\t  if ('usages_left' in scope.coupon) {\n\t    scope.limitedUsage = true;\n\t  }\n\t\n\t  scope.toggleCouponExpiration = function () {\n\t    scope.coupon.expiration_date = null;\n\t  };\n\t\n\t  scope.toggleCouponUsage = function () {\n\t    scope.coupon.usages_left = null;\n\t  };\n\t\n\t  scope.clearTargetId = function () {\n\t    scope.coupon.target_id = null;\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.coupon.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.coupon.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t\n\t  // Target management\n\t  // Stuff to add a product.\n\t  // This must be packaged into a component\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t  // This is used as a reference after i pick a product\n\t  scope.targetProduct = null;\n\t  // If the coupon already has a target product\n\t  // we must load it\n\t  if (scope.coupon.target_type === 'PRODUCT_COUPON') {\n\t    $marketcloud.products.getById(scope.coupon.target_id).then(function (response) {\n\t      scope.targetProduct = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred', 2);\n\t    });\n\t  }\n\t\n\t  scope.query = {};\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.selectProductAsTarget = function (product) {\n\t    scope.targetProduct = product;\n\t    scope.coupon.target_id = product.id;\n\t  };\n\t  scope.resetTargetProduct = function () {\n\t    scope.targetProduct = null;\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.handleCategoryChange = function () {};\n\t}]);\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewCouponController', ['$scope', '$http', '$marketcloud', '$location', '$validation', '$models', function (scope, http, $marketcloud, location, $validation, $models) {\n\t  scope.coupon = {\n\t    active: true,\n\t    discount_type: 'NET_REDUCTION'\n\t  };\n\t  scope.randomizeCode = function () {\n\t    scope.coupon.code = Math.random().toString(36).substr(2, 10).toUpperCase();\n\t  };\n\t\n\t  scope.updateCouponExpiration = function () {\n\t    if (scope.hasExpirationDate !== true) {\n\t      delete scope.coupon.expiration_date;\n\t    }\n\t  };\n\t\n\t  scope.clearTargetId = function () {\n\t    scope.coupon.target_id = null;\n\t  };\n\t\n\t  scope.updateCouponUsage = function () {\n\t    if (scope.limitedUsage !== true) {\n\t      delete scope.coupon.usages_left;\n\t    }\n\t  };\n\t\n\t  scope.save = function () {\n\t\n\t    for (var k in scope.coupon) {\n\t      if (scope.coupon[k] === null) {\n\t        delete scope.coupon[k];\n\t      }\n\t    }\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.coupons.save(scope.coupon).then(function (response) {\n\t      notie.alert(1, 'Coupon saved', 1.5);\n\t      location.path('/coupons');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Coupon.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.coupon.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.coupon.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t\n\t  // Stuff to add a product.\n\t  // This must be packaged into a component\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t  // This is used as a reference after i pick a product\n\t  scope.targetProduct = null;\n\t\n\t  scope.query = {};\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.selectProductAsTarget = function (product) {\n\t    scope.targetProduct = product;\n\t    scope.coupon.target_id = product.id;\n\t  };\n\t  scope.resetTargetProduct = function () {\n\t    scope.targetProduct = null;\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.handleCategoryChange = function () {};\n\t}]);\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DeployController', ['$scope', '$application', function (scope, $application) {\n\t\n\t\tscope.selectedTemplate = null;\n\t\n\t\tscope.getHerokuURL = function () {\n\t\t\tvar str = 'https://heroku.com/deploy';\n\t\t\tstr += '?template=' + scope.selectedTemplate;\n\t\t\tstr += '&env[MARKETCLOUD_PUBLIC_KEY]=' + $application.get().public_key;\n\t\t\tstr += '&env[MARKETCLOUD_SECRET_KEY]=' + $application.get().secret_key;\n\t\t\treturn str;\n\t\t};\n\t}]);\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('HomeController', ['$scope', '$http', '$routeParams', 'analytics', 'moment', function (scope, http, params, analytics, moment) {\n\t  scope.activities = [];\n\t\n\t  var getResourceNameFromPath = function getResourceNameFromPath(p) {\n\t    var names = {\n\t      'orders': 'an order',\n\t      'products': 'a product',\n\t      'categories': 'a category',\n\t      'brands': 'a brand',\n\t      'users': 'a user',\n\t      'cart': 'a cart',\n\t      'promotions': 'a promotion',\n\t      'collection': 'a collection'\n\t\n\t    };\n\t    var resourcename = p.split('/')[2];\n\t\n\t    if (names.hasOwnProperty(resourcename)) {\n\t      return names[resourcename];\n\t    } else {\n\t      return resourcename;\n\t    }\n\t  };\n\t\n\t  // What i want to match\n\t  // new orders\n\t  // updates to orders\n\t  // Updates to inventory\n\t  scope.alerts = [];\n\t\n\t  // ORders used to display stats\n\t  scope.analytics = {\n\t    today: {\n\t      total: 0,\n\t      count: 0\n\t\n\t    },\n\t    yesterday: {\n\t      total: 0,\n\t      count: 0\n\t    },\n\t    this_week: {\n\t      total: 0,\n\t      count: 0\n\t    },\n\t    this_month: {\n\t      total: 0,\n\t      count: 0\n\t    }\n\t  };\n\t\n\t  var today = new Date();\n\t  today.setHours(0, 0, 0, 0);\n\t  today = today.getTime();\n\t\n\t  var yesterday = new Date();\n\t  yesterday.setDate(yesterday.getDate() - 1);\n\t  yesterday.setHours(0, 0, 0, 0);\n\t  yesterday = yesterday.getTime();\n\t\n\t  var oneWeekAgo = new Date();\n\t  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n\t  oneWeekAgo.setHours(0, 0, 0, 0);\n\t  oneWeekAgo = oneWeekAgo.getTime();\n\t\n\t  var orders = analytics.data.data;\n\t\n\t  scope.ordersToManage = orders.filter(function (order) {\n\t    return ['processing', 'pending', 'on_hold'].indexOf(order.status) > -1;\n\t  }).slice(0, 10);\n\t\n\t  var salesVolumePerDay = {};\n\t\n\t  var numberOfOrdersPerDay = {};\n\t\n\t  scope.orders_data = [];\n\t  scope.orders_labels = [];\n\t\n\t  var last_30_days = [];\n\t  var last_30_days_labels = [];\n\t  for (var i = 1; i < 30; i++) {\n\t    var d = new Date();\n\t    d.setDate(d.getDate() - i);\n\t    var month = String(d.getMonth() + 1);\n\t    if (month.length < 2) {\n\t      month = '0' + month;\n\t    }\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    last_30_days_labels.push(day);\n\t    last_30_days.push({\n\t      date: day,\n\t      value: 0\n\t    });\n\t    salesVolumePerDay[day] = 0;\n\t  }\n\t\n\t  orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  }).map(function (x) {\n\t    return {\n\t      created_at: x.created_at,\n\t      total: x.total\n\t    };\n\t  }).forEach(function (x) {\n\t    var d = new Date(x.created_at);\n\t    var month = String(d.getMonth() + 1);\n\t    if (month.length < 2) {\n\t      month = '0' + month;\n\t    }\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    if (!salesVolumePerDay[day]) {\n\t      salesVolumePerDay[day] = 0;\n\t    }\n\t\n\t    salesVolumePerDay[day] += x.total;\n\t\n\t    if (!numberOfOrdersPerDay[day]) numberOfOrdersPerDay[day] = 0;\n\t\n\t    numberOfOrdersPerDay[day]++;\n\t  });\n\t\n\t  orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  }).map(function (x) {\n\t    return {\n\t      created_at: x.created_at,\n\t      total: x.total\n\t    };\n\t  }).forEach(function (x) {\n\t    if (x.created_at > today) {\n\t      scope.analytics.today.total = Math.round((scope.analytics.today.total + x.total) * 1000) / 1000;\n\t      scope.analytics.today.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else if (x.created_at > yesterday) {\n\t      scope.analytics.yesterday.total = Math.round((scope.analytics.yesterday.total + x.total) * 1000) / 1000;\n\t      scope.analytics.yesterday.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else if (x.created_at > oneWeekAgo) {\n\t      scope.analytics.this_week.total = Math.round((scope.analytics.this_week.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_week.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else {\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    }\n\t  });\n\t\n\t  /*\r\n\t   *\tHere we feed the Chart.js chart on the dashboard homepage\r\n\t   *\r\n\t   *\tThis chart shows orders volume for this month (last 30 days)\r\n\t   */\n\t  scope.orders_volume_data = [];\n\t  scope.orders_count_data = [];\n\t  scope.orders_volume_labels = [];\n\t\n\t  for (var k in salesVolumePerDay) {\n\t    scope.orders_volume_data.unshift(parseFloat(Number(salesVolumePerDay[k]).toFixed(2)));\n\t    scope.orders_count_data.unshift(numberOfOrdersPerDay[k]);\n\t    scope.orders_volume_labels.unshift(moment(k, 'YYYY-M-DD').format('MMM Do'));\n\t  }\n\t\n\t  scope.datasets = [scope.orders_volume_data, scope.orders_count_data];\n\t\n\t  scope.getMethodCSSClass = function (a) {\n\t    var cls = null;\n\t    switch (a.method) {\n\t      case 'GET':\n\t        cls = 'label-success';\n\t        break;\n\t      case 'POST':\n\t        cls = 'label-info';\n\t        break;\n\t      case 'PUT':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'PATCH':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'DELETE':\n\t        cls = 'label-danger';\n\t        break;\n\t      default:\n\t        cls = 'label-success';\n\t        break;\n\t\n\t    }\n\t    return cls;\n\t  };\n\t\n\t  scope.chartOptions = {\n\t    scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n\t  };\n\t\n\t  scope.chartOptions = {\n\t    scales: {\n\t      xAxes: [{\n\t        gridLines: {\n\t          display: false\n\t        }\n\t      }],\n\t      yAxes: [{\n\t        scaleLabel: {\n\t          display: true,\n\t          labelString: scope.application.currency_code\n\t        }\n\t      }]\n\t    }\n\t  };\n\t}]);\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('IntegrationsController', ['$scope', '$http', '$application', function ($scope, $http, $application) {\n\t  $scope.integrations = [{\n\t    name: 'braintree',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n\t    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n\t    links: {\n\t      'view': '/documentation/integrations/braintree'\n\t    }\n\t  }, {\n\t    name: 'stripe',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n\t    description: 'Web and mobile payments. Built for developers.',\n\t    links: {\n\t      'view': '/documentation/integrations/stripe'\n\t    }\n\t  }, {\n\t    name: 'facebook',\n\t    tags: ['authentication'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n\t    description: 'Facebook auth integration',\n\t    links: {\n\t      'view': '/documentation/guides/facebook-login'\n\t    }\n\t  }];\n\t}]);\n\t\n\tapp.controller('IntegrationStripeController', ['$scope', '$http', '$routeParams', 'StripeIntegration', '$application', function ($scope, $http, $routeParams, StripeIntegration, $application) {\n\t  /*\r\n\t   *  The integration states are\r\n\t   *\r\n\t   *  Not installed\r\n\t   *  Installed inactive\r\n\t   *  Installed active\r\n\t   *\r\n\t   *  Installed means that the oauth flow was completed and we have the data\r\n\t   *  StripeIntegration is the object we use to inject the integration state fetched from the api\r\n\t   *\r\n\t   *  If it's null, we conclude that it is not installed\r\n\t   */\n\t  if (StripeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.StripeIntegration = StripeIntegration.data.data;\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  // TODO\n\t  // Lo switch deve essere visibile se e solo se l'integrazione è installata. così da\n\t  // non essere clicccabile altrimenti.\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/stripe',\n\t      data: {\n\t        isActive: $scope.StripeIntegration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('IntegrationBraintreeController', ['$scope', '$http', '$routeParams', 'BraintreeIntegration', '$application', function ($scope, $http, $routeParams, BraintreeIntegration, $application) {\n\t  // This bool is used to show/hide credentials form\n\t  // This form is used to update the credentials\n\t  $scope.displayCredentialsForm = false;\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  if (BraintreeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.braintreeConfiguration = BraintreeIntegration.data.data;\n\t    $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data);\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.toggleCredentialsForm = function () {\n\t    $scope.displayCredentialsForm = !$scope.displayCredentialsForm;\n\t  };\n\t\n\t  $scope.showModal = function () {\n\t    $('#BraintreeCredentialsModal').modal('show');\n\t  };\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: {\n\t        isActive: $scope.braintreeConfiguration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t\n\t  $scope.saveBraintreeConfiguration = function () {\n\t    console.log(\"Sending\", $scope.braintreeUpdate);\n\t    $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: $scope.braintreeUpdate\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t      $('#BraintreeCredentialsModal').modal('hide');\n\t      $scope.isIntegrationInstalled = true;\n\t      $scope.braintreeConfiguration = angular.copy({\n\t        environment: $scope.braintreeUpdate.environment,\n\t        isActive: $scope.braintreeUpdate.isActive\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewInvoiceController', ['$scope', '$http', '$marketcloud', '$application', '$location', 'parentOrder', 'orders', 'Countries', '$validation', '$models', function (scope, http, $marketcloud, $application, location, parentOrder, orders, countries, $validation, $models) {\n\t  scope.invoice = {\n\t    company: {\n\t      name: $application.get('company_name'),\n\t      email: $application.get('email_address'),\n\t      address: $application.get('company_address'),\n\t      country: $application.get('company_country'),\n\t      city: $application.get('company_city'),\n\t      state: $application.get('company_state'),\n\t      postal_code: $application.get('company_postalcode'),\n\t      vat: $application.get('company_taxid')\n\t\n\t    },\n\t    customer: {},\n\t    date_created: new Date(),\n\t    date_due: new Date(),\n\t    lineItems: [{\n\t      name: '',\n\t      description: '',\n\t      quantity: 0,\n\t      price: 0\n\t    }]\n\t  };\n\t\n\t  console.log(scope.invoice);\n\t\n\t  function setNextInvoiceNumber() {\n\t    $marketcloud.invoices.list().then(function (response) {\n\t      var applicationSettings = $application.get();\n\t      var lastNumber = response.data.data.map(function (invoice) {\n\t        return invoice.number;\n\t      }).map(function (number) {\n\t        if (number.indexOf && number.indexOf(applicationSettings.invoices_prefix) > -1) {\n\t          number = number.replace(applicationSettings.invoices_prefix, '');\n\t        }\n\t\n\t        if (!isNaN(number)) {\n\t          number = Number(number);\n\t        }\n\t        return number;\n\t      }).sort(function (a, b) {\n\t        return a - b;\n\t      }).pop();\n\t\n\t      console.log('LastNumber is ', lastNumber);\n\t\n\t      if (!isNaN(lastNumber)) {\n\t        lastNumber = Number(lastNumber);\n\t        scope.invoice.number = applicationSettings.invoices_prefix + String(lastNumber + 1);\n\t      }\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t    });\n\t  }\n\t\n\t  function fillDataFromOrder(order) {\n\t    console.log('fillDataFromOrder', order);\n\t    scope.parentOrder = order;\n\t    scope.invoice = {\n\t      order_id: scope.parentOrder.id,\n\t      company: {\n\t        name: $application.get('company_name'),\n\t        email: $application.get('email_address'),\n\t        address: $application.get('company_address'),\n\t        country: $application.get('company_country'),\n\t        city: $application.get('company_city'),\n\t        state: $application.get('company_state'),\n\t        postal_code: $application.get('company_postalcode'),\n\t        vat: $application.get('company_taxid')\n\t      },\n\t      customer: {},\n\t      date_created: new Date(),\n\t      date_due: new Date(),\n\t      lineItems: scope.parentOrder.products.map(function (p) {\n\t        p.description = '';\n\t        return p;\n\t      })\n\t\n\t      // adding shipping to line items\n\t    };if (scope.parentOrder.hasOwnProperty('shipping')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Shipping ' + scope.parentOrder.shipping.name,\n\t        description: scope.parentOrder.shipping.description,\n\t        quantity: 1,\n\t        price: scope.parentOrder.shipping_total\n\t      });\n\t    }\n\t\n\t    // adding payment method fee to line items\n\t    if (scope.parentOrder.hasOwnProperty('payment_method')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Payment method ' + scope.parentOrder.payment_method.name,\n\t        description: scope.parentOrder.payment_method.description,\n\t        quantity: 1,\n\t        price: scope.parentOrder.payment_method_total\n\t      });\n\t    }\n\t\n\t    // adding coupons to line items\n\t    if (scope.parentOrder.hasOwnProperty('coupon')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Coupon ' + scope.parentOrder.coupon.name,\n\t        description: scope.parentOrder.coupon.description,\n\t        quantity: 1,\n\t        price: 0 - Number(scope.parentOrder.coupon_total)\n\t      });\n\t    }\n\t\n\t    // adding promotions to line items\n\t    if (scope.parentOrder.hasOwnProperty('promotion')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Promotion ' + scope.parentOrder.promotion.name,\n\t        description: scope.parentOrder.promotion.description,\n\t        quantity: 1,\n\t        price: 0 - Number(scope.parentOrder.promotion_total)\n\t      });\n\t    }\n\t\n\t    // We gather customer's invoicing data from the billing address.\n\t    for (var k in scope.parentOrder.billing_address) {\n\t      scope.invoice.customer[k] = scope.parentOrder.billing_address[k];\n\t    }\n\t  }\n\t\n\t  // If the parentOrder is populated, we prefill data\n\t  if (parentOrder && parentOrder.data) {\n\t    // Must check for 404s\n\t    fillDataFromOrder(parentOrder.data.data);\n\t  } else {\n\t    scope.parentOrder = null;\n\t  }\n\t\n\t  setNextInvoiceNumber();\n\t\n\t  scope.orders = orders.data.data;\n\t  scope.ordersQuery = {\n\t    per_page: 5,\n\t    page: 1\n\t  };\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadNextOrders = function () {\n\t    scope.showTheList = true;\n\t    scope.ordersQuery.page += 1;\n\t\n\t    $marketcloud.orders.list(scope.ordersQuery).then(function (response) {\n\t      scope.orders = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(3);\n\t    });\n\t  };\n\t  scope.loadPreviousOrders = function () {\n\t    scope.showTheList = true;\n\t\n\t    if (scope.ordersQuery.page <= 1) {\n\t      return;\n\t    }\n\t\n\t    scope.ordersQuery.page -= 1;\n\t\n\t    $marketcloud.orders.list(scope.ordersQuery).then(function (response) {\n\t      scope.orders = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(3);\n\t    });\n\t  };\n\t  scope.selectOrder = function (order) {\n\t    scope.showTheList = false;\n\t    scope.invoice.order_id = order.id;\n\t\n\t    fillDataFromOrder(order);\n\t  };\n\t\n\t  scope.countries = countries;\n\t  scope.customerStates = [];\n\t  scope.companyStates = [];\n\t\n\t  scope.getInvoiceTotal = function () {\n\t    return scope.invoice.lineItems.map(function (item) {\n\t      return item.price * item.quantity;\n\t    }).reduce(function (a, b) {\n\t      return a + b;\n\t    }).toFixed(2);\n\t  };\n\t\n\t  scope.updateCompanyStates = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.company.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.companyStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.companyStates = [];\n\t      }\n\t      /* else {\r\n\t        // Commenting this error because it seems to be disorientating for users\r\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n\t      } */\n\t    });\n\t  };\n\t\n\t  // Immediatly invoking the function in order to load states\n\t  // but only if the value is already assigned.\n\t  if (scope.invoice.company.country) {\n\t    scope.updateCompanyStates();\n\t  }\n\t\n\t  scope.updateCustomerStates = function () {\n\t    if (!scope.invoice.customer.country) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.customerStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.customerStates = [];\n\t      } /* else {\r\n\t         // Commenting this error because it seems to be disorientating for users\r\n\t         notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n\t        } */\n\t    });\n\t  };\n\t\n\t  // Immediatly invoking the function in order to load states\n\t  // but only if the value is already assigned.\n\t  if (scope.invoice.customer.country) {\n\t    scope.updateCustomerStates();\n\t  }\n\t\n\t  scope.saveInvoice = function (goToOrder) {\n\t    goToOrder = goToOrder || false;\n\t\n\t    $validation.hideErrors();\n\t    console.log('Salvo questo', angular.copy(scope.invoice));\n\t    $marketcloud.invoices.save(scope.invoice).then(function (response) {\n\t      notie.alert(1, 'Invoice saved', 1.5);\n\t      if (goToOrder === true) {\n\t        return location.path('/orders/' + scope.invoice.order_id + '/view');\n\t      }\n\t      location.path('/invoices');\n\t    }).catch(function (response) {\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) {\n\t          selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t        }\n\t\n\t        $validation.showErrorMessage(validation, $models.Invoice.schema, selector);\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again', 2);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addLineItem = function () {\n\t    scope.invoice.lineItems.push({\n\t      name: '',\n\t      description: '',\n\t      quantity: null,\n\t      price: null\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditInvoiceController', ['$scope', '$http', '$marketcloud', '$location', 'invoice', 'Countries', '$validation', '$models', function (scope, http, $marketcloud, location, invoice, countries, $validation, $models) {\n\t  scope.invoice = invoice.data.data;\n\t  console.log('Prima di fottere le date', angular.copy(scope.invoice));\n\t  // Angular wants the input[date] to be valid date objects :@\n\t  scope.invoice.date_due = moment(scope.invoice.date_due);\n\t  scope.invoice.date_created = moment(scope.invoice.date_created);\n\t\n\t  console.log('Dopo di fottere le date', angular.copy(scope.invoice));\n\t\n\t  scope.countries = countries;\n\t  scope.customerStates = [];\n\t  scope.companyStates = [];\n\t\n\t  scope.alert = function (m) {\n\t    window.alert(m);\n\t  };\n\t\n\t  scope.getInvoiceTotal = function () {\n\t    return scope.invoice.lineItems.map(function (item) {\n\t      return item.price * item.quantity;\n\t    }).reduce(function (a, b) {\n\t      return a + b;\n\t    }).toFixed(2);\n\t  };\n\t\n\t  scope.updateCompanyStates = function () {\n\t    http({\n\t      method: 'GET',\n\t      // url : '/modules/shared/geography/countries/'+scope.invoice.company.country.toLowerCase()+'.json'\n\t      url: '/countries/' + scope.invoice.company.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.companyStates = response.data;\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.companyStates = [];\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.updateCustomerStates = function () {\n\t    if (!scope.invoice.customer.country) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.customerStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.customerStates = [];\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.updateCustomerStates();\n\t  scope.updateCompanyStates();\n\t  scope.debug = function () {\n\t    console.log(scope.invoice);\n\t  };\n\t\n\t  scope.saveInvoice = function () {\n\t    if (typeof scope.invoice.date_created.toDate === 'function') {\n\t      scope.invoice.date_created = scope.invoice.date_created.toDate();\n\t      scope.invoice.date_created.setHours(12);\n\t    }\n\t    if (typeof scope.invoice.date_due.toDate === 'function') {\n\t      scope.invoice.date_due = scope.invoice.date_due.toDate();\n\t      scope.invoice.date_due.setHours(12);\n\t    }\n\t    console.log('Salvo', angular.copy(scope.invoice));\n\t    $validation.hideErrors();\n\t    $marketcloud.invoices.update(scope.invoice.id, scope.invoice).then(function (response) {\n\t      notie.alert(1, 'Invoice saved', 1.5);\n\t      location.path('/invoices');\n\t    }).catch(function (response) {\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) {\n\t          selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t        }\n\t\n\t        $validation.showErrorMessage(validation, $models.Invoice.schema, selector);\n\t      } else {\n\t        notie.alert(3, 'An error has occurred.', 2);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addLineItem = function () {\n\t    scope.invoice.lineItems.push({\n\t      name: '',\n\t      description: '',\n\t      quantity: null,\n\t      price: null\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('LocalizationController', ['$scope', '$http', 'Currencies', 'Timezones', 'LocalesFactory', '$application', function (scope, http, currencies, timezones, locales, $application) {\n\t  scope.application = $application.get();\n\t\n\t  scope.currencies = currencies;\n\t\n\t  for (var k in scope.currencies) {\n\t    scope.currencies[k].name_plus_code = scope.currencies[k].name + \" (\" + scope.currencies[k].code + \")\";\n\t  }\n\t  scope.activeCurrencies = [];\n\t  // string '[{code,rate},{code,rate},{code,rate}]'\n\t  // array  [{code,rate},{code,rate},{code,rate}]\n\t  //\n\t\n\t  if (typeof $application.get().currencies !== 'string') {\n\t    $application.get().currencies = '[]';\n\t  }\n\t  var saved_currencies = JSON.parse($application.get().currencies);\n\t\n\t  // scope.currencies.forEach(function(currency){\n\t  for (var k in scope.currencies) {\n\t    var currency = scope.currencies[k];\n\t    saved_currencies.forEach(function (saved_currency) {\n\t      if (saved_currency.code === currency.code) {\n\t        var new_currency_obj = angular.copy(currency);\n\t        new_currency_obj.rate = saved_currency.rate;\n\t        scope.activeCurrencies.push(new_currency_obj);\n\t      }\n\t    });\n\t  }\n\t  // })\n\t\n\t  /*\r\n\t   *  Adds a currency and updates app's settings\r\n\t   */\n\t  scope.addCurrency = function (currency) {\n\t    if (scope.activeCurrencies.map(function (c) {\n\t      return c.code;\n\t    }).indexOf(currency.code) > -1) {\n\t      return;\n\t    }\n\t    currency.rate = 1;\n\t    scope.activeCurrencies.push(currency);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  /*\r\n\t   *  Removes a currency and updates app's settings\r\n\t   */\n\t  scope.removeCurrency = function (i) {\n\t    scope.activeCurrencies.splice(i, 1);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  /*\r\n\t    There are better APIs for currency exchange, but they are not free.\r\n\t    Fixer only has a small subset of currencies.\r\n\t    This is free for 1000 reqs/month\r\n\t      https://currencylayer.com/product\r\n\t    This starts from 12$/month and also free for 1000 res/month\r\n\t    https://openexchangerates.org/signup\r\n\t      We ended up using Yahoo Finance through Yahoo Query Console.\r\n\t    It's a bit hacky but its working for now and it is the\r\n\t    only free service with any exchange rate.\r\n\t    very gouda.\r\n\t      Yahoo Finance is DEAD 8 Nov 2017\r\n\t  */\n\t  /*\r\n\t      function buildURL(from_currency_code, to_currency_code) {\r\n\t        return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20csv%20where%20url%3D%22http%3A%2F%2Ffinance.yahoo.com%2Fd%2Fquotes.csv%3Fe%3D.csv%26f%3Dnl1d1t1%26s%3D' + from_currency_code + to_currency_code + '%3DX%22%3B&format=json&callback='\r\n\t      }\r\n\t  \r\n\t      scope.applyExchangeRate = function(currencyToApply) {\r\n\t        http({\r\n\t            method: 'GET',\r\n\t            url: buildURL($application.get().currency_code, currencyToApply.code)\r\n\t          }).then(function(response) {\r\n\t            currencyToApply.rate = Number(response.data.query.results.row.col1)\r\n\t          })\r\n\t          .catch(function(err) {\r\n\t            notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\r\n\t          })\r\n\t      }*/\n\t\n\t  function buildURL(from_currency_code, to_currency_code) {\n\t    return 'https://api.fixer.io/latest?symbols=' + to_currency_code + '&base=' + from_currency_code;\n\t  }\n\t\n\t  scope.applyExchangeRate = function (currencyToApply) {\n\t    http({\n\t      method: 'GET',\n\t      url: buildURL($application.get().currency_code, currencyToApply.code)\n\t    }).then(function (response) {\n\t      console.log(\"LA RISPOSONA DI FIXER\", response);\n\t      console.log(\"Io \");\n\t      currencyToApply.rate = Number(response.data.rates[currencyToApply.code]);\n\t    }).catch(function (err) {\n\t      notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2);\n\t    });\n\t  };\n\t\n\t  scope.applyAllExchangeRates = function () {\n\t    scope.activeCurrencies.forEach(function (currencyToApply) {\n\t      if (scope.exchangeRates.hasOwnProperty(currencyToApply.code)) {\n\t        currencyToApply.rate = scope.exchangeRates[currencyToApply.code];\n\t      }\n\t    });\n\t  };\n\t\n\t  // This is for sorting the locales by name\n\t  function compare(a, b) {\n\t    if (a.name < b.name) {\n\t      return -1;\n\t    } else if (a.name > b.name) {\n\t      return 1;\n\t    } else {\n\t      return 0;\n\t    }\n\t  }\n\t\n\t  // Locales are provided by the factory as an object with the code as key\n\t  // For sorting them, we need an array.\n\t  scope.locales = Object.keys(locales).map(function (k) {\n\t    return locales[k];\n\t  }).sort(compare);\n\t\n\t  if (scope.application.locales === '') {\n\t    scope.activeLocales = [];\n\t  } else {\n\t    scope.activeLocales = scope.application.locales.split(',').map(function (code) {\n\t      return locales[code];\n\t    });\n\t  }\n\t\n\t  /*\r\n\t   *  Adds a locale to the app and saves\r\n\t   */\n\t  scope.addLocale = function (locale) {\n\t    if (scope.activeLocales.map(function (l) {\n\t      return l.code;\n\t    }).indexOf(locale.code) > -1) {\n\t      return;\n\t    }\n\t\n\t    scope.activeLocales.push(locale);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  scope.getFlagClassName = function (locale) {\n\t    return 'flag-icon-' + locale.code.slice(-2).toLocaleLowerCase();\n\t  };\n\t\n\t  /*\r\n\t   *  Removes a locale to the app and saves\r\n\t   */\n\t  scope.removeLocale = function (i) {\n\t    scope.activeLocales.splice(i, 1);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  // Let's re-pack the active locales in a single string\n\t  function activeLocalesToString() {\n\t    return scope.activeLocales.map(function (locale) {\n\t      return locale.code;\n\t    }).join(',');\n\t  }\n\t\n\t  function activeCurrenciesToString() {\n\t    return JSON.stringify(scope.activeCurrencies.map(function (c) {\n\t      return {\n\t        code: c.code,\n\t        rate: c.rate\n\t      };\n\t    }));\n\t  }\n\t\n\t  scope.updateSettings = function () {\n\t    var payload = {\n\t      locales: activeLocalesToString(),\n\t      currencies: activeCurrenciesToString()\n\t    };\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id,\n\t      data: payload\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Application successfully updated', 1);\n\t      console.log('Setto i locales a ', response.data.data.locales);\n\t      $application.set('locales', response.data.data.locales);\n\t      $application.set('currencies', response.data.data.currencies);\n\t    }).catch(function (err) {\n\t      notie.alert(3, 'An error has occurred.');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('MediaListController', ['$scope', '$http', 'media', '$marketcloud', '$q', function (scope, http, resources, $marketcloud, $q) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.inspectFile = function (file) {\n\t    scope.inspectedFile = file;\n\t    $(\"#inspectFileModal\").modal(\"show\");\n\t  };\n\t\n\t  scope.formatFileSize = function (file) {\n\t    if (!file) return \"\";\n\t\n\t    var size = Number(file.size);\n\t    var formatted = size + \"b\";\n\t\n\t    var kb = 1000;\n\t    var mb = kb * 1000;\n\t    var gb = mb * 1000;\n\t\n\t    if (size > kb && size < mb) {\n\t      // Kilobytes\n\t      size = (size / kb).toFixed(2);\n\t      return String(size) + \" KB\";\n\t    } else if (size > mb && size < gb) {\n\t      // Megabytes\n\t      size = (size / mb).toFixed(2);\n\t      return String(size) + \" MB\";\n\t    } else {\n\t      size = (size / gb).toFixed(2);\n\t      return String(size) + \" GB\";\n\t    }\n\t  };\n\t\n\t  // Query\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t  scope.toggleAll = function () {\n\t    scope.media.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.media.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud.media.delete(item.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadPage(scope.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  // Initial data resolved from the router\n\t  scope.media = resources.data.data;\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.media;\n\t  };\n\t\n\t  scope.loadPage = function (page) {\n\t    scope.query.page = page;\n\t    return scope.loadData({\n\t      page: page\n\t    });\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    return $marketcloud.media.list(query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t\n\t      scope.media = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateInspectedFile = function () {\n\t    console.log(\"Saving this\", scope.inspectedFile);\n\t    $marketcloud.media.update(scope.inspectedFile.id, { name: scope.inspectedFile.name }).then(function (response) {\n\t      notie.alert(1, 'File updated', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred. Please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteMedia = function (media_id, index) {\n\t    $marketcloud.media.delete(media_id).then(function (response) {\n\t      scope.loadData({\n\t        page: scope.currentPage\n\t      });\n\t      notie.alert(1, 'Media deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar MediaManagerControllerDependencies = ['$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'];\n\t\n\tvar MediaManagerController = function MediaManagerController(scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    // Reference to the controller\n\t    ctrl = this;\n\t\n\t    // List of image urls\n\t    ctrl.images = ctrl.images || [];\n\t\n\t    // List of image objects\n\t    // ctrl.media = ctrl.media || [];\n\t\n\t    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete;\n\t\n\t    /* Component configuration from attributes */\n\t    // The classes used to style the button\n\t    scope.buttonClass = $attrs.buttonClass;\n\t\n\t    // The text displayed on the button\n\t    scope.buttonText = $attrs.buttonText;\n\t\n\t    // The icon displayed on the button\n\t    scope.buttonIcon = $attrs.buttonIcon || null;\n\t\n\t    var tabs = $attrs.tabs || 'library,from_disk,from_url';\n\t\n\t    // This will hold an array of tab names\n\t    // The component will show only those tabs\n\t    // whose name is in this array\n\t    //\n\t    // The first tab will be the active one.\n\t    // TODO to improve this, we can add an attribute \"activeTab\"\n\t\n\t    scope.tabs = tabs.split(',');\n\t\n\t    // This is the name of the parent function which will return a reference to the image container\n\t    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n\t  };\n\t\n\t  /* Uploader configuration */\n\t  scope.uploader = new FileUploader({\n\t    url: window.API_BASE_URL + '/media',\n\t    arrayKey: '',\n\t    headers: {\n\t      'Authorization': window.public_key + ':' + window.token\n\t    },\n\t    filters: []\n\t  });\n\t\n\t  // When closeDialog is called from within the component\n\t  // we notify the parent component/controller by calling the on-close-dialog\n\t  // callback\n\t  scope.closeDialog = function () {\n\t    ctrl.onCloseDialog();\n\t  };\n\t\n\t  scope.openDialog = function () {\n\t    ctrl.onOpenDialog();\n\t  };\n\t\n\t  scope.uploadImages = function () {\n\t    ctrl.onUploadImages();\n\t  };\n\t\n\t  scope.image = {};\n\t  scope.media_files = [];\n\t  scope.loadingMediaFiles = false;\n\t\n\t  // Used to keep filters and pagination state\n\t  scope.query = {};\n\t\n\t  // Initializing the pagination object to null\n\t  // This allows for convenient check on view pagination === null => dont show pagination\n\t  scope.pagination = null;\n\t\n\t  scope.loadMedias = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t    /* $http({\r\n\t        method: 'GET',\r\n\t        url: window.API_BASE_URL + '/media',\r\n\t        headers: {\r\n\t          Authorization: window.public_key\r\n\t        }\r\n\t      }) */\n\t    $marketcloud.media.list(query || {}).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.loadMore = function () {\n\t    var pageToFetch = scope.media_files.length / 20 + 1;\n\t    $marketcloud.media.list({ page: pageToFetch }).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t\n\t      scope.media_files = scope.media_files.concat(response.data.data);\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t\n\t    if (!query) {\n\t      query = scope.query || {};\n\t    }\n\t\n\t    $marketcloud.media.list(query).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  // Calling it right now because we want to initialize the media library\n\t  if (scope.media_files.length === 0) {\n\t    scope.loadMedias();\n\t  }\n\t\n\t  scope.showProgressBar = false;\n\t  scope.uploadingImages = false;\n\t\n\t  scope.howManySelectedMedia = function () {\n\t    return ctrl.images.length;\n\t  };\n\t\n\t  scope.addSelectedFromLibrary = function () {\n\t    var modal = $element.find('#MediaManagerModal');\n\t    $(modal).modal('hide');\n\t    /*$('#MediaManagerModal').modal('hide')*/\n\t  };\n\t\n\t  scope.isImageSelected = function (image) {\n\t    return ctrl.images.indexOf(image.url) > -1;\n\t  };\n\t  scope.selectImage = function (image) {\n\t    if (image.selected === true) {\n\t      image.selected = false;\n\t      removeImage(image);\n\t    } else {\n\t      image.selected = true;\n\t      ctrl.images.push(image.url);\n\t    }\n\t  };\n\t\n\t  var removeImage = function removeImage(image) {\n\t    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n\t    var pos = ctrl.images.indexOf(image.url);\n\t    if (pos > -1) {\n\t      ctrl.images.splice(pos, 1);\n\t    }\n\t\n\t    // Rimuovo il media\n\t    /* for (var i =0; i< ctrl.media.length;i++) {\r\n\t      if (ctrl.media[i].url === image.url)\r\n\t        ctrl.media.splice(i,1);\r\n\t    } */\n\t  };\n\t\n\t  scope.uploader.onCompleteAll = function () {\n\t    scope.loadMedias();\n\t    scope.showProgressBar = false;\n\t    scope.uploadingImages = false;\n\t    scope.uploader.clearQueue();\n\t\n\t    // Checking if we need to close the dialog\n\t    if (scope.closeOnUploadComplete === 'true') {\n\t      scope.closeDialog();\n\t      /*$('#MediaManagerModal').modal('hide')*/\n\t      var modal = $element.find('#MediaManagerModal');\n\t      $(modal).modal('hide');\n\t    }\n\t\n\t    if (ctrl.onUploadComplete) {\n\t      ctrl.onUploadComplete();\n\t    }\n\t  };\n\t\n\t  scope.uploader.onProgressAll = function (progress) {};\n\t\n\t  scope.uploader.onErrorItem = function (item, response, status, headers) {\n\t    var err = new Error('Error uploading an item');\n\t    err.response = response;\n\t    err.status = status;\n\t    err.headers = headers;\n\t    $exceptionHandler(err);\n\t  };\n\t\n\t  scope.chooseFileFromStorage = function () {\n\t    $('#chooseFileFromStorageButton').trigger('click');\n\t  };\n\t\n\t  scope.uploadSelectedImages = function () {\n\t    scope.showProgressBar = true;\n\t    scope.uploadingImages = true;\n\t    scope.uploader.uploadAll();\n\t  };\n\t\n\t  scope.addImageFromUrl = function () {\n\t    ctrl.images.push(scope.image.url);\n\t    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n\t    scope.image.url = null;\n\t  };\n\t\n\t  scope.showMediaManagerModal = function () {\n\t    /*$('#MediaManagerModal').modal('show')*/\n\t    var modal = $element.find('#MediaManagerModal');\n\t    $(modal).modal('show');\n\t\n\t    // Notifying the parent\n\t    scope.openDialog();\n\t  };\n\t};\n\t\n\tMediaManagerController.$inject = MediaManagerControllerDependencies;\n\t\n\tangular.module('DataDashboard').controller('MediaManagerController', MediaManagerController);\n\t\n\tangular.module('DataDashboard').component('mediaManager', {\n\t  templateUrl: '/modules/data_dashboard/templates/modals/media_manager.html',\n\t  controller: 'MediaManagerController',\n\t  bindings: {\n\t    onCloseDialog: '&',\n\t    onOpenDialog: '&',\n\t    onUploadComplete: '&',\n\t    // imagesContainer: '=',\n\t    images: '=?',\n\t    media: '=?',\n\t    buttonClass: '@',\n\t    buttonIcon: '@',\n\t    buttonText: '@',\n\t    closeOnUploadComplete: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditNotificationController', ['$scope', '$http', 'notification', '$location', '$marketcloud', 'NotificationsPresetsFactory', function (scope, http, notification, $location, $marketcloud, NotificationsPresets) {\n\t  scope.events = {\n\t    'invoices.create': 'An invoice is created',\n\t    'orders.create': 'An order is created',\n\t    'users.create': 'A new user is created',\n\t    'users.recoverPassword': 'A user wants to recover the password',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t\n\t    // name => label\n\t    // This object is used to map template variable names\n\t    // to more user friendly names\n\t  };scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t\n\t  scope.presets = NotificationsPresets;\n\t\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.notification = notification.data.data;\n\t\n\t  // Notifications created before templates were available might need some more work\n\t  if (!scope.notification.template) {\n\t    scope.notification.template = angular.copy(scope.presets[scope.notification.event].template);\n\t  }\n\t\n\t  // In the same way, some notification might have only a subset of template values.\n\t  for (var tplKey in scope.presets[scope.notification.event].template) {\n\t    if (!(tplKey in scope.notification.template)) {\n\t      scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey];\n\t    }\n\t  }\n\t\n\t  scope.save = function () {\n\t    $marketcloud.notifications.update(scope.notification.id, scope.notification).then(function (response) {\n\t      notie.alert(1, 'Item successfully updated!', 1.5);\n\t      $location.path('/notifications');\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NotificationsController', ['$scope', '$http', '$marketcloud', 'notifications', function (scope, http, $marketcloud, notifications) {\n\t  scope.notifications = notifications.data.data;\n\t\n\t  scope.delete = function (notification, index) {\n\t    $marketcloud.notifications.delete(notification.id).then(function (response) {\n\t      notie.alert(1, 'Notification deleted', 1.5);\n\t      scope.notifications.splice(index, 1);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.toggleNotification = function (notification) {\n\t    $marketcloud.notifications.update(notification.id, notification).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewNotificationController', ['$scope', '$http', '$location', '$marketcloud', 'NotificationsPresetsFactory', function (scope, http, $location, $marketcloud, NotificationsPresets) {\n\t  scope.events = {\n\t    'invoices.create': 'An invoice is created',\n\t    'orders.create': 'An order is created',\n\t    'users.create': 'A new user is created',\n\t    'users.recoverPassword': 'A user wants to recover the password',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t  };\n\t\n\t  scope.notification = {\n\t    event: null,\n\t    name: null,\n\t    description: null,\n\t    subject: null,\n\t    sendCopyToOwner: false,\n\t    active: false\n\t  };\n\t\n\t  scope.query = {};\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.presets = NotificationsPresets;\n\t\n\t  // name => label\n\t  // This object is used to map template variable names\n\t  // to more user friendly names\n\t  scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t\n\t  scope.save = function () {\n\t    $marketcloud.notifications.save(scope.notification).then(function (response) {\n\t      notie.alert(1, 'Notification saved', 1.5);\n\t      $location.path('/notifications');\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PreviewNotificationController', ['$scope', '$http', 'notification', '$location', '$marketcloud', function (scope, http, notification, $location, $marketcloud) {\n\t      scope.notification = JSON.parse(notification);\n\t\n\t      scope.sampleData = {};\n\t\n\t      scope.sampleData['orders.update.completed'] = {};\n\t\n\t      scope.sampleData['orders.update.processing'] = {};\n\t\n\t      scope.sampleData['orders.created'] = {};\n\t\n\t      scope.sampleData['users.created'] = {};\n\t}]);\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('TranslateNotificationController', ['$scope', '$http', 'notification', '$marketcloud', 'LocalesFactory', '$application', '$location', 'NotificationsPresetsFactory', function (scope, http, notification, $marketcloud, locales, $application, $location, NotificationsPresets) {\n\t  if ($application.getAvailableLocaleCodes().length === 0) {\n\t    notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t    return $location.path('/system/localization');\n\t  }\n\t  scope.presets = NotificationsPresets;\n\t  scope.notification = notification.data.data;\n\t  // This is fetched from the app's config\n\t  scope.availableLocales = [];\n\t  // mocking the retrieval of locales\n\t  scope.locales = locales;\n\t  // name => label\n\t  // This object is used to map template variable names\n\t  // to more user friendly names\n\t  scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t  scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t    return scope.locales[code];\n\t  });\n\t  // Which locale we are currently editing\n\t  scope.currentLocale = scope.availableLocales[0];\n\t  // Init locales object\n\t  if (!scope.notification.hasOwnProperty('locales')) {\n\t    scope.notification.locales = {};\n\t  }\n\t  // Checking that the product has initialized every locale sub object\n\t  scope.availableLocales.forEach(function (locale) {\n\t    // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t    if (!scope.notification.locales.hasOwnProperty(locale.code)) {\n\t      scope.notification.locales[locale.code] = {};\n\t    }\n\t  });\n\t  scope.getFlagClassName = function () {\n\t    return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t  };\n\t  scope.events = {\n\t    'invoices.create': 'An order is created',\n\t    'orders.create': 'An order is created',\n\t    // 'orders.update.canceled'     : 'An order is canceled',\n\t    'users.create': 'A new user is created',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t  };\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t  // Notifications created before templates were available might need some more work\n\t  if (!scope.notification.template) {\n\t    scope.notification.template = angular.copy(scope.presets[scope.notification.event]);\n\t  }\n\t  // In the same way, some notification might have only a subset of template values.\n\t  for (var tplKey in scope.presets[scope.notification.event].template) {\n\t    if (!(tplKey in scope.notification.template)) {\n\t      scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey];\n\t    }\n\t  }\n\t  scope.updateTranslations = function () {\n\t    var payload = {\n\t      locales: angular.copy(scope.notification.locales)\n\t    };\n\t    $marketcloud.notifications.update(scope.notification.id, payload).then(function (response) {\n\t      notie.alert(1, 'All updates have been saved.', 2);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* global angular: true  */\n\t/* global API_BASE_URL: true  */\n\t/* global notie: true  */\n\t/* global alert: true  */\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('OrdersController', ['$q', '$scope', '$http', '$location', 'ordersResponse', '$marketcloud', '$route', '$utils', function ($q, scope, http, $location, resources, $marketcloud, $route, $utils) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    page: 1,\n\t    per_page: 20\n\t\n\t    // Parsing URL parameters, if provided\n\t\n\t    // Applying Url query\n\t  };var urlQuery = {};\n\t  try {\n\t    urlQuery = JSON.parse($route.current.params.query);\n\t  } catch (e) {\n\t    console.log(\"Non ho potuto parsare il JSON di questa stringa \", $route.current.params.query);\n\t    urlQuery = {};\n\t  }\n\t\n\t  console.log(\"Sono il controller ed inizializzo la query usando query URL Params \", urlQuery);\n\t  for (var k in urlQuery) {\n\t    scope.query[k] = urlQuery[k];\n\t  }\n\t\n\t  // Initial data resolved from the router\n\t  scope.orders = resources.data.data;\n\t\n\t  // This computes a \"paid\" flag on each order\n\t  // it is calculated checking each payment status\n\t  function setPaidFlag(order) {\n\t    // Old api set payment instead of payments\n\t    if (order.hasOwnProperty('payment')) {\n\t      order.paid = true;\n\t    } else if (order.hasOwnProperty('payments')) {\n\t      order.paid = order.payments.filter(function (p) {\n\t        return p.successful;\n\t      }).length > 0;\n\t    } else {\n\t      order.paid = false;\n\t    }\n\t  }\n\t\n\t  // Setting the paid flag\n\t  scope.orders.forEach(setPaidFlag);\n\t\n\t  // Util\n\t  scope.timestampToDate = function (t) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    return a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t  };\n\t\n\t  /*\r\n\t    BULK EDIT\r\n\t  */\n\t  scope.toggleAll = function () {\n\t    scope.orders.forEach(function (o) {\n\t      o.selected = scope.selectAll;\n\t    });\n\t  };\n\t  scope.getSelectedItems = function () {\n\t    return scope.orders.filter(function (o) {\n\t      return o.selected === true;\n\t    });\n\t  };\n\t  scope.bulkExport = function () {\n\t\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return scope.downloadCSV(scope.orders);\n\t\n\t    scope.downloadCSV(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.orders);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkUpdateStatus = function (status) {\n\t\n\t    if (!status) status = scope.bulkStatusChange;\n\t\n\t    var defer = $q.defer();\n\t\n\t    var promises = [];\n\t\n\t    scope.getSelectedItems().forEach(function (order) {\n\t      promises.push($marketcloud.orders.update(order.id, {\n\t        status: status\n\t      }));\n\t    });\n\t\n\t    $q.all(promises).then(function () {\n\t      notie.alert(1, 'All orders have been updated', 1.5);\n\t      scope.loadPage(scope.pagination.currentPage);\n\t    });\n\t\n\t    return defer.promise;\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    /*notie.confirm('Delete ' + scope.getSelectedItems().length + ' orders?', 'Delete', 'Cancel', function() {*/\n\t    window.Alert.confirm({\n\t      title: 'Delete ' + scope.getSelectedItems().length + ' orders?',\n\t      message: 'Deleted orders cannot be recovered. Do you want to continue?',\n\t      onConfirm: function onConfirm() {\n\t\n\t        var defer = $q.defer();\n\t\n\t        var promises = [];\n\t\n\t        scope.getSelectedItems().forEach(function (order) {\n\t          promises.push($marketcloud.orders.delete(order.id));\n\t        });\n\t\n\t        $q.all(promises).then(function () {\n\t          notie.alert(1, 'All orders have been deleted', 1.5);\n\t          scope.loadPage(scope.pagination.currentPage);\n\t        });\n\t\n\t        return defer.promise;\n\t      }\n\t    });\n\t  };\n\t\n\t  function jsonToCsv(json) {\n\t    // Questo non va bene, i fields devono essere l'unione di\n\t    // campi dell'ordine e campi dei prodotti\n\t    // perchè csv è un formato di merda\n\t    var order_fields = ['id', 'created_at', 'status', 'total', 'items_total', 'shipping_total', 'taxes_total',\n\t    // shipping address\n\t    'shipping_address_email', 'shipping_address_full_name', 'shipping_address_country', 'shipping_address_city', 'shipping_address_address1', 'shipping_address_state', 'shipping_address_postal_code',\n\t    // billing address\n\t    'billing_address_email', 'billing_address_full_name', 'billing_address_country', 'billing_address_city', 'billing_address_address1', 'billing_address_state', 'billing_address_postal_code',\n\t    // Products\n\t    'product_name', 'product_id', 'product_price', 'product_price_discount', 'product_weight', 'product_depth', 'product_width', 'product_height', 'variant_name_1', 'variant_value_1', 'variant_name_2', 'variant_value_2', 'variant_name_3', 'variant_value_3', 'variant_name_4', 'variant_value_4', 'variant_name_5', 'variant_value_5'];\n\t\n\t    // var fields = Object.keys(json[0]);\n\t    var fields = order_fields;\n\t\n\t    var csv = json.map(function (row) {\n\t      return fields.map(function (fieldName) {\n\t        return JSON.stringify(row[fieldName] || '');\n\t      });\n\t    });\n\t    csv.unshift(fields); // add header column\n\t    return csv.join('\\r\\n');\n\t  }\n\t\n\t  scope.downloadCSV = function (array_to_download) {\n\t    // Here we will push order lines and product lines\n\t    var to_transform = [];\n\t\n\t    // For each order we add\n\t    // order id\n\t    array_to_download.forEach(function (order) {\n\t      var order_data = {\n\t        'items_total': order.items_total,\n\t        'shipping_total': order.shipping_total,\n\t        'taxes_total': order.taxes_total,\n\t        'total': order.total,\n\t        'created_at': new Date(order.created_at),\n\t        'status': order.status,\n\t        'id': order.id\n\t\n\t        // Adding flattened shipping address\n\t      };for (var ks in order.shipping_address) {\n\t        order_data['shipping_address_' + ks] = order.shipping_address[ks];\n\t      }\n\t      for (var kb in order.billing_address) {\n\t        order_data['billing_address_' + kb] = order.billing_address[kb];\n\t      }\n\t\n\t      to_transform.push(order_data);\n\t\n\t      // Ora per ogni prodotto aggiungo una riga, prima però devo estendere le chiavi dell'ordine\n\t      var product_props = ['name', 'id', 'price', 'price_discount', 'weight', 'depth', 'width', 'height'];\n\t      order.products.forEach(function (product) {\n\t        // Prima prendiamo i dati del parent\n\t        // Poi, se ha varianti\n\t        // prendiamo i dati di variante che sovrascrivono quelli del parent\n\t        // (ad esempio un price diverso perchè la maglietta verde costa diverso)\n\t        // e poi prendiamo le proprietà strutturali della variante e le assegnamo\n\t        // alloggetto in forma di variant_name_1 variant_value_1\n\t\n\t        var prod_data = {};\n\t        product_props.forEach(function (prop) {\n\t          prod_data['product_' + prop] = product[prop];\n\t        });\n\t        // Ho aggiunto le proprietà di base, ora devo aggiungere le varianti\n\t        // solo se il prodotto le ha.\n\t\n\t        if (product.has_variants === true) {\n\t          // Gli attributi base, possono essere sovrascritti\n\t          product_props.forEach(function (prop) {\n\t            if (product.variant.hasOwnProperty(prop)) {\n\t              prod_data['product_' + prop] = product.variant[prop];\n\t            }\n\t          });\n\t          // Gli attributi varianti\n\t          var variants_counter = 1;\n\t          for (var variant_name in product.variantsDefinition) {\n\t            prod_data['variant_name_' + variants_counter] = variant_name;\n\t            prod_data['variant_value_' + variants_counter] = product.variant[variant_name];\n\t            variants_counter++;\n\t          }\n\t        }\n\t\n\t        to_transform.push(prod_data);\n\t      });\n\t    });\n\t\n\t    buildDownload(to_transform);\n\t  };\n\t\n\t  function buildDownload(data) {\n\t    var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + jsonToCsv(data));\n\t    var link = document.createElement('a');\n\t    link.setAttribute('href', encodedUri);\n\t    link.setAttribute('download', 'exported_orders.csv');\n\t    document.body.appendChild(link); // Required for FF\n\t\n\t    link.click(); // This will download the data file named \"my_data.csv\".\n\t  }\n\t\n\t  scope.nullOrUndefined = function (value) {\n\t    return value === null || typeof value === 'undefined';\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    return scope.loadData(scope.query);\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    return $marketcloud.orders.list(query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t\n\t      scope.orders = response.data.data;\n\t\n\t      scope.orders.forEach(setPaidFlag);\n\t\n\t      // This little trick allows us to get back to the latest state of the view when we hit a back button.\n\t      window.history.pushState(scope.query, \"List orders\", '#/orders?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteOrder = function (order) {\n\t    notie.confirm('Delete order?<p>Deleting the order, inventory quantities will be re-assigned.</p>', 'Delete', 'Cancel', function () {\n\t      $marketcloud.orders.delete(order.id).then(function () {\n\t        notie.alert(1, 'Order deleted succesfully', 1);\n\t        scope.loadPage(scope.pagination.currentPage);\n\t      }).catch(function () {\n\t        notie.alert(3, 'An error has occurred, order not deleted.', 1);\n\t      });\n\t    });\n\t  };\n\t\n\t  /* FILTERS */\n\t  scope.filters = [];\n\t\n\t  var notFilters = ['per_page', 'page', 'sort_by', 'sort_order'];\n\t\n\t  function isOperator(key) {\n\t    return notFilters.indexOf(key) >= 0;\n\t  };\n\t\n\t  for (var k in scope.query) {\n\t    if (!isOperator(k)) {\n\t      console.log(k + \" is not an operator\");\n\t      scope.filters.push({\n\t        name: k,\n\t        value: scope.query[k]\n\t      });\n\t    }\n\t  }\n\t\n\t  scope.applyFilters = function () {\n\t\n\t    scope.filters.forEach(function (filter) {\n\t      scope.query[filter.name] = filter.value;\n\t    });\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.saveNewFilterAndApply = function () {\n\t\n\t    scope.addFilter(scope.newFilter);\n\t\n\t    scope.newFilter = {\n\t      name: '',\n\t      value: null\n\t    };\n\t    $('#singleFilterModal').modal('hide');\n\t  };\n\t\n\t  scope.addFilter = function (key, value) {\n\t\n\t    if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key))) this.filters.push(key);else if (\"string\" === typeof key) this.filters.push({\n\t      name: key,\n\t      value: value\n\t    });else throw new Error(\"addFilter(Filter: f) or addFilter(String: fName, Any: fValue)\");\n\t\n\t    scope.applyFilters();\n\t  };\n\t\n\t  /*\r\n\t   *  @param {Number} index The position of the filter to remove\r\n\t   *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\r\n\t   */\n\t  scope.removeFilter = function (index, applyToQuery) {\n\t    if (typeof applyToQuery === 'undefined') {\n\t      applyToQuery = true;\n\t    }\n\t\n\t    var filterToRemove = scope.filters.splice(index, 1);\n\t\n\t    filterToRemove = filterToRemove[0];\n\t\n\t    delete scope.query[filterToRemove.name];\n\t\n\t    if (applyToQuery === true) {\n\t      scope.applyFilters();\n\t    }\n\t  };\n\t\n\t  // Removes a filter given its name in the filters array\n\t  scope.removeFilterByName = function (name) {\n\t    scope.filters = scope.filters.filter(function (filter) {\n\t      return filter.name !== name;\n\t    });\n\t\n\t    delete scope.query[name];\n\t\n\t    scope.applyFilters();\n\t  };\n\t\n\t  scope.removeFilterByPosition = function (pos) {\n\t    scope.filters.splice(pos, 1);\n\t    scope.applyFilters();\n\t  };\n\t\n\t  scope.setQueryParam = function (key, value) {\n\t    scope.query[key] = value;\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteQueryParam = function (key) {\n\t    delete scope.query[key];\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.sortingAttributes = ['id', 'status', 'created_at', 'total', 'items_total', 'shipping_total', 'taxes_total', 'coupon_total', 'promotion_total'];\n\t\n\t  scope.applySorting = function () {\n\t    scope.loadData();\n\t    //$(\"#sortingModal\").modal('hide');\n\t  };\n\t}]);\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewOrderController', ['$scope', '$marketcloud', function (scope, marketcloud) {\n\t  scope.order = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [{ name: 'Scolapasta', price: 12 }, { name: 'Cucchiaio', price: 1 }, { name: 'Forchetta', price: 2 }];\n\t\n\t  scope.saveOrder = function () {\n\t    console.log('Saving this order', scope.order);\n\t  };\n\t\n\t  // Shows/hide modal for products\n\t  scope.toggleProductsModal = function () {\n\t    console.log('Showing products modal');\n\t    $('#itemsModal').modal('show');\n\t  };\n\t\n\t  // loads some products from backend\n\t  scope.loadInventory = function (query) {\n\t    console.log('Loading inventory', query);\n\t  };\n\t\n\t  // Adds a line item to the order\n\t  scope.addItemToOrder = function (item) {\n\t    console.log('Item added to order', item);\n\t  };\n\t\n\t  // loads some addresses from backend\n\t  scope.loadAddresses = function (query) {\n\t    console.log('Loading addresses', query);\n\t  };\n\t}]);\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('OrderController', ['$scope', '$http', 'order', 'shippingMethods', '$marketcloud', 'paymentMethods', 'Countries', function (scope, http, order, shippingMethods, $marketcloud, paymentMethods, countries) {\n\t  scope.paymentMethods = paymentMethods.data.data;\n\t  scope.countries = countries;\n\t  // Data fetched by the resolve\n\t  scope.order = order.data.data;\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.addressToEdit = {};\n\t\n\t  // List of shipping methods\n\t  // @property Array<Object>\n\t  scope.shippingMethods = shippingMethods.data.data;\n\t\n\t  // New shipment\n\t  scope.newShipment = {\n\t    tracking_code: null,\n\t    tracking_link: null,\n\t    date: new Date(),\n\t    delivery_date: new Date(),\n\t    method: null,\n\t    description: null\n\t  };\n\t  scope.saveShipmentAndFullfill = false;\n\t\n\t  // New payment\n\t  scope.newPayment = {\n\t    method: 'Manual',\n\t    description: null,\n\t    amount: scope.order.total\n\t  };\n\t  scope.savePaymentAndSetToProcessing = false;\n\t\n\t  scope.payments = [];\n\t\n\t  scope.showEditAddressDialog = function (addressToEdit) {\n\t    scope.addressToEdit = addressToEdit;\n\t    $('#editAddressModal').modal('show');\n\t  };\n\t\n\t  scope.onUpdateOrder = function () {\n\t    $marketcloud.orders.update(scope.order.id, scope.order).then(function (res) {\n\t      notie.alert(1, 'Order successfully updated', 1.5);\n\t      scope.order = res.data.data;\n\t      scope.addingProduct = false;\n\t      scope.editingOrder = false;\n\t    });\n\t  };\n\t\n\t  scope.editOrder = function () {\n\t    scope.editingOrder = true;\n\t  };\n\t\n\t  scope.onRemoveItemFromOrder = function (idx) {\n\t    console.log(idx);\n\t    var product = scope.order.products[idx];\n\t    notie.confirm('Are you sure you want to remove ' + product.name + '?', 'Yes, remove.', ' No.', function () {\n\t      scope.$apply(function () {\n\t        scope.order.items.splice(idx, 1);\n\t        scope.order.products.splice(idx, 1);\n\t      });\n\t    });\n\t  };\n\t\n\t  scope.query = {};\n\t\n\t  scope.onAddProduct = function () {\n\t    scope.addingProduct = true;\n\t  };\n\t\n\t  scope.onCloseAddingProduct = function () {\n\t    scope.addingProduct = false;\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.addProduct = function (product) {\n\t    product.quantity = 1;\n\t\n\t    if (product.has_variants) {\n\t      product.selectedVariant = {};\n\t      Object.keys(product.variantsDefinition).forEach(function (k) {\n\t        product.selectedVariant[k] = product.variantsDefinition[k][0];\n\t      });\n\t    }\n\t\n\t    scope.order.items.push({\n\t      product_id: product.id,\n\t      quantity: product.quantity,\n\t      variant_id: product.has_variants ? 1 : null\n\t    });\n\t    scope.order.products.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.saveAddress = function () {\n\t    $marketcloud.orders.update(scope.order.id, {\n\t      billing_address: scope.order.billing_address,\n\t      shipping_address: scope.order.shipping_address\n\t    }).then(function () {\n\t      notie.alert(1, 'Order successfully updated', 1.5);\n\t      $('#editAddressModal').modal('hide');\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred, order not updated', 1.5);\n\t      $('#editAddressModal').modal('hide');\n\t    });\n\t  };\n\t  /* scope.order = null;\r\n\t    scope.loadingData = true; */\n\t\n\t  // Checking shipment dates\n\t  function assignDataToShipments() {\n\t    if (Array.isArray(scope.order.shipments)) {\n\t      scope.order.shipments = scope.order.shipments.map(function (shipment) {\n\t        if (shipment.date) {\n\t          shipment.date = moment(shipment.date);\n\t        }\n\t        if (shipment.delivery_date) {\n\t          shipment.delivery_date = moment(shipment.delivery_date);\n\t        }\n\t\n\t        if (shipment.method) {\n\t          scope.shippingMethods.forEach(function (method) {\n\t            if (shipment.method.id === method.id) {\n\t              shipment.method = method;\n\t            }\n\t          });\n\t        }\n\t\n\t        return shipment;\n\t      });\n\t    }\n\t  }\n\t\n\t  assignDataToShipments();\n\t\n\t  scope.refundedProducts = [];\n\t\n\t  if (scope.order.refunds) {\n\t    scope.order.refunds.forEach(function (refund) {\n\t      refund.line_items.forEach(function (item) {\n\t        scope.refundedProducts.push(item);\n\t      });\n\t    });\n\t  }\n\t\n\t  function getLineItemPrice(lineItem) {\n\t    if (lineItem.variant) {\n\t      if (lineItem.variant.price_discount) {\n\t        return lineItem.variant.price_discount * lineItem.quantity;\n\t      } else {\n\t        return lineItem.variant.price * lineItem.quantity;\n\t      }\n\t    } else {\n\t      if (lineItem.price_discount) {\n\t        return lineItem.price_discount * lineItem.quantity;\n\t      } else {\n\t        return lineItem.price * lineItem.quantity;\n\t      }\n\t    }\n\t  }\n\t\n\t  function getLineItemTaxes(lineItem) {\n\t    var price = getLineItemPrice(lineItem);\n\t    var tax_rate = lineItem.applied_tax_rate;\n\t\n\t    return tax_rate / 100 * price * lineItem.quantity;\n\t  }\n\t\n\t  scope.showRefundModal = function () {\n\t    scope.newRefund = {\n\t      created_at: new Date(),\n\t      reason: '',\n\t      line_items: [],\n\t      items_total: 0,\n\t      taxes_total: 0,\n\t      total: 0,\n\t      restock_refunded_items: false\n\t    };\n\t\n\t    scope.newRefund.line_items = scope.order.products.map(function (product) {\n\t      var p = angular.copy(product);\n\t      p.quantityInOrder = product.quantity;\n\t\n\t      p.product_id = product.id;\n\t\n\t      p.variant_id = 0;\n\t\n\t      if (p.hasOwnProperty('variant')) {\n\t        p.variant_id = p.variant.id;\n\t      }\n\t\n\t      return p;\n\t    });\n\t\n\t    scope.updateNewRefund();\n\t\n\t    $('#RefundModal').modal('show');\n\t  };\n\t\n\t  scope.saveRefund = function () {\n\t    scope.refundErrorMessage = '';\n\t\n\t    scope.newRefund.line_items = scope.newRefund.line_items.filter(function (item) {\n\t      return item.quantity > 0;\n\t    });\n\t\n\t    if (scope.newRefund.total <= 0) {\n\t      scope.refundErrorMessage = 'Refund total must be greater than zero.';\n\t      return;\n\t    }\n\t\n\t    $marketcloud.refunds.save(scope.order.id, scope.newRefund).then(function (response) {\n\t      $('#RefundModal').modal('hide');\n\t      window.Alert.success({\n\t        message: 'Refund saved successfully!'\n\t      });\n\t    }).catch(function (response) {\n\t      scope.refundErrorMessage = 'Unable to create refund. Please review the inserted data.';\n\t    });\n\t  };\n\t\n\t  scope.updateNewRefund = function () {\n\t    scope.newRefund.items_total = 0;\n\t    scope.newRefund.taxes_total = 0;\n\t\n\t    scope.newRefund.line_items.forEach(function (item) {\n\t      scope.newRefund.items_total += getLineItemPrice(item);\n\t      scope.newRefund.taxes_total += getLineItemTaxes(item);\n\t    });\n\t\n\t    scope.newRefund.total = scope.newRefund.items_total + scope.newRefund.taxes_total;\n\t    console.log('updateNewRefund ' + scope.newRefund.total);\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t  scope.getSelectedVariantValues = function (p) {\n\t    var temp = {};\n\t    Object.keys(p.variantsDefinition).forEach(function (k) {\n\t      temp[k] = p.variant[k];\n\t    });\n\t    return temp;\n\t  };\n\t\n\t  scope.getSelectedVariantKeysAndValues = function (p) {\n\t    var temp = {};\n\t    Object.keys(p.variantsDefinition).forEach(function (k) {\n\t      temp[k] = k + ': ' + String(p.variant[k]);\n\t    });\n\t    return temp;\n\t  };\n\t\n\t  scope.updateSelectedVariantForProduct = function (idx, key, value) {\n\t    var selectedVariantData = scope.order.products[idx].selectedVariant;\n\t\n\t    var productVariants = scope.order.products[idx].variants;\n\t\n\t    var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData);\n\t\n\t    scope.order.items[idx].variant_id = selectedVariant.variant_id;\n\t  };\n\t\n\t  var findObjectWithKeyValue = function findObjectWithKeyValue(array, object) {\n\t    var current = array;\n\t    var result;\n\t\n\t    Object.keys(object).forEach(function (k) {\n\t      var value = object[k];\n\t\n\t      current = current.filter(function (val) {\n\t        return val[k] === value;\n\t      });\n\t\n\t      if (current.length === 1) {\n\t        result = current[0];\n\t      }\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  // delete scope.order['items']\n\t\n\t  scope.updateStatus = function (status) {\n\t    scope.order.status = status;\n\t    $marketcloud.orders.update(scope.order.id, {\n\t      status: scope.order.status\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Order successfully updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Please try again.', 1);\n\t    });\n\t  };\n\t\n\t  // Util\n\t  scope.timestampToDate = function (t, showHours) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    var the_date = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t\n\t    if (showHours === true) {\n\t      the_date += ' at ' + a.getHours() + ':' + a.getMinutes();\n\t    }\n\t\n\t    return the_date;\n\t  };\n\t\n\t  function syntaxHighlight(json) {\n\t    if (typeof json !== 'string') {\n\t      json = JSON.stringify(json, null, 2);\n\t    }\n\t\n\t    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(new RegExp('\\n', 'g'), '<br>').replace(new RegExp('\\t'), '&nbsp;&nbsp;');\n\t    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n\t      var cls = 'number';\n\t      if (/^\"/.test(match)) {\n\t        if (/:$/.test(match)) {\n\t          cls = 'key';\n\t        } else {\n\t          cls = 'string';\n\t        }\n\t      } else if (/true|false/.test(match)) {\n\t        cls = 'boolean';\n\t      } else if (/null/.test(match)) {\n\t        cls = 'null';\n\t      }\n\t      return '<span class=\"' + cls + '\">' + match + '</span>';\n\t    });\n\t  }\n\t  scope.inspectObject = function (p) {\n\t    scope.json = syntaxHighlight(p);\n\t    $('#JsonInspector').modal('show');\n\t  };\n\t\n\t  scope.round = function (numb) {\n\t    return Math.round(numb * 1000) / 1000;\n\t  };\n\t\n\t  scope.fullfill = function () {\n\t    // Sets the order to completed\n\t    notie.confirm('This will set the order as completed, and eventually send notifications. Confirm?', 'Confirm', 'Cancel', function () {\n\t      $marketcloud.orders.update(scope.order.id, {\n\t        status: 'completed'\n\t      }).then(function (response) {\n\t        scope.order.status = 'completed';\n\t        notie.alert(1, 'Order successfully updated', 1);\n\t      }).catch(function (response) {\n\t        notie.alert(2, 'An error has occurred. Please try again.', 1);\n\t      });\n\t    });\n\t  };\n\t\n\t  scope.setToProcessing = function () {\n\t    // Sets the order to processing\n\t    window.Alert.confirm({\n\t      title: 'Confirm order status update?',\n\t      message: 'This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\n\t      onConfirm: function onConfirm() {\n\t        $marketcloud.orders.update(scope.order.id, {\n\t          status: 'processing'\n\t        }).then(function (response) {\n\t          scope.order.status = 'processing';\n\t          window.Alert.success({\n\t            message: 'Order successfully updated'\n\t          });\n\t        }).catch(function (response) {\n\t          window.Alert.error({});\n\t        });\n\t      }\n\t    });\n\t    /*      notie.confirm('This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\r\n\t            'Confirm',\r\n\t            'Cancel',\r\n\t            function() {\r\n\t              $marketcloud.orders.update(scope.order.id, {\r\n\t                  status: 'processing'\r\n\t                })\r\n\t                .then(function(response) {\r\n\t                  scope.order.status = 'processing'\r\n\t                  notie.alert(1, 'Order successfully updated', 1)\r\n\t                })\r\n\t                .catch(function(response) {\r\n\t                  notie.alert(2, 'An error has occurred. Please try again.', 1)\r\n\t                })\r\n\t            }) */\n\t  };\n\t\n\t  scope.updateShipmentUrl = function () {\n\t    var trackingCode = scope.newShipment.tracking_code;\n\t    var shipmetUrlStructures = {\n\t      gls: 'http://online.gls-slovenia.com/tt_page.php?tt_value=' + trackingCode,\n\t      postaSlovenije: 'http://sledenje.posta.si/Default.aspx?tn=' + trackingCode + '&guid=577712B3-9D04&lang=sl'\n\t    };\n\t\n\t    if (scope.shipmentURIPreset) {\n\t      if (scope.shipmentURIPreset === 'gls') {\n\t        scope.newShipment.tracking_link = shipmetUrlStructures.gls;\n\t      } else if (scope.shipmentURIPreset === 'postaSlovenije') {\n\t        scope.newShipment.tracking_link = shipmetUrlStructures.postaSlovenije;\n\t      }\n\t    } else {\n\t      scope.newShipment.tracking_link = '';\n\t      scope.newShipment.tracking_code = '';\n\t    }\n\t  };\n\t\n\t  scope.saveShipment = function () {\n\t    // Removing all validation feedback from the shipment\n\t    $('#shipmentModal .has-error').removeClass('has-error');\n\t    $('#shipmentModal .error').remove();\n\t\n\t    // Validating the new shipment\n\t    if (scope.newShipment.method === null) {\n\t      if (scope.order.shipping) {\n\t        scope.newShipment.method = scope.order.shipping;\n\t      } else {\n\t        $('select[ng-model=\"newShipment.method\"]').parent().addClass('has-error');\n\t        $('select[ng-model=\"newShipment.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'));\n\t        return;\n\t      }\n\t    }\n\t\n\t    if (scope.newShipment.date) {\n\t      scope.newShipment.date = new Date(scope.newShipment.date);\n\t    }\n\t\n\t    if (scope.newShipment.delivery_date) {\n\t      scope.newShipment.delivery_date = new Date(scope.newShipment.delivery_date);\n\t    }\n\t\n\t    var shipmentToSave = angular.copy(scope.newShipment);\n\t\n\t    // Saving the new shipment\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments',\n\t      data: shipmentToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      // Resetting the shipment\n\t      scope.newShipment = {\n\t        tracking_code: null,\n\t        tracking_link: null,\n\t        date: new Date(),\n\t        delivery_date: new Date(),\n\t        method: null,\n\t        description: null\n\t      };\n\t      if (scope.order.shipments) {\n\t        scope.order.shipments.push(shipmentToSave);\n\t      } else {\n\t        scope.order.shipments = [shipmentToSave];\n\t      }\n\t\n\t      $('#shipmentModal').modal('hide');\n\t\n\t      if (scope.saveShipmentAndFullfill === true) {\n\t        scope.fullfill();\n\t      }\n\t\n\t      assignDataToShipments();\n\t    }).catch(function (response) {\n\t      // $('#shipmentModal').modal('hide')\n\t      notie.alert(2, 'An error has occurred, please check your input', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateShipment = function () {\n\t    // Removing all validation feedback from the shipment\n\t    $('#esitShipmentModal .has-error').removeClass('has-error');\n\t    $('#editShipmentModal .error').remove();\n\t\n\t    // Validating the new shipment\n\t    if (scope.shipmentToEdit.method === null) {\n\t      $('select[ng-model=\"shipmentToEdit.method\"]').parent().addClass('has-error');\n\t      $('select[ng-model=\"shipmentToEdit.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'));\n\t      return;\n\t    }\n\t\n\t    var shipmentToSave = angular.copy(scope.shipmentToEdit);\n\t\n\t    if (shipmentToSave.date && shipmentToSave.date.toDate) {\n\t      shipmentToSave.date = shipmentToSave.date.toDate();\n\t      // scope.shipmentToEdit.date = new Date(scope.shipmentToEdit.date)\n\t    }\n\t\n\t    if (shipmentToSave.delivery_date && shipmentToSave.delivery_date.toDate) {\n\t      // scope.shipmentToEdit.delivery_date = new Date(scope.shipmentToEdit.delivery_date)\n\t      shipmentToSave.delivery_date = shipmentToSave.delivery_date.toDate();\n\t    }\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments/' + scope.shipmentToEditIndex,\n\t      data: shipmentToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      scope.shipmentToEdit = {};\n\t      $('#editShipmentModal').modal('hide');\n\t      notie.alert(1, 'Shipment updated', 1.5);\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      notie.alert(2, 'An error has occurred, please check your input', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.showShipmentModal = function () {\n\t    $('#shipmentModal').modal('show');\n\t  };\n\t\n\t  scope.showEditShipmentModal = function (shipment, index) {\n\t    scope.shipmentToEdit = shipment;\n\t    scope.shipmentToEditIndex = index;\n\t\n\t    $('#editShipmentModal').modal('show');\n\t  };\n\t\n\t  scope.showPaymentModal = function () {\n\t    $('#paymentModal').modal('show');\n\t  };\n\t\n\t  scope.orderToCSV = function () {};\n\t\n\t  scope.createPDFInvoice = function () {\n\t    if (!scope.order.invoice_id) {\n\t      return console.log('Order withouth invoice');\n\t    }\n\t\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/invoices/' + scope.order.invoice_id + '/pdf',\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      var invoiceUrl = response.data.data.url;\n\t      Object.assign(document.createElement('a'), { target: '_blank', href: invoiceUrl }).click();\n\t    }).catch(function (error) {\n\t      alert('error');\n\t      console.log(error);\n\t    });\n\t  };\n\t\n\t  scope.createPDFCreditNote = function (refund) {\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/refunds/' + refund.id + '/pdf',\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      var refundUrl = response.data.data.url;\n\t      Object.assign(document.createElement('a'), { target: '_blank', href: refundUrl }).click();\n\t    }).catch(function (error) {\n\t      alert('error');\n\t      console.log(error);\n\t    });\n\t  };\n\t\n\t  scope.savePayment = function () {\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/payments',\n\t      data: scope.newPayment,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      $('#paymentModal').modal('hide');\n\t      notie.alert(1, 'Payment saved', 1.5);\n\t      // var orderPayments = response.data.data.payments\n\t      scope.order.payments = response.data.data.payments;\n\t\n\t      scope.newPayment = {};\n\t\n\t      if (scope.savePaymentAndSetToProcessing === true) {\n\t        scope.setToProcessing();\n\t      }\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t      $('#paymentModal').modal('hide');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditProductTranslationsController', EditProductTranslationsController);\n\t\n\t  EditProductTranslationsController.$inject = ['$scope', '$marketcloud', 'product', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditProductTranslationsController(scope, $marketcloud, product, $http, $application, $location, locales) {\n\t    // If the current application does not have additional locales\n\t    // we redirect the user to the locales settings.\n\t    //\n\t    // We might want to prompt the user and ask them\n\t    // Go to settings or stay in the previous page?\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.product = product.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    // THese are ALL the locals available in the world\n\t    scope.locales = locales;\n\t\n\t    // available locales\n\t    // Fetched from app settings,\n\t    // THese are the locals that the store owner wants for this app.\n\t    scope.availableLocales = [];\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    // We already know that we have at least 1 locale\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // This will hold custom properties for further processing\n\t    scope.customPropertiesData = {};\n\t\n\t    // mapping non-core attributes into scope.customPropertiesData\n\t    var coreProperties = Models.Product.getPropertyNames();\n\t\n\t    // Should we be able to edit the slug? this is a on/off\n\t    scope.unsafeSlug = false;\n\t\n\t    coreProperties.push('id', 'variants', 'variantsDefinition', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t    'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    // Handling variants\n\t    // The locale will look like this\n\t    /*\r\n\t      {\r\n\t        locales : {\r\n\t          \"it-IT\" : {\r\n\t            ..\r\n\t            variants : {\r\n\t              colors : {\r\n\t                label : \"colori\",\r\n\t                values: {\r\n\t                  \"red\"  : \"rosso\",\r\n\t                  \"yellow\" : \"giallo\"\r\n\t                  ...\r\n\t                }\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    */\n\t\n\t    if (product.type === 'product_with_variants') {\n\t      for (var localeName in scope.product.locales) {\n\t        var locale = scope.product.locales[localeName];\n\t        if (!locale.hasOwnProperty('variants')) {\n\t          // Let's initialize the variants in the locale!\n\t          locale.variants = {};\n\t\n\t          for (v_name in scope.product.variantsDefinition) {\n\t            // We want to initialize the values translation table\n\t            var variant_values_translations = {};\n\t            var variant_values = scope.product.variantsDefinition[v_name];\n\t            variant_values.forEach(function (v) {\n\t              variant_values_translations[v] = '';\n\t            });\n\t            locale.variants[v_name] = {\n\t              label: '',\n\t              values: variant_values_translations\n\t            };\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    // Init locales object\n\t    if (!scope.product.hasOwnProperty('locales')) {\n\t      scope.product.locales = {};\n\t    }\n\t\n\t    scope.customPropertiesDataLocales = {};\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.product.locales.hasOwnProperty(locale.code)) {\n\t        scope.product.locales[locale.code] = {};\n\t      }\n\t\n\t      // Initializing the container for custom properties translations\n\t      scope.customPropertiesDataLocales[locale.code] = {};\n\t\n\t      for (var k in scope.customPropertiesData) {\n\t        scope.customPropertiesDataLocales[locale.code][k] = getTranslatedValueForCustomProperty(k, locale);\n\t      }\n\t\n\t      function getTranslatedValueForCustomProperty(k, locale) {\n\t        if (typeof scope.product.locales[locale.code][k] !== 'undefined') {\n\t          return scope.product.locales[locale.code][k];\n\t        }\n\t\n\t        return {\n\t          value: scope.customPropertiesData[k],\n\t          label: k\n\t        };\n\t      }\n\t    });\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.isRichText = function (str) {\n\t      if (typeof str !== 'string') return false;\n\t\n\t      var doc = new DOMParser().parseFromString(str, \"text/html\");\n\t      return [].slice.call(doc.body.childNodes).some(function (node) {\n\t        return node.nodeType === 1;\n\t      });\n\t    };\n\t\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t\n\t    scope.updateSlug = function () {\n\t      scope.product.locales[scope.currentLocale.code].slug = getSlugFromString(scope.product.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.product.locales)\n\t      };\n\t\n\t      for (var locale in scope.customPropertiesDataLocales) {\n\t        // Custom properties of locale \"l\"\n\t        var customPropertiesForSingleLocale = scope.customPropertiesDataLocales[locale];\n\t\n\t        for (var k in customPropertiesForSingleLocale) {\n\t          payload.locales[locale][k] = customPropertiesForSingleLocale[k];\n\t        }\n\t      }\n\t\n\t      $marketcloud.products.update(scope.product.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditBundledProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t  scope.itemsToAdd = [];\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t  // scope.product.included_products = scope.product.included_products\n\t\n\t  if (!scope.product.hasOwnProperty()) {\n\t    var product_ids = [];\n\t  }\n\t\n\t  scope.product.included_products.forEach(function (product, idx) {\n\t    if (product.has_variants) {\n\t      var tempProd = product.variants.find(function (item) {\n\t        return product.selected_variant_id === item.variant_id;\n\t      });\n\t      product.selectedVariant = {};\n\t      console.log(product);\n\t      Object.keys(product.variantsDefinition).forEach(function (k) {\n\t        product.selectedVariant[k] = tempProd[k];\n\t      });\n\t    }\n\t  });\n\t\n\t  // Lists is not currenty used\n\t  // scope.product.lists.forEach(function (list) {\n\t  //   var this_list_ids = list.items.map(function (item) {\n\t  //     return item.product_id\n\t  //   })\n\t  //   product_ids = product_ids.concat(this_list_ids)\n\t  // })\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewList = function () {\n\t    scope.product.lists.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeList = function (index) {\n\t    scope.product.lists.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToListModal = function (list) {\n\t    scope.currentList = list;\n\t    $('#addProductsToListModal').modal('show');\n\t  };\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    response.data.data.forEach(function (i) {\n\t      p_map[i.id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the bundled product\n\t    scope.product.lists.map(function (opt) {\n\t      opt.items = opt.items.map(function (item) {\n\t        return p_map[item.product_id];\n\t      });\n\t      return opt;\n\t    });\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  // var coreProperties = Models.Product.getPropertyNames()\n\t  // coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'lists')\n\t  // for (var k in scope.product) {\n\t  //   if (coreProperties.indexOf(k) < 0) {\n\t  //     scope.customPropertiesData[k] = scope.product[k]\n\t  //     delete scope.product[k]\n\t  //   }\n\t  // }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t  });\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateSelectedVariantForProduct = function (idx, key, value) {\n\t    var selectedVariantData = scope.product.included_products[idx].selectedVariant;\n\t    var productVariants = scope.product.included_products[idx].variants;\n\t\n\t    var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData);\n\t\n\t    scope.product.included_items[idx].variant_id = selectedVariant.variant_id;\n\t  };\n\t\n\t  var findObjectWithKeyValue = function findObjectWithKeyValue(array, object) {\n\t    var current = array;\n\t    var result;\n\t\n\t    Object.keys(object).forEach(function (k) {\n\t      var value = object[k];\n\t\n\t      current = current.filter(function (val) {\n\t        return val[k] === value;\n\t      });\n\t\n\t      if (current.length === 1) {\n\t        result = current[0];\n\t      }\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data;\n\t      scope.products.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.removeProduct = function (idx) {\n\t    scope.product.included_products.splice(idx, 1);\n\t    scope.product.included_items.splice(idx, 1);\n\t  };\n\t\n\t  scope.addProduct = function (product) {\n\t    if (product.type !== 'bundled_product') {\n\t      product.quantity = 1;\n\t\n\t      var newProduct = {\n\t        product_id: product.id,\n\t        quantity: product.quantity\n\t      };\n\t\n\t      if (product.has_variants) {\n\t        newProduct.variant_id = 1;\n\t      }\n\t\n\t      scope.product.included_items.push(newProduct);\n\t\n\t      if (product.has_variants) {\n\t        product.selectedVariant = {};\n\t        Object.keys(product.variantsDefinition).forEach(function (k) {\n\t          product.selectedVariant[k] = product.variantsDefinition[k][0];\n\t        });\n\t      }\n\t\n\t      scope.product.included_products.push(product);\n\t    } else {\n\t      notie.alert(3, 'You can not include a bundled product in a bundled product.');\n\t    }\n\t\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var update = angular.copy(scope.product);\n\t\n\t    delete update.included_products;\n\t    delete update.selectedVariant;\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      update[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    update.lists.forEach(function (list) {\n\t      list.items = list.items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    });\n\t\n\t    $marketcloud.products.update(update.id, update).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t}]);\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewBundledProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.catch = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t  scope.itemsToAdd = [];\n\t  scope.selectedProducts = [];\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.addEmptyVariant = function () {\n\t    console.log('ads');\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewList = function () {\n\t    scope.product.lists.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeList = function (index) {\n\t    scope.product.lists.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToListModal = function (list) {\n\t    scope.currentList = list;\n\t    $('#addProductsToListModal').modal('show');\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'bundled_product',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    included_items: [],\n\t    images: [],\n\t    media: [],\n\t    has_variants: false,\n\t    published: true,\n\t    lists: []\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.catch = null;\n\t    scope.catchField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (skipSaving) {\n\t    console.log(scope.product);\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var to_save = angular.copy(scope.product);\n\t\n\t    for (var k in to_save.lists) {\n\t      to_save.lists[k].items = to_save.lists[k].items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    }\n\t\n\t    if (skipSaving === true) {\n\t      return;\n\t    }\n\t    $marketcloud.products.save(to_save).then(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      console.log(response);\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.updateSelectedVariantForProduct = function (idx, key, value) {\n\t    var selectedVariantData = scope.selectedProducts[idx].selectedVariant;\n\t\n\t    var productVariants = scope.selectedProducts[idx].variants;\n\t\n\t    var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData);\n\t\n\t    scope.product.included_items[idx].variant_id = selectedVariant.variant_id;\n\t  };\n\t\n\t  var findObjectWithKeyValue = function findObjectWithKeyValue(array, object) {\n\t    var current = array;\n\t    var result;\n\t\n\t    Object.keys(object).forEach(function (k) {\n\t      var value = object[k];\n\t\n\t      current = current.filter(function (val) {\n\t        return val[k] === value;\n\t      });\n\t\n\t      if (current.length === 1) {\n\t        result = current[0];\n\t      }\n\t    });\n\t\n\t    return result;\n\t  };\n\t\n\t  scope.removeProduct = function (idx) {\n\t    scope.product.included_products.splice(idx, 1);\n\t    scope.product.included_items.splice(idx, 1);\n\t    console.log(scope.product);\n\t  };\n\t\n\t  scope.addProduct = function (product) {\n\t    if (product.type !== 'bundled_product') {\n\t      product.quantity = 1;\n\t      var newProduct = {\n\t        product_id: product.id,\n\t        quantity: product.quantity\n\t      };\n\t\n\t      if (product.has_variants) {\n\t        newProduct.variant_id = 1;\n\t      }\n\t\n\t      scope.product.included_items.push(newProduct);\n\t\n\t      if (product.has_variants) {\n\t        product.selectedVariant = {};\n\t        Object.keys(product.variantsDefinition).forEach(function (k) {\n\t          product.selectedVariant[k] = product.variantsDefinition[k][0];\n\t        });\n\t      }\n\t\n\t      scope.selectedProducts.push(product);\n\t    } else {\n\t      notie.alert(3, 'You can not include a bundled product in a bundled product.');\n\t    }\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t}]);\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditConfigurableProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  if (!scope.product.hasOwnProperty()) {\n\t    var product_ids = [];\n\t  }\n\t\n\t  scope.product.options.forEach(function (option) {\n\t    var this_option_ids = option.items.map(function (item) {\n\t      return item.product_id;\n\t    });\n\t    product_ids = product_ids.concat(this_option_ids);\n\t  });\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewOption = function () {\n\t    scope.product.options.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeOption = function (index) {\n\t    scope.product.options.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToOptionModal = function (option) {\n\t    scope.currentOption = option;\n\t    $('#addProductsToOptionModal').modal('show');\n\t  };\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    response.data.data.forEach(function (i) {\n\t      p_map[i.id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the bundled product\n\t    scope.product.options.map(function (opt) {\n\t      opt.items = opt.items.map(function (item) {\n\t        return p_map[item.product_id];\n\t      });\n\t      return opt;\n\t    });\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'options');\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t  });\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var update = angular.copy(scope.product);\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      update[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    update.options.forEach(function (option) {\n\t      option.items = option.items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    });\n\t\n\t    $marketcloud.products.update(update.id, update).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewConfigurableProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.catch = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewOption = function () {\n\t    scope.product.options.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeOption = function (index) {\n\t    scope.product.options.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToOptionModal = function (option) {\n\t    scope.currentOption = option;\n\t    $('#addProductsToOptionModal').modal('show');\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'configurable_product',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    media: [],\n\t    has_variants: false,\n\t    published: true,\n\t    options: []\n\t\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.catch = null;\n\t    scope.catchField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (skipSaving) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var to_save = angular.copy(scope.product);\n\t\n\t    for (var k in to_save.options) {\n\t      to_save.options[k].items = to_save.options[k].items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    }\n\t\n\t    if (skipSaving === true) {\n\t      return;\n\t    }\n\t    $marketcloud.products.save(to_save).then(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tangular.module('DataDashboard').controller('ListProductsController', ['$scope', '$location', '$marketcloud', '$http', '$q', 'products', '$route', '$rootScope', 'StormConfiguration', '$utils', '$models', function (scope, $location, $marketcloud, http, $q, resources, $route, $rootScope, StormConfiguration, $utils, $models) {\n\t  'use strict';\n\t\n\t  // This array will hold our data\n\t\n\t  scope.products = [];\n\t\n\t  // Bulk control\n\t  // Here we place selected prodocuts for bulk actions\n\t  scope.selected = [];\n\t\n\t  // BUlk operations buttons\n\t  scope.showBulkControls = false;\n\t\n\t  // Keeping track of which resources are selected\n\t  scope.selections = {};\n\t\n\t  // The main resource\n\t  scope.products = resources.data.data;\n\t\n\t  // The columns we are showing\n\t  // Loading from config or initializing\n\t  scope.showing_attributes = StormConfiguration.get('products_list_showing_attributes') || [];\n\t\n\t  // Attributes not togglable in view\n\t  scope.reserved_attributes = ['name', 'type', 'price', 'inventory', 'published'];\n\t\n\t  // Initializing pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // The query object to filter results from the api\n\t  };scope.query = {\n\t    per_page: 20,\n\t    page: scope.pagination.currentPage\n\t\n\t    // Parsing URL parameters, if provided\n\t    // Applying Url query\n\t  };var urlQuery = {};\n\t  try {\n\t    urlQuery = JSON.parse($route.current.params.query);\n\t  } catch (e) {\n\t    urlQuery = {};\n\t  }\n\t\n\t  for (var k in urlQuery) {\n\t    scope.query[k] = urlQuery[k];\n\t  }\n\t\n\t  /************************************************************\r\n\t   *                         COLUMNS\r\n\t   **************************************************************/\n\t\n\t  // We assign to available_attributes\n\t  // those keys of products\n\t  scope.available_attributes = [];\n\t\n\t  // Building the available_attributes array\n\t  scope.products.forEach(function (p) {\n\t    // Attributes to add to available_attributes\n\t    var new_attributes = Object.keys(p).filter(function (key) {\n\t      // It must not be in reserved list\n\t      return scope.reserved_attributes.indexOf(key) === -1;\n\t    }).filter(function (key) {\n\t      // must be something we can render\n\t      var types = ['number', 'string', 'boolean'];\n\t      return types.indexOf(_typeof(p[key])) > -1;\n\t    }).filter(function (key) {\n\t      // must not be a duplicate\n\t      return scope.available_attributes.indexOf(key) === -1;\n\t    });\n\t    scope.available_attributes = scope.available_attributes.concat(new_attributes);\n\t  });\n\t\n\t  /*\r\n\t      For legacy reasons, some products may have overwritten the type property\r\n\t      so we infer it again here\r\n\t   */\n\t\n\t  scope.products.forEach(function (product) {\n\t    if (product.type === 'simple_product' || product.type === 'product_with_variants' || product.type === 'bundled_product') {\n\t      return;\n\t    }\n\t\n\t    if (product.hasOwnProperty('variants') && product.hasOwnProperty('variantsDefinition')) {\n\t      product.type = 'product_with_variants';\n\t    } else {\n\t      product.type = 'simple_product';\n\t    }\n\t  });\n\t\n\t  /*\r\n\t   *    Shows or hides a column by name\r\n\t   *    @param {String} name The name of the column to show/hide\r\n\t   */\n\t  scope.toggleColumn = function (name) {\n\t    var i = scope.showing_attributes.indexOf(name);\n\t    if (i > -1) {\n\t      scope.showing_attributes.splice(i, 1);\n\t    } else {\n\t      scope.showing_attributes.push(name);\n\t    }\n\t\n\t    StormConfiguration.set('products_list_showing_attributes', scope.showing_attributes);\n\t  };\n\t\n\t  scope.filterColumnNamesPattern = '';\n\t  scope.filterColumnNames = function (item) {\n\t    return item.indexOf(scope.filterColumnNamesPattern) > -1;\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                         FILTERS\r\n\t   **************************************************************/\n\t\n\t  // We want to be able to filter also by reserved attributes\n\t  scope.filterAttributes = scope.reserved_attributes.concat(scope.available_attributes);\n\t\n\t  scope.applyFilters = function (filters) {\n\t    filters.forEach(function (filter) {\n\t      scope.query[filter.name] = filter.value;\n\t    });\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.applySorting = function () {\n\t    scope.loadData();\n\t    $(\"#sortingModal\").modal('hide');\n\t  };\n\t\n\t  scope.sortByColumn = function (columnName) {\n\t\n\t    var order = null;\n\t\n\t    if (scope.query.sort_order === 'DESC') order = 'ASC';else order = 'DESC';\n\t\n\t    scope.query.sort_by = columnName;\n\t\n\t    scope.query.sort_order = order;\n\t\n\t    scope.loadData();\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                         MULTIPLE/BULK SELECTION\r\n\t   **************************************************************/\n\t\n\t  // Holding query fields\n\t  // When listing data this oobject is sent\n\t\n\t  scope.isItemSelected = function (item) {\n\t    return scope.selected.indexOf(item.id) > -1;\n\t  };\n\t\n\t  scope.toggleItemSelection = function (item) {\n\t    // If is not selected, we select it\n\t    if (!scope.isItemSelected(item)) {\n\t      return scope.selected.push(item.id);\n\t    }\n\t\n\t    // If selected we find it and remove it\n\t    for (var i = scope.selected.length - 1; i >= 0; i--) {\n\t      if (scope.selected[i] === item.id) {\n\t        scope.selected.splice(i, 1);\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    if (scope.selectAll === false) {\n\t      scope.selected = [];\n\t    } else {\n\t      scope.selected = scope.products.map(function (product) {\n\t        return product.id;\n\t      });\n\t    }\n\t  };\n\t\n\t  scope.$watch('selected', function (newValue, oldValue) {\n\t    // Have to recaulcate scope.selections\n\t    var tmp = {};\n\t    scope.selected.forEach(function (id) {\n\t      tmp[id] = true;\n\t    });\n\t    scope.selections = tmp;\n\t  });\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.products.filter(function (p) {\n\t      return scope.isItemSelected(p);\n\t    });\n\t  };\n\t\n\t  scope.bulkSetPublishing = function (flag) {\n\t    // flag must be boolean\n\t\n\t    var defer = $q.defer();\n\t\n\t    var promises = [];\n\t\n\t    scope.getSelectedItems().forEach(function (product) {\n\t      promises.push($marketcloud.products.update(product.id, {\n\t        published: flag\n\t      }));\n\t    });\n\t\n\t    $q.all(promises).then(function () {\n\t      notie.alert(1, 'All products have been updated', 1.5);\n\t      scope.loadPage(scope.pagination.currentPage);\n\t    });\n\t\n\t    return defer.promise;\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' products?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (product) {\n\t        promises.push($marketcloud.products.delete(product.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All products have been deleted', 1.5);\n\t        scope.loadPage(scope.pagination.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.products);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkCSVExport = function () {\n\t    var _data = scope.getSelectedItems();\n\t\n\t    // If there are no selected items, we export the whole current view\n\t    if (_data.length === 0) _data = scope.products;\n\t\n\t    var bucket = [];\n\t\n\t    _data.forEach(function (product) {\n\t      if (\"simple_product\" === product.type) {\n\t        bucket.push(product);\n\t      } else if (\"product_with_variants\" === product.type) {\n\t\n\t        var productWithoutVariants = angular.copy(product);\n\t        delete productWithoutVariants.variants;\n\t        bucket.push(productWithoutVariants);\n\t\n\t        var variantNames = [];\n\t\n\t        product.variants.forEach(function (i) {\n\t          i.type = \"variant\";\n\t          bucket.push(i);\n\t        });\n\t      } else {\n\t        bucket.push(product);\n\t      }\n\t    });\n\t\n\t    _data = bucket;\n\t\n\t    console.log(\"Prima di flatten\", angular.copy(_data));\n\t\n\t    _data = _data.map($utils.flatten);\n\t\n\t    console.log(\"Dopo di flatten\", angular.copy(_data));\n\t\n\t    var _csv = $utils.JSONToCSV(_data);\n\t\n\t    console.log(\"IL CSV\", angular.copy(_csv));\n\t    return $utils.exportAsCSV(_csv);\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                         IMPORT/EXPORT\r\n\t   **************************************************************/\n\t  scope.importProducts = function () {\n\t    notie.alert(4, 'Contact us at info@marketcloud.studio404.net with import subject', 1.5);\n\t  };\n\t\n\t  // Shows the file selector dialog\n\t  scope.chooseJSONFile = function () {\n\t    scope.importMode = 'JSON';\n\t    document.querySelector(\"#JSONFileInput\").click();\n\t  };\n\t  scope.chooseCSVFile = function () {\n\t    scope.importMode = 'CSV';\n\t    document.querySelector(\"#CSVFileInput\").click();\n\t  };\n\t\n\t  // Updates the local copy of file contents\n\t  scope.JSONFileChanged = function () {\n\t\n\t    var file = document.getElementById(\"JSONFileInput\").files[0];\n\t\n\t    //Resetting the file input so we can re-try uploads\n\t    // of the same file and still detect changes\n\t    document.getElementById(\"JSONFileInput\").value = \"\";\n\t\n\t    if (file) {\n\t      var reader = new FileReader();\n\t      reader.readAsText(file, \"UTF-8\");\n\t      reader.onload = function (evt) {\n\t\n\t        // TODO add try catch to manage invalid json\n\t        try {\n\t          var jsonLines = JSON.parse(evt.target.result);\n\t        } catch (e) {\n\t          return Alert.error({\n\t            message: 'Invalid JSON file, please check file syntax'\n\t          });\n\t        }\n\t\n\t        scope.importJSON(jsonLines);\n\t      };\n\t      reader.onerror = function (evt) {\n\t        notie.alert(3, \"error reading file\", 2);\n\t      };\n\t    }\n\t  };\n\t\n\t  scope.CSVFileChanged = function () {\n\t\n\t    var file = document.getElementById(\"CSVFileInput\").files[0];\n\t\n\t    //Resetting the file input so we can re-try uploads\n\t    // of the same file and still detect changes\n\t    document.getElementById(\"CSVFileInput\").value = \"\";\n\t\n\t    if (file) {\n\t      var reader = new FileReader();\n\t      reader.readAsText(file, \"UTF-8\");\n\t      reader.onload = function (evt) {\n\t\n\t        // TODO add try catch to manage invalid json\n\t        var csvFileContent = evt.target.result;\n\t\n\t        var productsToImport = $utils.CSVToJSON(csvFileContent);\n\t\n\t        // Sacrifice brevity in the name of clarity for the greater good\n\t        // We flatten jsons before exporting to CSV so now we must unflatten them\n\t        productsToImport = productsToImport.map($utils.unflatten);\n\t\n\t        scope.importJSON(productsToImport);\n\t\n\t        // JSON is an array\n\t      };\n\t      reader.onerror = function (evt) {\n\t        notie.alert(3, \"error reading file\", 2);\n\t      };\n\t    }\n\t  };\n\t\n\t  // Upload json content\n\t  scope.uploadJSON = function () {\n\t    // Importing as json this file\n\t    var jsonLines = JSON.parse(scope.fileContent);\n\t    console.log(\"jsonLines è \", jsonLines);\n\t    scope.importJSON(jsonLines);\n\t  };\n\t\n\t  // Upload ccsv content\n\t  scope.uploadCSV = function () {\n\t    // Importing as json this file\n\t    // TODO CSV TO JSON\n\t    //var jsonLines = JSON.parse(scope.fileContent);\n\t    //scope.importJSON(jsonLines);\n\t    console.log(\"To implement...\");\n\t  };\n\t\n\t  // Import json\n\t  scope.importJSON = function (lines) {\n\t    var productsToImport = [];\n\t    var invalidItemIndex = null;\n\t    var invalidItems = [];\n\t\n\t    for (var i = 0; i < lines.length; i++) {\n\t      var line = lines[i];\n\t      if (line.type === \"simple_product\") {\n\t\n\t        var validation = $models.Product.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t          break;\n\t        }\n\t        productsToImport.push(line);\n\t      } else if (line.type === \"product_with_variants\") {\n\t\n\t        var validation = $models.ProductWithVariants.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t          break;\n\t        } else {\n\t          productsToImport.push(line);\n\t        }\n\t      } else if (line.type === \"variant\") {\n\t        if (!productsToImport[productsToImport.length - 1].variants) productsToImport[productsToImport.length - 1].variants = [];\n\t\n\t        var validation = $models.Variant.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your CSV, line \"+i+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t\n\t          break;\n\t        } else {\n\t          productsToImport[productsToImport.length - 1].variants.push(line);\n\t        }\n\t      } else {\n\t        notie.alert(3, \"Invalid data\", 2);\n\t      }\n\t    }\n\t\n\t    if (0 === invalidItems.length) {\n\t      // No invalid items, we can proceed\n\t      console.log(\"Ecco cosa importare\", productsToImport);\n\t      importData(productsToImport);\n\t    } else {\n\t      console.log(\"validation\", validation);\n\t      console.log(\"Import aborted due to invalid items\", invalidItems);\n\t    }\n\t  };\n\t\n\t  function importData(items) {\n\t    console.log(\"GOING TO IMPORT \" + items.length + \" PRODUCTS FROM FILE\");\n\t    var defer = $q.defer();\n\t    var promises = [];\n\t\n\t    var failures = [];\n\t\n\t    function push(r) {\n\t      promises.push(r);\n\t    }\n\t    function noop(r) {\n\t      failures.push(r);\n\t    }\n\t\n\t    function noop2(i) {\n\t      failures.push(i);\n\t      return function (error) {};\n\t    }\n\t\n\t    items.forEach(function (product) {\n\t      if (\"simple_product\" === product.type) promises.push($marketcloud.products.save(product).then(push).catch(function (error) {\n\t        failures.push(product);\n\t      }));\n\t\n\t      if (\"product_with_variants\" === product.type) {\n\t\n\t        var productWithoutVariants = angular.copy(product);\n\t        delete productWithoutVariants.variants;\n\t\n\t        var newPromise = $q(function (resolve, reject) {\n\t\n\t          return $marketcloud.products.save(productWithoutVariants).then(function (response) {\n\t            var product_id = response.data.data.id;\n\t            return $marketcloud.variants.save(product_id, product.variants);\n\t          }).then(resolve).catch(reject);\n\t        });\n\t\n\t        promises.push(newPromise.then(push).catch(function (error) {\n\t          failures.push(product);\n\t        }));\n\t      }\n\t    });\n\t\n\t    $q.all(promises).then(function (data) {\n\t\n\t      if (failures.length > 0) {\n\t        console.log(\"FAILURES\", failures);\n\t        var msg = '<p>Not every item was imported. Import failed for ' + failures.length + ' items:</p><ul>';\n\t\n\t        failures.forEach(function (item) {\n\t          msg += '<li class=\"text-left\">' + item.name + '</lI>';\n\t        });\n\t        msg += '</ul>';\n\t        Alert.warning({\n\t          message: msg\n\t        });\n\t      } else {\n\t        Alert.success({\n\t          message: 'All items were imported'\n\t        });\n\t      }\n\t      scope.loadPage(1);\n\t    }).catch(function () {\n\t      console.log(\"ALL FINISHED WITH ERROR\");\n\t      console.log(\"Failures\", failures);\n\t      notie.alert(2, \"Import succeded partially, Only the first \");\n\t      scope.loadPage(1);\n\t    });\n\t\n\t    return defer.promise;\n\t  }\n\t\n\t  /************************************************************\r\n\t   *                        DUPLICATE\r\n\t   **************************************************************/\n\t  scope.cloneProduct = function (product_to_duplicate) {\n\t    var product_to_save = angular.copy(product_to_duplicate);\n\t    delete product_to_save.id;\n\t    delete product_to_save.product_id;\n\t    delete product_to_save.variant_id;\n\t    delete product_to_save._id;\n\t\n\t    product_to_save.name += ' (Copy)';\n\t    product_to_save.published = false;\n\t\n\t    switch (product_to_save.stock_type) {\n\t      case 'track':\n\t        delete product_to_save['stock_status'];\n\t        break;\n\t      case 'status':\n\t        delete product_to_save['stock_level'];\n\t        break;\n\t      case 'infinite':\n\t        delete product_to_save['stock_level'];\n\t        delete product_to_save['stock_status'];\n\t        break;\n\t    }\n\t\n\t    // NOTE this uses client side info. it is a utility\n\t    //\n\t    delete product_to_save.variants;\n\t\n\t    $marketcloud.products.save(product_to_save).then(function (response) {\n\t      console.log(\"RESPONSATI\", response);\n\t      if (product_to_save.has_variants === true || product_to_save.type === 'product_with_variants') {\n\t        return http({\n\t          method: 'POST',\n\t          url: API_BASE_URL + '/products/' + response.data.data.id + '/variants',\n\t          data: product_to_duplicate.variants,\n\t          headers: {\n\t            Authorization: window.public_key + ':' + window.token\n\t          }\n\t        });\n\t      }\n\t    }).then(function (response) {\n\t      scope.loadPage(scope.pagination.currentPage);\n\t      notie.alert(1, 'Product successfully cloned', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                         QUERY OPERATIONS\r\n\t   **************************************************************/\n\t  scope.setPublishing = function (prod) {\n\t    $marketcloud.products.update(prod.id, {\n\t      published: prod.published\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.alterColumnNames = function (name) {\n\t    if (name === 'stock_level') {\n\t      return 'Inventory';\n\t    } else {\n\t      return name;\n\t    }\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t\n\t    if (scope.query.q === '') {\n\t      delete scope.query.q;\n\t    }\n\t\n\t    if (query) {\n\t      if (\"object\" !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new TypeError(\"loadData(query) query must be an object of filters\");\n\t\n\t      for (var k in query) {\n\t        scope.query[k] = query[k];\n\t      }\n\t    }\n\t\n\t    return $marketcloud.products.list(scope.query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t\n\t        // This little trick allows us to get back to the latest state of the view when we hit a back button.\n\t        // We don't use $location because it has a weird behaviour appending #/#/path\n\t      };window.history.pushState(scope.query, \"List products\", '#/products?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\n\t\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteProduct = function (prod_id, index) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + prod_id,\n\t      headers: {\n\t\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t\n\t    }).then(function (response) {\n\t      scope.loadPage(scope.pagination.currentPage);\n\t      notie.alert(1, 'Product deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditProductWithVariantsController', ['$scope', '$marketcloud', 'product', '$http', '$utils', function (scope, $marketcloud, product, $http, $utils) {\n\t  scope.customPropertiesData = {};\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  scope.selectedCategories = [];\n\t\n\t  if (scope.product.categories && scope.product.categories.length) {\n\t    var cats = scope.product.categories.split(',');\n\t\n\t    var promises = [];\n\t    cats.forEach(function (categoryId) {\n\t      promises.push($marketcloud.categories.list({\n\t        id: categoryId\n\t      }));\n\t    });\n\t\n\t    Promise.all(promises).then(function (response) {\n\t      response.forEach(function (res) {\n\t        if (res.data.data[0]) {\n\t          var category = {\n\t            category_id: res.data.data[0].id,\n\t            text: res.data.data[0].path\n\t          };\n\t          scope.selectedCategories.push(category);\n\t        }\n\t      });\n\t    });\n\t  }\n\t\n\t  // Listening to category selector events\n\t  scope.$on('selectedCategory', function (event, data) {\n\t    var categoryId = data.category_id;\n\t\n\t    if (scope.selectedCategories.map(function (cat) {\n\t      return cat.category_id;\n\t    }).indexOf(categoryId) === -1) {\n\t      scope.selectedCategories.push(data);\n\t    }\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('id', 'currencies', 'display_price', 'display_price_discount', 'has_variants', 'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'variants', 'variantsDefinition', 'product_id', 'variant_id', 'application_id');\n\t\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.setMainCategoryToLast = function () {\n\t\n\t    if (scope.selectedCategories.length > 0) {\n\t      scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id;\n\t    } else {\n\t      scope.product.category_id = null;\n\t    }\n\t  };\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    console.error('An error has occurred while loading categories');\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    console.error('An error has occurred while loading brands');\n\t  });\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{\n\t    name: 'String',\n\t    value: 'string'\n\t  }, {\n\t    name: 'Number',\n\t    value: 'number'\n\t  }, {\n\t    name: 'Boolean',\n\t    value: 'boolean'\n\t  }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.newVariant = {};\n\t  scope.saveNewVariant = function () {\n\t    var variantToSave = angular.copy(scope.product);\n\t    // Removing useless stuff in the variant\n\t    delete variantToSave['variants'];\n\t    delete variantToSave['type'];\n\t    delete variantToSave['variantsDefinition'];\n\t    delete variantToSave['is_master'];\n\t    delete variantToSave['has_variants'];\n\t    delete variantToSave['published'];\n\t\n\t    for (var k in scope.newVariant) {\n\t      if (scope.product.variantsDefinition[k].indexOf(scope.newVariant[k]) < 0) {\n\t        scope.product.variantsDefinition[k].push(scope.newVariant[k]);\n\t      }\n\t      variantToSave[k] = scope.newVariant[k];\n\t    }\n\t\n\t    // Devo aggiornare products perchè variants definition è cambiato\n\t    // poi salvo la variante\n\t\n\t    scope.updateProduct().then(function (response) {\n\t      return $http({\n\t        method: 'POST',\n\t        url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n\t        data: variantToSave,\n\t        headers: {\n\t          Authorization: window.public_key + ':' + window.token\n\t        }\n\t      });\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant successfully created', 1);\n\t      scope.product = response.data.data;\n\t      $('#addVariantModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Variants not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.deleteVariant = function (variant, i) {\n\t    return $http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant deleted', 1.5);\n\t      scope.product.variants.splice(i, 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var payload = angular.copy(scope.product);\n\t\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      payload[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    var categories = '';\n\t    scope.selectedCategories.forEach(function (category, idx) {\n\t      categories += category.category_id;\n\t\n\t      if (idx < scope.selectedCategories.length - 1) {\n\t        categories += ',';\n\t      }\n\t    });\n\t\n\t    payload.categories = categories;\n\t\n\t    switch (payload.stock_type) {\n\t      case 'infinite':\n\t        delete payload.stock_level;\n\t        delete payload.stock_status;\n\t        break;\n\t\n\t      case 'status':\n\t        delete payload.stock_level;\n\t        break;\n\t\n\t      case 'track':\n\t        delete payload.stock_status;\n\t        break;\n\t    }\n\t\n\t    return $marketcloud.products.update(payload.id, payload).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewProductWithVariantsController', ['$scope', '$http', '$location', '$marketcloud', '$utils', function (scope, $http, location, $marketcloud, $utils) {\n\t\n\t  scope.categories = [];\n\t  scope.error = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t  scope.selectedCategories = [];\n\t\n\t  // Temporary storage for variants\n\t  // while theyre being built\n\t  scope.addedVariants = {};\n\t\n\t  // Listening to category selector events\n\t  scope.$on('selectedCategory', function (event, data) {\n\t    var categoryId = data.category_id;\n\t\n\t    if (scope.selectedCategories.map(function (cat) {\n\t      return cat.category_id;\n\t    }).indexOf(categoryId) === -1) {\n\t      scope.selectedCategories.push(data);\n\t    }\n\t  });\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('id', 'display_price', 'display_price_discount', 'has_variants', 'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'variants', 'variantsDefinition', 'product_id', 'variant_id', 'application_id');\n\t\n\t  scope.isBoolean = function (d) {\n\t    return typeof d === 'boolean';\n\t  };\n\t\n\t  scope.isString = function (d) {\n\t    return typeof d === 'string';\n\t  };\n\t\n\t  scope.isNumber = function (d) {\n\t    return typeof d === 'number';\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.setMainCategoryToLast = function () {\n\t\n\t    if (scope.selectedCategories.length > 0) {\n\t      scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id;\n\t    } else {\n\t      scope.product.category_id = null;\n\t    }\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading categories', 2);\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.query = {\n\t    // The product must be simple_product as this\n\t    type: 'product_with_variants'\n\t  };\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.applyTemplate = function (product) {\n\t    var tpl = angular.copy(product);\n\t\n\t    console.log(\"====================\", \"Vado ad applicare questo template\", angular.copy(tpl), \"==========================\");\n\t\n\t    delete tpl['id'];\n\t\n\t    scope.addedVariants2 = [];\n\t\n\t    for (var k in tpl.variantsDefinition) {\n\t      var newAddedVariant = {\n\t        name: k,\n\t        values: tpl.variantsDefinition[k].map(function (v) {\n\t          return { text: v };\n\t        })\n\t      };\n\t      scope.addedVariants2.push(newAddedVariant);\n\t    }\n\t\n\t    scope.computedVariants = tpl.variants.map(function (item) {\n\t      var v = angular.copy(item);\n\t      delete v[\"id\"];\n\t      delete v[\"product_id\"];\n\t      delete v[\"variant_id\"];\n\t      return v;\n\t    });\n\t\n\t    console.log(\"Ora computedVariants è\", angular.copy(scope.computedVariants));\n\t\n\t    delete tpl.variants;\n\t\n\t    scope.product = tpl;\n\t\n\t    // Making sure that inventory is initialized\n\t    scope.product.stock_type = tpl.stock_type || \"status\";\n\t    scope.product.stock_status = tpl.stock_status || \"in_stock\";\n\t\n\t    console.log(\"Applicato questo template\", tpl);\n\t\n\t    //scope.updateVariantsConfiguration()\n\t\n\t    console.log(\"Dopo updateVariantsConfiguration\", angular.copy(scope.computedVariants));\n\t    // Taking care of variants\n\t\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  // Loading products right away\n\t  scope.loadProducts();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 2);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t  window.inspect = function () {\n\t    console.log(angular.copy(scope.product));\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'product_with_variants',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    variants: {},\n\t    published: false,\n\t    has_variants: true // Flag for legacy compatibility\n\t  };\n\t\n\t  scope.customPropertiesData = {};\n\t  // This contains validation Errors\n\t\n\t  // Array of new properties's names (strings)\n\t  scope.customPropertiesNames = [];\n\t\n\t  scope.computedVariants = [];\n\t\n\t  // Each tyme the parent's stock type is changed, the variants must be updated\n\t  scope.updateStockManagementForVariants = function () {\n\t    var stock_type = scope.product.stock_type;\n\t\n\t    if (stock_type === 'track') {\n\t      delete scope.product.stock_status;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_status'];\n\t      });\n\t      return;\n\t    }\n\t\n\t    if (stock_type === 'status') {\n\t      delete scope.product.stock_level;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_level'];\n\t      });\n\t      return;\n\t    }\n\t\n\t    if (stock_type === 'infinite') {\n\t      delete scope.product.stock_status;\n\t      delete scope.product.stock_level;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_level'];\n\t        delete v['stock_status'];\n\t      });\n\t      return;\n\t    }\n\t  };\n\t\n\t  scope.properties_to_inherit = ['price', 'sku', 'stock_level', 'stock_type', 'stock_status'\n\t  // Add here more props you want to override now!\n\t  // e.g. stock_level\n\t\n\t  ];\n\t\n\t  function transformVariantObject(o) {\n\t    var buf = [];\n\t    for (var k in o) {\n\t      buf.push({\n\t        name: k,\n\t        values: o[k].map(function (a) {\n\t          return a.text;\n\t        })\n\t      });\n\t    }\n\t    return buf;\n\t  }\n\t\n\t  function getArrayOfVariants(arrayOfVariants) {\n\t    if (arrayOfVariants.length === 0) {\n\t      return [];\n\t    }\n\t    if (arrayOfVariants.length === 1) {\n\t      var v = arrayOfVariants[0];\n\t      var buf = [];\n\t      v.values.forEach(function (e) {\n\t        var o = {};\n\t        o[v.name] = e;\n\t        buf.push(o);\n\t      });\n\t      return buf;\n\t    }\n\t    var output = arrayOfVariants.reduce(function (a, b) {\n\t      if (!(a instanceof Array)) {\n\t        // Se non è un array, è la prima botta di reduce,\n\t        // fatta con la prima variante (el 0 di arrayOfVariants)\n\t        var buf = [];\n\t        a.values.forEach(function (el_a) {\n\t          b.values.forEach(function (el_b) {\n\t            var o = {};\n\t            o[a.name] = el_a;\n\t            o[b.name] = el_b;\n\t            buf.push(o);\n\t          });\n\t        });\n\t        return buf;\n\t      } else {\n\t        // Se è un array, allora non è la prima botta di reduce\n\t        // Quindi per ogni elemento dell''array finale, aggiungo pezzi di variante\n\t        var buf = [];\n\t        b.values.forEach(function (el_b) {\n\t          // Ad ogni elemento dell array di varianti costruito al passo\n\t          // precedente aggiungo un pezzo di nuova variante\n\t          a.forEach(function (el_a) {\n\t            var o = JSON.parse(JSON.stringify(el_a));\n\t            o[b.name] = el_b;\n\t            buf.push(o);\n\t          });\n\t        });\n\t        return buf;\n\t      }\n\t    });\n\t    return output;\n\t  }\n\t\n\t  function attachInheritedProperties(variants) {\n\t    return variants.map(function (variant) {\n\t      console.log(\"ATTACHO LE INHERITED PROPERTIES DA \", angular.copy(scope.product));\n\t      scope.properties_to_inherit.forEach(function (i, index) {\n\t\n\t        if (scope.product[i]) {\n\t\n\t          variant[i] = scope.product[i];\n\t        }\n\t      });\n\t      return variant;\n\t    });\n\t  }\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.properties_to_inherit.indexOf(k) < 0 && k !== 'save') {\n\t        // The property k is not an inherited property but a variant\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t  };\n\t\n\t  // Return a subset of the object in which only variant related\n\t  // keys are kept\n\t  scope.filterVariantProps = function (o) {\n\t    var variantNames = scope.addedVariants2.map(function (v) {\n\t      return v.name;\n\t    });\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (variantNames.indexOf(k) > -1) {\n\t        // The property k is not an inherited property but a variant\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  /*\r\n\t    variants Array<{name :\"size\", values : [\"cl\",\"l\",\"s\"]}\r\n\t  */\n\t  function getArrayOfVariants2(variants) {\n\t    variants = variants.filter(function (v) {\n\t      return v.values.length > 0;\n\t    });\n\t\n\t    if (variants.length === 0) {\n\t      return [];\n\t    }\n\t\n\t    if (variants.length === 1) {\n\t      var result = [];\n\t      variants[0].values.forEach(function (v) {\n\t        var o = {};\n\t        o[variants[0].name] = v;\n\t        result.push(o);\n\t      });\n\t      return result;\n\t    }\n\t\n\t    var combine = function combine(v1, v2) {\n\t      var output = [];\n\t\n\t      // 2 cases, one is that v1 is a {name,values}\n\t      // other case is that v1 is the already created bag\n\t      // [{size:x, color : red}]\n\t      if (v1 instanceof Array) {\n\t        var _out = [];\n\t        v1.forEach(function (variant) {\n\t          v2.values.forEach(function (value) {\n\t            var o = angular.copy(variant);\n\t            o[v2.name] = value;\n\t            _out.push(o);\n\t          });\n\t        });\n\t        return _out;\n\t      }\n\t\n\t      v1.values.forEach(function (val1) {\n\t        v2.values.forEach(function (val2) {\n\t          var o = {};\n\t          o[v1.name] = val1;\n\t          o[v2.name] = val2;\n\t\n\t          output.push(o);\n\t        });\n\t      });\n\t      return output;\n\t    };\n\t\n\t    var counter = 0;\n\t    var out = [];\n\t\n\t    while (variants[counter + 1]) {\n\t      out = combine(variants[counter], variants[counter + 1]);\n\t      variants[counter + 1] = out;\n\t      counter++;\n\t    }\n\t\n\t    return out;\n\t  }\n\t\n\t  scope.deleteVariant = function (variantName, $index) {\n\t    scope.addedVariants2.splice($index, 1);\n\t    scope.updateVariantsConfiguration();\n\t  };\n\t\n\t  scope.addedVariants2 = [];\n\t  scope.addEmptyVariant = function () {\n\t    scope.addedVariants2.push({\n\t      name: '',\n\t      values: []\n\t    });\n\t  };\n\t\n\t  scope.updateVariantsConfiguration = function () {\n\t    // Transforming addedVariants2\n\t    scope.computedVariants = [];\n\t    scope.addedVariants = {};\n\t    scope.addedVariants2.forEach(function (variant) {\n\t      scope.addedVariants[variant.name] = variant.values.map(function (i) {\n\t        return i.text;\n\t      });\n\t\n\t      variant.values = variant.values.map(function (i) {\n\t        return i.text;\n\t      });\n\t    });\n\t\n\t    var temp_ComputedVariants = getArrayOfVariants2(angular.copy(scope.addedVariants2));\n\t\n\t    scope.computedVariants = temp_ComputedVariants;\n\t    scope.computedVariants = attachInheritedProperties(temp_ComputedVariants);\n\t\n\t    scope.computedVariants.forEach(function (v) {\n\t      v.save = true;\n\t    });\n\t\n\t    // Ricalcolo le variants definition, le added sono scope.addedVariants\n\t    scope.product.variantsDefinition = scope.addedVariants;\n\t  };\n\t\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-default', 'label-info', 'label-success', 'label-warning', 'label-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (overwrites) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    scope.product.variants = [];\n\t\n\t    // Custom properties and variants cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.Product.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t    var validation = Models.Product.validate(props_to_validate);\n\t\n\t    if (validation.valid === false) {\n\t      scope.errorField = validation.invalidPropertyName;\n\t\n\t      if (validation.failedValidator === 'required') {\n\t        scope.error = 'The ' + scope.errorField + ' field is required';\n\t      } else if (validation.failedValidator === 'min') {\n\t        if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n\t          scope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\n\t        } else {\n\t          scope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t        }\n\t      } else if (validation.failedValidator === 'max') {\n\t        if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n\t          scope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\n\t        } else {\n\t          scope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t        }\n\t      } else {\n\t        scope.error = 'The ' + scope.errorField + ' field has an invalid value (' + props_to_validate[scope.errorField] + ')';\n\t      }\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var variantsToSave = angular.copy(scope.computedVariants.filter(function (variant) {\n\t      return variant.save === true;\n\t    }).map(function (variant) {\n\t      var obj = angular.copy(scope.product);\n\t\n\t      // Removing useless stuff in the variant\n\t      delete obj['variants'];\n\t      delete obj['variantsDefinition'];\n\t      delete obj['is_master'];\n\t      delete obj['has_variants'];\n\t      delete obj['published'];\n\t\n\t      for (var k in variant) {\n\t        obj[k] = variant[k];\n\t      }\n\t\n\t      // Remove the flag used to distinguish\n\t      // between variants to save and not to save\n\t      delete variant['save'];\n\t\n\t      return obj;\n\t    }));\n\t\n\t    for (var k in overwrites) {\n\t      scope.product[k] = overwrites[k];\n\t    }\n\t\n\t    var categories = '';\n\t    scope.selectedCategories.forEach(function (category, idx) {\n\t      categories += category.category_id;\n\t\n\t      if (idx < scope.selectedCategories.length - 1) {\n\t        categories += ',';\n\t      }\n\t    });\n\t\n\t    if (categories.length > 0) {\n\t      scope.product.categories = categories;\n\t    }\n\t\n\t    $marketcloud.products.save(scope.product).then(function (response) {\n\t      // Now i must save variants.\n\t\n\t      // Ogni variante deve essere pretrattata\n\t      // Ad esempio devo aggiungere il campo is_variant e images\n\t      /* if ('undefined' !== mixpanel)\r\n\t        mixpanel.track('products.create') */\n\t\n\t      var savedProduct = response.data.data;\n\t\n\t      $http({\n\t        method: 'POST',\n\t        url: API_BASE_URL + '/products/' + savedProduct.id + '/variants',\n\t        data: variantsToSave,\n\t        headers: {\n\t          Authorization: window.public_key + ':' + window.token\n\t        }\n\t      }).then(function (response) {\n\t        notie.alert(1, 'Product successfully created', 1);\n\t        location.path('/products');\n\t      }).catch(function (response) {\n\t        notie.alert(2, 'An error has occurred. Variants not saved', 1);\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditSimpleProductController', EditSimpleProductController);\n\t\n\t  EditSimpleProductController.$inject = ['$scope', '$marketcloud', 'product', '$http', '$utils', '$validation'];\n\t\n\t  function EditSimpleProductController(scope, $marketcloud, product, $http, $utils, $validation) {\n\t    // Injecting resolve data into the controller\n\t    scope.product = product.data.data;\n\t\n\t    // This will hold custom properties for further processing\n\t    scope.customPropertiesData = {};\n\t\n\t    // Should we be able to edit the slug? this is a on/off\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.selectedCategories = [];\n\t\n\t    if (scope.product.categories && scope.product.categories.length) {\n\t      var cats = scope.product.categories.split(',');\n\t      var promises = [];\n\t      cats.forEach(function (categoryId) {\n\t        promises.push($marketcloud.categories.list({\n\t          id: categoryId\n\t        }));\n\t      });\n\t\n\t      Promise.all(promises).then(function (response) {\n\t        response.forEach(function (res) {\n\t          if (res.data.data[0]) {\n\t            var category = {\n\t              category_id: res.data.data[0].id,\n\t              text: res.data.data[0].path\n\t            };\n\t            scope.selectedCategories.push(category);\n\t          }\n\t        });\n\t      });\n\t    }\n\t\n\t    // Listening to category selector events\n\t    scope.$on('selectedCategory', function (event, data) {\n\t      var categoryId = data.category_id;\n\t\n\t      if (scope.selectedCategories.map(function (cat) {\n\t        return cat.category_id;\n\t      }).indexOf(categoryId) === -1) {\n\t        scope.selectedCategories.push(data);\n\t      }\n\t    });\n\t\n\t    // mapping non-core attributes into scope.customPropertiesData\n\t    var coreProperties = Models.Product.getPropertyNames();\n\t\n\t    scope.schema = Models.Product.schema;\n\t\n\t    coreProperties.push('id', 'currencies', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t    'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.updateSlug = function () {\n\t      scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t    };\n\t\n\t    scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n\t      var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\n\t\n\t      // We ensure that the indexes exist\n\t      if (fromIndex > target.length - 1) {\n\t        return;\n\t      }\n\t\n\t      // First we remove the element to move\n\t      target.splice(fromIndex, 1);\n\t\n\t      // Then we add it to the desired position\n\t      target.splice(toIndex, 0, toMove);\n\t    };\n\t\n\t    // This method must be implemented in order to\n\t    // make the media manager work\n\t    scope.getImagesContainer = function () {\n\t      return scope.product.images;\n\t    };\n\t\n\t    scope.removeImage = function (i) {\n\t      scope.product.images.splice(i, 1);\n\t    };\n\t\n\t    scope.setMainCategoryToLast = function () {\n\t\n\t      if (scope.selectedCategories.length > 0) {\n\t        scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id;\n\t      } else {\n\t        scope.product.category_id = null;\n\t      }\n\t    };\n\t\n\t    scope.newAttribute = {\n\t      name: null,\n\t      value: null,\n\t      type: null\n\t    };\n\t    scope.newAttribute.type = 'string';\n\t    scope.availableTypes = [{\n\t      name: 'String',\n\t      value: 'string'\n\t    }, {\n\t      name: 'Number',\n\t      value: 'number'\n\t    }, {\n\t      name: 'Boolean',\n\t      value: 'boolean'\n\t    }];\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.updateProduct = function () {\n\t      // let's re-assemble the product first.\n\t      for (var k in scope.customPropertiesData) {\n\t        scope.product[k] = scope.customPropertiesData[k];\n\t      }\n\t\n\t      switch (scope.product.stock_type) {\n\t        case 'status':\n\t          delete scope.product.stock_level;\n\t          break;\n\t\n\t        case 'track':\n\t          delete scope.product.stock_status;\n\t          break;\n\t      }\n\t\n\t      var categories = '';\n\t      scope.selectedCategories.forEach(function (category, idx) {\n\t        categories += category.category_id;\n\t\n\t        if (idx < scope.selectedCategories.length - 1) {\n\t          categories += ',';\n\t        }\n\t      });\n\t\n\t      scope.product.categories = categories;\n\t\n\t      $marketcloud.products.update(scope.product.id, scope.product).then(function (response) {\n\t        notie.alert(1, 'Update Succeded', 1.5);\n\t      }).catch(function (error) {\n\t        console.log(\"erore\", error);\n\t        if (400 === error.status) {\n\t\n\t          notie.alert(2, 'Please check the data you entered', 1.5);\n\t\n\t          var validation = error.data.errors[0];\n\t          var invalidPropertyName = \"product.\" + validation.invalidPropertyName;\n\t\n\t          var element = angular.element('[ng-model=\"' + invalidPropertyName + '\"]').parent();\n\t\n\t          $validation.showErrorMessage(validation, '[ng-model=\"' + invalidPropertyName + '\"]');\n\t        } else notie.alert(3, 'Update failed', 1.5);\n\t      });\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewSimpleProductController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$models', function (scope, $http, location, $marketcloud, $utils, Models) {\n\t  scope.error = null;\n\t\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  scope.selectedCategories = [];\n\t\n\t  scope.validation = {\n\t    valid: true\n\t\n\t    // Listening to category selector events\n\t  };scope.$on('selectedCategory', function (event, data) {\n\t    var categoryId = data.category_id;\n\t\n\t    if (scope.selectedCategories.map(function (cat) {\n\t      return cat.category_id;\n\t    }).indexOf(categoryId) === -1) {\n\t      scope.selectedCategories.push(data);\n\t    }\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  console.log(\"Cerco qui le core propseties\", Models.Product, Models);\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t  'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t  scope.product = {\n\t    price: null,\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    images: [],\n\t    media: [],\n\t    published: false,\n\t    type: 'simple_product'\n\t\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.applyTemplate = function (product) {\n\t    var tpl = angular.copy(product);\n\t\n\t    delete tpl['id'];\n\t\n\t    scope.product = tpl;\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.query = {\n\t    // The product must be simple_product as this\n\t    type: 'simple_product'\n\t  };\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  // Loading products right away\n\t  scope.loadProducts();\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.properties_to_inherit = ['price', 'sku', 'stock_level', 'stock_type', 'stock_status'\n\t  // Add here more props you want to override now!\n\t  // e.g. stock_level\n\t\n\t  ];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.setMainCategoryToLast = function () {\n\t\n\t    if (scope.selectedCategories.length > 0) {\n\t      scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id;\n\t    } else {\n\t      scope.product.category_id = null;\n\t    }\n\t  };\n\t\n\t  scope.saveProduct = function (overwrites) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // this scope properti is bound to the error-message component\n\t    // TODO schematic needs custom validator, so i can do something like\n\t\n\t    scope.validation = Models.Product.validate(scope.product);\n\t\n\t    if (scope.validation.valid === false) {\n\t      return;\n\t    }\n\t\n\t    var categories = '';\n\t    scope.selectedCategories.forEach(function (category, idx) {\n\t      categories += category.category_id;\n\t\n\t      if (idx < scope.selectedCategories.length - 1) {\n\t        categories += ',';\n\t      }\n\t    });\n\t\n\t    if (categories.length > 0) {\n\t      scope.product.categories = categories;\n\t    }\n\t\n\t    for (var kk in scope.customPropertiesData) {\n\t      scope.product[kk] = scope.customPropertiesData[kk];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    for (var k in overwrites) {\n\t      scope.product[k] = overwrites[k];\n\t    }\n\t\n\t    $marketcloud.products.save(scope.product).then(function (response) {\n\t      notie.alert(1, 'Product saved successfully.', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (error) {\n\t\n\t      if (error.status === 400) {\n\t        scope.validation = error.data.errors[0];\n\t        return;\n\t      }\n\t\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditPromotionController', ['$scope', '$http', '$marketcloud', 'promotion', function (scope, http, $marketcloud, promotion) {\n\t  scope.promotion = promotion.data.data;\n\t  // Initializing stuff\n\t  scope.newCondition = {};\n\t  scope.newEffect = {};\n\t\n\t  scope.save = function () {\n\t    scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion);\n\t    if (scope.$promotionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    $marketcloud.promotions.update(scope.promotion.id, scope.promotion).then(function (response) {\n\t      notie.alert(1, 'Promotion saved', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Promotion not saved', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition);\n\t    if (scope.$newConditionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.removeCondition = function (i) {\n\t    scope.promotion.conditions.splice(i, 1);\n\t  };\n\t  scope.removeEffect = function (i) {\n\t    scope.promotion.effects.splice(i, 1);\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect);\n\t\n\t    if (scope.$newEffectValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t}]);\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewPromotionController', ['$scope', '$http', '$marketcloud', '$location', function (scope, http, $marketcloud, location) {\n\t  // Defaults\n\t  scope.promotion = {\n\t    name: null,\n\t    conditions: [],\n\t    effects: [],\n\t    active: false,\n\t    priority: 0\n\t  };\n\t  scope.newCondition = {};\n\t  scope.newEffect = {};\n\t\n\t  scope.save = function () {\n\t    scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion);\n\t    if (scope.$promotionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    $marketcloud.promotions.save(scope.promotion).then(function (response) {\n\t      notie.alert(1, 'Promotion saved', 1.5);\n\t      location.path('/promotions');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Promotion not saved', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition);\n\t    if (scope.$newConditionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.removeCondition = function (i) {\n\t    scope.promotion.conditions.splice(i, 1);\n\t  };\n\t  scope.removeEffect = function (i) {\n\t    scope.promotion.effects.splice(i, 1);\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect);\n\t\n\t    if (scope.$newEffectValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t}]);\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ListResourcesController', ['$scope', 'resources', 'resourceName', '$q', '$marketcloud', 'dependencies', '$utils', function (scope, resources, resource_name, $q, $marketcloud, $dependencies, $utils) {\n\t  scope.resources = resources.data.data;\n\t  scope.dependencies = {};\n\t\n\t  scope.$dependencies = $dependencies;\n\t\n\t  scope.pagination = $utils.getPaginationFromHTTPResponse(resources);\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    for (var k in scope.query) {\n\t      if (_typeof(scope.query[k]) === 'object' && scope.query[k].hasOwnProperty('$regex')) {\n\t        scope.query[k]['$options'] = 'i';\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    scope.resources.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.resources.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.update = function (id, update) {\n\t    return $marketcloud[resource_name].update(id, update).then(function (response) {\n\t      notie.alert(1, 'Item updated.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud[resource_name].delete(item.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadData();\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t  scope.bulkUpdate = function (update) {\n\t    notie.confirm('Update ' + scope.getSelectedItems().length + ' items?', 'Update', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud[resource_name].update(item.id, update));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been updated', 1.5);\n\t        scope.loadData();\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.resources);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.toggle = function (resource) {\n\t    $marketcloud[resource_name].update(resource.id, resource).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.resetQuery = function () {\n\t    var currentPage = scope.query.page || 1;\n\t    scope.query = {\n\t      per_page: 20,\n\t      page: currentPage\n\t    };\n\t  };\n\t  scope.loadData = function (query) {\n\t\n\t    if (query) {\n\t      if (\"object\" !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new TypeError(\"loadData(query) query must be an object of filters\");\n\t\n\t      for (var k in query) {\n\t        scope.query[k] = query[k];\n\t      }\n\t    }\n\t\n\t    if ($dependencies.queryOverrides) {\n\t      for (var k in $dependencies.queryOverrides) {\n\t        scope.query[k] = $dependencies.queryOverrides[k];\n\t      }\n\t    }\n\t\n\t    return $marketcloud[resource_name].list(scope.query).then(function (response) {\n\t\n\t      scope.resources = response.data.data;\n\t\n\t      scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (resource_id, index) {\n\t    $marketcloud[resource_name].delete(resource_id).then(function (response) {\n\t      scope.loadData();\n\t      notie.alert(1, 'Item deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                        DUPLICATE\r\n\t   **************************************************************/\n\t  scope.clone = function (instance) {\n\t\n\t    var toSave = angular.copy(instance);\n\t    delete toSave.id;\n\t    delete toSave._id;\n\t\n\t    if (toSave.name) toSave.name += ' (Copy)';else if (toSave.title) toSave.title += ' (Copy)';\n\t\n\t    $marketcloud[resource_name].save(toSave).then(function (response) {\n\t      scope.loadData();\n\t      notie.alert(1, \"Item successfully cloned\", 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SettingsController', ['$scope', '$http', 'Currencies', 'Timezones', 'Countries', '$application', function (scope, http, currencies, timezones, countries, $application) {\n\t  scope.countries = countries;\n\t  scope.timezones = timezones;\n\t  scope.application = $application.get();\n\t\n\t  scope.images = [];\n\t\n\t  scope.application.apply_discounts_before_taxes = Boolean(scope.application.apply_discounts_before_taxes);\n\t\n\t  scope.currencies = Object.keys(currencies).map(function (c) {\n\t    return currencies[c];\n\t  }).map(function (c) {\n\t    c.label = c.name + ' (' + c.symbol + ')';\n\t    return c;\n\t  }).sort(function (a, b) {\n\t    a = a.name;\n\t    b = b.name;\n\t    if (a > b) {\n\t      return 1;\n\t    } else if (b > a) {\n\t      return -1;\n\t    } else {\n\t      return 0;\n\t    }\n\t  });\n\t\n\t  scope.tax_options = [{\n\t    value: 'nothing',\n\t    label: 'Don\\'t tax'\n\t  }, {\n\t    value: 'products_only',\n\t    label: 'Tax products only'\n\t  }, {\n\t    value: 'shipping_only',\n\t    label: 'Tax shipping only'\n\t  }, {\n\t    value: 'all',\n\t    label: 'Tax shipping and products'\n\t  }];\n\t\n\t  scope.refreshApplicationData = function () {\n\t    $http({\n\t      url: '/applications/list/' + Number(scope.application.id),\n\t      method: 'GET'\n\t    }).then(function (response) {\n\t      $application.set(response.data.data);\n\t    }).catch(function (error) {\n\t      notie.alert(3, \"An error has occurred while reloading application's data. Refreshing the page...\");\n\t      window.location.reload();\n\t    });\n\t  };\n\t\n\t  scope.updateSettings = function () {\n\t    var payload = {\n\t      name: scope.application.name,\n\t      url: scope.application.url,\n\t      timezone: scope.application.timezone,\n\t      currency_code: scope.application.currency_code,\n\t      tax_rate: scope.application.tax_rate,\n\t      tax_type: scope.application.tax_type,\n\t      apply_discounts_before_taxes: scope.application.apply_discounts_before_taxes,\n\t      email_address: scope.application.email_address,\n\t      company_name: scope.application.company_name,\n\t      company_taxid: scope.application.company_taxid,\n\t      company_country: scope.application.company_country,\n\t      company_state: scope.application.company_state,\n\t      company_city: scope.application.company_city,\n\t      company_address: scope.application.company_address,\n\t      company_postalcode: scope.application.company_postalcode,\n\t      invoices_prefix: scope.application.invoices_prefix,\n\t      es_weights: scope.application.es_weights\n\t    };\n\t\n\t    if (scope.images.length >= 1) {\n\t      payload.logo = scope.images[0];\n\t    }\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: window.API_BASE_URL + '/application',\n\t      data: payload,\n\t      headers: {\n\t        'Content-Type': 'application/json',\n\t        'Authorization': window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Application successfully updated', 1);\n\t    }).catch(function (err) {\n\t      notie.alert(3, 'An error has occurred.');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tvar controller = null;\n\tapp.controller('EditShippingController', ['$scope', '$http', '$location', 'Countries', 'shipping', '$marketcloud', '$validation', '$models', function (scope, http, location, countries, shippingRequest, $marketcloud, $validation, $models) {\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function () {\n\t    var o = {};\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(scope.shipping[k]);\n\t      }\n\t    }\n\t    return o;\n\t  };\n\t\n\t  scope.howManyRules = function (o) {\n\t    var count = 0;\n\t\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        count++;\n\t      }\n\t    }\n\t    return count;\n\t  };\n\t\n\t  scope.countries = angular.copy(countries);\n\t  scope.countries.unshift({\n\t    name: 'All countries',\n\t    code: 'ALL'\n\t  }, {\n\t    name: 'Europe',\n\t    code: 'EUROPE'\n\t  });\n\t\n\t  scope.shipping = {\n\t    availability: 'ALL',\n\t    base_cost: 0,\n\t    per_item_cost: 0,\n\t    zones: []\n\t  };\n\t\n\t  scope.shipping = shippingRequest.data.data;\n\t\n\t  scope.shipping.zones = scope.shipping.zones || [];\n\t\n\t  scope.newRule = {};\n\t  scope.addRule = function () {\n\t    scope.shipping[scope.newRule.name] = scope.newRule.value;\n\t\n\t    scope.newRule = {};\n\t  };\n\t\n\t  scope.removeRule = function (name) {\n\t    scope.shipping[name] = null;\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.newZone = {};\n\t  scope.addZone = function () {\n\t    scope.shipping.zones.push(scope.newZone);\n\t    scope.newZone = null;\n\t  };\n\t  scope.removeZone = function ($index) {\n\t    scope.shipping.zones.splice($index, 1);\n\t  };\n\t\n\t  scope.updateShipping = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.shippings.update(scope.shipping.id, scope.shipping).then(function (response) {\n\t      notie.alert(1, 'Shipping updated', 2);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"shipping.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Shipping.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ShippingsController', ['$scope', '$http', '$location', 'Countries', 'shippings', '$marketcloud', '$utils', function (scope, http, location, countries, shippings, $marketcloud, $utils) {\n\t\n\t  scope.shippings = shippings.data.data;\n\t\n\t  scope.countries = countries;\n\t\n\t  scope.pagination = $utils.getPaginationFromHTTPResponse(shippings);\n\t\n\t  // Holding query fields\n\t  // When listing data this oobject is sent\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function (shipping) {\n\t    var o = {};\n\t    for (var k in shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(shipping[k]);\n\t      }\n\t    }\n\t\n\t    console.log(\"Le shipping rules\", o);\n\t    return o;\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.loadData = function () {\n\t    if (scope.query.q === '') {\n\t      delete scope.query.q;\n\t    }\n\t\n\t    return $marketcloud.shippings.list(scope.query).then(function (response) {\n\t      scope.shippings = response.data.data;\n\t      scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n\t    }).error(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteShipping = function (id) {\n\t    $marketcloud.shippings.delete(id).then(function (response) {\n\t      notie.alert(1, 'Shipping method successfully deleted', 1.5);\n\t      scope.loadPage();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\r\n\t   *                        DUPLICATE\r\n\t   **************************************************************/\n\t  scope.clone = function (shippingRule) {\n\t    console.log(\"Cloning\");\n\t\n\t    var toSave = angular.copy(shippingRule);\n\t    delete shippingRule.id;\n\t    delete toSave._id;\n\t\n\t    toSave.name += ' (Copy)';\n\t\n\t    $marketcloud.shippings.save(toSave).then(function (response) {\n\t      scope.loadPage();\n\t      notie.alert(1, \"Shipping rule successfully cloned\", 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateShippingController', ['$scope', '$http', '$location', 'Countries', '$marketcloud', '$validation', '$models', function (scope, http, location, countries, $marketcloud, $validation, $models) {\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function () {\n\t    var o = {};\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(scope.shipping[k]);\n\t      }\n\t    }\n\t    return o;\n\t  };\n\t  scope.howManyRules = function (o) {\n\t    var count = 0;\n\t\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        count++;\n\t      }\n\t    }\n\t    return count;\n\t  };\n\t\n\t  scope.countries = angular.copy(countries);\n\t\n\t  scope.filterCountries = function (query) {\n\t    var data = scope.countries.filter(function (country) {\n\t      return country.name.indexOf(query) > -1;\n\t    }).sort(function (a, b) {\n\t      return a.name > b.name;\n\t    });\n\t    return {\n\t      data: data\n\t    };\n\t  };\n\t\n\t  // Adding a handy \"all\" destination\n\t  scope.countries.unshift({\n\t    name: 'All countries',\n\t    code: 'ALL'\n\t  });\n\t\n\t  scope.shipping = {\n\t    name: '',\n\t    base_cost: 0,\n\t    per_item_cost: 0,\n\t    zones: []\n\t  };\n\t\n\t  scope.newRule = {};\n\t  scope.addRule = function () {\n\t    scope.shipping[scope.newRule.name] = scope.newRule.value;\n\t\n\t    scope.newRule = {};\n\t  };\n\t\n\t  scope.removeRule = function (name) {\n\t    delete scope.shipping[name];\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.newZone = {};\n\t  scope.addZone = function () {\n\t    scope.shipping.zones.push(scope.newZone);\n\t    scope.newZone = null;\n\t  };\n\t  scope.removeZone = function ($index) {\n\t    scope.shipping.zones.splice($index, 1);\n\t  };\n\t\n\t  scope.saveShipping = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.shippings.save(scope.shipping).then(function (response) {\n\t      notie.alert(1, 'Shipping saved.', 1.5);\n\t      location.path('/shippings');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"shipping.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Shipping.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SidebarController', ['$scope', '$http', '$routeParams', '$location', '$rootScope', '$route', function ($scope, $http, $params, $location, $root, $route) {\n\t  $scope.showingSubSidebar = false;\n\t\n\t  $scope.currentSidebarSection = null;\n\t\n\t  $scope.currentSection = null;\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    if (args.section) {\n\t      $scope.currentSection = args.section.split('.')[0];\n\t\n\t      $root.currentSection = args.section.split('.')[0];\n\t      $root.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n\t        $scope.hideSubSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.switchToApp = function (app_id) {\n\t    var current_app_id = window.current_application.id;\n\t    // We just need to swap the current urls with the desired app id\n\t    var url = '/applications/' + app_id + '/dashboard#/';\n\t\n\t    window.location.href = url;\n\t  };\n\t\n\t  $scope.subEntriesGroupToShow = null;\n\t\n\t  $scope.subSideBars = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t  $scope.showSubEntries = function (id) {\n\t    $scope.subEntriesGroupToShow = id;\n\t  };\n\t\n\t  $scope.subEntriesGroupShown = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t\n\t  $scope.toggleSubEntries = function (group_id) {\n\t    // group_id is the name of the dashboard section\n\t    // a section is a group of logical views\n\t    // e.g. inventory is a group of views related to inventory management\n\t    $scope.currentSection = group_id;\n\t\n\t    $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id];\n\t  };\n\t  $scope.showSubSidebar = function (id) {\n\t    $scope.showingSubSidebar = true;\n\t\n\t    var sidebars = ['inventory', 'system', 'contents'];\n\t\n\t    if (sidebars.indexOf(id) < 0) {\n\t      return false;\n\t    }\n\t\n\t    $scope.currentSidebarSection = id;\n\t  };\n\t\n\t  $scope.hideSubSidebar = function () {\n\t    $scope.showingSubSidebar = false;\n\t  };\n\t}]);\n\t\n\tapp.controller('NavbarController', ['$scope', '$http', '$routeParams', '$location', function ($scope, $http, $params, $location) {}]);\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateStaticContentController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, location, $marketcloud, $utils, $validation, $models) {\n\t\n\t  scope.content = {\n\t    name: '',\n\t    content: ''\n\t\n\t    // This function is invoked when a seo property\n\t    // changes.\n\t  };scope.computeSeoTags = function () {};\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t  scope.saveContent = function () {\n\t    $validation.hideErrors();\n\t    $marketcloud.staticContents.save(scope.content).then(function (response) {\n\t      // title text author\n\t      notie.alert(1, 'Static content saved', 2);\n\t      location.path('/contents/static');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.StaticContent.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditStaticContentController', ['$scope', '$http', 'content', '$location', '$marketcloud', 'moment', '$utils', '$validation', '$models', function (scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n\t  scope.content = content.data.data;\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.updateContent = function () {\n\t    $marketcloud.staticContents.update(scope.content.id, scope.content).then(function (response) {\n\t      notie.alert(1, 'Content updated with success', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.StaticContent.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditTaxController', ['$scope', '$http', '$marketcloud', '$location', 'Countries', 'tax', 'TaxRates', '$validation', '$models', function (scope, http, $marketcloud, location, countries, tax, tax_rates, $validation, $models) {\n\t\n\t  scope.tax_rates = tax_rates;\n\t\n\t  scope.countriesWithTaxRates = scope.tax_rates.map(function (r) {\n\t    return r.country;\n\t  }).filter(function (item, pos, self) {\n\t    return self.indexOf(item) == pos;\n\t  });\n\t\n\t  scope.countries = countries;\n\t  scope.countries.unshift({\n\t    name: '*'\n\t  });\n\t\n\t  // Cache of states lists\n\t  scope.states = {};\n\t\n\t  // Whenever the country changes,\n\t  // the list of states must be updated\n\t  scope.tax = tax.data.data;\n\t\n\t  scope.addRate = function () {\n\t    scope.tax.rates.push({\n\t      name: '',\n\t      country: '',\n\t      state: '',\n\t      postcode: '',\n\t      city: '',\n\t      rate: 0,\n\t      priority: 0\n\t    });\n\t  };\n\t\n\t  scope.deleteRate = function (index) {\n\t    scope.tax.rates.splice(index, 1);\n\t  };\n\t\n\t  scope.updateCity = function (rate) {\n\t    if (rate.postcode.indexOf('*') > -1) {\n\t      rate.city = '*';\n\t    }\n\t  };\n\t  scope.updatePostcode = function (rate) {\n\t    if (rate.state === '*') {\n\t      rate.postcode = '*';\n\t    }\n\t  };\n\t\n\t  scope.updateStates = function (rate) {\n\t    if (rate.country === '*') {\n\t      rate.state = '*';\n\t      rate.city = '*';\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + rate.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.states[rate.country] = response.data;\n\t      scope.states[rate.country].unshift({\n\t        name: '*'\n\t      });\n\t    }).catch(function (error) {\n\t      var type = error.data.errors[0].type;\n\t      scope.states[rate.country] = [{\n\t        name: '*'\n\t      }];\n\t\n\t      // We show an empty text input if its not available\n\t      // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\t\n\t      if (type !== 'StatesListNotAvailable') {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.saveTax = function () {\n\t    $marketcloud.taxes.update(scope.tax.id, scope.tax).then(function (response) {\n\t      notie.alert(1, 'Tax saved', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Tax.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.directive('customOnChange', function () {\n\t  return {\n\t    restrict: 'A',\n\t    link: function link(scope, element, attrs) {\n\t      var onChangeHandler = scope.$eval(attrs.customOnChange);\n\t      element.bind('change', onChangeHandler);\n\t    }\n\t  };\n\t});\n\t\n\tfunction csvToJson(csv) {\n\t  var lines = csv.split('\\n');\n\t\n\t  var result = [];\n\t\n\t  var headers = lines[0].split(',');\n\t\n\t  for (var i = 1; i < lines.length; i++) {\n\t    var obj = {};\n\t    var currentline = lines[i].split(',');\n\t\n\t    for (var j = 0; j < headers.length; j++) {\n\t      obj[headers[j]] = currentline[j];\n\t    }\n\t\n\t    result.push(obj);\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\tfunction validateTaxRates(rates) {\n\t  var testFunction = function testFunction(rate) {\n\t    return rate.country && rate.state && rate.postcode && rate.city && rate.rate && rate.hasOwnProperty('priority') // it can be 0 and would fail the simple test\n\t    ;\n\t  };\n\t\n\t  // Check that every item pass the test function\n\t  return rates.every(testFunction);\n\t}\n\t\n\tfunction Rate(config) {\n\t  this.state = '*';\n\t  this.postcode = '*';\n\t  this.city = '*';\n\t  this.priority = 0;\n\t\n\t  for (var k in config) {\n\t    this[k] = config[k];\n\t  }\n\t\n\t  // We store rates as strings in our default country list\n\t  if (this.rate) {\n\t    this.rate = Number(this.rate);\n\t  }\n\t}\n\t\n\tapp.controller('CreateTaxController', ['$scope', '$http', '$marketcloud', '$location', 'Countries', 'TaxRates', '$validation', '$models', function (scope, http, $marketcloud, location, countries, tax_rates, $validation, $models) {\n\t  scope.countries = countries;\n\t  scope.tax_rates = tax_rates;\n\t\n\t  scope.countriesWithTaxRates = scope.tax_rates.map(function (r) {\n\t    return r.country;\n\t  }).filter(function (item, pos, self) {\n\t    return self.indexOf(item) == pos;\n\t  });\n\t\n\t  scope.countries.unshift({\n\t    name: '*'\n\t  });\n\t\n\t  // Cache of states lists\n\t  scope.states = {};\n\t\n\t  // Whenever the country changes,\n\t  // the list of states must be updated\n\t  scope.tax = {\n\t    rates: []\n\t  };\n\t\n\t  scope.updateCity = function (rate) {\n\t    if (rate.postcode.indexOf('*') > -1) {\n\t      rate.city = '*';\n\t    }\n\t  };\n\t  scope.updatePostcode = function (rate) {\n\t    if (rate.state === '*') {\n\t      rate.postcode = '*';\n\t    }\n\t  };\n\t\n\t  scope.importCSV = function () {\n\t    $('#chooseFileButton').trigger('click');\n\t  };\n\t  scope.handleFileSelect = function (evt) {\n\t    var files = $('#chooseFileButton')[0].files; // FileList object\n\t\n\t    // use the 1st file from the list\n\t    var f = files[0];\n\t\n\t    // HTML5 API\n\t    var reader = new FileReader();\n\t\n\t    // Closure to capture the file information.\n\t    reader.onload = function (theFile) {\n\t      return function (e) {\n\t        // Grabbing the file\n\t        var csv_file = e.target.result;\n\t\n\t        // Converting to JSON\n\t        var new_rates = csvToJson(csv_file);\n\t\n\t        if (validateTaxRates(new_rates) === false) {\n\t          notie.alert(2, 'The provided CSV file is not in a valid format', 2);\n\t          return;\n\t        }\n\t\n\t        // Transforming into a Rate object to handle defaults\n\t        new_rates = new_rates.map(function (rate) {\n\t          return new Rate(rate);\n\t        });\n\t\n\t        // Pushing new stuff to the bottom\n\t        scope.tax.rates = scope.tax.rates.concat(new_rates);\n\t\n\t        // Calling apply, since Angular is not aware of this async operation\n\t        scope.$apply();\n\t      };\n\t    }(f);\n\t\n\t    // Read in the image file as a data URL.\n\t    reader.readAsText(f);\n\t  };\n\t\n\t  scope.loadRatesFromCountry = function (country) {\n\t    var new_rates = scope.tax_rates.filter(function (rate) {\n\t      return rate.country === country;\n\t    }).map(function (rate) {\n\t      rate.country = country;\n\t      return new Rate(rate);\n\t    });\n\t    scope.tax.rates = scope.tax.rates.concat(new_rates);\n\t  };\n\t\n\t  scope.updateStates = function (rate) {\n\t    if (rate.country === '*') {\n\t      rate.state = '*';\n\t      rate.city = '*';\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + rate.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.states[rate.country] = response.data;\n\t      scope.states[rate.country].unshift({\n\t        name: '*'\n\t      });\n\t    }).catch(function (error) {\n\t      var type = error.data.errors[0].type;\n\t      scope.states[rate.country] = '*';\n\t\n\t      // We show an empty text input if its not available\n\t      // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\t\n\t      if (type !== 'StatesListNotAvailable') {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addRate = function () {\n\t    scope.tax.rates.push({\n\t      name: '',\n\t      country: '',\n\t      state: '',\n\t      postcode: '',\n\t      city: '',\n\t      rate: 0,\n\t      priority: 0\n\t    });\n\t  };\n\t\n\t  scope.deleteRate = function (index) {\n\t    scope.tax.rates.splice(index, 1);\n\t  };\n\t\n\t  scope.saveTax = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.taxes.save(scope.tax).then(function (response) {\n\t      notie.alert(1, 'Tax saved', 1.5);\n\t      location.path('/system/taxes');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Tax.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\tJSON.flatten = function (data) {\n\t\tvar result = {};\n\t\tfunction recurse(cur, prop) {\n\t\t\tif (Object(cur) !== cur) {\n\t\t\t\tresult[prop] = cur;\n\t\t\t} else if (Array.isArray(cur)) {\n\t\t\t\tfor (var i = 0, l = cur.length; i < l; i++) {\n\t\t\t\t\trecurse(cur[i], prop + \"[\" + i + \"]\");\n\t\t\t\t}if (l == 0) result[prop] = [];\n\t\t\t} else {\n\t\t\t\tvar isEmpty = true;\n\t\t\t\tfor (var p in cur) {\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\trecurse(cur[p], prop ? prop + \".\" + p : p);\n\t\t\t\t}\n\t\t\t\tif (isEmpty && prop) result[prop] = {};\n\t\t\t}\n\t\t}\n\t\trecurse(data, \"\");\n\t\treturn result;\n\t};\n\tapp.controller('TranslationsController', ['$scope', 'resource', 'resourceType', function (scope, resource, type) {\n\t\n\t\t// The resource to translate\n\t\tscope.resource = resource.data.data;\n\t\t// Init locales\n\t\tif (!scope.resource.hasOwnProperty('locales')) {\n\t\t\tscope.resource.locales = {};\n\t\t\tscope.availableLocales.forEach(function (locale) {\n\t\t\t\tscope.resource.locales[locale] = {};\n\t\t\t});\n\t\t} else {\n\t\t\t// Let''s just be sure the locals object has every locale \n\t\t\t// initialized to an empty object\n\t\t\tscope.availableLocales.forEach(function (locale) {\n\t\t\t\tif (!scope.resource.locales.hasOwnProperty(locale)) scope.resource.locales[locale] = {};\n\t\t\t});\n\t\t}\n\t\n\t\t// The type of the resource, product, category, etc...\n\t\tscope.type = type;\n\t\n\t\tscope.getTranslatableProperties = function () {\n\t\t\treturn Object.keys(JSON.flatten(scope.resource)).filter(function (k) {\n\t\t\t\treturn k.indexOf('variant') === -1 && k.indexOf('locale') === -1;\n\t\t\t});\n\t\t};\n\t\n\t\tscope.translatables = scope.getTranslatableProperties();\n\t\n\t\tvar props_to_translate = {\n\t\t\tproducts: [\"name\", \"description\"],\n\t\t\tcategories: [\"name\", \"description\"],\n\t\t\tbrands: [\"name\", \"description\"],\n\t\t\tcollections: [\"name\", \"description\"]\n\t\t};\n\t\n\t\tscope.save = function () {};\n\t}]);\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('UsersController', ['$scope', '$marketcloud', 'users', function (scope, $marketcloud, resources) {\n\t  scope.users = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t\n\t    // Util\n\t  };scope.timestampToDate = function (t) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    var str = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t    return str;\n\t  };\n\t\n\t  scope.loadPage = function (p) {\n\t    scope.query.page = Number(p);\n\t    return scope.loadData(scope.query);\n\t  };\n\t\n\t  scope.delete = function (user) {\n\t    $marketcloud.users.delete(user.id).then(function (response) {\n\t      notie.alert(1, 'User deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.users.list(query).then(function (response) {\n\t      scope.users = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tvar NewUserController = function NewUserController(scope, $marketcloud, http, location, Countries) {\n\t  scope.user = {\n\t    name: \"\",\n\t    password: \"\",\n\t    registered_with: 'email',\n\t    billing_address: {},\n\t    shipping_address: {}\n\t  };\n\t  scope.countries = Countries;\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.copyShippingAddressToBillingAddress = function () {\n\t    for (var k in scope.user.shipping_address) {\n\t      scope.user.billing_address[k] = scope.user.shipping_address[k];\n\t    }\n\t  };\n\t\n\t  scope.saveUser = function () {\n\t\n\t    // Joining user object with custom properties\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.user[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    console.log(\"Saving this\", scope.user);\n\t    $marketcloud.users.save(scope.user).then(function (response) {\n\t      notie.alert(1, 'User saved', 2);\n\t      location.path('/users');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Please check the data you entered', 2);\n\t    });\n\t  };\n\t\n\t  // We need to load Roles\n\t  http({\n\t    method: 'GET',\n\t    url: '/applications/' + scope.application.id + '/roles'\n\t  }).then(function (response) {\n\t    scope.roles = response.data.data;\n\t  }).catch(function (response) {\n\t    notie.alert(2, 'An error has occurred while reloading roles.', 1);\n\t  });\n\t\n\t  scope.addCustomProperty = function () {\n\t    if (scope.user.hasOwnProperty(scope.newAttributeName)) {\n\t      scope.userError = 'CUSTOM_PROPERTY_NAME_ALREADY_EXISTS';\n\t    } else {\n\t      scope.customPropertiesData[scope.newAttributeName] = scope.newAttributeValue;\n\t      scope.newAttributeValue = null;\n\t      scope.newAttributeName = null;\n\t    }\n\t  };\n\t\n\t  scope.deleteCustomProperty = function (property_name) {\n\t    delete scope.customPropertiesData[property_name];\n\t  };\n\t};\n\t\n\tNewUserController.$inject = ['$scope', '$marketcloud', '$http', '$location', 'Countries'];\n\t\n\tapp.controller('NewUserController', NewUserController);\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('UserController', ['$scope', '$http', '$routeParams', 'user', '$marketcloud', 'Countries', '$utils', function (scope, http, params, user, $marketcloud, countries, $utils) {\n\t  // Injecting the resolve's data\n\t  scope.user = user.data.data;\n\t\n\t  scope.carts = [];\n\t  scope.addresses = [];\n\t\n\t  scope.newAddress = {\n\t    email: scope.user.email || '',\n\t    user_id: scope.user.id\n\t\n\t    // This is a list of countries used by the countries autocomplete\n\t  };scope.countries = countries;\n\t\n\t  scope.update = function () {\n\t    var payload = angular.copy(scope.user);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      payload[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    delete payload['id'];\n\t    delete payload['application_id'];\n\t\n\t    $marketcloud.users.update(scope.user.id, payload).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 2);\n\t    }).catch(function (errpr) {\n\t      notie.alert(3, 'An error has occurred, please try again', 2);\n\t    });\n\t  };\n\t\n\t  scope.toggleAddressVisibility = function (address) {\n\t    address.expanded = !address.expanded;\n\t  };\n\t\n\t  scope.saveAddress = function () {\n\t    $marketcloud.addresses.save(scope.newAddress).then(function (response) {\n\t      notie.alert(1, 'Address created', 2);\n\t      scope.newAddress = {\n\t        email: scope.user.email || '',\n\t        user_id: scope.user.id\n\t      };\n\t      $(\"#addAddressModal\").modal(\"hide\");\n\t      return $marketcloud.addresses.list({\n\t        user_id: scope.user.id\n\t      });\n\t    }).then(function (response) {\n\t      scope.addresses = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please check the data you entered', 2);\n\t    });\n\t  };\n\t\n\t  // Getting the set of core properties from models\n\t  var coreProperties = Models.User.getPropertyNames();\n\t\n\t  // id is a core property often not inside models\n\t  coreProperties.push('id', 'role', 'application_id', 'registered_with', 'created_at', 'updated_at', 'shipping_address', 'billing_address');\n\t\n\t  // Here we store custom properties\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.user) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.user[k];\n\t      delete scope.user[k];\n\t    }\n\t  }\n\t\n\t  $marketcloud.orders.list({\n\t    \"user.id\": params.userId,\n\t    \"per_page\": 10\n\t  }).then(function (response) {\n\t\n\t    scope.orders = response.data.data;\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t\n\t  $marketcloud.carts.list({\n\t    user_id: params.userId,\n\t    per_page: 10\n\t  }).then(function (response) {\n\t\n\t    scope.carts = response.data.data;\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t\n\t  $marketcloud.addresses.list({\n\t    user_id: params.userId,\n\t    per_page: 5\n\t  }).then(function (response) {\n\t\n\t    // We want to \"compress\" the view\n\t    scope.addresses = response.data.data.map(function (address, index) {\n\t      if (0 === index) address.expanded = true;else address.expanded = false;\n\t      return address;\n\t    });\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t}]);\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditVariableController', ['$scope', '$http', '$location', '$marketcloud', 'variable', function (scope, http, location, $marketcloud, variable) {\n\t  scope.variable = variable.data.data;\n\t\n\t  function isURL(s) {\n\t    if (typeof s !== 'string') {\n\t      return false;\n\t    }\n\t    if (typeof s.indexOf !== 'function') {\n\t      return false;\n\t    }\n\t    return s.indexOf('http://') === 0;\n\t  }\n\t\n\t  if (isURL(scope.variable.value)) {\n\t    scope.variable.type = 'URL';\n\t  }\n\t\n\t  scope.containerForNewMediaAttribute = [];\n\t\n\t  scope.containersForExistingMediaAttributes = {};\n\t\n\t  scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t    if (scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]) {\n\t      scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t    }\n\t  });\n\t\n\t  if (isURL(scope.variable.value) === true) {\n\t    scope.containersForExistingMediaAttributes['value'] = [scope.variable.value];\n\t    scope.$watchCollection('containersForExistingMediaAttributes.value', function () {\n\t      // If the value is null, it means that we just deleted it, so we don't have to re-update it\n\t      if (scope.variable.value === null) {\n\t        return;\n\t      }\n\t      if (scope.containersForExistingMediaAttributes['value']) {\n\t        scope.variable.value = scope.containersForExistingMediaAttributes['value'][scope.containersForExistingMediaAttributes['value'].length - 1];\n\t      }\n\t    });\n\t  }\n\t\n\t  scope.availableTypes = [{ type: 'string', label: 'String' }, { type: 'number', label: 'Number' }, { type: 'URL', label: 'Url / Media' }, { type: 'boolean', label: 'True/False' }];\n\t\n\t  scope.invalidPropertyName = null;\n\t  scope.validationMessage = null;\n\t  scope.validate = function () {};\n\t\n\t  scope.update = function () {\n\t    var payload = angular.copy(scope.variable);\n\t\n\t    if (payload.type === 'URL') {\n\t      payload.type = 'string';\n\t    }\n\t    $marketcloud.variables.update(scope.variable.id, payload).then(function (response) {\n\t      notie.alert(1, 'Variable successfully saved.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('VariablesController', ['$scope', '$http', 'variables', '$marketcloud', function (scope, http, resources, $marketcloud) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    per_page: 20\n\t\n\t    // Initial data resolved from the router\n\t  };scope.variables = resources.data.data;\n\t\n\t  scope.loadPage = function (p) {\n\t    return scope.loadData({\n\t      page: p\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.variables.list(query).then(function (response) {\n\t      scope.variables = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t  scope.setPublishing = function (variable) {\n\t\n\t    $marketcloud.variables.update(variable.id, {\n\t      published: variable.published\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteVariable = function (variable_id, index) {\n\t    $marketcloud.variables.delete(variable_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Variable deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateVariableController', ['$scope', '$http', '$location', '$marketcloud', function (scope, http, location, $marketcloud) {\n\t    scope.variable = {\n\t        type: 'string',\n\t        value: '',\n\t        name: ''\n\t    };\n\t\n\t    scope.containerForNewMediaAttribute = [];\n\t\n\t    scope.containersForExistingMediaAttributes = {};\n\t\n\t    scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t        scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t    });\n\t\n\t    scope.availableTypes = [{ type: 'string', label: 'String' }, { type: 'number', label: 'Number' }, { type: 'URL', label: 'Url / Media' }, { type: 'boolean', label: 'True/False' }];\n\t\n\t    scope.invalidPropertyName = null;\n\t    scope.validationMessage = null;\n\t    scope.validate = function () {};\n\t\n\t    scope.save = function () {\n\t        var payload = angular.copy(scope.variable);\n\t        if (payload.type === 'URL') {\n\t            payload.type = 'string';\n\t        }\n\t        $marketcloud.variables.save(payload).then(function (response) {\n\t            notie.alert(1, 'Variable successfully saved.', 1.5);\n\t            location.path('/variables');\n\t        }).catch(function (error) {\n\t            notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t        });\n\t    };\n\t}]);\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditVariantController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct', function (scope, $marketcloud, params, $http, resolvedProduct) {\n\t  scope.product = resolvedProduct.data.data;\n\t\n\t  var originalVariantData = null;\n\t\n\t  scope.variant = null;\n\t\n\t  // This object holds the actual properties of the variant\n\t  // computed by variant + parent\n\t  scope.product_merge_variant = {};\n\t\n\t  // When saving the variant, only what does not match with the parent\n\t  // is saved inside the variant object\n\t  scope.customPropertiesData = {};\n\t\n\t  // These cannot be touched\n\t  scope.variantDefiningProperties = {};\n\t\n\t  scope.currentVariantId = null;\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = k + ': ' + String(o[k]);\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product_merge_variant.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product_merge_variant.images.splice(i, 1);\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t\n\t  scope.updateVariant = function () {\n\t\n\t    // We take only some stuff from the main product\n\t    var variantProperties = [\n\t    // Le eliino queste due perchè altrimenti, se metto un prezzo nel parent\n\t    // e nel figlio metto lo stesso, non me lo salva\n\t    //'price',\n\t    //'price_discount',\n\t    'category_id', 'description', 'stock_type', 'stock_status', 'stock_level', 'sku', 'barcode', 'images', 'requires_shipping', 'width', 'depth', 'height', 'weight'];\n\t\n\t    var toSend = angular.copy(scope.variant);\n\t\n\t    for (var k in scope.product_merge_variant) {\n\t\n\t      // Se la property della variante è\n\t      // deiversa da ciò che sta in product_merge_variant\n\t      // e la properietà è presente in variantProperties\n\t      if (toSend[k] !== scope.product_merge_variant[k] && variantProperties.indexOf(k) > -1) {\n\t\n\t        toSend[k] = scope.product_merge_variant[k];\n\t      }\n\t\n\t      if (k === \"price_discount\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n\t        console.log(k + \" dovrebbe passare da \" + originalVariantData[k] + \" a \" + scope.product_merge_variant[k]);\n\t        toSend.price_discount = scope.product_merge_variant[k];\n\t      }\n\t\n\t      if (k === \"price\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n\t        toSend.price = scope.product_merge_variant[k];\n\t      }\n\t    }\n\t\n\t    console.log(\"product_merge_variant\", angular.copy(scope.product_merge_variant));\n\t    console.log(\"toSend\", angular.copy(toSend));\n\t\n\t    $http({\n\t      method: 'PUT',\n\t      url: API_BASE_URL + '/products/' + params.productId + '/variants/' + scope.variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      },\n\t      data: toSend\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant successfully updated', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.setCurrentVariant = function (variant_id) {\n\t    scope.currentVariantId = variant_id;\n\t    scope.product.variants.forEach(function (v) {\n\t      if (Number(v.id) === Number(variant_id)) {\n\t        scope.variant = v;\n\t        originalVariantData = angular.copy(v);\n\t      }\n\t    });\n\t    for (var k in scope.product) {\n\t      scope.product_merge_variant[k] = scope.product[k];\n\t    }\n\t    for (var j in scope.variant) {\n\t      scope.product_merge_variant[j] = scope.variant[j];\n\t    }\n\t  };\n\t\n\t  scope.setCurrentVariant(Number(params.variantId));\n\t\n\t  scope.product = resolvedProduct.data.data;\n\t}]);\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('ListVariantsController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct', function (scope, $marketcloud, params, $http, resolvedProduct) {\n\t\n\t  scope.product = resolvedProduct.data.data;\n\t\n\t  // These cannot be touched\n\t  scope.variantDefiningProperties = {};\n\t\n\t  scope.deleteVariant = function (variant) {\n\t    return $http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant deleted', 1.5);\n\t      scope.product = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.clone = function (variant) {\n\t    var variantToSave = angular.copy(variant);\n\t    // Removing useless stuff in the variant\n\t    delete variantToSave['id'];\n\t\n\t    return $http({\n\t      method: 'POST',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n\t      data: variantToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, \"Variant successfully cloned\", 2);\n\t    }).catch(function (response) {\n\t      notie.alert(2, \"An error has occurred, please try again\", 2);\n\t    });\n\t  };\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = k + ': ' + String(o[k]);\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t}]);\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('WebhooksController', ['$scope', '$http', '$location', 'webhooks', function (scope, http, location, webhooks) {\n\t\n\t\tscope.mode = null;\n\t\n\t\tscope.webhooks = [{\n\t\t\tevent: 'products.create',\n\t\t\tmethod: 'POST',\n\t\t\turl: 'mybackend.herokuapp.com/newproduct',\n\t\t\theaders: {}\n\t\t}];\n\t\n\t\tscope.webhooks = webhooks.data.data;\n\t\n\t\tscope.events = ['products.create', 'products.delete', 'products.update', 'brands.create', 'brands.delete', 'brands.update', 'categories.create', 'categories.delete', 'categories.update', 'orders.create', 'orders.delete', 'orders.update', 'carts.create', 'carts.delete', 'carts.update', 'payments.create', 'payments.delete', 'payments.update', 'shippings.create', 'shippings.delete', 'shippings.update'];\n\t\tscope.load = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks'\n\t\t\t}).then(function (response) {\n\t\t\t\tscope.webhooks = response.data.data;\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(2, 'An error has occurred while reloading webhooks.', 1);\n\t\t\t});\n\t\t};\n\t\n\t\tscope.edit = function (hook) {\n\t\t\tscope.newWebhook = hook;\n\t\t\tscope.showUpdateModal();\n\t\t};\n\t\tscope.showUpdateModal = function () {\n\t\t\tscope.mode = 'update';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\t\n\t\tscope.showCreateModal = function () {\n\t\t\tscope.mode = 'create';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\t\n\t\tscope.saveWebhook = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks',\n\t\t\t\tdata: scope.newWebhook\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly created', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t\t$('#newWebhookModal').modal('hide');\n\t\t\t\tscope.load();\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not created', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t});\n\t\t};\n\t\n\t\tscope.updateWebhook = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks/' + scope.newWebhook.id,\n\t\t\t\tdata: scope.newWebhook\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly updated', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not updated', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t});\n\t\t};\n\t\n\t\tscope.delete = function (hook) {\n\t\t\thttp({\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks/' + hook.id\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly deleted', 1);\n\t\t\t\tscope.load();\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not deleted', 1);\n\t\t\t});\n\t\t};\n\t}]);\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.directive('avatar', [function () {\n\t\n\t    return {\n\t        restrict: 'AE',\n\t        replace: true,\n\t        transclude: true,\n\t        scope: {\n\t            initials: '@initials',\n\t            width: '@width',\n\t            bgcolor: '@bgColor',\n\t            textColor: '@textColor',\n\t            wrapper: '=wrapper',\n\t            pictureResolution: '@pictureResolution',\n\t            pixelated: '=pixelated',\n\t            roundShape: '=roundShape',\n\t            class: '@class',\n\t            imgClass: '@imgClass',\n\t            style: '@style',\n\t            string: '@string',\n\t            cornerRadius: '@cornerRadius',\n\t            pictureFormat: '@pictureFormat',\n\t            colorsPalette: '=colorsPalette',\n\t            autoColor: '=autoColor',\n\t            fontWeight: '@fontWeight',\n\t            fontScale: '@fontScale',\n\t            textShadow: '=textShadow',\n\t            bind: '=bind',\n\t            maxLength: '@maxLength',\n\t            upperCase: '=upperCase'\n\t        },\n\t        link: function link(scope, element, attrs) {\n\t\n\t            var _long = 45,\n\t                _picture_resolution = 256,\n\t                _wrapper = true,\n\t                _str = \"\",\n\t                //scope.initials || \"\",\n\t            _bgcolor = \"#000\",\n\t                _textcolor = \"#fff\",\n\t                _pixelated = false,\n\t                _img_styling = \"vertical-align:top;\",\n\t                _roundShape = false,\n\t                _wrapper_styling = \"border-radius:0; display:block; overflow:hidden;\",\n\t                _extra_classes = \"\",\n\t                _extra_img_classes = \"\",\n\t                _extra_styles = \"\",\n\t                _corner_radius = \"0\",\n\t                _picture_format = \"png\",\n\t                _colors_palette = [\"#bdc3c7\", \"#6f7b87\", \"#2c3e50\", \"#2f3193\", \"#662d91\", \"#922790\", \"#ec2176\", \"#ed1c24\", \"#f36622\", \"#f8941e\", \"#fab70f\", \"#fdde00\", \"#d1d219\", \"#8ec73f\", \"#00a650\", \"#00aa9c\", \"#00adef\", \"#0081cd\", \"#005bab\"],\n\t                _autoColor = false,\n\t                _font_weight = 100,\n\t                _font_scale = 100,\n\t                _text_shadow = false,\n\t                _bind = false,\n\t                _img_width = \"100%\",\n\t                _upperCase = false;\n\t\n\t            // We randomize the bgcolor\n\t            var mc_palette = ['#1abc9c', '#16a085', '#f1c40f', '#f39c12', '#2ecc71', '#27ae60', '#27ae60', '#e67e22', '#d35400', '#3498db', '#2980b9', '#c0392b', '#e74c3c', '#9b59b6', '#8e44ad'];\n\t\n\t            if (scope.initials.length === 0) scope.initials = \"??\";\n\t\n\t            var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y'];\n\t\n\t            var position = dict.indexOf(scope.initials.substr(0, 1).toLowerCase());\n\t\n\t            var chosenColorPosition = position % mc_palette.length;\n\t\n\t            if (chosenColorPosition === -1) chosenColorPosition = 0;\n\t\n\t            var chosenColor = mc_palette[chosenColorPosition];\n\t\n\t            _bgcolor = chosenColor;\n\t\n\t            function checkValues() {\n\t\n\t                if (scope.bind != undefined) {\n\t                    _bind = scope.bind;\n\t                }\n\t\n\t                if (scope.textColor != undefined) {\n\t                    _textcolor = scope.textColor;\n\t                }\n\t\n\t                if (scope.pictureResolution != undefined) {\n\t                    _picture_resolution = scope.pictureResolution;\n\t                }\n\t\n\t                if (scope.width != undefined) {\n\t                    _long = scope.width;\n\t                }\n\t\n\t                if (scope.wrapper != undefined) {\n\t                    _wrapper = scope.wrapper;\n\t                    if (_wrapper === false) {\n\t                        _img_width = _long;\n\t                    }\n\t                }\n\t\n\t                if (scope.pixelated != undefined) {\n\t                    _pixelated = scope.pixelated;\n\t                    if (_pixelated === true) {\n\t                        _img_styling += \"image-rendering:pixelated; image-rendering:-moz-crisp-edges;\";\n\t                    }\n\t                }\n\t\n\t                if (scope.roundShape != undefined) {\n\t                    _roundShape = scope.roundShape;\n\t                    if (_roundShape) _wrapper_styling += \"border-radius: \" + _long + \"px;\";\n\t                } else {\n\t                    if (scope.cornerRadius != undefined) {\n\t                        _corner_radius = scope.cornerRadius;\n\t                        _wrapper_styling += \"border-radius: \" + _corner_radius + \"px;\";\n\t                    }\n\t                }\n\t\n\t                if (scope.class != undefined) {\n\t                    _extra_classes = scope.class;\n\t                }\n\t\n\t                if (scope.imgClass != undefined) {\n\t                    _extra_img_classes = scope.imgClass;\n\t                }\n\t\n\t                if (scope.style != undefined) {\n\t                    _extra_styles = scope.style;\n\t                }\n\t\n\t                if (scope.initials != undefined) {\n\t                    _str = scope.initials;\n\t                }\n\t\n\t                if (scope.string != undefined) {\n\t                    _str = getInitialsFromString(scope.string);\n\t                }\n\t\n\t                if (scope.maxLength != undefined) {\n\t                    _str = _str.substr(0, scope.maxLength);\n\t                }\n\t\n\t                if (scope.pictureFormat === 'jpeg') {\n\t                    _picture_format = \"jpeg\";\n\t                }\n\t\n\t                if (scope.colorsPalette != undefined) {\n\t                    _colors_palette = scope.colorsPalette;\n\t                }\n\t\n\t                if (scope.bgcolor != undefined) {\n\t                    _bgcolor = scope.bgcolor;\n\t                } else {\n\t\n\t                    if (scope.autoColor != undefined) {\n\t\n\t                        _autoColor = scope.autoColor;\n\t                        if (_autoColor === true) {\n\t                            var i,\n\t                                lon = _str.length,\n\t                                charIndex = 0,\n\t                                colorIndex;\n\t                            for (i = 0; i < lon; i++) {\n\t                                charIndex = _str.charCodeAt(i);\n\t                            }colorIndex = charIndex % _colors_palette.length;\n\t                            _bgcolor = _colors_palette[colorIndex];\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (scope.fontWeight != undefined) {\n\t                    _font_weight = scope.fontWeight;\n\t                }\n\t\n\t                if (scope.fontScale != undefined) {\n\t                    _font_scale = scope.fontScale;\n\t                }\n\t\n\t                if (scope.textShadow != undefined) {\n\t                    _text_shadow = scope.textShadow;\n\t                }\n\t\n\t                if (scope.upperCase === true) {\n\t                    _str = _str.toUpperCase();\n\t                }\n\t            }\n\t\n\t            function generateAvatar(name, w, h, bgcolor, textcolor, bgImage) {\n\t                var WIDTH = 256,\n\t                    HEIGHT = 256,\n\t                    canvas,\n\t                    ctx,\n\t                    _font_size;\n\t\n\t                if (w != undefined && w > 0) {\n\t                    if (h != undefined && h > 0) {\n\t                        WIDTH = w;\n\t                        HEIGHT = h;\n\t                    }\n\t                }\n\t\n\t                canvas = document.createElement('canvas');\n\t                canvas.id = \"ngAvatar-\" + Date.now();\n\t                canvas.width = WIDTH;\n\t                canvas.height = HEIGHT;\n\t\n\t                ctx = canvas.getContext('2d');\n\t                ctx.fillStyle = bgcolor;\n\t                ctx.fillRect(0, 0, WIDTH, HEIGHT);\n\t\n\t                _font_size = WIDTH / (2 / (_font_scale / 100));\n\t                ctx.font = _font_weight + \" \" + _font_size + \"px sans-serif\";\n\t\n\t                if (_text_shadow === true) {\n\t                    ctx.shadowColor = \"black\";\n\t                    ctx.shadowOffsetX = 0;\n\t                    ctx.shadowOffsetY = 0;\n\t                    ctx.shadowBlur = 5;\n\t                }\n\t\n\t                ctx.textAlign = \"center\";\n\t                ctx.fillStyle = textcolor;\n\t                //ctx.fillText(_str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) + 5 );\n\t                ctx.fillText(_str, WIDTH / 2, HEIGHT - HEIGHT / 2 + _font_size / 3);\n\t\n\t                return canvas.toDataURL(\"image/\" + _picture_format);\n\t            }\n\t\n\t            function getInitialsFromString(str) {\n\t\n\t                var output = \"\",\n\t                    i = 0,\n\t                    str = str.split(\" \"),\n\t                    len = str.length;\n\t\n\t                for (i; i < len; i++) {\n\t                    if (str[i] != \"\") output += str[i][0];\n\t                } //.toUpperCase();\n\t                return output;\n\t            }\n\t\n\t            var currentElement = element;\n\t\n\t            function render() {\n\t                var imgData = generateAvatar(_str, _picture_resolution, _picture_resolution, _bgcolor, _textcolor, null);\n\t\n\t                var html = '';\n\t                if (_wrapper) html += '<div class=\"avatar-wrapper ' + _extra_classes + '\" style=\"' + _wrapper_styling + ' width:' + _long + 'px; height:' + _long + 'px; ' + _extra_styles + '\">';\n\t                html += '<img src=\"' + imgData + '\" class=\"avatar-picture ' + _extra_img_classes + '\" style=\"' + _img_styling + '\" width=\"' + _img_width + '\" height=\"\" />';\n\t                if (_wrapper) html += '</div>';\n\t\n\t                var replacementElement = angular.element(html);\n\t                currentElement.replaceWith(replacementElement);\n\t                currentElement = replacementElement;\n\t            }\n\t\n\t            checkValues();\n\t            if (_bind === true) {\n\t\n\t                scope.$watch('string', function (value) {\n\t\n\t                    checkValues();\n\t                    render();\n\t                });\n\t\n\t                scope.$watch('initials', function (value) {\n\t\n\t                    checkValues();\n\t                    render();\n\t                });\n\t\n\t                /*\r\n\t                scope.$watch( 'bgcolor', function ( value ) {\r\n\t                    checkValues();\r\n\t                    render();\r\n\t                });\r\n\t                */\n\t            } else {\n\t\n\t                render();\n\t            }\n\t        }\n\t    };\n\t}]);\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t  \"use strict\";\n\t\n\t  app.directive('contenteditable', function () {\n\t    return {\n\t      restrict: 'A', // only activate on element attribute\n\t      require: '?ngModel', // get a hold of NgModelController\n\t      link: function link(scope, element, attrs, ngModel) {\n\t        if (!ngModel) return; // do nothing if no ng-model\n\t\n\t        // Specify how UI should be updated\n\t        ngModel.$render = function () {\n\t          element.html(ngModel.$viewValue || '');\n\t        };\n\t\n\t        // Listen for change events to enable binding\n\t        element.on('blur keyup change', function () {\n\t          scope.$apply(read);\n\t        });\n\t        read(); // initialize\n\t\n\t        // Write data to the model\n\t        function read() {\n\t          var html = element.html();\n\t          // When we clear the content editable the browser leaves a <br> behind\n\t          // If strip-br attribute is provided then we strip this out\n\t          if (attrs.stripBr && html == '<br>') {\n\t            html = '';\n\t          }\n\t          ngModel.$setViewValue(html);\n\t        }\n\t      }\n\t    };\n\t  });\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('dropdown', function ($document) {\n\t        return {\n\t                restrict: \"C\",\n\t                link: function link(scope, elem, attr) {\n\t\n\t                        // Handling nested dropdowns\n\t                        angular.element('.dropdown-submenu > a.dropdown-submenu-toggle').on(\"click\", function (e) {\n\t\n\t                                // We get a pointer to the submenu\n\t                                var submenu = angular.element(this).next('ul');\n\t\n\t                                angular.element(submenu).toggle();\n\t\n\t                                // Preventing further event handling\n\t                                e.stopImmediatePropagation();\n\t                                e.stopPropagation();\n\t                                e.preventDefault();\n\t                        });\n\t                }\n\t        };\n\t});\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('fallbackSrc', function () {\n\t\treturn {\n\t\t\tlink: function link(scope, element, attrs) {\n\t\t\t\telement.bind('error', function () {\n\t\t\t\t\tif (attrs.src !== attrs.fallbackSrc) {\n\t\t\t\t\t\tattrs.$set('src', attrs.fallbackSrc);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t  app.directive('fileModel', ['$parse', function ($parse) {\n\t    return {\n\t      restrict: 'A',\n\t      link: function link(scope, element, attrs) {\n\t        var model = $parse(attrs.fileModel);\n\t        var modelSetter = model.assign;\n\t\n\t        element.bind('change', function () {\n\t          scope.$apply(function () {\n\t            if (attrs.multiple) {\n\t              modelSetter(scope, element[0].files);\n\t            } else {\n\t              modelSetter(scope, element[0].files[0]);\n\t            }\n\t          });\n\t        });\n\t      }\n\t    };\n\t  }]);\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('focusOnShow', function ($timeout) {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: function link($scope, $element, $attr) {\n\t\t\t\tif ($attr.ngShow) {\n\t\t\t\t\t$scope.$watch($attr.ngShow, function (newValue) {\n\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif ($attr.ngHide) {\n\t\t\t\t\t$scope.$watch($attr.ngHide, function (newValue) {\n\t\t\t\t\t\tif (!newValue) {\n\t\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  /**\r\n\t   * Heavily adapted from the `type=\"number\"` directive in Angular's\r\n\t   * /src/ng/directive/input.js\r\n\t   */\n\t\n\t  var NUMBER_REGEXP = /^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/;\n\t  var DEFAULT_PRECISION = 4;\n\t\n\t  angular.module('DataDashboard').directive('money', [\"$parse\", function ($parse) {\n\t    function link(scope, el, attrs, ngModelCtrl) {\n\t      var minVal, maxVal, precision, lastValidViewValue;\n\t      var isDefined = angular.isDefined;\n\t      var isUndefined = angular.isUndefined;\n\t      var isNumber = angular.isNumber;\n\t\n\t      /**\r\n\t       * Returns a rounded number in the precision setup by the directive\r\n\t       * @param  {Number} num Number to be rounded\r\n\t       * @return {Number}     Rounded number\r\n\t       */\n\t      function round(num) {\n\t        var d = Math.pow(10, precision);\n\t        return Math.round(num * d) / d;\n\t      }\n\t\n\t      /**\r\n\t       * Returns a string that represents the rounded number\r\n\t       * @param  {Number} value Number to be rounded\r\n\t       * @return {String}       The string representation\r\n\t       */\n\t      function formatPrecision(value) {\n\t        return parseFloat(value).toFixed(precision);\n\t      }\n\t\n\t      function isPrecisionValid() {\n\t        return !isNaN(precision) && precision > -1;\n\t      }\n\t\n\t      function isValueValid(value) {\n\t        return angular.isNumber(value) && !isNaN(value);\n\t      }\n\t\n\t      function updateValuePrecision() {\n\t        var modelValue = ngModelCtrl.$modelValue;\n\t\n\t        if (isValueValid(modelValue) && isPrecisionValid()) {\n\t          ngModelCtrl.$modelValue = round(modelValue);\n\t          $parse(attrs.ngModel).assign(scope, ngModelCtrl.$modelValue);\n\t          changeViewValue(formatPrecision(modelValue));\n\t\n\t          // Save the rounded view value\n\t          lastValidViewValue = ngModelCtrl.$viewValue;\n\t        }\n\t      }\n\t\n\t      function changeViewValue(value) {\n\t        ngModelCtrl.$viewValue = value;\n\t        ngModelCtrl.$commitViewValue();\n\t        ngModelCtrl.$render();\n\t      }\n\t\n\t      ngModelCtrl.$parsers.push(function (value) {\n\t        if (ngModelCtrl.$isEmpty(value)) {\n\t          lastValidViewValue = value;\n\t          return null;\n\t        }\n\t\n\t        // Handle leading decimal point, like \".5\"\n\t        if (value.indexOf('.') === 0) {\n\t          value = '0' + value;\n\t        }\n\t\n\t        // Allow \"-\" inputs only when min < 0\n\t        if (value.indexOf('-') === 0) {\n\t          if (minVal >= 0) {\n\t            changeViewValue('');\n\t            return null;\n\t          } else if (value === '-' || value === '-.') {\n\t            return null;\n\t          }\n\t        }\n\t\n\t        if (NUMBER_REGEXP.test(value)) {\n\t          // Save as valid view value if it's a number\n\t          lastValidViewValue = value;\n\t          return parseFloat(value);\n\t        } else {\n\t          // Render the last valid input in the field\n\t          changeViewValue(lastValidViewValue);\n\t          return lastValidViewValue;\n\t        }\n\t      });\n\t\n\t      // Min validation\n\t      ngModelCtrl.$validators.min = function (value) {\n\t        return ngModelCtrl.$isEmpty(value) || isUndefined(minVal) || value >= minVal;\n\t      };\n\t      if (isDefined(attrs.min) || attrs.ngMin) {\n\t        attrs.$observe('min', function (val) {\n\t          if (isDefined(val) && !isNumber(val)) {\n\t            val = parseFloat(val, 10);\n\t          }\n\t          minVal = isNumber(val) && !isNaN(val) ? val : undefined;\n\t          ngModelCtrl.$validate();\n\t        });\n\t      } else {\n\t        minVal = 0;\n\t      }\n\t\n\t      // Max validation\n\t      if (isDefined(attrs.max) || attrs.ngMax) {\n\t        ngModelCtrl.$validators.max = function (value) {\n\t          return ngModelCtrl.$isEmpty(value) || isUndefined(maxVal) || value <= maxVal;\n\t        };\n\t\n\t        attrs.$observe('max', function (val) {\n\t          if (isDefined(val) && !isNumber(val)) {\n\t            val = parseFloat(val, 10);\n\t          }\n\t          maxVal = isNumber(val) && !isNaN(val) ? val : undefined;\n\t          ngModelCtrl.$validate();\n\t        });\n\t      }\n\t\n\t      // Round off (disabled by \"-1\")\n\t      if (isDefined(attrs.precision)) {\n\t        attrs.$observe('precision', function (value) {\n\t          precision = parseInt(value, 10);\n\t\n\t          updateValuePrecision();\n\t        });\n\t      } else {\n\t        precision = DEFAULT_PRECISION;\n\t      }\n\t\n\t      ngModelCtrl.$parsers.push(function (value) {\n\t        if (value) {\n\t          // Round off value to specified precision\n\t          value = isPrecisionValid() ? round(value) : value;\n\t        }\n\t        return value;\n\t      });\n\t\n\t      ngModelCtrl.$formatters.push(function (value) {\n\t        if (isDefined(value)) {\n\t          return isPrecisionValid() && isValueValid(value) ? formatPrecision(value) : value;\n\t        } else {\n\t          return '';\n\t        }\n\t      });\n\t\n\t      // Auto-format precision on blur\n\t      el.bind('blur', function () {\n\t        ngModelCtrl.$commitViewValue();\n\t        updateValuePrecision();\n\t      });\n\t    }\n\t\n\t    return {\n\t      restrict: 'A',\n\t      require: 'ngModel',\n\t      link: link\n\t    };\n\t  }]);\n\t})();\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('Marketcloud.Shared').directive('ngThumb', ['$window', function ($window) {\n\t\tvar helper = {\n\t\t\tsupport: !!($window.FileReader && $window.CanvasRenderingContext2D),\n\t\t\tisFile: function isFile(item) {\n\t\t\t\treturn angular.isObject(item) && item instanceof $window.File;\n\t\t\t},\n\t\t\tisImage: function isImage(file) {\n\t\t\t\tvar type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n\t\t\t\treturn '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n\t\t\t}\n\t\t};\n\t\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '<canvas/>',\n\t\t\tlink: function link(scope, element, attributes) {\n\t\t\t\tif (!helper.support) return;\n\t\n\t\t\t\tvar params = scope.$eval(attributes.ngThumb);\n\t\n\t\t\t\tif (!helper.isFile(params.file)) return;\n\t\t\t\tif (!helper.isImage(params.file)) return;\n\t\n\t\t\t\tvar canvas = element.find('canvas');\n\t\t\t\tvar reader = new FileReader();\n\t\n\t\t\t\treader.onload = onLoadFile;\n\t\t\t\treader.readAsDataURL(params.file);\n\t\n\t\t\t\tfunction onLoadFile(event) {\n\t\t\t\t\tvar img = new Image();\n\t\t\t\t\timg.onload = onLoadImage;\n\t\t\t\t\timg.src = event.target.result;\n\t\t\t\t}\n\t\n\t\t\t\tfunction onLoadImage() {\n\t\t\t\t\tvar width = params.width || this.width / this.height * params.height;\n\t\t\t\t\tvar height = params.height || this.height / this.width * params.width;\n\t\t\t\t\tcanvas.attr({ width: width, height: height });\n\t\t\t\t\t//canvas.attr({ width: canvas.parent().width, height: canvas.parent().height });\n\t\t\t\t\tcanvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}]);\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t\tapp.directive('ngEnter', function () {\n\t\t\treturn function (scope, element, attrs) {\n\t\t\t\telement.bind('keydown keypress', function (event) {\n\t\t\t\t\tif (event.which === 13) {\n\t\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\t\tscope.$eval(attrs.ngEnter);\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').directive('onChangeAsync', function ($timeout) {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function link(scope, element, attr, ctrl) {\n\t      ctrl.$viewChangeListeners.push(function () {\n\t        $timeout(function () {\n\t          scope.$eval(attr.onChangeAsync);\n\t        });\n\t      });\n\t    }\n\t  };\n\t});\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t\n\t  app.directive('onFileChange', function () {\n\t    return {\n\t      restrict: 'A',\n\t      link: function link(scope, element, attrs) {\n\t        var onChangeHandler = scope.$eval(attrs.onFileChange);\n\t        element.bind('change', onChangeHandler);\n\t      }\n\t    };\n\t  });\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$account', ['$http', '$q', AccountFactory]);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles writes and reads\r\n\t   *   for the account object.\r\n\t   *\r\n\t   *   This avoids the use of the window object;\r\n\t   *   \r\n\t   */\n\t  function AccountFactory($http, $q) {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    // This holds the account data\n\t    //Factory.data = window.user\n\t    Factory.data = {};\n\t\n\t    /*\r\n\t     *  @param {string} key The name of the property to get\r\n\t     *  @return {Promise} Promised response\r\n\t     */\n\t    /*Factory.get = function() {\r\n\t      if (null === Factory.data) {\r\n\t        return $http({\r\n\t          method: 'GET',\r\n\t          url: '/account/get',\r\n\t        })\r\n\t        .then(function(response){\r\n\t          Factory.data = response.data.data;\r\n\t          return $q.when({data : Factory.data});\r\n\t        })\r\n\t      } else {\r\n\t        return $q.when({data : Factory.data});\r\n\t      }\r\n\t    }*/\n\t\n\t    /*\r\n\t     * @param {string} key The name of the property to get\r\n\t     */\n\t    Factory.get = function (key) {\n\t      if (key) return Factory.data[key];else return Factory.data;\n\t    };\n\t\n\t    /*\r\n\t     * @param {String} key The name of the property to set\r\n\t     * @param {Mixed} value The value of the property to set\r\n\t     */\n\t    Factory.set = function (key, value) {\n\t\n\t      if (\"string\" === typeof key && !!value) {\n\t        Factory.data[key] = value;\n\t      }\n\t\n\t      if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key)) && !value) {\n\t        Factory.data = key;\n\t      }\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$application', ApplicationFactory);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles writes and reads\r\n\t   *   for the application object.\r\n\t   *\r\n\t   *   This avoids the use of the window object;\r\n\t   *   \r\n\t   */\n\t  function ApplicationFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {\n\t      data: {}\n\t    };\n\t\n\t    /*// This holds the application data\r\n\t    Factory.data = {};\r\n\t    */\n\t\n\t    /*\r\n\t     * @param {string} key The name of the property to get\r\n\t     */\n\t    Factory.get = function (key) {\n\t      if (key) return Factory.data[key];else return Factory.data;\n\t    };\n\t\n\t    /*\r\n\t     * @param {String} key The name of the property to set\r\n\t     * @param {Mixed} value The value of the property to set\r\n\t     */\n\t    Factory.set = function (key, value) {\n\t\n\t      if (\"string\" === typeof key && !!value) {\n\t        Factory.data[key] = value;\n\t      }\n\t\n\t      if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key)) && !value) {\n\t        Factory.data = key;\n\t      }\n\t    };\n\t\n\t    /*\r\n\t     * @return {Array<String>} Returns an array of locale codes.\r\n\t     */\n\t    Factory.getAvailableLocaleCodes = function () {\n\t\n\t      if (!Factory.data.locales) {\n\t        return [];\n\t      }\n\t\n\t      return Factory.data.locales.split(\",\").filter(function (localeCode) {\n\t        // When splitting an empty string, we get [\"\"]\n\t        return localeCode !== \"\";\n\t      });\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$cache', [CacheFactory]);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles writes and reads\r\n\t   *   for the account object.\r\n\t   *\r\n\t   *   This avoids the use of the window object;\r\n\t   *   \r\n\t   */\n\t  function CacheFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    // This holds the account data\n\t    //Factory.data = window.user\n\t    Factory.data = {};\n\t\n\t    Factory.set = function (key, value) {\n\t      this.data[key] = value;\n\t    };\n\t\n\t    Factory.get = function (key) {\n\t      return this.data[key];\n\t    };\n\t\n\t    Factory.del = function (key) {\n\t      delete this.data[key];\n\t    };\n\t\n\t    /*\r\n\t    *  @param {String} pattern\r\n\t      *  Deletes all keys matching pattern\r\n\t    */\n\t    Factory.delByPattern = function (pattern) {\n\t      for (var k in this.data) {\n\t        if (k.indexOf(pattern) > -1) {\n\t          console.info(\"Deleting cache for \" + k);\n\t          delete this.data[k];\n\t        }\n\t      }\n\t    };\n\t\n\t    Factory.has = function (key) {\n\t      return this.data.hasOwnProperty(key);\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tangular.module('DataDashboard').factory('LocalesFactory', LocalesFactory);\n\t\n\t\tfunction LocalesFactory($http) {\n\t\t\treturn {\n\t\t\t\t\"af-ZA\": {\n\t\t\t\t\t\"code\": \"af-ZA\",\n\t\t\t\t\t\"original\": \"Afrikaans\",\n\t\t\t\t\t\"name\": \"Afrikaans\"\n\t\t\t\t},\n\t\t\t\t\"ar\": {\n\t\t\t\t\t\"code\": \"ar\",\n\t\t\t\t\t\"original\": \"العربية\",\n\t\t\t\t\t\"name\": \"Arabic\"\n\t\t\t\t},\n\t\t\t\t\"bg-BG\": {\n\t\t\t\t\t\"code\": \"bg-BG\",\n\t\t\t\t\t\"original\": \"Български\",\n\t\t\t\t\t\"name\": \"Bulgarian\"\n\t\t\t\t},\n\t\t\t\t\"ca-AD\": {\n\t\t\t\t\t\"code\": \"ca-AD\",\n\t\t\t\t\t\"original\": \"Català\",\n\t\t\t\t\t\"name\": \"Catalan\"\n\t\t\t\t},\n\t\t\t\t\"cs-CZ\": {\n\t\t\t\t\t\"code\": \"cs-CZ\",\n\t\t\t\t\t\"original\": \"Čeština\",\n\t\t\t\t\t\"name\": \"Czech\"\n\t\t\t\t},\n\t\t\t\t\"cy-GB\": {\n\t\t\t\t\t\"code\": \"cy-GB\",\n\t\t\t\t\t\"original\": \"Cymraeg\",\n\t\t\t\t\t\"name\": \"Welsh\"\n\t\t\t\t},\n\t\t\t\t\"da-DK\": {\n\t\t\t\t\t\"code\": \"da-DK\",\n\t\t\t\t\t\"original\": \"Dansk\",\n\t\t\t\t\t\"name\": \"Danish\"\n\t\t\t\t},\n\t\t\t\t\"de-AT\": {\n\t\t\t\t\t\"code\": \"de-AT\",\n\t\t\t\t\t\"original\": \"Deutsch (Österreich)\",\n\t\t\t\t\t\"name\": \"German (Austria)\"\n\t\t\t\t},\n\t\t\t\t\"de-CH\": {\n\t\t\t\t\t\"code\": \"de-CH\",\n\t\t\t\t\t\"original\": \"Deutsch (Schweiz)\",\n\t\t\t\t\t\"name\": \"German (Switzerland)\"\n\t\t\t\t},\n\t\t\t\t\"de-DE\": {\n\t\t\t\t\t\"code\": \"de-DE\",\n\t\t\t\t\t\"original\": \"Deutsch (Deutschland)\",\n\t\t\t\t\t\"name\": \"German (Germany)\"\n\t\t\t\t},\n\t\t\t\t\"el-GR\": {\n\t\t\t\t\t\"code\": \"el-GR\",\n\t\t\t\t\t\"original\": \"Ελληνικά\",\n\t\t\t\t\t\"name\": \"Greek\"\n\t\t\t\t},\n\t\t\t\t\"en-GB\": {\n\t\t\t\t\t\"code\": \"en-GB\",\n\t\t\t\t\t\"original\": \"English (UK)\",\n\t\t\t\t\t\"name\": \"English (UK)\",\n\t\t\t\t\t\"alpha2\": \"GB\"\n\t\t\t\t},\n\t\t\t\t\"en-US\": {\n\t\t\t\t\t\"code\": \"en-US\",\n\t\t\t\t\t\"original\": \"English (US)\",\n\t\t\t\t\t\"name\": \"English (US)\"\n\t\t\t\t},\n\t\t\t\t\"es-CL\": {\n\t\t\t\t\t\"code\": \"es-CL\",\n\t\t\t\t\t\"original\": \"Español (Chile)\",\n\t\t\t\t\t\"name\": \"Spanish (Chile)\"\n\t\t\t\t},\n\t\t\t\t\"es-ES\": {\n\t\t\t\t\t\"code\": \"es-ES\",\n\t\t\t\t\t\"original\": \"Español (España)\",\n\t\t\t\t\t\"name\": \"Spanish (Spain)\"\n\t\t\t\t},\n\t\t\t\t\"es-MX\": {\n\t\t\t\t\t\"code\": \"es-MX\",\n\t\t\t\t\t\"original\": \"Español (México)\",\n\t\t\t\t\t\"name\": \"Spanish (Mexico)\"\n\t\t\t\t},\n\t\t\t\t\"et-EE\": {\n\t\t\t\t\t\"code\": \"et-EE\",\n\t\t\t\t\t\"original\": \"Eesti\",\n\t\t\t\t\t\"name\": \"Estonian\"\n\t\t\t\t},\n\t\t\t\t\"eu\": {\n\t\t\t\t\t\"code\": \"eu\",\n\t\t\t\t\t\"original\": \"Euskara\",\n\t\t\t\t\t\"name\": \"Basque\"\n\t\t\t\t},\n\t\t\t\t\"fa-IR\": {\n\t\t\t\t\t\"code\": \"fa-IR\",\n\t\t\t\t\t\"original\": \"فارسی\",\n\t\t\t\t\t\"name\": \"Persian\"\n\t\t\t\t},\n\t\t\t\t\"fi-FI\": {\n\t\t\t\t\t\"code\": \"fi-FI\",\n\t\t\t\t\t\"original\": \"Suomi\",\n\t\t\t\t\t\"name\": \"Finnish\"\n\t\t\t\t},\n\t\t\t\t\"fr-CA\": {\n\t\t\t\t\t\"code\": \"fr-CA\",\n\t\t\t\t\t\"original\": \"Français (Canada)\",\n\t\t\t\t\t\"name\": \"French (Canada)\"\n\t\t\t\t},\n\t\t\t\t\"fr-FR\": {\n\t\t\t\t\t\"code\": \"fr-FR\",\n\t\t\t\t\t\"original\": \"Français (France)\",\n\t\t\t\t\t\"name\": \"French (France)\"\n\t\t\t\t},\n\t\t\t\t\"he-IL\": {\n\t\t\t\t\t\"code\": \"he-IL\",\n\t\t\t\t\t\"original\": \"עברית\",\n\t\t\t\t\t\"name\": \"Hebrew\"\n\t\t\t\t},\n\t\t\t\t\"hr-HR\": {\n\t\t\t\t\t\"code\": \"hr-HR\",\n\t\t\t\t\t\"original\": \"Hrvatski\",\n\t\t\t\t\t\"name\": \"Croatian\"\n\t\t\t\t},\n\t\t\t\t\"hu-HU\": {\n\t\t\t\t\t\"code\": \"hu-HU\",\n\t\t\t\t\t\"original\": \"Magyar\",\n\t\t\t\t\t\"name\": \"Hungarian\"\n\t\t\t\t},\n\t\t\t\t\"id-ID\": {\n\t\t\t\t\t\"code\": \"id-ID\",\n\t\t\t\t\t\"original\": \"Bahasa Indonesia\",\n\t\t\t\t\t\"name\": \"Indonesian\"\n\t\t\t\t},\n\t\t\t\t\"is-IS\": {\n\t\t\t\t\t\"code\": \"is-IS\",\n\t\t\t\t\t\"original\": \"Íslenska\",\n\t\t\t\t\t\"name\": \"Icelandic\"\n\t\t\t\t},\n\t\t\t\t\"it-IT\": {\n\t\t\t\t\t\"code\": \"it-IT\",\n\t\t\t\t\t\"original\": \"Italiano\",\n\t\t\t\t\t\"name\": \"Italian\"\n\t\t\t\t},\n\t\t\t\t\"ja-JP\": {\n\t\t\t\t\t\"code\": \"ja-JP\",\n\t\t\t\t\t\"original\": \"日本語\",\n\t\t\t\t\t\"name\": \"Japanese\"\n\t\t\t\t},\n\t\t\t\t\"km-KH\": {\n\t\t\t\t\t\"code\": \"km-KH\",\n\t\t\t\t\t\"original\": \"ភាសាខ្មែរ\",\n\t\t\t\t\t\"name\": \"Khmer\"\n\t\t\t\t},\n\t\t\t\t\"ko-KR\": {\n\t\t\t\t\t\"code\": \"ko-KR\",\n\t\t\t\t\t\"original\": \"한국어\",\n\t\t\t\t\t\"name\": \"Korean\"\n\t\t\t\t},\n\t\t\t\t\"lt-LT\": {\n\t\t\t\t\t\"code\": \"lt-LT\",\n\t\t\t\t\t\"original\": \"Lietuvių\",\n\t\t\t\t\t\"name\": \"Lithuanian\"\n\t\t\t\t},\n\t\t\t\t\"lv-LV\": {\n\t\t\t\t\t\"code\": \"lv-LV\",\n\t\t\t\t\t\"original\": \"Latviešu\",\n\t\t\t\t\t\"name\": \"Latvian\"\n\t\t\t\t},\n\t\t\t\t\"mn-MN\": {\n\t\t\t\t\t\"code\": \"mn-MN\",\n\t\t\t\t\t\"original\": \"Монгол\",\n\t\t\t\t\t\"name\": \"Mongolian\"\n\t\t\t\t},\n\t\t\t\t\"nb-NO\": {\n\t\t\t\t\t\"code\": \"nb-NO\",\n\t\t\t\t\t\"original\": \"Norsk bokmål\",\n\t\t\t\t\t\"name\": \"Norwegian (Bokmål)\"\n\t\t\t\t},\n\t\t\t\t\"nl-NL\": {\n\t\t\t\t\t\"code\": \"nl-NL\",\n\t\t\t\t\t\"original\": \"Nederlands\",\n\t\t\t\t\t\"name\": \"Dutch\"\n\t\t\t\t},\n\t\t\t\t\"nn-NO\": {\n\t\t\t\t\t\"code\": \"nn-NO\",\n\t\t\t\t\t\"original\": \"Norsk nynorsk\",\n\t\t\t\t\t\"name\": \"Norwegian (Nynorsk)\"\n\t\t\t\t},\n\t\t\t\t\"pl-PL\": {\n\t\t\t\t\t\"code\": \"pl-PL\",\n\t\t\t\t\t\"original\": \"Polski\",\n\t\t\t\t\t\"name\": \"Polish\"\n\t\t\t\t},\n\t\t\t\t\"pt-BR\": {\n\t\t\t\t\t\"code\": \"pt-BR\",\n\t\t\t\t\t\"original\": \"Português (Brasil)\",\n\t\t\t\t\t\"name\": \"Portuguese (Brazil)\"\n\t\t\t\t},\n\t\t\t\t\"pt-PT\": {\n\t\t\t\t\t\"code\": \"pt-PT\",\n\t\t\t\t\t\"original\": \"Português (Portugal)\",\n\t\t\t\t\t\"name\": \"Portuguese (Portugal)\"\n\t\t\t\t},\n\t\t\t\t\"ro-RO\": {\n\t\t\t\t\t\"code\": \"ro-RO\",\n\t\t\t\t\t\"original\": \"Română\",\n\t\t\t\t\t\"name\": \"Romanian\"\n\t\t\t\t},\n\t\t\t\t\"ru-RU\": {\n\t\t\t\t\t\"code\": \"ru-RU\",\n\t\t\t\t\t\"original\": \"Русский\",\n\t\t\t\t\t\"name\": \"Russian\"\n\t\t\t\t},\n\t\t\t\t\"sk-SK\": {\n\t\t\t\t\t\"code\": \"sk-SK\",\n\t\t\t\t\t\"original\": \"Slovenčina\",\n\t\t\t\t\t\"name\": \"Slovak\"\n\t\t\t\t},\n\t\t\t\t\"sl-SI\": {\n\t\t\t\t\t\"code\": \"sl-SI\",\n\t\t\t\t\t\"original\": \"Slovenščina\",\n\t\t\t\t\t\"name\": \"Slovenian\"\n\t\t\t\t},\n\t\t\t\t\"sr-RS\": {\n\t\t\t\t\t\"code\": \"sr-RS\",\n\t\t\t\t\t\"original\": \"Српски / Srpski\",\n\t\t\t\t\t\"name\": \"Serbian\"\n\t\t\t\t},\n\t\t\t\t\"sv-SE\": {\n\t\t\t\t\t\"code\": \"sv-SE\",\n\t\t\t\t\t\"original\": \"Svenska\",\n\t\t\t\t\t\"name\": \"Swedish\"\n\t\t\t\t},\n\t\t\t\t\"th-TH\": {\n\t\t\t\t\t\"code\": \"th-TH\",\n\t\t\t\t\t\"original\": \"ไทย\",\n\t\t\t\t\t\"name\": \"Thai\"\n\t\t\t\t},\n\t\t\t\t\"tr-TR\": {\n\t\t\t\t\t\"code\": \"tr-TR\",\n\t\t\t\t\t\"original\": \"Türkçe\",\n\t\t\t\t\t\"name\": \"Turkish\"\n\t\t\t\t},\n\t\t\t\t\"uk-UA\": {\n\t\t\t\t\t\"code\": \"uk-UA\",\n\t\t\t\t\t\"original\": \"Українська\",\n\t\t\t\t\t\"name\": \"Ukrainian\"\n\t\t\t\t},\n\t\t\t\t\"vi-VN\": {\n\t\t\t\t\t\"code\": \"vi-VN\",\n\t\t\t\t\t\"original\": \"Tiếng Việt\",\n\t\t\t\t\t\"name\": \"Vietnamese\"\n\t\t\t\t},\n\t\t\t\t\"zh-CN\": {\n\t\t\t\t\t\"code\": \"zh-CN\",\n\t\t\t\t\t\"original\": \"中文 (中国大陆)\",\n\t\t\t\t\t\"name\": \"Chinese (PRC)\"\n\t\t\t\t},\n\t\t\t\t\"zh-TW\": {\n\t\t\t\t\t\"code\": \"zh-TW\",\n\t\t\t\t\t\"original\": \"中文 (台灣)\",\n\t\t\t\t\t\"name\": \"Chinese (Taiwan)\"\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t})();\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tfunction jsonToQueryString(json) {\n\t\t\treturn '?' + Object.keys(json).map(function (key) {\n\t\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(json[key]);\n\t\t\t}).join('&');\n\t\t}\n\t\n\t\tangular.module('DataDashboard').factory('$marketcloud', MarketcloudFactory);\n\t\n\t\tMarketcloudFactory.$inject = ['$http', '$q', '$cache', '$account', '$application'];\n\t\n\t\tfunction MarketcloudFactory($http, $q, $cache, $account, $application) {\n\t\n\t\t\tvar request = function request(method, endpoint, data, options) {\n\t\n\t\t\t\tvar role = $application.get('role');\n\t\n\t\t\t\t// Guests users cannot perform requests\n\t\t\t\tif (role === 'guest' && method !== \"GET\") {\n\t\t\t\t\tnotie.alert(2, \"Action not allowed since your role is 'guest'.\", 2);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar url = window.API_BASE_URL + '/' + endpoint;\n\t\n\t\t\t\tif (\"GET\" === method) {\n\t\t\t\t\tvar cacheKey = endpoint + jsonToQueryString(data || {});\n\t\t\t\t\t// We invoke cache only for GET requests\n\t\t\t\t\tif ($cache.has(cacheKey)) {\n\t\t\t\t\t\treturn $q.when($cache.get(cacheKey));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar config = {\n\t\t\t\t\tmethod: method,\n\t\t\t\t\turl: url,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Authorization': window.public_key + ':' + window.token\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\toptions = options || {};\n\t\n\t\t\t\tif ('GET' === method) config.params = data || {};else {\n\t\n\t\t\t\t\tconfig.data = data || {};\n\t\t\t\t}\n\t\n\t\t\t\treturn $http(config).then(function (response) {\n\t\n\t\t\t\t\tif ('GET' === method) {\n\t\t\t\t\t\t$cache.set(endpoint, response);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('PUT' === method || 'PATCH' === method) {\n\t\t\t\t\t\t// Devo invalidare la cache della risorsa e della collection\n\t\t\t\t\t\t// ex /resource/:id\n\t\t\t\t\t\t//  /resource/:id/subresources\n\t\t\t\t\t\t// /resource\n\t\t\t\t\t\t// Endpoint è qualcosa del tipo sopra,\n\t\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating GET cache to this resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('POST' === method) {\n\t\t\t\t\t\t$cache.delByPattern(endpoint); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('DELETE' === method) {\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn $q.when(response);\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\treturn $q.reject(error);\n\t\t\t\t});\n\t\t\t};\n\t\n\t\t\tvar resourceFactory = function resourceFactory(resource_name) {\n\t\t\t\treturn {\n\t\t\t\t\tlist: function list(query, options) {\n\t\t\t\t\t\tquery = query || {};\n\t\t\t\t\t\tif ('object' !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new Error('$marketcloud.' + resource_name + '.list(query) query must be object');\n\t\t\t\t\t\treturn request('GET', resource_name, query, options);\n\t\t\t\t\t},\n\t\t\t\t\tgetById: function getById(id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + id, options);\n\t\t\t\t\t},\n\t\t\t\t\tsave: function save(data, options) {\n\t\t\t\t\t\tif ('object' !== (typeof data === 'undefined' ? 'undefined' : _typeof(data))) throw new Error('$marketcloud.' + resource_name + '.save(data) data must be object');\n\t\t\t\t\t\treturn request('POST', resource_name, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function update(id, data, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\t\treturn request('PUT', resource_name + '/' + id, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tdelete: function _delete(id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\t\treturn request('DELETE', resource_name + '/' + id, options);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tvar subResourceFactory = function subResourceFactory(resource_name, sub_resource_name) {\n\t\t\t\treturn {\n\t\t\t\t\tlist: function list(parent_id, query, options) {\n\t\t\t\t\t\tquery = query || {};\n\t\t\t\t\t\tif ('object' !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.list(query) query must be object');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name, query, options);\n\t\t\t\t\t},\n\t\t\t\t\tgetById: function getById(parent_id, id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t\t},\n\t\t\t\t\tsave: function save(parent_id, data, options) {\n\t\t\t\t\t\tif ('object' !== (typeof data === 'undefined' ? 'undefined' : _typeof(data))) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.save(data) data must be object, got ' + (typeof data === 'undefined' ? 'undefined' : _typeof(data)));\n\t\t\t\t\t\treturn request('POST', resource_name + '/' + parent_id + '/' + sub_resource_name, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function update(parent_id, id, data, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\t\treturn request('PUT', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tdelete: function _delete(parent_id, id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\t\treturn request('DELETE', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tvar resources = ['addresses', 'brands', 'categories', 'collections', 'events', 'coupons', 'carts', 'products', 'orders', 'invoices', 'users', 'contents', 'staticContents', 'media', 'notifications', 'promotions', 'shippings', 'payments', 'taxes', 'paymentMethods', 'variables'];\n\t\n\t\t\tvar factory = {};\n\t\n\t\t\tresources.forEach(function (resource_name) {\n\t\t\t\tfactory[resource_name] = resourceFactory(resource_name);\n\t\t\t});\n\t\n\t\t\tfactory.variants = subResourceFactory('products', 'variants');\n\t\n\t\t\tfactory.refunds = subResourceFactory('orders', 'refunds');\n\t\t\tfactory.payments = subResourceFactory('orders', 'payments');\n\t\t\tfactory.shipments = subResourceFactory('orders', 'shipments');\n\t\n\t\t\treturn factory;\n\t\t}\n\t})();\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$models', ['$http', '$q', ModelsFactory]);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles writes and reads\r\n\t   *   for the application object.\r\n\t   *\r\n\t   *   This avoids the use of the window object;\r\n\t   *   \r\n\t   */\n\t  function ModelsFactory($http, $q) {\n\t\n\t    if (!Schematic) throw new Error('Models factory requires Schematic library');\n\t\n\t    // Container object we will return\n\t    var Types = {};\n\t\n\t    Types.Notifications = {};\n\t\n\t    Types.Notifications[\"orders.create\"] = new Schematic.Schema('orders.create', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order: {\n\t        required: true,\n\t        type: 'object'\n\t      }\n\t    });\n\t    Types.Notifications[\"orders.update.processing\"] = new Schematic.Schema('orders.update.processing', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order_id: {\n\t        required: true,\n\t        type: 'number'\n\t      }\n\t    });\n\t    Types.Notifications[\"orders.update.completed\"] = new Schematic.Schema('orders.update.completed', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order_id: {\n\t        required: true,\n\t        type: 'number'\n\t      }\n\t    });\n\t    Types.Notifications[\"users.create\"] = new Schematic.Schema('users.create', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      user: {\n\t        required: true,\n\t        type: 'object'\n\t      }\n\t    });\n\t\n\t    Types.Bundle = new Schematic.Schema('Bundle', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: \"number\"\n\t        },\n\t        required: true\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t    Types.Payment = new Schematic.Schema('Payment', {\n\t      payment_method_id: {\n\t        required: false,\n\t        type: \"number\"\n\t      },\n\t      method: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      order_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      amount: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      data: {\n\t        type: \"object\"\n\t      }\n\t    });\n\t    Types.PaymentMethod = new Schematic.Schema('PaymentMethod', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 100\n\t      },\n\t      description: {\n\t        type: \"string\",\n\t        min: 0,\n\t        max: 500\n\t      },\n\t      cost_type: {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: ['no_cost', 'fixed_fee', 'percentage_fee', 'fixed_plus_percentage']\n\t      },\n\t      fixed_fee: {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      percentage_fee: {\n\t        type: \"number\",\n\t        min: 0\n\t      }\n\t    });\n\t    Types.PromotionCondition = new Schematic.Schema('PromotionCondition', {\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: ['MIN_NUMBER_OF_PRODUCTS', 'MIN_CART_VALUE', 'CART_HAS_ITEM'],\n\t        required: true\n\t      },\n\t      \"value\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t    Types.PromotionEffect = new Schematic.Schema('PromotionEffect', {\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: ['CART_VALUE_PERCENTAGE_REDUCTION', 'CART_VALUE_NET_REDUCTION', 'CART_ITEMS_NET_REDUCTION', // price reduction to apply on each item price\n\t        'CART_ITEMS_PERCENTAGE_REDUCTION', // price reduction to apply on each item price\n\t        'FREE_SHIPPING'],\n\t        required: true\n\t      },\n\t      \"value\": {\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Promotion = new Schematic.Schema('Promotion', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 130,\n\t        required: true\n\t      },\n\t      \"active\": {\n\t        type: \"boolean\",\n\t        required: true\n\t      },\n\t      \"conditions\": {\n\t        type: 'array',\n\t        elements: {\n\t          type: Types.PromotionCondition\n\t        }\n\t      },\n\t      \"effects\": {\n\t        type: 'array',\n\t        required: true,\n\t        elements: {\n\t          type: Types.PromotionEffect\n\t        }\n\t      }\n\t    });\n\t\n\t    Types.BundleEntry = new Schematic.Schema('BundleEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"bundle_price\": {},\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Bundle = new Schematic.Schema('Bundle', {\n\t      name: {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 140,\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      },\n\t      items: {\n\t        type: \"array\",\n\t        required: true,\n\t        elements: {\n\t          type: Types.BundleEntry\n\t        }\n\t      },\n\t      pricing_rule: {\n\t        type: \"string\",\n\t        whitelist: [\"fixed\", \"inherit\"]\n\t      }\n\t    });\n\t\n\t    Types.Category = new Schematic.Schema('Category', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 1400\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      },\n\t      \"parent_id\": {\n\t        type: \"number\",\n\t        required: false\n\t      }\n\t\n\t    });\n\t\n\t    Types.CategoryNew = new Schematic.Schema('Category', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 1400\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      },\n\t      \"path\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"parent\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.CollectionEntry = new Schematic.Schema('CollectionEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Collection = new Schematic.Schema('Collection', {\n\t      name: {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 140,\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      },\n\t      items: {\n\t        type: \"array\",\n\t        required: true,\n\t        elements: {\n\t          type: Types.CollectionEntry\n\t        }\n\t      }\n\t    });\n\t\n\t    Types.ContentAuthor = new Schematic.Schema('ContentAuthor', {\n\t      image_url: {\n\t        type: \"string\"\n\t      },\n\t      name: {\n\t        type: \"string\"\n\t      },\n\t      id: {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Content = new Schematic.Schema('Content', {\n\t      title: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      text: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      author: {\n\t        type: \"object\"\n\t      },\n\t      date: {\n\t        type: \"string\"\n\t      },\n\t      published: {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.StaticContent = new Schematic.Schema('StaticContent', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      content: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      published: {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.CartEntry = new Schematic.Schema('CartEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t    Types.CartUpdateEntry = new Schematic.Schema('CartUpdateEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Cart = new Schematic.Schema('Cart', {\n\t      \"items\": {\n\t        type: 'array',\n\t        elements: {\n\t          type: Types.CartEntry\n\t        },\n\t        required: true\n\t      },\n\t      \"user_id\": {\n\t        type: 'number'\n\t      }\n\t    });\n\t\n\t    Types.CartUpdate = new Schematic.Schema('CartUpdate', {\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: \"object\"\n\t        },\n\t        required: true\n\t      },\n\t      \"op\": {\n\t        type: \"string\",\n\t        whitelist: [\"add\", \"remove\", \"update\"]\n\t      }\n\t    });\n\t\n\t    Types.Coupon = new Schematic.Schema('Coupon', {\n\t      \"code\": {\n\t        type: \"string\",\n\t        min: \"1\",\n\t        max: \"30\",\n\t        required: true\n\t      },\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: \"1\",\n\t        max: \"30\",\n\t        required: true\n\t      },\n\t      \"target_type\": {\n\t        type: \"string\",\n\t        whitelist: ['CART_COUPON', 'PRODUCT_COUPON', 'CATEGORY_COUPON', 'PRODUCTS_COUPON'],\n\t        required: true\n\t      },\n\t      \"target_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"discount_type\": {\n\t        type: \"string\",\n\t        whitelist: ['NET_REDUCTION', 'PERCENTAGE_REDUCTION'],\n\t        required: true\n\t      },\n\t      \"discount_value\": {\n\t        type: \"number\",\n\t        min: 0,\n\t        required: true\n\t      },\n\t      \"active\": {\n\t        type: \"boolean\",\n\t        required: true\n\t      },\n\t      \"usages_left\": {\n\t        type: \"number\",\n\t        required: false\n\t      },\n\t      \"expiration_date\": {\n\t        type: \"string\",\n\t        required: false\n\t      }\n\t    });\n\t\n\t    Types.Brand = new Schematic.Schema('Brand', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 50,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.File = new Schematic.Schema('File', {\n\t      file: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      filename: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      name: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 140\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.Notification = new Schematic.Schema('Notification', {\n\t      event: {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: ['custom', //Custom defined events, can only be sent programmaticaly\n\t        'order.create', // Sent automatically by the system\n\t        'order.paid', // Sent automatically by the system\n\t        'user.create' // Sent automatically by the system\n\t        ]\n\t      },\n\t      from_name: {\n\t        type: \"string\"\n\t      },\n\t      from_email: {\n\t        type: \"string\"\n\t      },\n\t      subject: {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.User = new Schematic.Schema('User', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 255\n\t      },\n\t      \"email\": {\n\t        type: \"string\",\n\t        min: 4,\n\t        max: 255\n\t      },\n\t      \"password\": {\n\t        type: \"string\",\n\t        min: 4,\n\t        max: 255\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.TaxRate = new Schematic.Schema('TaxRate', {\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"postcode\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"rate\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0,\n\t        max: 100\n\t      },\n\t      \"priority\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      }\n\t    });\n\t    Types.Tax = new Schematic.Schema('Tax', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 600\n\t      },\n\t      \"rates\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.TaxRate\n\t        }\n\t      }\n\t    });\n\t    Types.Currency = new Schematic.Schema('Currency', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"formatting\": {\n\t        type: \"string\",\n\t        min: 0,\n\t        max: 3,\n\t        required: true\n\t      }\n\t    });\n\t    Types.Product = new Schematic.Schema('Product', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"type\": {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: [\"simple_product\", \"product_with_variants\", \"grouped_product\", \"bundled_product\"]\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"stock_type\": {\n\t        type: \"string\",\n\t        whitelist: [\"infinite\", \"track\", \"status\"],\n\t        required: true\n\t      },\n\t      \"stock_status\": {\n\t        type: \"string\",\n\t        whitelist: [\"in_stock\", \"out_of_stock\"]\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"weigth\": {\n\t        type: \"number\"\n\t      },\n\t      \"height\": {\n\t        type: \"number\"\n\t      },\n\t      \"depth\": {\n\t        type: \"number\"\n\t      },\n\t      \"width\": {\n\t        type: \"number\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Variant = new Schematic.Schema('Variant', {\n\t      variant_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      product_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"stock_type\": {\n\t        type: \"string\",\n\t        whitelist: [\"infinite\", \"track\", \"status\"],\n\t        required: true\n\t      },\n\t      \"stock_status\": {\n\t        type: \"string\",\n\t        whitelist: [\"in_stock\", \"out_of_stock\"]\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.InvoiceLineItem = new Schematic.Schema('InvoiceLineItem', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 140\n\t      },\n\t      description: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      price: {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      quantity: {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      }\n\t    });\n\t    Types.Invoice = new Schematic.Schema('Invoice', {\n\t      number: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      order_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      customer: {\n\t        type: \"object\",\n\t        required: true\n\t      },\n\t      company: {\n\t        type: \"object\",\n\t        required: true\n\t      },\n\t      lineItems: {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.InvoiceLineItem\n\t        }\n\t      }\n\t    });\n\t    Types.GroupedProductEntry = new Schematic.Schema('GroupedProductEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t    Types.GroupedProduct = new Schematic.Schema('GroupedProduct', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.GroupedProductEntry\n\t        },\n\t        min: 1\n\t      },\n\t      \"pricing_method\": {\n\t        type: \"string\",\n\t        whitelist: [\"dynamic_pricing\", \"fixed_pricing\"],\n\t        required: true\n\t      },\n\t      \"price\": {\n\t        type: \"number\"\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      },\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: [\"grouped_product\"]\n\t      }\n\t    });\n\t\n\t    Types.ProductWithVariants = new Schematic.Schema('Product', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"weigth\": {\n\t        type: \"number\"\n\t      },\n\t      \"height\": {\n\t        type: \"number\"\n\t      },\n\t      \"width\": {\n\t        type: \"number\"\n\t      },\n\t      \"depth\": {\n\t        type: \"number\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.Order = new Schematic.Schema('Order', {\n\t      \"status\": {\n\t        type: \"string\",\n\t        whitelist: [\"created\", \"processing\", \"evaded\", \"shipped\"]\n\t      },\n\t      \"shipping_address_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"billing_address_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"items_total\": {\n\t        type: \"number\"\n\t      },\n\t      \"display_items_total\": {\n\t        type: \"string\"\n\t      },\n\t      \"total\": {\n\t        type: \"number\"\n\t      },\n\t      \"display_total\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        required: true\n\t      },\n\t      \"currency\": {\n\t        type: \"string\",\n\t        whitelist: [\"USD\", \"CAD\", \"EUR\", \"AED\", \"AFN\", \"ALL\", \"AMD\", \"ARS\", \"AUD\", \"AZN\", \"BAM\", \"BDT\", \"BGN\", \"BHD\", \"BIF\", \"BND\", \"BOB\", \"BRL\", \"BWP\", \"BYR\", \"BZD\", \"CDF\", \"CHF\", \"CLP\", \"CNY\", \"COP\", \"CRC\", \"CVE\", \"CZK\", \"DJF\", \"DKK\", \"DOP\", \"DZD\", \"EEK\", \"EGP\", \"ERN\", \"ETB\", \"GBP\", \"GEL\", \"GHS\", \"GNF\", \"GTQ\", \"HKD\", \"HNL\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"INR\", \"IQD\", \"IRR\", \"ISK\", \"JMD\", \"JOD\", \"JPY\", \"KES\", \"KHR\", \"KMF\", \"KRW\", \"KWD\", \"KZT\", \"LBP\", \"LKR\", \"LTL\", \"LVL\", \"LYD\", \"MAD\", \"MDL\", \"MGA\", \"MKD\", \"MMK\", \"MOP\", \"MUR\", \"MXN\", \"MYR\", \"MZN\", \"NAD\", \"NGN\", \"NIO\", \"NOK\", \"NPR\", \"NZD\", \"OMR\", \"PAB\", \"PEN\", \"PHP\", \"PKR\", \"PLN\", \"PYG\", \"QAR\", \"RON\", \"RSD\", \"RUB\", \"RWF\", \"SAR\", \"SDG\", \"SEK\", \"SGD\", \"SOS\", \"SYP\", \"THB\", \"TND\", \"TOP\", \"TRY\", \"TTD\", \"TWD\", \"TZS\", \"UAH\", \"UGX\", \"UYU\", \"UZS\", \"VEF\", \"VND\", \"XAF\", \"XOF\", \"YER\", \"ZAR\", \"ZMK\"]\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"notes\": {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      \"shipping_fee\": {\n\t        type: \"number\",\n\t        min: 0\n\t      }\n\t    });\n\t\n\t    Types.Address = new Schematic.Schema('Address', {\n\t      \"full_name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        max: 140\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"address1\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 250\n\t      },\n\t      \"address2\": {\n\t        type: \"string\",\n\t        max: 250\n\t      },\n\t      \"postal_code\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 20\n\t      },\n\t      phone_number: {\n\t        type: \"string\",\n\t        max: 30\n\t      },\n\t      email: {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      alternate_phone_number: {\n\t        type: \"string\",\n\t        max: 140\n\t      }\n\t    });\n\t\n\t    // This resemble a taxrate\n\t    Types.ShippingZone = new Schematic.Schema('ShippingZone', {\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"postcode\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Shipping = new Schematic.Schema('Shipping', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 3\n\t      },\n\t      \"base_cost\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      \"per_item_cost\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"min_price\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"max_price\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"min_weight\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"max_weight\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"zones\": {\n\t        type: \"array\"\n\t      }\n\t    });\n\t\n\t    Types.Store = new Schematic.Schema('Store', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"owner_email\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"custom_attributes\": {\n\t        type: \"object\"\n\t      }\n\t    });\n\t\n\t    Types.Customer = new Schematic.Schema('Customer', {\n\t      \"full_name\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"shipping_address\": {\n\t        type: Types.Address,\n\t        required: true\n\t      },\n\t      \"billing_address\": {\n\t        type: Types.Address,\n\t        required: true\n\t      },\n\t      \"email\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Variable = new Schematic.Schema('Variable', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 500\n\t      },\n\t      type: {\n\t        type: \"string\",\n\t        required: false,\n\t        whitelist: ['string', 'number', 'boolean', 'object', 'array']\n\t      },\n\t      value: {\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Shipment = new Schematic.Schema('Shipment', {\n\t      \"date\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"delivery_date\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"text\"\n\t      },\n\t      \"method\": {\n\t        type: Types.Shipping\n\t      }\n\t\n\t    });\n\t\n\t    return Types;\n\t  }\n\t})();\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tangular.module('DataDashboard').factory('NotificationsPresetsFactory', NotificationsPresetsFactory);\n\t\n\t\tfunction NotificationsPresetsFactory() {\n\t\n\t\t\tvar presets = {};\n\t\n\t\t\tpresets['invoices.create'] = {\n\t\t\t\tname: 'An order is created',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\t\tsubject: 'Your invoice',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Your invoice',\n\t\t\t\t\tmessage: 'Attached to this email you can find your most recent invoice for your order at {{application.name}}'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.create'] = {\n\t\t\t\tname: 'An order is created',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\t\tsubject: 'We received your order!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\t\tintroduction: 'Your order has been received and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['users.create'] = {\n\t\t\t\tname: 'New customer account',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an account',\n\t\t\t\tsubject: 'Welcome!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Welcome to {{application.name}}!',\n\t\t\t\t\tintroduction: 'Thank you for creating an account with us!',\n\t\t\t\t\tbuttonLabel: 'Visit our store'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['users.recoverPassword'] = {\n\t\t\t\tname: 'Password recovery',\n\t\t\t\tdescription: 'This notification is sent to the customer who requests a password recovery',\n\t\t\t\tsubject: 'Password recovery',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Recover your password',\n\t\t\t\t\tintroduction: 'Hello, we sent you this email because you requested to recover your password. If it\\'s not the case, please ignore this email.',\n\t\t\t\t\tredirect_url: 'http://example.com/passwordrecovery'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.update.processing'] = {\n\t\t\t\tname: 'An order is paid',\n\t\t\t\tdescription: 'This notification is sent to the customer who paid an order',\n\t\t\t\tsubject: 'Your order is confirmed!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\t\tintroduction: 'Your order has been confirmed and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.update.completed'] = {\n\t\t\t\tname: 'An order is shipped',\n\t\t\t\tdescription: 'This notification is sent to the customer when his/her order is shipped.',\n\t\t\t\tsubject: 'We shipped your order!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Your order is on the way',\n\t\t\t\t\tintroduction: 'We are happy to inform you that we shipped your order #{{order.id}} !',\n\t\t\t\t\ttracking_code_introduction: 'You can click on the following tracking number to track your package on the carrier\\'s website.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.refund'] = {\n\t\t\t\tname: 'An order is refunded',\n\t\t\t\tdescription: 'This notification is sent to the customer when his/her order is refunded.',\n\t\t\t\tsubject: 'Refund for order {{order.id}}',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Refund for order {{order.id}}',\n\t\t\t\t\tintroduction: 'A refund was recently created for your order. Details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\treturn presets;\n\t\t}\n\t})();\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$pagination', PaginationFactory);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles the pagination object\r\n\t   *   \r\n\t   */\n\t  function PaginationFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    /*\r\n\t     * @param {HTTPResponse} httpResponse The response object\r\n\t     */\n\t    Factory.fromHTTPResponse = function (httpResponse) {\n\t      return {\n\t        currentPage: httpResponse.data.page,\n\t        numberOfPages: httpResponse.data.pages,\n\t        nextPage: httpResponse.data._links.next || null,\n\t        previousPage: httpResponse.data._links.prev || null,\n\t        count: httpResponse.data.count\n\t      };\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.factory('rolePresets', function () {\n\t    function getCommonPublicProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getAllTrueProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        };\n\t    }\n\t\n\t    function getAllFalseProfile() {\n\t        return {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getCommonUserProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getCommonAdminProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        };\n\t    }\n\t\n\t    var publicAccessMap = {\n\t        addresses: getAllFalseProfile(),\n\t        brands: getCommonPublicProfile(),\n\t        carts: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: true,\n\t            patch: true,\n\t            create: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: false\n\t        },\n\t        categories: getCommonPublicProfile(),\n\t        collections: getCommonPublicProfile(),\n\t        contents: getCommonPublicProfile(),\n\t        coupons: getAllFalseProfile(),\n\t        promotions: getCommonPublicProfile(),\n\t        currencies: getCommonPublicProfile(),\n\t        orders: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: true,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        paymentMethods: getCommonPublicProfile(),\n\t        invoices: getAllFalseProfile(),\n\t        products: getCommonPublicProfile(),\n\t        shippings: getCommonPublicProfile(),\n\t        stores: getCommonPublicProfile(),\n\t        taxes: getCommonPublicProfile(),\n\t        users: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: true,\n\t            update: false,\n\t            delete: false,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonPublicProfile()\n\t    };\n\t\n\t    var userAccessMap = {\n\t        addresses: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        brands: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        carts: {\n\t            list: true,\n\t            findOne: false,\n\t            getById: true,\n\t            patch: true,\n\t            create: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: true\n\t        },\n\t        categories: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        collections: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        contents: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        coupons: getAllFalseProfile(),\n\t        promotions: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        currencies: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        orders: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        paymentMethods: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true, // I can order stuff on sites even if i'm not authenticated\n\t            update: false,\n\t            delete: false\n\t        },\n\t        products: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        shippings: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        stores: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        taxes: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        invoices: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        users: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonUserProfile()\n\t    };\n\t\n\t    var adminAccessMap = {\n\t        addresses: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        invoices: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        brands: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        carts: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            patch: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: true\n\t        },\n\t        categories: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        collections: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        contents: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        coupons: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        promotions: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        currencies: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t\n\t        orders: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        paymentMethods: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        products: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        shippings: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        stores: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        taxes: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        users: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonAdminProfile()\n\t    };\n\t\n\t    return {\n\t        public: publicAccessMap,\n\t        user: userAccessMap,\n\t        admin: adminAccessMap\n\t    };\n\t});\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t    'use strict';\n\t\n\t    angular.module('DataDashboard').factory('StormConfiguration', StormConfigurationFactory);\n\t\n\t    StormConfigurationFactory.$inject = ['$window', '$application'];\n\t\n\t    /*\r\n\t    *   AngularJS Factory that handles writes and reads from\r\n\t    *   localStorage (or similar backend) for managing Storm user preferences.\r\n\t    *\r\n\t    *   For example it can be used to save default filters on a certain view\r\n\t    * \r\n\t    *   It can also be used to save some custom behaviour.\r\n\t    *\r\n\t    *   The main feature should be that it wraps all the configs in a json object\r\n\t    *   which gets written to storage and read every time as a whole.\r\n\t    */\n\t    function StormConfigurationFactory($window, $application) {\n\t\n\t        var Factory = {};\n\t\n\t        console.info(\"Loading Storm configuration information from localStorage\");\n\t\n\t        var LOCALSTORAGE_KEY = 'Marketcloud.Storm.Configuration.' + ($application.get('id') || \"unkownAppId\");\n\t\n\t        function loadFromStorage() {\n\t            var storedJson = window.localStorage.getItem(LOCALSTORAGE_KEY);\n\t            if (storedJson) Factory._data = JSON.parse(storedJson);else Factory._data = {};\n\t        }\n\t\n\t        function persistToStorage() {\n\t            var s = JSON.stringify(Factory._data);\n\t            console.log(\"Persisting to storage with key \" + LOCALSTORAGE_KEY, s);\n\t            window.localStorage.setItem(LOCALSTORAGE_KEY, s);\n\t        }\n\t\n\t        Factory._data = {};\n\t\n\t        Factory.loadFromStorage = loadFromStorage;\n\t        Factory.persistToStorage = persistToStorage;\n\t\n\t        Factory.loadFromStorage();\n\t\n\t        Factory.get = function (key) {\n\t\n\t            if (\"undefined\" !== typeof key) return this._data[key];else return this._data;\n\t        };\n\t\n\t        Factory.set = function (key, value, persist) {\n\t\n\t            persist = persist || true;\n\t\n\t            if (\"string\" !== typeof key) throw new Error(\"StormConfigurationFactory.set(key,value) 'key' must be String\");\n\t\n\t            this._data[key] = value;\n\t\n\t            if (persist === true) Factory.persistToStorage();\n\t        };\n\t\n\t        Factory.applyTheme = function (theme) {\n\t\n\t            // Checking\n\t            if (!theme) return;\n\t\n\t            // Sanitizing the theme filename\n\t            if (theme.indexOf('.theme.css') === -1) {\n\t                theme = theme + '.theme.css';\n\t            }\n\t\n\t            var url = '/modules/data_dashboard/css/themes/' + theme;\n\t\n\t            // Removing previously loaded themes\n\t            $(\".storm-theme-definition\").remove();\n\t\n\t            // Appending the theme to the Document\n\t            $('<link rel=\"stylesheet\" class=\"storm-theme-definition\" type=\"text/css\" href=\"' + url + '\" >').appendTo(\"head\");\n\t        };\n\t\n\t        return Factory;\n\t    }\n\t})();\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('TableManager', TableManagerFactory);\n\t\n\t  TableManagerFactory.$inject = [];\n\t\n\t  /*\r\n\t  *   AngularJS Factory that handles the configuration\r\n\t  *   of data tables\r\n\t  */\n\t  function TableManagerFactory() {\n\t\n\t    var factory = {};\n\t\n\t    // This is to avoid to overflow controllers with shared functionality\n\t    function attachTableManagerFunctions(scope) {\n\t\n\t      if (!scope.hasOwnProperty(\"visibleColumns\")) {\n\t        scope.visibleColumns = [];\n\t      }\n\t    }\n\t\n\t    return factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('Marketcloud.Shared').factory('TaxRates', function () {\n\t\n\t  return [{\n\t    \"country\": \"Australia\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"10.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"AU\"\n\t  }, {\n\t    \"country\": \"Bangladesh\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"15.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"BD\"\n\t  }, {\n\t    \"country\": \"Belgium\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"BTW\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"BE\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"British Columbia\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"BC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Saskatchewan\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"SK\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Manitoba\",\n\t    \"rate\": \"8.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"MB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Quebec\",\n\t    \"rate\": \"9.975\",\n\t    \"name\": \"QST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"QC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Ontario\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"ON\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Newfoundland and Labrador\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NL\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"New Brunswick\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Prince Edward Island\",\n\t    \"rate\": \"14.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"PE\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Nova Scotia\",\n\t    \"rate\": \"15.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NS\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Alberta\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"AB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"British Columbia\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"BC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Northwest Territories\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NT\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Nunavut\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NU\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Yukon\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"YT\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Saskatchewan\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"SK\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Manitoba\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"MB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Quebec\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"QC\"\n\t  }, {\n\t    \"country\": \"Finland\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"24.0000\",\n\t    \"name\": \"ALV\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"FI\"\n\t  }, {\n\t    \"country\": \"France\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"20.0000\",\n\t    \"name\": \"TVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"FR\"\n\t  }, {\n\t    \"country\": \"Germany\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"19.0000\",\n\t    \"name\": \"Mwst.\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"DE\"\n\t  }, {\n\t    \"country\": \"Hungary\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"27.0000\",\n\t    \"name\": \"ÁFA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"HU\"\n\t  }, {\n\t    \"country\": \"Italy\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"22.0000\",\n\t    \"name\": \"IVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"IT\"\n\t  }, {\n\t    \"country\": \"Japan\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"8.0000\",\n\t    \"name\": \"Consumption tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"JP\"\n\t  }, {\n\t    \"country\": \"Nepal\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NP\"\n\t  }, {\n\t    \"country\": \"Netherlands\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NL\"\n\t  }, {\n\t    \"country\": \"Norway\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"25.0000\",\n\t    \"name\": \"MVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NO\"\n\t  }, {\n\t    \"country\": \"Poland\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"23.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"PL\"\n\t  }, {\n\t    \"country\": \"Romania\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"19.0000\",\n\t    \"name\": \"TVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"RO\"\n\t  }, {\n\t    \"country\": \"South Africa\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"14.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"ZA\"\n\t  }, {\n\t    \"country\": \"Spain\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"ES\"\n\t  }, {\n\t    \"country\": \"Thailand\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"TH\"\n\t  }, {\n\t    \"country\": \"Turkey\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"18.0000\",\n\t    \"name\": \"KDV\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"TR\"\n\t  }, {\n\t    \"country\": \"United Kingdom\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"20.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"GB\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Alabama\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Arizona\",\n\t    \"rate\": \"5.6000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AZ\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Arkansas\",\n\t    \"rate\": \"6.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AR\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"California\",\n\t    \"rate\": \"7.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Colorado\",\n\t    \"rate\": \"2.9000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CO\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Connecticut\",\n\t    \"rate\": \"6.3500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"District of Columbia\",\n\t    \"rate\": \"5.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"DC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Florida\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"FL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Georgia\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"GA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Guam\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"GU\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Hawaii\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"HI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Idaho\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ID\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Illinois\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Indiana\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Iowa\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Kansas\",\n\t    \"rate\": \"6.1500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"KS\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Kentucky\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"KY\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Louisiana\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"LA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Maine\",\n\t    \"rate\": \"5.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ME\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Maryland\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MD\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Massachusetts\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Michigan\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Minnesota\",\n\t    \"rate\": \"6.8750\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Mississippi\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MS\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Missouri\",\n\t    \"rate\": \"4.225\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MO\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Nebraska\",\n\t    \"rate\": \"5.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NE\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Nevada\",\n\t    \"rate\": \"6.8500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NV\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New Jersey\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NJ\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New Mexico\",\n\t    \"rate\": \"5.1250\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NM\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New York\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NY\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"North Carolina\",\n\t    \"rate\": \"4.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"North Dakota\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ND\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Ohio\",\n\t    \"rate\": \"5.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"OH\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Oklahoma\",\n\t    \"rate\": \"4.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"OK\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Pennsylvania\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"PA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Puerto Rico\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"PR\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Rhode Island\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"RI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"South Carolina\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"SC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"South Dakota\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"SD\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Tennessee\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"TN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Texas\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"TX\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Utah\",\n\t    \"rate\": \"5.9500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"UT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Vermont\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"VT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Virginia\",\n\t    \"rate\": \"5.3000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"VA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Washington\",\n\t    \"rate\": \"6.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"West Virginia\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WV\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Wisconsin\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Wyoming\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WY\"\n\t  }];\n\t});\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$utils', UtilsFactory);\n\t\n\t  /*\r\n\t   *   AngularJS Factory that handles the pagination object\r\n\t   *   \r\n\t   */\n\t  function UtilsFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    var flatten = function flatten(data) {\n\t      var result = {};\n\t\n\t      function recurse(cur, prop) {\n\t        if (Object(cur) !== cur) {\n\t          result[prop] = cur;\n\t        } else if (Array.isArray(cur)) {\n\t          for (var i = 0, l = cur.length; i < l; i++) {\n\t            recurse(cur[i], prop + \"[\" + i + \"]\");\n\t          }if (l === 0) result[prop] = [];\n\t        } else {\n\t          var isEmpty = true;\n\t          for (var p in cur) {\n\t            isEmpty = false;\n\t            recurse(cur[p], prop ? prop + \".\" + p : p);\n\t          }\n\t          if (isEmpty && prop) result[prop] = {};\n\t        }\n\t      }\n\t      recurse(data, \"\");\n\t      return result;\n\t    };\n\t\n\t    var unflatten = function unflatten(data) {\n\t      \"use strict\";\n\t\n\t      if (Object(data) !== data || Array.isArray(data)) return data;\n\t      var regex = /\\,?([^.\\[\\]]+)|\\[(\\d+)\\]/g,\n\t          resultholder = {};\n\t      for (var p in data) {\n\t        var cur = resultholder,\n\t            prop = \"\",\n\t            m;\n\t        while (m = regex.exec(p)) {\n\t          cur = cur[prop] || (cur[prop] = m[2] ? [] : {});\n\t          prop = m[2] || m[1];\n\t        }\n\t        cur[prop] = data[p];\n\t      }\n\t      return resultholder[\"\"] || resultholder;\n\t    };\n\t\n\t    Factory.flatten = flatten;\n\t    Factory.unflatten = unflatten;\n\t\n\t    /*\r\n\t     * @param {String} str The input string\r\n\t     * @return {String} The slug--ified version of the string\r\n\t     */\n\t    Factory.getSlugFromString = function (str) {\n\t      return str.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    };\n\t\n\t    /*\r\n\t     * @param {HTTPResponse} httpResponse The response object\r\n\t     */\n\t    Factory.getPaginationFromHTTPResponse = function (httpResponse) {\n\t      return {\n\t        currentPage: httpResponse.data.page,\n\t        numberOfPages: httpResponse.data.pages,\n\t        nextPage: httpResponse.data._links.next || null,\n\t        previousPage: httpResponse.data._links.prev || null,\n\t        count: httpResponse.data.count\n\t      };\n\t    };\n\t\n\t    // Exports an array of objects or an object to a JSON file\n\t    function JSONExport(data, title) {\n\t      if (!title) title = 'Marketcloud_export_' + String(Date.now()) + '.json';\n\t\n\t      var encodedUri = encodeURI('data:application/json;charset=utf-8,' + JSON.stringify(data));\n\t      var link = document.createElement('a');\n\t      link.setAttribute('href', encodedUri);\n\t      link.setAttribute('download', title);\n\t      document.body.appendChild(link); // Required for FF\n\t\n\t      link.click(); // This will download the data file named \"my_data.csv\".\n\t    }\n\t\n\t    Factory.exportAsJSON = JSONExport;\n\t\n\t    // Exports an array of objects or an object to a JSON file\n\t    function CSVExport(data, title) {\n\t      if (!title) title = 'Marketcloud_export_' + String(Date.now()) + '.csv';\n\t\n\t      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + data);\n\t      var link = document.createElement('a');\n\t      link.setAttribute('href', encodedUri);\n\t      link.setAttribute('download', title);\n\t      document.body.appendChild(link); // Required for FF\n\t\n\t      link.click(); // This will download the data file named \"my_data.csv\".\n\t    }\n\t\n\t    Factory.exportAsCSV = CSVExport;\n\t\n\t    /*\r\n\t     * Simple and UN-SAFE hash function\r\n\t     *\r\n\t     * @param {String} str the input string\r\n\t     * @return {String} the hashed string\r\n\t     */\n\t    function strhash(str) {\n\t      if (str.length % 32 > 0) {\n\t        str += Array(33 - str.length % 32).join(\"z\");\n\t      }\n\t      var hash = '';\n\t      var bytes = [];\n\t      var i = 0;\n\t      var j = 0;\n\t      var k = 0;\n\t      var a = 0;\n\t      var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n\t\n\t      for (i = 0; i < str.length; i++) {\n\t        var ch = str.charCodeAt(i);\n\t        bytes[j++] = ch < 127 ? ch & 0xFF : 127;\n\t      }\n\t\n\t      var chunk_len = Math.ceil(bytes.length / 32);\n\t      for (i = 0; i < bytes.length; i++) {\n\t        j += bytes[i];\n\t        k++;\n\t        if (k == chunk_len || i == bytes.length - 1) {\n\t          a = Math.floor(j / k);\n\t          if (a < 32) hash += '0';else if (a > 126) hash += 'z';else hash += dict[Math.floor((a - 32) / 2.76)];\n\t          j = k = 0;\n\t        }\n\t      }\n\t      return hash;\n\t    }\n\t\n\t    Factory.hash = strhash;\n\t\n\t    // Given a csv file (in string form)\n\t    // returns an array of objects\n\t    Factory.CSVToJSON = function (csv) {\n\t      var rows = csv.split(\"\\n\");\n\t\n\t      var header = rows[0];\n\t      var header_fields = header.split(\",\");\n\t\n\t      var objects = [];\n\t\n\t      for (var i = 1; i < rows.length; i++) {\n\t        var o = {};\n\t        var row_fields = rows[i].split(\",\");\n\t\n\t        for (var k = 0; k < header_fields.length; k++) {\n\t          if (row_fields[k] !== \"\") {\n\t            o[header_fields[k]] = row_fields[k];\n\t\n\t            if (\"true\" === o[header_fields[k]] || \"false\" === o[header_fields[k]]) o[header_fields[k]] = Boolean(o[header_fields[k]]);else if (!isNaN(o[header_fields[k]])) {\n\t              // Keeping the else-if otherwise\n\t              // test will fail converting a boolean to number\n\t              o[header_fields[k]] = Number(o[header_fields[k]]);\n\t            }\n\t          }\n\t        }\n\t\n\t        objects.push(o);\n\t      }\n\t\n\t      return objects;\n\t    };\n\t\n\t    Factory.JSONToCSV = function (json) {\n\t      if (!Array.isArray(json)) json = [json];\n\t\n\t      var fields = [];\n\t\n\t      json.forEach(function (row) {\n\t        for (var k in row) {\n\t          if (fields.indexOf(k) < 0) fields.push(k);\n\t        }\n\t      });\n\t\n\t      var firstRow = fields.join(',');\n\t\n\t      var buf = firstRow + \"\\n\";\n\t\n\t      json.forEach(function (row) {\n\t        fields.forEach(function (field) {\n\t          if (row.hasOwnProperty(field) && row[field] !== null) buf += row[field] + \",\";else buf += \",\";\n\t        });\n\t        buf += \"\\n\";\n\t      });\n\t\n\t      // lets remove the last newline\n\t      buf = buf.replace(/\\n$/, \"\");\n\t\n\t      return buf;\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$validation', ValidationService);\n\t\n\t  /*\r\n\t   *   AngularJS Service that handles the pagination object\r\n\t   *   \r\n\t   */\n\t  function ValidationService() {\n\t\n\t    // Container object we will return\n\t    var Service = {};\n\t\n\t    Service.showErrorMessage = function (validation, schema, selector) {\n\t\n\t      Service.hideErrors();\n\t\n\t      selector = selector || '[ng-model=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t      if (0 === angular.element(selector).length) {\n\t        console.log(\"COuld now match selector \" + selector + \" to show error message, exiting\");\n\t        return;\n\t      }\n\t\n\t      var element = angular.element(selector);\n\t\n\t      var errorMessage = Service.getErrorMessage(validation, schema);\n\t\n\t      var parent = element.parent();\n\t\n\t      if (parent.hasClass('input-group')) parent = parent.parent();\n\t\n\t      parent.append('<div class=\"error-message\">' + errorMessage + '</div>');\n\t      parent.addClass(\"has-error\");\n\t\n\t      $('html, body').animate({\n\t        scrollTop: element.offset().top - 200\n\t      }, 500);\n\t    };\n\t\n\t    Service.getErrorMessage = function (validation, schema) {\n\t\n\t      switch (validation.failedValidator) {\n\t        case \"required\":\n\t          return \"This field is required\";\n\t\n\t        case \"type\":\n\t          return \"This field must be a \" + schema[validation.invalidPropertyName].type;\n\t\n\t        case \"min\":\n\t          if (\"number\" === schema[validation.invalidPropertyName].type) return \"Minimum value is \" + schema[validation.invalidPropertyName].min;else if (\"string\" === schema[validation.invalidPropertyName].type) return \"Minimum length is \" + schema[validation.invalidPropertyName].min;else if (\"array\" === schema[validation.invalidPropertyName].type) return \"Minimum number of elements is is \" + schema[validation.invalidPropertyName].min;else return \"Minimum is \" + schema[validation.invalidPropertyName].min;\n\t\n\t        case \"max\":\n\t          if (\"number\" === schema[validation.invalidPropertyName].type) return \"Maxiumum value is \" + schema[validation.invalidPropertyName].max;else if (\"string\" === schema[validation.invalidPropertyName].type) return \"Maxiumum length is \" + schema[validation.invalidPropertyName].max;else if (\"array\" === schema[validation.invalidPropertyName].type) return \"Maxiumum number of elements is is \" + schema[validation.invalidPropertyName].max;else return \"Maxiumum is \" + schema[validation.invalidPropertyName].max;\n\t          break;\n\t\n\t        default:\n\t          return \"This field is invalid\";\n\t          break;\n\t      }\n\t    };\n\t\n\t    Service.hideErrors = function () {\n\t      angular.element('.error-message').remove();\n\t      angular.element('.has-error').removeClass('has-error');\n\t    };\n\t\n\t    return Service;\n\t  }\n\t})();\n\n/***/ })\n/******/ ])));\n\n\n// WEBPACK FOOTER //\n// app.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9cb183d52814c882c8a6","//require('./src/app.js');\r\n\r\nfunction requireAll(requireContext) {\r\n  return requireContext.keys().map(requireContext);\r\n}\r\n\r\n\r\n// Require all JS files, including subdirectories\r\n// This will require every controller/factory/service/component\r\nvar modules = requireAll(require.context(\"./src\", true, /\\.js/));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/main.js","var map = {\n\t\"./app.js\": 2,\n\t\"./components/activeFilters/activeFilters.component.js\": 3,\n\t\"./components/addProductsCard/addProductsCard.component.js\": 4,\n\t\"./components/addressForm/addressForm.component.js\": 5,\n\t\"./components/application/application.component.js\": 6,\n\t\"./components/autocomplete/autocomplete.component.js\": 7,\n\t\"./components/backButton/backButton.component.js\": 8,\n\t\"./components/brandsSelector/brandsSelector.component.js\": 9,\n\t\"./components/categoriesSelector/categoriesSelector.component.js\": 10,\n\t\"./components/customAttributes/customAttributes.component.js\": 11,\n\t\"./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js\": 12,\n\t\"./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js\": 13,\n\t\"./components/dataTable/dataTable.component.js\": 14,\n\t\"./components/errorMessages/errorMessages.component.js\": 15,\n\t\"./components/flagIcon/flagIcon.component.js\": 16,\n\t\"./components/imageSelector/imageSelector.component.js\": 17,\n\t\"./components/imageThumbnail/imageThumbnail.component.js\": 18,\n\t\"./components/imagesCard/imagesCard.component.js\": 19,\n\t\"./components/linkHelpText/linkHelpText.component.js\": 20,\n\t\"./components/navbar/navbar.component.js\": 21,\n\t\"./components/paginationNav/paginationNav.component.js\": 22,\n\t\"./components/paginationSelector/paginationSelector.component.js\": 23,\n\t\"./components/resourcePicker/resourcePicker.component.js\": 24,\n\t\"./components/seoForm/seoForm.component.js\": 25,\n\t\"./components/sidebar/sidebar.component.js\": 26,\n\t\"./components/sortingSelector/sortingSelector.component.js\": 27,\n\t\"./components/switch/switch.component.js\": 28,\n\t\"./components/taxesSelector/taxesSelector.component.js\": 29,\n\t\"./components/toolbarSearch/toolbarSearch.component.js\": 30,\n\t\"./controllers/PaymentMethods.controller.js\": 31,\n\t\"./controllers/analytics.controller.js\": 32,\n\t\"./controllers/application/acl.controller.js\": 33,\n\t\"./controllers/application/application.new.controller.js\": 34,\n\t\"./controllers/application/applications.list.controller.js\": 35,\n\t\"./controllers/application/billing.controller.js\": 36,\n\t\"./controllers/application/collaborators.controller.js\": 37,\n\t\"./controllers/application/deploy.controller.js\": 38,\n\t\"./controllers/application/integrations.controller.js\": 39,\n\t\"./controllers/application/navigation.controller.js\": 40,\n\t\"./controllers/application/overview.controller.js\": 41,\n\t\"./controllers/application/settings.controller.js\": 42,\n\t\"./controllers/application/webhooks.controller.js\": 43,\n\t\"./controllers/brandTranslations.controller.js\": 44,\n\t\"./controllers/brands/brands.edit.js\": 45,\n\t\"./controllers/brands/brands.list.js\": 46,\n\t\"./controllers/brands/brands.new.js\": 47,\n\t\"./controllers/categories/categories.edit.js\": 48,\n\t\"./controllers/categories/categories.list.js\": 49,\n\t\"./controllers/categories/categories.new.js\": 50,\n\t\"./controllers/categoryTranslations.controller.js\": 51,\n\t\"./controllers/collectionTranslations.controller.js\": 52,\n\t\"./controllers/collections/collections.controller.js\": 53,\n\t\"./controllers/collections/collections.create.js\": 54,\n\t\"./controllers/collections/collections.edit.js\": 55,\n\t\"./controllers/collections/collections.new.js\": 56,\n\t\"./controllers/contentTranslations.controller.js\": 57,\n\t\"./controllers/contents/content.edit.js\": 58,\n\t\"./controllers/contents/content.new.js\": 59,\n\t\"./controllers/contents/contents.list.js\": 60,\n\t\"./controllers/contents/groupedProducts.edit.js\": 61,\n\t\"./controllers/contents/groupedProducts.new.js\": 62,\n\t\"./controllers/coupons/coupon.edit.js\": 63,\n\t\"./controllers/coupons/coupons.new.js\": 64,\n\t\"./controllers/deploy.js\": 65,\n\t\"./controllers/home.js\": 66,\n\t\"./controllers/integrations.js\": 67,\n\t\"./controllers/invoices/invoice.new.js\": 68,\n\t\"./controllers/invoices/invoices.edit.js\": 69,\n\t\"./controllers/localization.controller.js\": 70,\n\t\"./controllers/media.list.js\": 71,\n\t\"./controllers/media_manager.controller.js\": 72,\n\t\"./controllers/notifications/notifications.edit.js\": 73,\n\t\"./controllers/notifications/notifications.js\": 74,\n\t\"./controllers/notifications/notifications.new.js\": 75,\n\t\"./controllers/notifications/notifications.preview.js\": 76,\n\t\"./controllers/notifications/notifications.translations.js\": 77,\n\t\"./controllers/orders/orders.list.js\": 78,\n\t\"./controllers/orders/orders.new.js\": 79,\n\t\"./controllers/orders/orders.view.js\": 80,\n\t\"./controllers/productTranslations.controller.js\": 81,\n\t\"./controllers/products/bundledProduct.edit.js\": 82,\n\t\"./controllers/products/bundledProduct.new.js\": 83,\n\t\"./controllers/products/configurableProduct.edit.js\": 84,\n\t\"./controllers/products/configurableProduct.new.js\": 85,\n\t\"./controllers/products/products.list.js\": 86,\n\t\"./controllers/products/productsWithVariants.edit.js\": 87,\n\t\"./controllers/products/productsWithVariants.new.js\": 88,\n\t\"./controllers/products/simpleProduct.edit.js\": 89,\n\t\"./controllers/products/simpleProduct.new.js\": 90,\n\t\"./controllers/promotions/promotions.edit.js\": 91,\n\t\"./controllers/promotions/promotions.new.js\": 92,\n\t\"./controllers/resource.list.js\": 93,\n\t\"./controllers/settings.controller.js\": 94,\n\t\"./controllers/shippingMethods/shipping.edit.js\": 95,\n\t\"./controllers/shippingMethods/shippings.list.js\": 96,\n\t\"./controllers/shippingMethods/shippings.new.js\": 97,\n\t\"./controllers/sidebar.js\": 98,\n\t\"./controllers/staticContents/staticContent.new.js\": 99,\n\t\"./controllers/staticContents/staticContents.edit.js\": 100,\n\t\"./controllers/taxes/taxes.edit.js\": 101,\n\t\"./controllers/taxes/taxes.new.js\": 102,\n\t\"./controllers/translations.js\": 103,\n\t\"./controllers/users/users.list.js\": 104,\n\t\"./controllers/users/users.new.js\": 105,\n\t\"./controllers/users/users.view.js\": 106,\n\t\"./controllers/variables/variables.edit.js\": 107,\n\t\"./controllers/variables/variables.list.js\": 108,\n\t\"./controllers/variables/variables.new.js\": 109,\n\t\"./controllers/variants.edit.js\": 110,\n\t\"./controllers/variants/variants.list.controller.js\": 111,\n\t\"./controllers/webhooks.js\": 112,\n\t\"./directives/avatar.directive.js\": 113,\n\t\"./directives/contenteditable.directive.js\": 114,\n\t\"./directives/dropdown.directive.js\": 115,\n\t\"./directives/fallback_src.js\": 116,\n\t\"./directives/fileModel.directive.js\": 117,\n\t\"./directives/focusOnShow.directive.js\": 118,\n\t\"./directives/money.directive.js\": 119,\n\t\"./directives/ng-thumb.directive.js\": 120,\n\t\"./directives/ng_enter.js\": 121,\n\t\"./directives/onChangeAsync.directive.js\": 122,\n\t\"./directives/onFileChange.directive.js\": 123,\n\t\"./factories/account.factory.js\": 124,\n\t\"./factories/application.factory.js\": 125,\n\t\"./factories/cache.factory.js\": 126,\n\t\"./factories/locales.factory.js\": 127,\n\t\"./factories/marketcloud.factory.js\": 128,\n\t\"./factories/models.factory.js\": 129,\n\t\"./factories/notificationsPresets.factory.js\": 130,\n\t\"./factories/pagination.factory.js\": 131,\n\t\"./factories/rolesPresets.factory.js\": 132,\n\t\"./factories/stormConfiguration.factory.js\": 133,\n\t\"./factories/tableManager.factory.js\": 134,\n\t\"./factories/taxrates.factory.js\": 135,\n\t\"./factories/utils.factory.js\": 136,\n\t\"./factories/validation.service.js\": 137\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/modules/data_dashboard/src \\.js\n// module id = 1\n// module chunks = 0","(function() {\r\n  'use strict';\r\n  /* globals angular, marketcloud, notie, API_BASE_URL */\r\n\r\n\r\n\r\n  /**\r\n   * The dashboard version, this is used for reporting\r\n   * @type {String}\r\n   */\r\n  window.VERSION = '1.9.1';\r\n\r\n\r\n  /**\r\n   * [The base url for api calls]\r\n   * @type {String}\r\n   */\r\n  window.API_BASE_URL = '/api/v0';\r\n\r\n\r\n\r\n  /**\r\n   *  Error reporting facility\r\n   **/\r\n  window.LAST_ERROR = null;\r\n\r\n  /**\r\n   * Angular Selectize2\r\n   * https://github.com/machineboy2045/angular-selectize\r\n   **/\r\n\r\n\r\n\r\n  var app = angular\r\n    .module('DataDashboard', [\r\n      'ngRoute',\r\n      'ngMessages',\r\n      'ngTagsInput',\r\n      'angular-loading-bar',\r\n      'frapontillo.bootstrap-switch',\r\n      'ngSanitize',\r\n      'angularFileUpload',\r\n      'Marketcloud.Shared',\r\n      'angularMoment',\r\n      'chart.js',\r\n      'trumbowyg-ng',\r\n      'moment-picker',\r\n      'dndLists'\r\n    ]);\r\n\r\n\r\n  /*\r\n   *  Since angular 1.6.0 The default location hashPrefix is the hashBang\r\n   *  In order to keep our links we set it to '' empty string.\r\n   */\r\n  app.config(['$locationProvider', function($locationProvider) {\r\n    $locationProvider.hashPrefix('');\r\n  }]);\r\n\r\n  app.config(['$compileProvider', function($compileProvider) {\r\n    $compileProvider.debugInfoEnabled(false);\r\n  }]);\r\n\r\n\r\n  app.run(function() {\r\n    notie.setOptions({\r\n\r\n      colorSuccess: '#27ae60',\r\n      colorWarning: '#f39c12',\r\n      colorError: '#c0392b',\r\n      colorInfo: '#2980b9',\r\n      colorNeutral: '#95a5a6',\r\n      colorText: '#FFFFFF',\r\n      dateMonths: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'], // For other languages\r\n      animationDelay: 300, // Be sure to also change \"transition: all 0.3s ease\" variable in .scss file\r\n      backgroundClickDismiss: true\r\n    });\r\n  });\r\n\r\n    app.run(['StormConfiguration','$http', function(Configuration, $http) {\r\n      var theme = Configuration.get('theme');\r\n      Configuration.applyTheme(theme);\r\n      return;\r\n\r\n    }]);\r\n\r\n\r\n\r\n  /*\r\n    This is for sending complex JSON params\r\n  */\r\n  app.config(['$httpProvider', function($httpProvider) {\r\n    $httpProvider.defaults.paramSerializer = '$httpParamSerializerJQLike';\r\n  }]);\r\n\r\n\r\n  /*\r\n    Catching angular errors and sending them to the server\r\n   */\r\n  app.factory('$exceptionHandler', ['$injector', function($injector) {\r\n\r\n\r\n    return function myExceptionHandler(exception, cause) {\r\n\r\n      var $http = $injector.get('$http')\r\n      var $log = $injector.get('$log');\r\n      var $getBrowser = $injector.get('GetBrowser');\r\n\r\n      $log.error(exception);\r\n\r\n      // Not logging the same error over and over for each session\r\n      if (window.LAST_ERROR === exception.toString()) {\r\n        console.info('Not logging this error instance, because it was already logged.');\r\n        return;\r\n      }\r\n\r\n      window.LAST_ERROR = exception.toString();\r\n      $http({\r\n          method: 'POST',\r\n          url: '/logs',\r\n          data: {\r\n            type: 'frontend-error',\r\n            source: 'data-dashboard',\r\n            browser: $getBrowser(),\r\n            url: window.location.href,\r\n            error: {\r\n              error: exception.toString(),\r\n              stack: exception.stack || null,\r\n              cause: cause || null\r\n            }\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          $log.warn('An error was logged.');\r\n        })\r\n        .catch(function(response) {\r\n          $log.warn('Unable to log errors, if you see this message, please contact us at info@marketcloud.studio404.net .Thank you.');\r\n        });\r\n      return true;\r\n    };\r\n  }]);\r\n\r\n\r\n\r\n  app.run([\r\n    '$rootScope',\r\n    '$route',\r\n    '$application',\r\n    '$account',\r\n    '$location',\r\n    function($rootScope, $route, $application, $account, $location) {\r\n\r\n    $rootScope.application = window.current_application;\r\n    $rootScope.user = window.user;\r\n\r\n\r\n    $application.set(window.current_application);\r\n    $account.set(window.user);\r\n\r\n    $rootScope.$on('$routeChangeStart', function(event, next, current){\r\n\r\n      var nextRouteName = next.$$route.name;\r\n      var currentUserRole = $application.get(\"role\");\r\n\r\n      // Admins and owners have all powers\r\n      if (currentUserRole == 'admin' || currentUserRole === 'owner')\r\n        return;\r\n\r\n\r\n      // Checking for explicit denyrules\r\n      if (next.$$route.acl){\r\n        var deniedRoles = next.$$route.acl.deny || [];\r\n\r\n\r\n        if (deniedRoles.indexOf(currentUserRole) > -1) {\r\n          notie.alert(2,\"Access restricted for users with role \"+currentUserRole,2);\r\n\r\n          // We also hide the loading animation to prevent the view from\r\n          // being hidden\r\n          $rootScope.$evalAsync(function() {\r\n            $rootScope.showLoadingAnimation = false;\r\n\r\n            // If the entry point is an invalid route, we must\r\n            // send them to home, otherwise they will not see any route.\r\n            if (!current)\r\n              $location.path('/')\r\n          });\r\n\r\n          // Cancel the route change event\r\n          event.preventDefault();\r\n\r\n        }\r\n\r\n      }\r\n\r\n      console.log(\"Next route is \"+nextRouteName+\" and your role is \"+currentUserRole);\r\n    })\r\n\r\n\r\n\r\n    $rootScope.$on('$routeChangeStart', function(event, next, current) {\r\n      $rootScope.showLoadingAnimation = true;\r\n    });\r\n    $rootScope.$on('$routeChangeError', function() {\r\n      $rootScope.showLoadingAnimation = false;\r\n    });\r\n    $rootScope.$on('$routeChangeSuccess', function() {\r\n\r\n      // if ($application.announcementWasSeenInThisSession !== true) {\r\n      //   notie.alert(4,'Please take time to review our <a href=\"/announcement\" target=\"_blank\" style=\"color:white;text-decoration:underline\">important announcement</a>')\r\n      // }\r\n      // $application.announcementWasSeenInThisSession = true\r\n      var _route = angular.copy($route.current.$$route);\r\n\r\n      // Fallback route name\r\n      var routeName = 'unknown';\r\n\r\n      if (_route && _route.name)\r\n        routeName = _route.name;\r\n\r\n      $rootScope.showLoadingAnimation = false;\r\n\r\n      // Sidebar controller listens for this event (sidebar.js)\r\n      $rootScope.$broadcast('$dashboardSectionChange', {\r\n        section: routeName\r\n      });\r\n\r\n\r\n    });\r\n  }]);\r\n\r\n\r\n  app.run(['$window', '$rootScope', function($window, $rootScope) {\r\n\r\n    $rootScope.online = navigator.onLine;\r\n\r\n    $window.addEventListener('offline', function() {\r\n      notie.alert(2, 'You are currently offline. Waiting for connection..');\r\n      $rootScope.$apply(function() {\r\n        $rootScope.online = false;\r\n      });\r\n    }, false);\r\n\r\n    $window.addEventListener('online', function() {\r\n      notie.alertHide();\r\n      $rootScope.$apply(function() {\r\n        $rootScope.online = true;\r\n      });\r\n    }, false);\r\n\r\n  }]);\r\n\r\n  /*\r\n    This interceptor makes sure that if the token expires,\r\n    the browser reloads to get a new one.\r\n\r\n    We  might consider to expose a \"refresh token\" endpoint\r\n    but for now... we keep it simple\r\n   */\r\n  app\r\n    .service('authInterceptor', ['$q', function($q) {\r\n      var service = this;\r\n\r\n      service.responseError = function(response) {\r\n        if (response.status === 401) {\r\n          notie.alert(4, 'Session expired, reloading page...');\r\n          window.location.reload();\r\n        }\r\n        return $q.reject(response);\r\n      };\r\n    }])\r\n    .config(['$httpProvider', function($httpProvider) {\r\n      $httpProvider.interceptors.push('authInterceptor');\r\n    }]);\r\n\r\n  app.run(['$rootScope', '$location', function($root, $location) {\r\n    $root.$on('$routeChangeError', function(event, route, args, response) {\r\n\r\n\r\n      if (response.status >= 500)\r\n        $location.path('/error');\r\n      else if (response.status === 400) {\r\n        notie.alert(2, 'An error has occurred. Please check the data you entered', 1);\r\n      } else {\r\n        console.log(\"$routeChangeError\", response)\r\n        notie.alert(2, 'An error has occurred.', 1);\r\n      }\r\n\r\n    });\r\n  }]);\r\n\r\n\r\n\r\n  app.config(['$routeProvider',\r\n    function($routeProvider) {\r\n      $routeProvider\r\n        .when('/applications/list', {\r\n          name: 'applications',\r\n          templateUrl: '/modules/data_dashboard/templates/list_applications.html',\r\n          controller: 'ListApplicationsController'\r\n        })\r\n        .when('/applications/new', {\r\n          name: 'applications.new',\r\n          templateUrl: '/modules/data_dashboard/templates/new_application.html',\r\n          controller: 'CreateApplicationController'\r\n        })\r\n        .when('/analytics', {\r\n          name: 'analytics',\r\n          templateUrl: '/modules/data_dashboard/templates/analytics.html',\r\n          controller: 'AnalyticsController',\r\n          resolve: {\r\n            analytics: ['$marketcloud','$location', function($marketcloud, $location) {\r\n\r\n              var range = $location.search().range || \"this month\";\r\n\r\n              var _from = null\r\n              var _to = null;\r\n\r\n              switch (range) {\r\n                case \"today\":\r\n                  var _from = new Date();\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                case \"yesterday\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 1)\r\n                  _from.setHours(0,0,0,0);\r\n\r\n                  var _to = new Date();\r\n                  _to.setHours(0,0,0,0);\r\n                break;\r\n                case \"this week\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 7)\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                default :\r\n                  var _from = new Date();\r\n                  _from.setMonth(_from.getMonth() - 1);\r\n                  _from.setHours(0, 0, 0, 0);\r\n\r\n                break;\r\n              }\r\n\r\n\r\n\r\n              if (!_to)\r\n                _to = new Date();\r\n\r\n\r\n\r\n              return $marketcloud.orders.list({\r\n                $created_at_gt : _from.getTime(),\r\n                $created_at_lt : _to.getTime(),\r\n                per_page :9999\r\n              })\r\n            }]\r\n          ,\r\n          customers : ['$marketcloud','$location', function($marketcloud, $location) {\r\n\r\n\r\n            var range = $location.search().range || \"this month\";\r\n\r\n              var _from = null\r\n              var _to = null;\r\n\r\n              switch (range) {\r\n                case \"today\":\r\n                  var _from = new Date();\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                case \"yesterday\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 1)\r\n                  _from.setHours(0,0,0,0);\r\n\r\n                  var _to = new Date();\r\n                  _to.setHours(0,0,0,0);\r\n                break;\r\n                case \"this week\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 7)\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                default :\r\n                  var _from = new Date();\r\n                  _from.setMonth(_from.getMonth() - 1);\r\n                  _from.setHours(0, 0, 0, 0);\r\n\r\n                break;\r\n              }\r\n\r\n\r\n\r\n              if (!_to)\r\n                _to = new Date();\r\n\r\n            return $marketcloud.users.list({\r\n              $created_at_gt : _from.toISOString(),\r\n              $created_at_lt : _to.toISOString(),\r\n              per_page :9999\r\n            })\r\n          }],\r\n          carts : ['$marketcloud','$location', function($marketcloud, $location) {\r\n\r\n\r\n            var range = $location.search().range || \"this month\";\r\n\r\n              var _from = null\r\n              var _to = null;\r\n\r\n              switch (range) {\r\n                case \"today\":\r\n                  var _from = new Date();\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                case \"yesterday\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 1)\r\n                  _from.setHours(0,0,0,0);\r\n\r\n                  var _to = new Date();\r\n                  _to.setHours(0,0,0,0);\r\n                break;\r\n                case \"this week\":\r\n                  var _from = new Date();\r\n                  _from.setDate(_from.getDate() - 7)\r\n                  _from.setHours(0,0,0,0);\r\n                break;\r\n                default :\r\n                  var _from = new Date();\r\n                  _from.setMonth(_from.getMonth() - 1);\r\n                  _from.setHours(0, 0, 0, 0);\r\n\r\n                break;\r\n              }\r\n\r\n\r\n\r\n              if (!_to)\r\n                _to = new Date();\r\n\r\n            return $marketcloud.carts.list({\r\n              $created_at_gt : _from.toISOString(),\r\n              $created_at_lt : _to.toISOString(),\r\n              per_page :9999\r\n            })\r\n          }]\r\n        }\r\n        })\r\n        .when('/', {\r\n          name: 'home',\r\n          templateUrl: '/modules/data_dashboard/templates/home.html',\r\n          controller: 'HomeController',\r\n          resolve: {\r\n            analytics: ['$http', function($http) {\r\n\r\n              var one_month_ago = new Date();\r\n              one_month_ago.setMonth(one_month_ago.getMonth() - 1);\r\n              one_month_ago.setHours(0, 0, 0, 0);\r\n\r\n              return $http({\r\n                method: 'GET',\r\n                url: API_BASE_URL + '/orders',\r\n\r\n                params: {\r\n                  $created_at_gt: one_month_ago.getTime(),\r\n                  per_page: 99999\r\n                },\r\n                headers: {\r\n                  Authorization: window.public_key + ':' + window.token\r\n                }\r\n              });\r\n            }]\r\n          }\r\n        })\r\n        .when('/error', {\r\n          templateUrl: '/modules/data_dashboard/templates/error.html',\r\n        })\r\n        .when('/bundled_product/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\r\n          controller: 'NewBundledProductController'\r\n        })\r\n        .when('/bundled_product/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\r\n          controller: 'EditBundledProductController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        /*\r\n        .when('/groupedProducts/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_grouped_product.html',\r\n          controller: 'NewGroupedProductController'\r\n        })\r\n        .when('/groupedProducts/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_grouped_product.html',\r\n          controller: 'EditGroupedProductController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/bundled_product/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\r\n          controller: 'NewBundledProductController'\r\n        })\r\n        .when('/bundled_product/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\r\n          controller: 'EditBundledProductController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/configurable_product/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_configurable_product.html',\r\n          controller: 'NewConfigurableProductController'\r\n        })\r\n        .when('/configurable_product/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_configurable_product.html',\r\n          controller: 'EditConfigurableProductController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        }))*/\r\n        .when('/products', {\r\n          name: 'products.list',\r\n          templateUrl: '/modules/data_dashboard/templates/products.html',\r\n          controller: 'ListProductsController',\r\n          reloadOnSearch : false,\r\n          resolve: {\r\n            products: ['$marketcloud', 'StormConfiguration','$route','$location',\r\n                       function($marketcloud, configuration, $route, $location) {\r\n\r\n\r\n\r\n              // Fetching filters from storage\r\n              var filters = configuration.get(\"products_list_active_filters\") || [];\r\n\r\n              // Default query to products endpoint\r\n              var query = {\r\n                page: 1\r\n              };\r\n\r\n              // Adding filters to query\r\n              filters.forEach(function(filter) {\r\n                query[filter.name] = filter.value;\r\n              })\r\n\r\n              // Applying Url query\r\n              var urlQuery = {}\r\n              try {\r\n                urlQuery = JSON.parse($location.search().query)\r\n              } catch(e) {\r\n                urlQuery = {};\r\n              }\r\n\r\n\r\n              for (var k in urlQuery){\r\n                query[k] = urlQuery[k];\r\n              }\r\n\r\n              // Executing the query\r\n              return $marketcloud.products.list(query);\r\n            }]\r\n          }\r\n        })\r\n        .when('/product_with_variants/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_productWithVariants.html',\r\n          controller: 'NewProductWithVariantsController'\r\n        })\r\n        .when('/product_with_variants/create2', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_productWithVariants2.html',\r\n          controller: 'NewProductWithVariantsController'\r\n        })\r\n        .when('/simple_product/create', {\r\n          name: 'products.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_simple_product.html',\r\n          controller: 'NewSimpleProductController'\r\n        })\r\n        .when('/simple_product/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_simple_product.html',\r\n          controller: 'EditSimpleProductController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/product_with_variants/:productId/edit', {\r\n          name: 'products.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_productWithVariants.html',\r\n          controller: 'EditProductWithVariantsController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/products/:productId/variants', {\r\n          name: 'products.variants.list',\r\n          templateUrl: '/modules/data_dashboard/templates/list_variants.html',\r\n          controller: 'ListVariantsController',\r\n          resolve: {\r\n            resolvedProduct: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/products/:productId/variants/:variantId', {\r\n          name: 'products.variants.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\r\n          controller: 'EditVariantController',\r\n          resolve: {\r\n            resolvedProduct: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/resource/:resourceName', {\r\n          name: '',\r\n          templateUrl: function(params) {\r\n            return '/modules/data_dashboard/templates/resources.html';\r\n          },\r\n          //templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud[$route.current.params.resourceName].list();\r\n            }],\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n\r\n          }\r\n        })\r\n        .when('/products/:productId/translations', {\r\n          name: 'products.translation.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/product_translations.html',\r\n          controller: 'EditProductTranslationsController',\r\n          resolve: {\r\n            product: ['$marketcloud', '$route', '$q', '$location', function($marketcloud, $route, $q, $location) {\r\n              return $marketcloud.products.getById($route.current.params.productId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/categories/:id/translations', {\r\n          name: 'categories.translation.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/category_translations.html',\r\n          controller: 'EditCategoryTranslationsController',\r\n          resolve: {\r\n            category: ['$marketcloud', '$route', function($marketcloud, $route, ) {\r\n              return $marketcloud.categories.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/brands/:id/translations', {\r\n          name: 'brands.translation.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/brand_translations.html',\r\n          controller: 'EditBrandTranslationsController',\r\n          resolve: {\r\n            brand: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.brands.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/collections/:id/translations', {\r\n          name: 'collections.translation.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/collection_translations.html',\r\n          controller: 'EditCollectionTranslationsController',\r\n          resolve: {\r\n            collection: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.collections.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/contents/:id/translations', {\r\n          name: 'contents.translation.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/content_translations.html',\r\n          controller: 'EditContentTranslationsController',\r\n          resolve: {\r\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.contents.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/invoices/create/:orderId?', {\r\n          name: 'invoices.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_invoice.html',\r\n          controller: 'NewInvoiceController',\r\n          resolve: {\r\n            parentOrder: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              if ($route.current.params.orderId)\r\n                return $marketcloud.orders.getById($route.current.params.orderId);\r\n              else\r\n                return {};\r\n            }],\r\n            orders: ['$marketcloud', function($marketcloud){\r\n              return $marketcloud.orders.list({per_page:5})\r\n            }]\r\n          }\r\n        })\r\n        .when('/invoices/:invoiceId/edit', {\r\n          name: 'invoices.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_invoice.html',\r\n          controller: 'EditInvoiceController',\r\n          resolve: {\r\n            invoice: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.invoices.getById($route.current.params.invoiceId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/invoices/', {\r\n          name: 'invoices.list',\r\n          templateUrl: '/modules/data_dashboard/templates/invoices.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', function($marketcloud) {\r\n              return $marketcloud.invoices.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'invoices';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/payments/', {\r\n          name: 'payments.list',\r\n          templateUrl: '/modules/data_dashboard/templates/payments.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', function($marketcloud) {\r\n              return $marketcloud.payments.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'payments';\r\n            },\r\n            dependencies: ['$q', '$marketcloud', function($q, $marketcloud) {\r\n              return $q.all({\r\n                events: $marketcloud.events.list({\r\n                  \"request.path\": \"/v0/payments\"\r\n                })\r\n              })\r\n            }]\r\n          }\r\n        })\r\n        .when('/payments/alerts', {\r\n          name: 'payments.alerts.list',\r\n          templateUrl: '/modules/data_dashboard/templates/payments_alerts.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$http', function($http) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: window.API_BASE_URL + '/payments/alerts',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  Authorization: window.public_key + ':' + window.token\r\n                }\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'events';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/orders', {\r\n          name: 'orders.list',\r\n          templateUrl: '/modules/data_dashboard/templates/orders.html',\r\n          controller: 'OrdersController',\r\n          reloadOnSearch : false,\r\n          resolve: {\r\n            ordersResponse: [\r\n              '$marketcloud',\r\n              '$route',\r\n              '$location',\r\n              'StormConfiguration',\r\n              function($marketcloud, $route, $location, configuration) {\r\n\r\n              // Fetching filters from storage\r\n              var filters = configuration.get(\"orders_list_active_filters\") || [];\r\n\r\n              // Default query to products endpoint\r\n              var query = {\r\n                page: 1\r\n              };\r\n\r\n              // Adding filters to query\r\n              filters.forEach(function(filter) {\r\n                query[filter.name] = filter.value;\r\n              })\r\n\r\n              // Applying Url query\r\n              var urlQuery = {}\r\n              try {\r\n                urlQuery = JSON.parse($location.search().query)\r\n              } catch(e) {\r\n                urlQuery = {};\r\n              }\r\n\r\n\r\n              for (var k in urlQuery){\r\n                query[k] = urlQuery[k];\r\n              }\r\n\r\n\r\n              return $marketcloud.orders.list(query);\r\n            }]\r\n          }\r\n        })\r\n        .when('/orders/create', {\r\n          name: 'orders.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_order.html',\r\n          controller: 'NewOrderController'\r\n        })\r\n        .when('/orders/:orderId/view', {\r\n          name: 'orders.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/order.html',\r\n          controller: 'OrderController',\r\n          resolve: {\r\n            order: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.orders.getById($route.current.params.orderId);\r\n            }],\r\n            shippingMethods: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.shippings.list();\r\n            }],\r\n            paymentMethods: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.paymentMethods.list();\r\n            }]\r\n          }\r\n        })\r\n        .when('/users', {\r\n          name: 'users.list',\r\n          templateUrl: '/modules/data_dashboard/templates/users.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.users.list({\r\n                page : 1,\r\n                per_page : 20,\r\n                expand : 'orders'\r\n              })\r\n            }],\r\n            resourceName: function() {\r\n              return 'users';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n\r\n              return $q.when({});\r\n\r\n            }]\r\n          }\r\n        })\r\n        .when('/users/create', {\r\n          name: 'users.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_user.html',\r\n          controller: 'NewUserController'\r\n        })\r\n        .when('/users/:userId/view', {\r\n          name: 'users.view',\r\n          templateUrl: '/modules/data_dashboard/templates/user.html',\r\n          controller: 'UserController',\r\n          resolve: {\r\n            user: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.users.getById($route.current.params.userId);\r\n            }],\r\n          }\r\n        })\r\n        .when('/categories', {\r\n          name: 'categories.list',\r\n          templateUrl: '/modules/data_dashboard/templates/categories.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.categories.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'categories';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n\r\n\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/categories/:categoryId/edit', {\r\n          name: 'categories.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_category.html',\r\n          controller: 'EditCategoryController',\r\n          resolve: {\r\n            category: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.categories.getById($route.current.params.categoryId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/categories/create', {\r\n          name: 'categories.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_category.html',\r\n          controller: 'CategoryController'\r\n        })\r\n        .when('/brands', {\r\n          name: 'brands.list',\r\n          templateUrl: '/modules/data_dashboard/templates/brands.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.brands.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'brands';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n\r\n      .when('/brands/:brandId/edit', {\r\n          name: 'brands.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_brand.html',\r\n          controller: 'EditBrandController',\r\n          resolve: {\r\n            brand: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.brands.getById($route.current.params.brandId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/brands/create', {\r\n          name: 'brands.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_brand.html',\r\n          controller: 'BrandController'\r\n        })\r\n        .when('/collections', {\r\n          name: 'collections.list',\r\n          templateUrl: '/modules/data_dashboard/templates/collections.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.collections.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'collections';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/collections/:collectionId/edit', {\r\n          name: 'collections.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_collection.html',\r\n          controller: 'EditCollectionController',\r\n          resolve: {\r\n            collection: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.collections.getById($route.current.params.collectionId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/collections/create', {\r\n          name: 'collections.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_collection.html',\r\n          controller: 'CreateCollectionController'\r\n        })\r\n        .when('/integrations', {\r\n          name: 'integrations.list',\r\n          templateUrl: '/modules/data_dashboard/templates/integrations.html',\r\n          controller: 'IntegrationsController'\r\n        })\r\n        .when('/integrations/braintree', {\r\n          name: 'integrations.braintree',\r\n          templateUrl: '/modules/data_dashboard/templates/integration_braintree.html',\r\n          controller: 'IntegrationBraintreeController',\r\n          resolve: {\r\n            BraintreeIntegration: ['$http', function($http) {\r\n\r\n              return $http({\r\n                  method: 'GET',\r\n                  url: API_BASE_URL + '/integrations/braintree',\r\n                  headers: {\r\n                    Authorization: window.public_key + ':' + window.token\r\n                  }\r\n                })\r\n                .then(function(response) {\r\n\r\n                  return new Promise(function(resolve) {\r\n                    resolve(response);\r\n                  });\r\n                })\r\n                .catch(function() {\r\n                  return new Promise(function(resolve) {\r\n                    resolve(null);\r\n                  });\r\n                });\r\n            }]\r\n          }\r\n        })\r\n        .when('/integrations/stripe', {\r\n          name: 'integrations.stripe',\r\n          templateUrl: '/modules/data_dashboard/templates/integration_stripe.html',\r\n          controller: 'IntegrationStripeController',\r\n          resolve: {\r\n            StripeIntegration: ['$http', function($http) {\r\n\r\n              return $http({\r\n                  method: 'GET',\r\n                  url: API_BASE_URL + '/integrations/stripe',\r\n                  headers: {\r\n                    Authorization: window.public_key + ':' + window.token\r\n                  }\r\n                })\r\n                .then(function(response) {\r\n\r\n                  return new Promise(function(resolve) {\r\n                    resolve(response);\r\n                  });\r\n                })\r\n                .catch(function() {\r\n                  return new Promise(function(resolve) {\r\n                    resolve(null);\r\n                  });\r\n                });\r\n            }]\r\n          }\r\n        })\r\n        .when('/contents', {\r\n          name: 'contents.list',\r\n          templateUrl: '/modules/data_dashboard/templates/contents.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', function($marketcloud) {\r\n              return $marketcloud.contents.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'contents';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/contents/create', {\r\n          name: 'contents.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_content.html',\r\n          controller: 'ContentController'\r\n        })\r\n        .when('/contents/:contentId/edit', {\r\n          name: 'contents.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_content.html',\r\n          controller: 'EditContentController',\r\n          resolve: {\r\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.contents.getById($route.current.params.contentId);\r\n            }]\r\n          }\r\n        })\r\n\r\n\r\n\r\n        .when('/contents/static', {\r\n          name: 'staticContents.list',\r\n          templateUrl: '/modules/data_dashboard/templates/staticContents/staticContents.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', function($marketcloud) {\r\n              return $marketcloud.staticContents.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'staticContents';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/contents/static/create', {\r\n          name: 'staticContents.create',\r\n          templateUrl: '/modules/data_dashboard/templates/staticContents/new_staticContent.html',\r\n          controller: 'CreateStaticContentController'\r\n        })\r\n        .when('/contents/static/:contentId/edit', {\r\n          name: 'staticContents.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/staticContents/edit_staticContents.html',\r\n          controller: 'EditStaticContentController',\r\n          resolve: {\r\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.staticContents.getById($route.current.params.contentId);\r\n            }]\r\n          }\r\n        })\r\n\r\n\r\n        .when('/events', {\r\n          name: 'events.list',\r\n          templateUrl: '/modules/data_dashboard/templates/events.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.events.list();\r\n            }],\r\n            resourceName: function() {\r\n              return 'events';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/variables', {\r\n          name: 'variables.list',\r\n          templateUrl: '/modules/data_dashboard/templates/variables.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.variables.list();\r\n            }],\r\n            resourceName: function() {\r\n              return 'variables';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/variables/create', {\r\n          name: 'variables.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_variable.html',\r\n          controller: 'CreateVariableController'\r\n        })\r\n        .when('/variables/:variableId/edit', {\r\n          name: 'variables.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_variable.html',\r\n          controller: 'EditVariableController',\r\n          resolve: {\r\n            variable: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.variables.getById($route.current.params.variableId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/media', {\r\n          name: 'media.list',\r\n          templateUrl: '/modules/data_dashboard/templates/media.html',\r\n          controller: 'MediaListController',\r\n          resolve: {\r\n            media: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.media.list();\r\n            }]\r\n          }\r\n\r\n        })\r\n        .when('/promotions', {\r\n          name: 'promotions.list',\r\n          templateUrl: '/modules/data_dashboard/templates/promotions.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.promotions.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'promotions';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/promotions/create', {\r\n          name: 'promotions.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_promotion.html',\r\n          controller: 'NewPromotionController',\r\n        })\r\n        .when('/promotions/:id/edit', {\r\n          name: 'promotions.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_promotion.html',\r\n          controller: 'EditPromotionController',\r\n          resolve: {\r\n            promotion: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.promotions.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/coupons', {\r\n          name: 'coupons.list',\r\n          templateUrl: '/modules/data_dashboard/templates/coupons.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.coupons.list({\r\n                page: 1\r\n              });\r\n            }],\r\n            resourceName: function() {\r\n              return 'coupons';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n          }\r\n        })\r\n        .when('/coupons/create', {\r\n          name: 'coupons.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_coupon.html',\r\n          controller: 'NewCouponController',\r\n        })\r\n        .when('/coupons/:id/edit', {\r\n          name: 'coupons.create',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_coupon.html',\r\n          controller: 'EditCouponController',\r\n          resolve: {\r\n            coupon: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.coupons.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/shippings', {\r\n          redirectTo: '/system/shippings'\r\n        })\r\n        .when('/shippings/create', {\r\n          redirectTo: '/system/shippings/create'\r\n        })\r\n        .when('/shippings/:shippingId/edit', {\r\n          redirectTo: '/system/shippings/:shippingId/edit'\r\n        })\r\n        .when('/system/taxes', {\r\n          name: 'system.taxes.list',\r\n          templateUrl: '/modules/data_dashboard/templates/taxes.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.taxes.list();\r\n            }],\r\n            resourceName: function() {\r\n              return 'taxes';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n\r\n          }\r\n        })\r\n        .when('/system/taxes/create', {\r\n          name: 'system.taxes.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_tax.html',\r\n          controller: 'CreateTaxController'\r\n        })\r\n        .when('/system/taxes/:id/edit', {\r\n          name: 'system.taxes.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_tax.html',\r\n          controller: 'EditTaxController',\r\n          resolve: {\r\n            tax: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.taxes.getById($route.current.params.id);\r\n            }]\r\n          }\r\n        })\r\n        .when('/system/shippings', {\r\n          name: 'system.shippings.list',\r\n          templateUrl: '/modules/data_dashboard/templates/shippings.html',\r\n          controller: 'ListResourcesController',\r\n          resolve: {\r\n            resources: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.shippings.list();\r\n            }],\r\n            resourceName: function() {\r\n              return 'shippings';\r\n            },\r\n            dependencies: ['$q', function($q) {\r\n              return $q.when({});\r\n            }]\r\n\r\n          }\r\n        })\r\n        .when('/system/shippings/create', {\r\n          name: 'system.shippings.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_shipping.html',\r\n          controller: 'CreateShippingController'\r\n        })\r\n        .when('/system/shippings/:shippingId/edit', {\r\n          name: 'system.shippings.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_shipping.html',\r\n          controller: 'EditShippingController',\r\n          resolve: {\r\n            shipping: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.shippings.getById($route.current.params.shippingId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/system/settings', {\r\n          name: 'system.settings',\r\n          templateUrl: '/modules/data_dashboard/templates/settings.html',\r\n          controller: 'SettingsController'\r\n        })\r\n        .when('/system/localization', {\r\n          name: 'system.localization',\r\n          templateUrl: '/modules/data_dashboard/templates/localization.html',\r\n          controller: 'LocalizationController'\r\n        })\r\n        .when('/system/payments', {\r\n          name: 'system.payments',\r\n          templateUrl: '/modules/data_dashboard/templates/paymentMethods.html',\r\n          controller: 'PaymentMethodsController',\r\n          resolve: {\r\n            paymentMethods: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.paymentMethods.list();\r\n            }]\r\n          }\r\n        })\r\n        .when('/notifications', {\r\n          name: 'notifications',\r\n          templateUrl: '/modules/data_dashboard/templates/notifications.html',\r\n          controller: 'NotificationsController',\r\n          resolve: {\r\n            notifications: ['$marketcloud', '$route', function($marketcloud) {\r\n              return $marketcloud.notifications.list();\r\n            }]\r\n          }\r\n        })\r\n        .when('/notifications/:notificationId/edit', {\r\n          name: 'notifications.edit',\r\n          templateUrl: '/modules/data_dashboard/templates/edit_notification.html',\r\n          controller: 'EditNotificationController',\r\n          resolve: {\r\n            notification: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.notifications.getById($route.current.params.notificationId);\r\n            }]\r\n          }\r\n        })\r\n        .when('/notifications/:notificationId/translations', {\r\n          name: 'notifications.translation',\r\n          templateUrl: '/modules/data_dashboard/templates/notifications_translation.html',\r\n          controller: 'TranslateNotificationController',\r\n          resolve: {\r\n            notification: ['$marketcloud', '$route', function($marketcloud, $route) {\r\n              return $marketcloud.notifications.getById($route.current.params.notificationId);\r\n            }]\r\n          }\r\n        })\r\n\r\n      .when('/notifications/create', {\r\n          name: 'notifications.create',\r\n          templateUrl: '/modules/data_dashboard/templates/new_notification.html',\r\n          controller: 'NewNotificationController'\r\n        })\r\n        .when('/notifications/preview/:data', {\r\n          name: 'notifications.preview',\r\n          templateUrl: '/modules/data_dashboard/templates/notifications_preview.html',\r\n          controller: 'PreviewNotificationController',\r\n          resolve: {\r\n            notification: ['$route', function($route) {\r\n              return atob($route.current.params.data);\r\n            }]\r\n          }\r\n        })\r\n        .when('/application/billing', {\r\n          name: 'application.billing',\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_billing.html',\r\n          controller: 'ApplicationBillingController',\r\n          resolve: {\r\n            account: ['$http', function(http) {\r\n              return http({\r\n                method: 'GET',\r\n                url: '/account/get',\r\n              })\r\n            }]\r\n          }\r\n        })\r\n        .when('/application', {\r\n          redirectTo: '/application/overview',\r\n          acl : {\r\n            deny : ['guest']\r\n          }\r\n        })\r\n        .when('/application/overview', {\r\n          name: 'application.overview',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_overview.html',\r\n          controller: 'ApplicationOverviewController'\r\n        })\r\n\r\n      .when('/application/settings', {\r\n          name: 'application.settings',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_settings.html',\r\n          controller: 'ApplicationSettingsController',\r\n        })\r\n        .when('/application/deploy', {\r\n          name: 'application.deploy',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_deploy.html',\r\n          controller: 'DeployController'\r\n        })\r\n        .when('/application/integrations', {\r\n          name: 'application.integrations',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_integrations.html',\r\n          controller: 'IntegrationsController'\r\n        })\r\n\r\n      .when('/application/webhooks', {\r\n          name: 'application.webhooks',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_webhooks.html',\r\n          controller: 'WebhooksController',\r\n          resolve: {\r\n            webhooks: ['$http', '$route', '$application', function($http, $route, $application) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: '/applications/' + $application.get(\"id\") + '/webhooks'\r\n              })\r\n            }]\r\n          }\r\n        })\r\n        .when('/application/collaborators', {\r\n          name: 'application.collaborators',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/application_collaborators.html',\r\n          controller: 'CollaboratorsController',\r\n          resolve: {\r\n            collaborators: ['$http', '$route', '$application', function($http, $route, $application) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: '/applications/' + $application.get('id') + '/collaborators'\r\n              })\r\n            }]\r\n          }\r\n        })\r\n        .when('/application/acl', {\r\n          name: 'application.acl',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/roles.html',\r\n          controller: 'ACLController',\r\n          resolve: {\r\n            roles: ['$http', '$route', '$application', function($http, $route, $application) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: '/applications/' + $application.get('id') + '/roles'\r\n              })\r\n            }]\r\n          }\r\n        })\r\n        .when('/application/acl/new', {\r\n          name: 'application.acl',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/new_role.html',\r\n          controller: 'NewRoleController'\r\n        })\r\n        .when('/application/acl/:roleId/edit', {\r\n          name: 'application.acl',\r\n          acl : {\r\n            deny : ['guest']\r\n          },\r\n          templateUrl: '/modules/data_dashboard/templates/application/edit_role.html',\r\n          controller: 'EditRoleController',\r\n          resolve: {\r\n            role: ['$route', '$http', '$application', function($route, $http, $application) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: '/applications/' + $application.get('id') + '/roles/' + $route.current.params.roleId\r\n              })\r\n            }]\r\n          }\r\n        })\r\n      .otherwise({\r\n        redirectTo: '/'\r\n      });\r\n    }\r\n  ]);\r\n\r\n  module.exports = app;\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/app.js","var app = angular.module('DataDashboard')\r\napp.controller('ActiveFiltersController', [\r\n  '$scope',\r\n  'StormConfiguration',\r\n  function(scope, StormConfiguration) {\r\n\r\n    var ctrl = this;\r\n\r\n    \r\n\r\n\r\n\r\n    scope.newFilter = {\r\n      name: '',\r\n      value: null\r\n    }\r\n\r\n    var notFilters = [\r\n      'per_page',\r\n      'page',\r\n      'sort_by',\r\n      'sort_order'\r\n    ]\r\n    \r\n\r\n    this.$onInit = function() {\r\n\r\n\r\n      scope.ctrl = this;\r\n\r\n      scope.ctrl.query = this.query || {};\r\n\r\n      // An array of attributes name from the parent controller\r\n      scope.filterAttributes = this.filterAttributes;\r\n\r\n\r\n      // Initializing filters\r\n      scope.filters = StormConfiguration.get('products_list_active_filters') || []\r\n\r\n\r\n\r\n\r\n      for (var k in ctrl.query) {\r\n        if (notFilters.indexOf(k) === -1) {\r\n          scope.filters.push({\r\n            name: k,\r\n            value: ctrl.query[k]\r\n          })\r\n        }\r\n      }\r\n\r\n      scope.persistFilters = StormConfiguration.get('products_list_persist_filters') || false;\r\n      scope.persistFilters = Boolean(scope.persistFilter);\r\n      \r\n\r\n\r\n    }\r\n\r\n\r\n    /*\r\n     *  This function returns the guessed type for a property found in products\r\n     *\r\n     *  @param {String} Product key name to test\r\n     *\r\n     *  @return {String} THe name of the guessed type for the specified key\r\n     */\r\n    var inferFilterType = function(key) {\r\n      if (typeof scope.ctrl.resources === 'undefined') {\r\n        return null\r\n      }\r\n\r\n      var _resource = scope.ctrl.resources.find(function(item) {\r\n          return item.hasOwnProperty(key)\r\n        })\r\n        // Key is the property name we should analyze on the model\r\n\r\n      if (_resource) {\r\n        return typeof _resource[key]\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n\r\n    scope.isFilterSet = function(key) {\r\n      return scope.filters\r\n        .filter(function(filter) {\r\n          return filter.name === key\r\n        }).length > 0\r\n    }\r\n\r\n    /*\r\n     *  Filters out empty filters. Means that we will not show filters that are half created.\r\n     */\r\n    scope.filterIsNotEmpty = function(item, index, array) {\r\n      return item.name !== '' && item.value !== null\r\n    }\r\n\r\n    /*\r\n     *    View function that selects which control to show for this particular filter\r\n     *\r\n     *  @return {String} A string label identifying the type of input\r\n     */\r\n    scope.getControlForFilter = function(filter) {\r\n\r\n      \r\n      if (filter.name === 'type') {\r\n        return 'productTypeSelector'\r\n      }\r\n\r\n      if (filter.name === 'category_id') {\r\n        return 'categorySelectorInput'\r\n      }\r\n\r\n      if (filter.name === 'brand_id') {\r\n        return 'brandSelectorInput'\r\n      }\r\n\r\n      if (inferFilterType(filter.name) === 'number') {\r\n        return 'numberInput'\r\n      }\r\n\r\n      if (inferFilterType(filter.name) === 'string') {\r\n        return 'textInput'\r\n      }\r\n\r\n      if (inferFilterType(filter.name) === 'boolean') {\r\n        return 'booleanInput'\r\n      }\r\n\r\n      // else\r\n\r\n      return 'disabledInput'\r\n    }\r\n\r\n    /*\r\n     *  Adds an empty filter\r\n     */\r\n    scope.addFilter = function(filter) {\r\n      if (!filter)\r\n        scope.filters.push({\r\n          name: '',\r\n          value: null\r\n        })\r\n      else\r\n        scope.filters.push(filter);\r\n    }\r\n\r\n    scope.saveNewFilterAndApply = function() {\r\n      scope.addFilter(scope.newFilter);\r\n      console.log(\"Saving this new filters\",scope.newFilter);\r\n      scope.applyFilters();\r\n      scope.newFilter = {\r\n        name: '',\r\n        value: null\r\n      }\r\n      $('#singleFilterModal').modal('hide');\r\n    }\r\n\r\n    scope.humanReadableFilterValue = function(filter) {\r\n\r\n      if ('object' === typeof filter.value) {\r\n        if (filter.value.hasOwnProperty('$regex')) {\r\n          return filter.value.$regex;\r\n        }\r\n\r\n      }\r\n\r\n      if ('type' === filter.name) {\r\n        return filter.value.replace(/\\_/g, \" \");\r\n      }\r\n\r\n      // If we don't know how to handle it:\r\n      return filter.value;\r\n    }\r\n\r\n    /*\r\n     *  @param {Number} index The position of the filter to remove\r\n     *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\r\n     */\r\n    scope.removeFilter = function(index, applyToQuery) {\r\n      if (typeof applyToQuery === 'undefined') {\r\n        applyToQuery = true\r\n      }\r\n\r\n      var filterToRemove = scope.filters.splice(index, 1)\r\n\r\n      filterToRemove = filterToRemove[0]\r\n\r\n      delete scope.ctrl.query[filterToRemove.name]\r\n\r\n      if (applyToQuery === true) {\r\n        scope.applyFilters()\r\n      }\r\n    }\r\n\r\n    scope.applyFilters = function() {\r\n      scope.filters.forEach(function(filter) {\r\n        scope.ctrl.query[filter.name] = filter.value\r\n      })\r\n\r\n      ctrl.onUpdate({\r\n        filters : scope.filters\r\n      })\r\n      $('#filtersModal').modal('hide')\r\n\r\n      //if (scope.persistFilters === true)\r\n      StormConfiguration.set('products_list_active_filters', scope.filters)\r\n    }\r\n\r\n\r\n  }\r\n])\r\napp\r\n  .component('activeFilters', {\r\n    templateUrl: '/modules/data_dashboard/src/components/activeFilters/activeFilters.component.html',\r\n    controller: 'ActiveFiltersController',\r\n    bindings: {\r\n      query: '=', // We need access to the controller's query\r\n      filterAttributes: '=', // We need a list of property names to be sued as filters\r\n      onUpdate: '&', // THis will notify the controller that filters changed\r\n      resources: '=' // We need the list of resources to be able to infer which filters to display\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/activeFilters/activeFilters.component.js","var app = angular.module('DataDashboard')\r\n\r\n/*\r\n* @attribute overrides {object} set of overrides to apply\r\n          when querying marketcloud\r\n*\r\n*/\r\napp.controller('addProductsCardController', [\r\n  '$scope', '$element', '$attrs', '$marketcloud',\r\n  function (scope, $element, $attrs, $marketcloud) {\r\n\r\n    \r\n    this.$onInit = function () {\r\n      scope.ctrl = this\r\n\r\n      scope.config = this.config || {\r\n        additionalFields: [\r\n          // {name : \"quantity\", type : \"number\", required : true}\r\n        ]\r\n      }\r\n\r\n      scope.swapArrayItemPosition = function(sourceIndex,destinationIndex, arr){\r\n        if (!arr[sourceIndex] || !arr[destinationIndex])\r\n          return;\r\n\r\n        var temp = angular.copy(arr[destinationIndex]);\r\n        arr[destinationIndex] = arr[sourceIndex];\r\n        arr[sourceIndex] = temp;\r\n\r\n      }\r\n\r\n      // Flag to show/hide the list\r\n      scope.showTheList = false\r\n\r\n      // Object to hold the query data\r\n      scope.query = {}\r\n\r\n      // Here we save the products we get from marketcloud\r\n      scope.products = []\r\n    }\r\n\r\n    scope.prepareRegex = function () {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    // Shows the list of choices\r\n    scope.showList = function () {\r\n      scope.showTheList = true\r\n    }\r\n\r\n    // Hides the list of choices\r\n    scope.hideList = function () {\r\n      window.setTimeout(function () {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    /*\r\n     *  Pushes an item into the array of selected items and resets the search regex\r\n     */\r\n    scope.addProduct = function (product) {\r\n      scope.ctrl.items.push(product)\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.removeProduct = function (i) {\r\n      scope.ctrl.items.splice(i, 1)\r\n    }\r\n    scope.loadProducts = function (query) {\r\n      query = query || scope.query\r\n\r\n      // We only want to fetch simple products here\r\n      // TODO, this should be an attribute\r\n      if (scope.ctrl.overrides) {\r\n        for (var k in scope.ctrl.overrides) {\r\n          query[k] = scope.ctrl.overrides[k]\r\n        }\r\n      }\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function (response) {\r\n          scope.products = response.data.data\r\n            .filter(function (item) {\r\n              return scope.ctrl.items\r\n                .map(function (i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\r\napp\r\n  .component('addProductsCard', {\r\n    templateUrl: '/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.html',\r\n    controller: 'addProductsCardController',\r\n    bindings: {\r\n      items: '=',\r\n      config: '=',\r\n      overrides: '=', // overrides to the query\r\n      title: '@',\r\n      onUpdate: '&'\r\n    }\r\n  })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('AddressFormController',[\r\n  '$scope',\r\n  'Countries',\r\n  function($scope, Countries){\r\n\r\n  this.$onInit = function () {\r\n\r\n    // Initializing the array of countries taken from the service\r\n    $scope.countries = Countries;\r\n\r\n    // Linking the local address object to the parent scope object\r\n    $scope.address = this.address;\r\n  }\r\n\r\n}])\r\n\r\napp\r\n  .component('addressForm', {\r\n    templateUrl: '/modules/data_dashboard/src/components/addressForm/addressForm.component.html',\r\n    controller: 'AddressFormController',\r\n    bindings: {\r\n      address: '='\r\n    }\r\n  })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/addressForm/addressForm.component.js","var app = angular.module('DataDashboard');\r\n\r\n  var ApplicationController = ['$scope',function(scope){\r\n    \r\n    \r\n\r\n    /*\r\n    * Due to https://github.com/angular/angular.js/commit/bcd0d4d896d0dfdd988ff4f849c1d40366125858\r\n    *\r\n    * From AngularJS >= 1.6.x pre-assigning bindings on controller instances is disabled by default.\r\n    */\r\n    this.$onInit = function() {\r\n      scope.application = this.applicationData;\r\n    }\r\n\r\n    scope.percentage = function(app) {\r\n        var v = app.api_calls_quota_left;\r\n        var t = app.api_calls_quota_max;\r\n        return (v/t)*100\r\n    }\r\n  \r\n  }]\r\n\r\n  app.component('application',{\r\n    templateUrl : '/modules/data_dashboard/src/components/application/application.component.html',\r\n    controller : ApplicationController,\r\n    bindings : {\r\n      applicationData : '='\r\n    }\r\n  });\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/application/application.component.js","var app = angular.module('DataDashboard')\r\napp.controller('autocompleteController', [\r\n  '$scope', '$element', '$attrs',\r\n  function(scope, $element, $attrs) {\r\n    // Since angular 1.6 component initialization must be inside the $onInit call\r\n    // to allow the use of ES6 classes as component controllers\r\n    this.$onInit = function() {\r\n      scope.ctrl = this\r\n\r\n\r\n      // The list of values\r\n      scope.ctrl.suggestionList = angular.copy(scope.ctrl.items)\r\n\r\n      // Flag to toggle the suggestion list\r\n      scope.showTheList = false;\r\n\r\n\r\n\r\n      // Here ww handle the initial selection if the model already has a value\r\n      var initiallySelected = scope.ctrl.suggestionList.filter(function(item) {\r\n        if (item === scope.ctrl.myModel)\r\n          return true;\r\n        if (item[scope.ctrl.value] === scope.ctrl.myModel)\r\n          return true\r\n\r\n        return false;\r\n      })\r\n\r\n      if (initiallySelected.length > 0) {\r\n\r\n        scope.selectItem(initiallySelected[0])\r\n      }\r\n\r\n\r\n    }\r\n\r\n    /*\r\n     * Filters the suggestion list by query. This updates the suggestion list showing\r\n     * only those results that are matching the query.\r\n     */\r\n    scope.filter = function() {\r\n\r\n      var toMatch = scope.ctrl.selectedLabel.toLowerCase();\r\n\r\n      scope.ctrl.items = scope.ctrl.suggestionList\r\n        .filter(function(i) {\r\n\r\n\r\n          // If the value attribute is provided we use it to look for a particular property\r\n          if (scope.ctrl.value) {\r\n\r\n            return i[scope.ctrl.value].toLowerCase().indexOf(toMatch) > -1\r\n\r\n          } else {\r\n\r\n            return i.toLowerCase().indexOf(toMatch) > -1\r\n\r\n          }\r\n        })\r\n    }\r\n\r\n    /*\r\n     * Makes the suggestion list visible\r\n     */\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n\r\n    /*\r\n     * Makes the suggestion list invisible\r\n     */\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    scope.handleNewItems = function() {\r\n      if (scope.ctrl.allowNewElements) {\r\n\r\n        scope.ctrl.myModel = scope.ctrl.selectedLabel;\r\n        scope.hideList();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Selects the clicked item as a chosen value\r\n     */\r\n    scope.selectItem = function(item) {\r\n\r\n      console.log(\"selectItem called on \", item);\r\n\r\n      // If the component has a label attribute, we want to show that label\r\n      // insteand of the actually chosen value\r\n      if (scope.ctrl.label) {\r\n        scope.ctrl.selectedLabel = item[scope.ctrl.label];\r\n      } else {\r\n        // Otherwise we want to select the actual value.\r\n        scope.ctrl.selectedLabel = item;\r\n      }\r\n\r\n\r\n      if (scope.ctrl.value) {\r\n        scope.ctrl.myModel = item[scope.ctrl.value]\r\n      } else {\r\n        scope.ctrl.myModel = item\r\n      }\r\n\r\n      // update the query to reflect the model value\r\n      // scope.ctrl.myModel = scope.ctrl.myModel;\r\n\r\n      // After the choice, we hide the list\r\n      scope.showTheList = false\r\n\r\n      // Fucking AngularJS ng-changes triggers before the update cycle is complete\r\n      window.setTimeout(scope.ctrl.onSelected, 1)\r\n    }\r\n  }\r\n])\r\napp\r\n  .component('autocomplete', {\r\n    templateUrl: '/modules/data_dashboard/src/components/autocomplete/autocomplete.component.html',\r\n    controller: 'autocompleteController',\r\n    bindings: {\r\n      allowNewElements: '@',\r\n      myModel: '=', // The model\r\n      items: '=', // The source for autocomplete suggestions\r\n      onSelected: '&', // Hook called when an item is selected\r\n      label: '@', // The property to use as a label for suggestions,\r\n      value: '@', // The property to use as a value for suggestions,\r\n      inputClasses: '@' // Classes to add to the input\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/autocomplete/autocomplete.component.js","\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('BackButtonController',\r\n  ['$scope', '$element', '$attrs',\r\n    function (scope, $element, $attrs) {\r\n      scope.goBack = function () {\r\n        history.back()\r\n      }\r\n    }])\r\n\r\napp\r\n.component('backButton', {\r\n  template: '<a class=\"link pull-right\" ng-click=\"goBack()\"><i class=\"fa fa-long-arrow-left\"></i> <span class=\"xs-hidden\">Back</span></a>',\r\n  controller: 'BackButtonController',\r\n  bindings: {}\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/backButton/backButton.component.js","angular\r\n  .module('DataDashboard')\r\n  .controller('BrandsSelectorController', BrandsSelectorController)\r\n  .component('brandsSelector', {\r\n    templateUrl: '/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.html',\r\n    controller: 'BrandsSelectorController',\r\n    bindings: {\r\n      brand: '=',\r\n      enableCreateBrand: '@',\r\n      onError: '&'\r\n    }\r\n  })\r\n\r\nBrandsSelectorController.$inject = ['$marketcloud', '$scope', '$element']\r\n\r\nfunction BrandsSelectorController($marketcloud, scope, $elem) {\r\n  var ctrl = null\r\n\r\n  this.$onInit = function() {\r\n    ctrl = this\r\n    scope.ctrl = ctrl\r\n\r\n    scope.newBrand = {}\r\n\r\n    ctrl.modal = $($elem).find('.modal')[0]\r\n\r\n    scope.enableCreateBrand = this.enableCreateBrand || true\r\n\r\n    scope.ctrl.query = {\r\n      name: {\r\n        $regex: '',\r\n        $options: 'i'\r\n      }\r\n    }\r\n  }\r\n\r\n  scope.showModal = function() {\r\n    $(ctrl.modal).modal('show')\r\n  }\r\n\r\n  scope.saveBrand = function() {\r\n    $marketcloud.brands.save(scope.newBrand)\r\n      .then(function(response) {\r\n        scope.ctrl.brands.push(response.data.data)\r\n        scope.newBrand = {}\r\n        scope.ctrl.brand = response.data.data.id\r\n        return $marketcloud.brands.list()\r\n      })\r\n      .then(function(response) {\r\n        scope.ctrl.brands = response.data.data\r\n        $(ctrl.modal).modal('hide')\r\n      })\r\n      .catch(function(response) {\r\n        $(ctrl.modal).hide()\r\n        notie.alert(3, 'An error has occurred. Brand not saved', 1)\r\n      })\r\n  }\r\n\r\n  scope.setSelectedBrand = function(brand) {\r\n    scope.brand = brand\r\n    scope.ctrl.brand = brand.id\r\n    scope.ctrl.onChange({\r\n      brand: brand.id\r\n    })\r\n  }\r\n\r\n  // Uses the input box in the component to filter the wanted brand\r\n  scope.filterBrands = function() {\r\n    $marketcloud.brands.list(scope.ctrl.query)\r\n      .then(function(response) {\r\n        ctrl.brands = response.data.data\r\n      })\r\n      .catch(function(error) {\r\n        notie.alert(2, 'An error has occurred while fetching brands, please retry.', 2)\r\n      })\r\n  }\r\n\r\n  function initializeData() {\r\n    // Initial fetch of brands\r\n    $marketcloud.brands.list()\r\n      .then(function(response) {\r\n        ctrl.brands = response.data.data\r\n\r\n        var currentBrand = null\r\n          // Look for the currently selected brand, if any\r\n        ctrl.brands.forEach(function(brand) {\r\n          if (brand.id === scope.ctrl.brand) {\r\n            currentBrand = brand\r\n          }\r\n        })\r\n\r\n        // If found, we initialize the current brand\r\n        if (currentBrand !== null) {\r\n          scope.brand = currentBrand\r\n        } else {\r\n          // Otherwise we must fetch it\r\n          return $marketcloud.brands.getById(scope.ctrl.brand)\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        if (response.data.data) {\r\n          scope.brand = response.data.data\r\n        }\r\n      })\r\n      .catch(function(response) {\r\n        ctrl.onError(response)\r\n      })\r\n  }\r\n\r\n  initializeData()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.js","'use strict'\r\n\r\nangular\r\n  .module('DataDashboard')\r\n  .controller('CategoriesSelectorController', CategoriesSelectorController)\r\n  .component('categoriesSelector', {\r\n    templateUrl: '/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.html',\r\n    controller: 'CategoriesSelectorController',\r\n    bindings: {\r\n      enableCreateCategory: '@',\r\n      category: '=',\r\n      onError: '&',\r\n      onChange: '&',\r\n      clearInput: '&'\r\n    }\r\n  })\r\n\r\nCategoriesSelectorController.$inject = ['$marketcloud', '$scope', '$element']\r\n\r\nfunction CategoriesSelectorController($marketcloud, scope, $elem) {\r\n\r\n  var ctrl = null\r\n  this.$onInit = function() {\r\n    ctrl = this\r\n    scope.ctrl = this;\r\n    scope.newCategory = {}\r\n    ctrl.modal = $($elem).find('.modal')[0];\r\n\r\n    scope.clearInput = ctrl.clearInput || false;\r\n    scope.enableCreateCategory = ctrl.enableCreateCategory || true;\r\n\r\n\r\n    scope.ctrl.query = {\r\n      name: {\r\n        $regex: \"\",\r\n        $options: 'i'\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  scope.showModal = function() {\r\n    $(ctrl.modal).modal('show')\r\n  }\r\n\r\n  function initializeData() {\r\n    // Initial fetch of categories\r\n    $marketcloud.categories.list()\r\n    .then(function(response) {\r\n      ctrl.categories = response.data.data;\r\n\r\n      var currentCategory = null;\r\n      // Look for the currently selected category, if any\r\n      ctrl.categories.forEach( function(category){\r\n        if (category.id === scope.ctrl.category)\r\n          currentCategory = category;\r\n      })\r\n\r\n      // If found, we initialize the current category\r\n      if (null !== currentCategory && !scope.clearInput) {\r\n        scope.category = currentCategory;\r\n      } else {\r\n        // Otherwise we must fetch it\r\n        return $marketcloud.categories.getById(scope.ctrl.category);\r\n      }\r\n\r\n    })\r\n    .then(function(response){\r\n      if (response.data.data && !scope.clearInput){\r\n        scope.category = response.data.data;\r\n      }\r\n    })\r\n    .catch(function(response) {\r\n      ctrl.onError(response)\r\n    })\r\n\r\n  }\r\n\r\n  initializeData();\r\n\r\n  scope.setSelectedCategory = function(category) {\r\n    scope.category = category;\r\n    scope.ctrl.category = category.id;\r\n    scope.ctrl.onChange({\r\n      category: category.id\r\n    })\r\n\r\n    /**\r\n     * FIXME: Handle multiple or single categories per product\r\n     * Currently, for sake of Epoteka integration we are saving multiple categories as a string\r\n     * e.g. 1523,6523,3123\r\n     * In future, this should be handled in an array!!!!\r\n     * FIXME:\r\n     */\r\n\r\n    console.log(scope.clearInput);\r\n    if (scope.clearInput) {\r\n      delete scope.category\r\n    }\r\n\r\n    /**\r\n     * Emiting the selected category to the parent component and handling it there\r\n     * TODO: Transfer entire logic to categories selector component\r\n     */\r\n\r\n    scope.$emit('selectedCategory', {\r\n      text: category.path,\r\n      category_id: category.id\r\n    });\r\n  }\r\n\r\n  // Uses the input box in the component to filter the wanted category\r\n  scope.filterCategories = function() {\r\n    $marketcloud.categories.list(scope.ctrl.query)\r\n      .then(function (response) {\r\n        ctrl.categories = response.data.data;\r\n      })\r\n      .catch(function (error) {\r\n        notie.alert(2, 'An error has occurred while fetching categories, please retry.', 2)\r\n      })\r\n  }\r\n\r\n  // Saves a new category\r\n  scope.saveCategory = function() {\r\n    $marketcloud.categories.save(scope.newCategory)\r\n      .then(function (response) {\r\n        ctrl.categories.push(response.data.data)\r\n        scope.newCategory = {}\r\n\r\n        scope.$emit('selectedCategory', {\r\n          text: response.data.data.path,\r\n          category_id: response.data.data.id\r\n        });\r\n        return $marketcloud.categories.list()\r\n      })\r\n      .then(function (response) {\r\n        ctrl.categories = response.data.data\r\n        $(ctrl.modal).modal('hide')\r\n      })\r\n      .catch(function (response) {\r\n        $(ctrl.modal).hide()\r\n        notie.alert(3, 'An error has occurred. Category not saved', 1)\r\n      })\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.js","var app = angular.module('DataDashboard')\r\napp.controller('CustomAttributesFormController', [\r\n  '$scope',\r\n  '$element',\r\n  '$attrs',\r\n  'moment',\r\n  function (scope, $element, $attrs, $moment) {\r\n    this.$onInit = function () {\r\n      scope.ctrl = this\r\n      scope.inObject = false\r\n      scope.btnText = 'Add'\r\n\r\n      scope.resource = this.resource\r\n\r\n      scope.properties = this.properties || {}\r\n      scope.type = this.type || {}\r\n\r\n      // Keeping a reference for nesting\r\n      scope.rootObject = scope.properties\r\n\r\n      scope.newAttribute = {\r\n        name: null,\r\n        value: null,\r\n        type: null\r\n      }\r\n\r\n      // Initializing propertyTypes object\r\n      computePropertiesTypes()\r\n\r\n      scope.resetNewAttributeValue = function () {\r\n        switch (scope.newAttribute.type) {\r\n          case 'string':\r\n            scope.newAttribute.value = ''\r\n            return\r\n          case 'number':\r\n            scope.newAttribute.value = 0\r\n            return\r\n          case 'boolean':\r\n            scope.newAttribute.value = true\r\n        }\r\n      }\r\n\r\n      scope.newAttribute.type = 'string'\r\n\r\n      scope.availableTypes = [{\r\n        name: 'String',\r\n        value: 'string'\r\n      }, {\r\n        name: 'Number',\r\n        value: 'number'\r\n      }, {\r\n        name: 'Boolean',\r\n        value: 'boolean'\r\n      },\r\n      {\r\n        name: 'RichText',\r\n        value: 'richtext'\r\n      },\r\n      {\r\n        name: 'URL/Media',\r\n        value: 'URL'\r\n      },\r\n      {\r\n        name: 'List',\r\n        value: 'list'\r\n      }]\r\n    }\r\n\r\n    scope.containerForNewMediaAttribute = []\r\n\r\n    scope.containersForExistingMediaAttributes = {}\r\n\r\n    scope.$watchCollection('containerForNewMediaAttribute', function () {\r\n      scope.newAttribute.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\r\n    })\r\n\r\n    scope.propertiesTypes = {}\r\n\r\n    function computePropertiesTypes () {\r\n      for (var k in scope.properties) {\r\n        scope.propertiesTypes[k] = typeof scope.properties[k]\r\n\r\n        if (scope.type[k] === 'list') {\r\n          scope.properties[k] = scope.properties[k].split(',').map(item => item.trim())\r\n          scope.propertiesTypes[k] = 'object'\r\n        }\r\n\r\n        if (scope.isNull(k) === true) {\r\n          scope.propertiesTypes[k] = 'null'\r\n        }\r\n\r\n        if (scope.isRichText(scope.properties[k]) === true) {\r\n          scope.propertiesTypes[k] = 'richtext'\r\n        }\r\n\r\n        if (scope.isURL(scope.properties[k]) === true) {\r\n          scope.propertiesTypes[k] = 'URL'\r\n          scope.containersForExistingMediaAttributes[k] = [scope.properties[k]]\r\n          scope.$watchCollection('containersForExistingMediaAttributes.' + k, function () {\r\n            // If the value is null, it means that we just deleted it, so we don't have to re-update it\r\n            if (scope.properties[k] === null) {\r\n              return\r\n            }\r\n            if (scope.containersForExistingMediaAttributes[k]) {\r\n              scope.properties[k] = scope.containersForExistingMediaAttributes[k][scope.containersForExistingMediaAttributes[k].length - 1]\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.isBoolean = function (d) {\r\n      return typeof d === 'boolean'\r\n    }\r\n\r\n    scope.isString = function (d) {\r\n      return typeof d === 'string' && !scope.isRichText(d) && !scope.isURL(d)\r\n    }\r\n\r\n    scope.isNull = function (key) {\r\n      return scope.properties[key] === null\r\n    }\r\n\r\n    scope.isURL = function (d) {\r\n      if (!d || typeof d.indexOf !== 'function') {\r\n        return false\r\n      }\r\n      return d.indexOf('http://') === 0 || d.indexOf('https://') === 0\r\n    }\r\n\r\n    scope.isRichText = function (str) {\r\n      if (typeof str !== 'string') { return false }\r\n\r\n      var doc = new DOMParser().parseFromString(str, 'text/html')\r\n      return [].slice.call(doc.body.childNodes).some(function (node) {\r\n        return node.nodeType === 1\r\n      })\r\n    }\r\n\r\n    scope.isNumber = function (d) {\r\n      return typeof d === 'number'\r\n    }\r\n\r\n    scope.isObject = function (d) {\r\n      if (d === null) { return false }\r\n\r\n      return typeof d === 'object'\r\n    }\r\n\r\n    scope.typeof = function (o) {\r\n      return typeof o\r\n    }\r\n\r\n    scope.hasCustomProperties = function () {\r\n      return Object.keys(scope.properties).length > 0\r\n    }\r\n\r\n    scope.addCustomProperty = function () {\r\n      scope.errorMessage = null\r\n      if (scope.resource.hasOwnProperty(scope.newAttribute.name)) {\r\n        // scope.productError = \"CUSTOM_PROPERTY_NAME_ALREADY_EXISTS\";\r\n        scope.errorMessage = 'Name already exists'\r\n      } else if (scope.newAttribute.name !== 0 && !scope.newAttribute.name) {\r\n        scope.errorMessage = 'Please, enter a valid property name'\r\n      } else if (scope.inObject && scope.properties.indexOf(scope.newAttribute.value) !== -1) {\r\n        scope.errorMessage = 'Duplicated value'\r\n      } else {\r\n        scope.properties[scope.newAttribute.name] = scope.newAttribute.value\r\n        scope.type[scope.newAttribute.name] = scope.newAttribute.type\r\n\r\n        scope.newAttribute.value = null\r\n        scope.newAttribute.name = null\r\n\r\n        if (scope.inObject) {\r\n          scope.newAttribute.name = scope.properties.length\r\n        }\r\n        scope.btnText = 'Add'\r\n        // Re-calculating types\r\n        computePropertiesTypes()\r\n      }\r\n    }\r\n\r\n    scope.deleteCustomProperty = function (propertyName) {\r\n      // delete scope.properties[propertyName]\r\n\r\n      scope.properties[propertyName] = null\r\n      // Re-calculating types\r\n      if (scope.inObject) {\r\n        scope.properties.splice(propertyName, 1)\r\n        scope.newAttribute.name = scope.properties.length\r\n      }\r\n      computePropertiesTypes()\r\n    }\r\n\r\n    scope.editCustomProperty = function (propertyName) {\r\n      scope.newAttribute.name = propertyName\r\n      scope.newAttribute.value = scope.properties[propertyName]\r\n      scope.newAttribute.type = scope.propertiesTypes[propertyName]\r\n      scope.btnText = 'edit'\r\n    }\r\n\r\n    scope.propertiesStack = []\r\n\r\n    // Goes inside the properties object to show nested properties\r\n    scope.showRecursiveObjectEditor = function (propertyName) {\r\n      // Pushing the new level into the stack\r\n      scope.propertiesStack.push(propertyName)\r\n\r\n      // Getting the pointer to the root of the object\r\n      scope.properties = scope.rootObject\r\n\r\n      // Digging into the object's nested properties to find the wanted\r\n      for (var i = 0; i < scope.propertiesStack.length; i++) {\r\n        if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\r\n          scope.properties = scope.properties[scope.propertiesStack[i]]\r\n        } else {\r\n          break\r\n        }\r\n      }\r\n\r\n      scope.newAttribute.name = scope.properties.length\r\n      scope.newAttribute.type = 'string'\r\n      scope.inObject = true\r\n\r\n      // Recalculating the propertiesTypes object for the current properties object\r\n      computePropertiesTypes()\r\n    }\r\n    // Goes to a specific nested level\r\n    scope.goToNestedStep = function (index) {\r\n      // Getting the pointer to the root of the object\r\n      scope.properties = scope.rootObject\r\n\r\n      if (index === 0) {\r\n        scope.inObject = false\r\n        scope.newAttribute.name = null\r\n        scope.btnText = 'Add'\r\n      }\r\n\r\n      // Adjusting the stack to the wanted level\r\n      scope.propertiesStack = scope.propertiesStack.slice(0, index)\r\n\r\n      for (var i = 0; i < index; i++) {\r\n        if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) { scope.properties = scope.properties[scope.propertiesStack[i]] } else { break }\r\n      }\r\n      // Re-calculating types\r\n      computePropertiesTypes()\r\n    }\r\n  }\r\n])\r\n\r\napp\r\n  .component('customAttributesForm', {\r\n    templateUrl: '/modules/data_dashboard/src/components/customAttributes/customAttributes.component.html',\r\n    controller: 'CustomAttributesFormController',\r\n    bindings: {\r\n      properties: '=',\r\n      resource: '=',\r\n      onError: '&',\r\n      disableAdd: '=',\r\n      removeCardFrame: '@?'\r\n    }\r\n  })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/customAttributes/customAttributes.component.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('DashboardBreadcrumbController', ['$scope', '$element', '$attrs',\r\n  function (scope, $element, $attrs) {\r\n    scope.goBack = function () {\r\n      history.back()\r\n    }\r\n  }\r\n])\r\n\r\n\r\napp\r\n\t.component('dashboardBreadcrumb', {\r\n  template: '<a href=\"#\" class=\"link pull-right\"><i class=\"fa fa-long-arrow-left\"></i> Back</a>',\r\n  controller: 'DashboardBreadcrumbController',\r\n  bindings: {\r\n    resourceName: '='\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('McDataTableController', ['$scope',\r\n  function (scope) {\r\n    this.$onInit = function () {\r\n      var ctrl = this\r\n      scope.ctrl = ctrl\r\n\r\n      scope.columns = ctrl.columns || Object.keys(scope.ctrl.data[0])\r\n    }\r\n  }\r\n])\r\n\r\napp\r\n  .component('mcDataTable', {\r\n  templateUrl: '/modules/data_dashboard/src/components/dataTable/dataTable.component.html',\r\n  controller: 'McDataTableController',\r\n  bindings: {\r\n    data: '=',\r\n    columns: '=?'\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/dataTable/dataTable.component.js","\r\nangular\r\n  .module('DataDashboard')\r\n  .controller('ErrorMessagesController', ErrorMessagesController)\r\n  .component('errorMessages', {\r\n  templateUrl: '/modules/data_dashboard/src/components/errorMessages/errorMessages.component.html',\r\n  controller: 'ErrorMessagesController',\r\n  bindings: {\r\n    validation: '<',\r\n    propertyName: '@',\r\n    modelName: '@',\r\n    onError: '&',\r\n\r\n    messageMin: '@',\r\n    messageMax: '@',\r\n    messageRequired: '@',\r\n    messageType: '@'\r\n  }\r\n})\r\n\r\nErrorMessagesController.$inject = ['$scope', '$models']\r\n\r\nfunction ErrorMessagesController (scope, Models) {\r\n  if (!Models) { throw new Error('ErrorMessages Component requires Models factory. errorMessages.component.js') }\r\n\r\n  var ctrl = null\r\n\r\n  this.$onInit = function () {\r\n    ctrl = this\r\n    scope.ctrl = ctrl\r\n\r\n    if (ctrl.modelName) {\r\n      if (!Models.hasOwnProperty(ctrl.modelName)) {\r\n        throw new Error('Cannot find model with name ' + ctrl.modelName)\r\n      }\r\n\r\n\r\n      ctrl.schema = angular.copy(Models[ctrl.modelName].schema)\r\n      if (!ctrl.schema){\r\n        console.log(\"Lo schema non ha il mio model \"+ctrl.modelName, Models);\r\n      }\r\n    }\r\n  }\r\n\r\n  this.$onChanges = function(changes) {\r\n    // var validation = changes.validation.currentValue;\r\n\r\n    // if (validation.invalidPropertyName === this.propertyName)\r\n    //     $('html, body').animate({\r\n    //       scrollTop: $(\"[property-name='\"+validation.invalidPropertyName+\"']\").offset().top - 200\r\n    //     }, 500);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/errorMessages/errorMessages.component.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('FlagIconController', ['$scope', 'Countries',\r\n  function(scope, countries) {\r\n    var ctrl = this;\r\n\r\n    this.$onInit = function() {\r\n      var countryObject = countries.find(function(item) {\r\n        return item.name.toLowerCase() === ctrl.country.toLowerCase();\r\n      })\r\n\r\n      if (!countryObject)\r\n        ctrl.countryCode = ctrl.country;\r\n      else\r\n        ctrl.countryCode = countryObject.code;\r\n    }\r\n\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + ctrl.countryCode.toLowerCase()\r\n    }\r\n  }\r\n])\r\n\r\napp\r\n  .component('flagIcon', {\r\n    template: '<span class=\"flag-icon\" ng-class=\"getFlagClassName()\"></span>',\r\n    controller: 'FlagIconController',\r\n    bindings: {\r\n      country: '@'\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/flagIcon/flagIcon.component.js","var ImageSelectorControllerDependencies = [\r\n  '$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'\r\n]\r\n\r\nvar ImageSelectorController = function (scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\r\n  var ctrl = null\r\n  this.$onInit = function () {\r\n    // Reference to the controller\r\n    ctrl = this\r\n\r\n    // List of image urls\r\n    ctrl.images = ctrl.images || []\r\n\r\n    // List of image objects\r\n    // ctrl.media = ctrl.media || [];\r\n\r\n    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete\r\n\r\n    /* Component configuration from attributes */\r\n    // The classes used to style the button\r\n    scope.buttonClass = $attrs.buttonClass\r\n\r\n    // The text displayed on the button\r\n    scope.buttonText = $attrs.buttonText\r\n\r\n    // The icon displayed on the button\r\n    scope.buttonIcon = $attrs.buttonIcon || null\r\n\r\n    var tabs = $attrs.tabs || 'library,from_disk,from_url'\r\n\r\n    // This will hold an array of tab names\r\n    // The component will show only those tabs\r\n    // whose name is in this array\r\n    //\r\n    // The first tab will be the active one.\r\n    // TODO to improve this, we can add an attribute \"activeTab\"\r\n\r\n    scope.tabs = tabs.split(',')\r\n\r\n    // This is the name of the parent function which will return a reference to the image container\r\n    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\r\n  }\r\n\r\n  /* Uploader configuration */\r\n  scope.uploader = new FileUploader({\r\n    url: window.API_BASE_URL + '/media',\r\n    arrayKey: '',\r\n    headers: {\r\n      'Authorization': window.public_key + ':' + window.token\r\n    },\r\n    filters: []\r\n  })\r\n\r\n  // When closeDialog is called from within the component\r\n  // we notify the parent component/controller by calling the on-close-dialog\r\n  // callback\r\n  scope.closeDialog = function () {\r\n    ctrl.onCloseDialog()\r\n  }\r\n\r\n  scope.openDialog = function () {\r\n    ctrl.onOpenDialog()\r\n  }\r\n\r\n  scope.uploadImages = function () {\r\n    ctrl.onUploadImages()\r\n  }\r\n\r\n  scope.image = {}\r\n  scope.media_files = []\r\n  scope.loadingMediaFiles = false\r\n\r\n  // Used to keep filters and pagination state\r\n  scope.query = {}\r\n\r\n  // Initializing the pagination object to null\r\n  // This allows for convenient check on view pagination === null => dont show pagination\r\n  scope.pagination = null\r\n\r\n  scope.loadMedias = function (query) {\r\n    scope.media_files = []\r\n    scope.loadingMediaFiles = true\r\n    /* $http({\r\n        method: 'GET',\r\n        url: window.API_BASE_URL + '/media',\r\n        headers: {\r\n          Authorization: window.public_key\r\n        }\r\n      }) */\r\n    $marketcloud.media.list(query || {})\r\n      .then(function (response) {\r\n        scope.loadingMediaFiles = false\r\n        scope.media_files = response.data.data\r\n\r\n        scope.pagination = {\r\n          currentPage: response.data.page,\r\n          numberOfPages: response.data.pages,\r\n          nextPage: response.data._links.next || null,\r\n          previousPage: response.data._links.prev || null,\r\n          count: response.data.count\r\n        }\r\n      })\r\n      .catch(function (response) {\r\n        scope.loadingMediaFiles = false\r\n        notie.alert(2, 'An error has occurred, please retry.', 1.5)\r\n      })\r\n  }\r\n\r\n  scope.loadPage = function (page_number) {\r\n    scope.query.page = page_number\r\n    return scope.loadData()\r\n  }\r\n\r\n  scope.loadMore = function () {\r\n    var pageToFetch = scope.media_files.length / 20 + 1\r\n    $marketcloud.media.list({ page: pageToFetch })\r\n      .then(function (response) {\r\n        scope.loadingMediaFiles = false\r\n\r\n        scope.media_files = scope.media_files.concat(response.data.data)\r\n      })\r\n      .catch(function (response) {\r\n        scope.loadingMediaFiles = false\r\n        notie.alert(2, 'An error has occurred, please retry.', 1.5)\r\n      })\r\n  }\r\n  scope.loadData = function (query) {\r\n    scope.media_files = []\r\n    scope.loadingMediaFiles = true\r\n\r\n    if (!query) { query = scope.query || {} }\r\n\r\n    $marketcloud.media\r\n      .list(query)\r\n      .then(function (response) {\r\n        scope.loadingMediaFiles = false\r\n        scope.media_files = response.data.data\r\n\r\n        scope.pagination = {\r\n          currentPage: response.data.page,\r\n          numberOfPages: response.data.pages,\r\n          nextPage: response.data._links.next || null,\r\n          previousPage: response.data._links.prev || null,\r\n          count: response.data.count\r\n        }\r\n      })\r\n      .catch(function (response) {\r\n        scope.loadingMediaFiles = false\r\n        notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n      })\r\n  }\r\n\r\n  // Calling it right now because we want to initialize the media library\r\n  if (scope.media_files.length === 0) {\r\n    scope.loadMedias()\r\n  }\r\n\r\n  scope.showProgressBar = false\r\n  scope.uploadingImages = false\r\n\r\n  scope.howManySelectedMedia = function () {\r\n    return ctrl.images.length\r\n  }\r\n\r\n  scope.addSelectedFromLibrary = function () {\r\n    var modal = $element.find('#ImageSelectorModal')\r\n    $(modal).modal('hide')\r\n    /* $('#ImageSelectorModal').modal('hide') */\r\n  }\r\n\r\n  scope.isImageSelected = function (image) {\r\n    return ctrl.images.indexOf(image.url) > -1\r\n  }\r\n  scope.selectImage = function (image) {\r\n    ctrl.image = image.url\r\n    scope.closeDialog()\r\n    var modal = $element.find('#ImageSelectorModal')\r\n    $(modal).modal('hide')\r\n  }\r\n\r\n  var removeImage = function (image) {\r\n    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\r\n    var pos = ctrl.images.indexOf(image.url)\r\n    if (pos > -1) {\r\n      ctrl.images.splice(pos, 1)\r\n    }\r\n\r\n    // Rimuovo il media\r\n    /* for (var i =0; i< ctrl.media.length;i++) {\r\n      if (ctrl.media[i].url === image.url)\r\n        ctrl.media.splice(i,1);\r\n    } */\r\n  }\r\n\r\n  scope.uploader.onCompleteAll = function () {\r\n    scope.loadMedias()\r\n    scope.showProgressBar = false\r\n    scope.uploadingImages = false\r\n    scope.uploader.clearQueue()\r\n\r\n    // Checking if we need to close the dialog\r\n    if (scope.closeOnUploadComplete === 'true') {\r\n      scope.closeDialog()\r\n      /* $('#ImageSelectorModal').modal('hide') */\r\n      var modal = $element.find('#ImageSelectorModal')\r\n      $(modal).modal('hide')\r\n    }\r\n\r\n    if (ctrl.onUploadComplete) {\r\n      ctrl.onUploadComplete()\r\n    }\r\n  }\r\n\r\n  scope.uploader.onProgressAll = function (progress) {\r\n\r\n  }\r\n\r\n  scope.uploader.onErrorItem = function (item, response, status, headers) {\r\n    var err = new Error('Error uploading an item')\r\n    err.response = response\r\n    err.status = status\r\n    err.headers = headers\r\n    $exceptionHandler(err)\r\n  }\r\n\r\n  scope.chooseFileFromStorage = function () {\r\n    $('#chooseFileFromStorageButton').trigger('click')\r\n  }\r\n\r\n  scope.uploadSelectedImages = function () {\r\n    scope.showProgressBar = true\r\n    scope.uploadingImages = true\r\n    scope.uploader.uploadAll()\r\n  }\r\n\r\n  scope.addImageFromUrl = function () {\r\n    ctrl.images.push(scope.image.url)\r\n    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\r\n    scope.image.url = null\r\n  }\r\n\r\n  scope.showImageSelectorModal = function () {\r\n    /* $('#ImageSelectorModal').modal('show') */\r\n    var modal = $element.find('#ImageSelectorModal')\r\n    $(modal).modal('show')\r\n\r\n    // Notifying the parent\r\n    scope.openDialog()\r\n  }\r\n}\r\n\r\nImageSelectorController.$inject = ImageSelectorControllerDependencies\r\n\r\nangular.module('DataDashboard')\r\n  .controller('ImageSelectorController', ImageSelectorController)\r\n\r\nangular.module('DataDashboard')\r\n  .component('imageSelector', {\r\n    templateUrl: '/modules/data_dashboard/src/components/imageSelector/imageSelector.component.html',\r\n    controller: 'ImageSelectorController',\r\n    bindings: {\r\n      onCloseDialog: '&',\r\n      onOpenDialog: '&',\r\n      onUploadComplete: '&',\r\n      image: '=?',\r\n      buttonClass: '@',\r\n      buttonIcon: '@',\r\n      buttonText: '@',\r\n      closeOnUploadComplete: '@'\r\n    }\r\n  })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imageSelector/imageSelector.component.js","\r\nvar app = angular.module('DataDashboard')\r\napp.controller('ImageThumbnailController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\r\n  this.$onInit = function () {\r\n    scope.ctrl = this\r\n\r\n    // Boolean flag to control display/hide of the overlay\r\n    scope.ctrl.showOverlay = false\r\n  }\r\n\r\n  scope.edit = function () {\r\n    scope.ctrl.onEdit()\r\n    $element.find('#editImageModal').modal('show')\r\n  }\r\n  scope.delete = function () {\r\n    scope.ctrl.onDelete()\r\n  }\r\n\r\n  scope.zoom = function () {\r\n    $element.find('#zoomImageModal').modal('show')\r\n  }\r\n\r\n  scope.showOverlay = function () {\r\n    scope.ctrl.showOverlay = true\r\n  }\r\n  scope.hideOverlay = function () {\r\n    scope.ctrl.showOverlay = false\r\n  }\r\n\r\n  scope.toggleEditImageModal = function (image) {\r\n    $element.find('#editImageModal').modal('hide')\r\n  }\r\n}])\r\napp\r\n.component('imageThumbnail', {\r\n  templateUrl: '/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.html',\r\n  controller: 'ImageThumbnailController',\r\n  bindings: {\r\n    imageSrc: '=',\r\n    image: '=',\r\n    onEdit: '&',\r\n    onDelete: '&'\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.js","\r\n\r\nfunction ImagesCardController(scope) {\r\n  var ctrl = null\r\n\r\n  this.$onInit = function() {\r\n    ctrl = this\r\n    scope.ctrl = ctrl\r\n\r\n  }\r\n\r\n  scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\r\n    var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\r\n\r\n    // We ensure that the indexes exist\r\n    if (fromIndex > target.length - 1)\r\n      return;\r\n\r\n    // First we remove the element to move\r\n    target.splice(fromIndex, 1);\r\n\r\n    // Then we add it to the desired position\r\n    target.splice(toIndex, 0, toMove);\r\n\r\n  }\r\n\r\n  scope.removeImage = function(i) {\r\n    var removed = scope.ctrl.items.splice(i, 1);\r\n    scope.ctrl.onRemove(removed[0]);\r\n  };\r\n}\r\n\r\nImagesCardController.$inject = ['$scope']\r\n\r\nangular\r\n  .module('DataDashboard')\r\n  .controller('ImagesCardController', ImagesCardController)\r\n  .component('imagesCard', {\r\n    templateUrl: '/modules/data_dashboard/src/components/imagesCard/imagesCard.component.html',\r\n    controller: 'ImagesCardController',\r\n    bindings: {\r\n      items: '=',\r\n      onRemove: '&',\r\n      removeCardFrame: '@?'\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imagesCard/imagesCard.component.js","\r\nvar app = angular.module('DataDashboard')\r\napp.controller('LinkHelpTextController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\r\n  this.$onInit = function () {\r\n    scope.ctrl = this\r\n\r\n    // The text to display\r\n    scope.ctrl.text = this.text\r\n\r\n    // The label to display\r\n    scope.ctrl.label = this.label\r\n\r\n    scope.showHelpText = false\r\n  }\r\n\r\n  scope.toggleHelpText = function () {\r\n    scope.showHelpText = !scope.showHelpText\r\n  }\r\n}])\r\napp\r\n.component('linkHelpText', {\r\n  templateUrl: '/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.html',\r\n  controller: 'LinkHelpTextController',\r\n  bindings: {\r\n    text: '@',\r\n    label: '@'\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.js","\r\n\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('NavbarController',\r\n  [\r\n  '$scope',\r\n  '$application',\r\n  '$account',\r\n    function ($scope, $application, $account) {\r\n\r\n      $scope.application = $application.get()\r\n      $scope.user = $account.get();\r\n\r\n    }\r\n  ])\r\n\r\n\r\napp\r\n.component('navbar', {\r\n  templateUrl: '/modules/data_dashboard/src/components/navbar/navbar.component.html',\r\n  controller: 'NavbarController',\r\n  bindings: {}\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/navbar/navbar.component.js","var app = angular.module('DataDashboard')\r\napp.controller('PaginationNavController', ['$scope', '$element', '$attrs', '$marketcloud',\r\n  function(scope, $element, $attrs, $marketcloud) {\r\n    this.$onInit = function() {\r\n      scope.ctrl = this\r\n    }\r\n\r\n    scope.loadPage = function(page_number) {\r\n      scope.ctrl.onChangePage({\r\n        page: page_number\r\n      })\r\n    }\r\n\r\n    scope.getListOfPages = function() {\r\n      var np = scope.ctrl.pagination.numberOfPages;\r\n      var cp = scope.ctrl.pagination.currentPage\r\n\r\n      var arr = []\r\n      var initialPage = cp - 2\r\n      if (initialPage <= 0) {\r\n        initialPage = 1\r\n      }\r\n      var lastPage = cp + 2\r\n      if (lastPage > np) {\r\n        lastPage = np\r\n      }\r\n\r\n      for (var i = initialPage; i < lastPage; i++) {\r\n        arr.push(i)\r\n      }\r\n\r\n      return arr\r\n    }\r\n  }\r\n])\r\napp\r\n  .component('paginationNav', {\r\n    templateUrl: '/modules/data_dashboard/src/components/paginationNav/paginationNav.component.html',\r\n    controller: 'PaginationNavController',\r\n    bindings: {\r\n      pagination: '=',\r\n      onChangePage: '&'\r\n\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/paginationNav/paginationNav.component.js","var app = angular.module('DataDashboard')\r\napp.controller('PaginationSelectorController', ['$scope',\r\n  function(scope) {\r\n\r\n    var ctrl = this;\r\n\r\n    this.$onInit = function() {\r\n\r\n      scope.ctrl = this;\r\n      scope.ctrl.perPage = this.perPage || this.config.defaultPageSize\r\n      scope.ctrl.page = this.page || this.config.defaultPageNumber\r\n\r\n      this.updatePageCounters();\r\n\r\n    }\r\n\r\n    // If the parent controller's pagination changes\r\n    // we have to update our reference\r\n    this.$onChanges = function(changes) {\r\n\r\n      // Whenever the parent controller refreshes data updating the query\r\n      // we must update our reference to pagination\r\n      if (changes.pagination) {\r\n        ctrl.pagination = changes.pagination.currentValue;\r\n\r\n        // We have to be sure that scope is already there\r\n        if (scope && scope.ctrl){\r\n          ctrl.updatePageCounters();\r\n        }\r\n      }\r\n    }\r\n\r\n  \r\n\r\n   this.updatePageCounters = function() {\r\n      scope.pages = [];\r\n      for (var i = 1; i <= this.pagination.numberOfPages; i++) {\r\n        scope.pages.push(i);\r\n      }\r\n\r\n      // We find the positions of the first and the last displayed item\r\n      scope.first = (scope.ctrl.page -1) * scope.ctrl.perPage + 1;\r\n      scope.last = ((scope.ctrl.page) * scope.ctrl.perPage) -1 ;\r\n\r\n      // If there are less items than the perPage value, we adjust the \"last\" value\r\n      if (scope.last > scope.ctrl.pagination.count) {\r\n        scope.last = scope.ctrl.pagination.count;\r\n      }\r\n    }\r\n\r\n    this.config = {\r\n      availablePageSizes: [10, 20, 50, 100],\r\n      defaultPageSize: 20,\r\n      defaultPageNumber: 1\r\n    }\r\n\r\n\r\n\r\n    // this function triggers the callback specified as onChangePageSize\r\n    scope.setPageSize = function(pageSize) {\r\n\r\n      var newSize = scope.ctrl.perPage;\r\n\r\n      if (pageSize)\r\n        newSize = pageSize;\r\n\r\n\r\n      scope.ctrl.onChangePageSize({\r\n        per_page: newSize\r\n      })\r\n      .then( function(){\r\n        ctrl.updatePageCounters();\r\n      })\r\n\r\n    }\r\n\r\n    scope.setPageNumber = function(pageNumber) {\r\n\r\n      if (pageNumber <= 0){\r\n        console.info(\"Cannot set page <= 0. Ignoring setPageNumber() call.\")\r\n        return;\r\n      }\r\n\r\n\r\n      if (pageNumber > scope.ctrl.pagination.numberOfPages ){\r\n        console.info(\"Cannot set page > pagination.numberOfPages. Ignoring setPageNumber() call.\")\r\n        return;\r\n      }\r\n\r\n\r\n      scope.ctrl.onChangePageNumber({\r\n        page: pageNumber\r\n      })\r\n      .then( function(){\r\n        ctrl.updatePageCounters();\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n])\r\napp\r\n  .component('paginationSelector', {\r\n    templateUrl: '/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.html',\r\n    controller: 'PaginationSelectorController',\r\n    bindings: {\r\n      perPage: '=',\r\n      page: '=',\r\n      pagination: '<', // We don't need to modify this, we just use it to listen for changes and read data\r\n      onChangePageSize: '&',\r\n      onChangePageNumber: '&'\r\n\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.js","\r\nvar app = angular.module('DataDashboard')\r\napp.controller('SEOFormController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\r\n  this.$onInit = function () {\r\n    scope.ctrl = this\r\n\r\n    // The SEO object holds all SEO related data\r\n    scope.ctrl.seo = this.seo\r\n\r\n    // The active tab key\r\n    scope.activeSeoTab = 'meta'\r\n  }\r\n\r\n  scope.showSeoTab = function (tabname) {\r\n    scope.activeSeoTab = tabname\r\n  }\r\n}])\r\napp\r\n.component('seoForm', {\r\n  templateUrl: '/modules/data_dashboard/src/components/seoForm/seoForm.component.html',\r\n  controller: 'SEOFormController',\r\n  bindings: {\r\n    seo: '=',\r\n    removeCardFrame: '@?'\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/seoForm/seoForm.component.js","\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('SidebarController',\r\n  [\r\n  '$scope', \r\n  '$http', \r\n  '$routeParams', \r\n  '$location', \r\n  '$rootScope', \r\n  '$route',\r\n  '$application',\r\n  '$window',\r\n  'StormConfiguration',\r\n  function($scope, $http, $params, $location, $root, $route, $application, $window, Configuration) {\r\n    $scope.showingSubSidebar = false\r\n\r\n    $scope.currentSidebarSection = null\r\n\r\n    $scope.currentSection = null\r\n\r\n    $scope.sidebarIsExpanded = true;\r\n\r\n    $scope.subEntriesGroupToShow = null\r\n\r\n    $scope.subSideBars = {\r\n      inventory: false,\r\n      system: false\r\n    }\r\n\r\n    $scope.StormConfiguration = {};\r\n    $scope.StormConfiguration = Configuration.get();\r\n\r\n\r\n\r\n    $scope.$on('$dashboardSectionChange', function($event, args) {\r\n      // Intercepting the new section event\r\n      if (args.section) {\r\n        \r\n        $scope.currentSection = args.section.split('.')[0]\r\n        $scope.currentSubsection = args.section.split('.')[1] || null\r\n\r\n        $root.currentSection = args.section.split('.')[0]\r\n        $root.currentSubsection = args.section.split('.')[1] || null\r\n\r\n        if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\r\n          $scope.hideSubSidebar()\r\n        }\r\n      }\r\n    })\r\n\r\n\r\n\r\n    $scope.switchToApp = function(app_id) {\r\n      var current_app_id = $application.get().id\r\n        // We just need to swap the current urls with the desired app id\r\n      var url = '/applications/' + app_id + '/dashboard#/'\r\n\r\n      window.location.href = url\r\n    }\r\n\r\n   \r\n    $scope.showSubEntries = function(id) {\r\n      $scope.subEntriesGroupToShow = id\r\n    }\r\n    $scope.hideAllSubEntries = function() {\r\n      for (var k in $scope.subEntriesGroupShown)\r\n        $scope.subEntriesGroupShown[k] = false;\r\n    }\r\n\r\n    $scope.subEntriesGroupShown = {\r\n      inventory: false,\r\n      system: false\r\n    }\r\n\r\n    // find workaround with $window, since currently using $window doesnt work\r\n    this.mql = window.matchMedia('screen and (max-width:1000px)');\r\n\r\n    this.mql.addListener( function(mq){\r\n      console.log(\"matchMedia Listener\")\r\n      if (mq.matches) {\r\n        if (true === $scope.sidebarIsExpanded) {\r\n          $scope.toggleSidebar();\r\n        }\r\n      } else {\r\n          // When the screen size grows bigger, we expand the sidebar,\r\n          // not required but probably wanted by the user\r\n          if (false === $scope.sidebarIsExpanded) {\r\n          $scope.toggleSidebar();\r\n        }\r\n        }\r\n    })\r\n\r\n    \r\n\r\n\r\n    $scope.toggleSidebar = function() {\r\n\r\n\r\n      var movement = \"-=200\";\r\n      var duration = 500;\r\n\r\n      if ($scope.sidebarIsExpanded === false) {\r\n        movement = '+=200';\r\n\r\n        // if we are closing the sidebar, we also close sub-sections in it\r\n        $scope.hideAllSubEntries();\r\n      }\r\n\r\n      $(\"#page-wrapper\").animate({\r\n        \"margin-left\": movement\r\n      }, {\r\n        duration: duration,\r\n        queue: false\r\n      });\r\n\r\n      $(\".dashboard-section-header\").animate({\r\n        \"left\": movement\r\n      }, {\r\n        duration: duration,\r\n        queue: false\r\n      });\r\n\r\n      $(\".sidebar-footer\").animate({\r\n        \"left\": movement\r\n      }, {\r\n        duration: duration,\r\n        queue: false\r\n      });\r\n\r\n      $(\".sidebar\").not('.sub-sidebar').animate({\r\n        left: movement\r\n      }, {\r\n        duration: duration,\r\n        queue: false,\r\n        done: function() {\r\n\r\n\r\n\r\n          if (true === $scope.sidebarIsExpanded) {\r\n            $(\"a.entry .fa\").addClass(\"pull-right\");\r\n            $scope.sidebarIsExpanded = false;\r\n          } else {\r\n            $scope.sidebarIsExpanded = true;\r\n            $(\"a.entry .fa\").removeClass(\"pull-right\");\r\n          }\r\n\r\n\r\n\r\n          $scope.$apply();\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    $scope.toggleSidebar = function() {\r\n\r\n      if (true === $scope.sidebarIsExpanded) {\r\n        angular.element('.sidebar').addClass('collapsed');\r\n        angular.element('.sidebar').removeClass('expanded');\r\n        angular.element('#page-wrapper').addClass('expanded');\r\n        angular.element('#page-wrapper').removeClass('collapsed');\r\n        $scope.hideAllSubEntries();\r\n        $scope.sidebarIsExpanded = false;\r\n      } else {\r\n        angular.element('.sidebar').addClass('expanded');\r\n        angular.element('.sidebar').removeClass('collapsed');\r\n        angular.element('#page-wrapper').addClass('collapsed');\r\n        angular.element('#page-wrapper').removeClass('expanded');\r\n        $scope.sidebarIsExpanded = true;\r\n      }\r\n\r\n\r\n    }\r\n\r\n    $scope.toggleSubEntries = function(group_id) {\r\n      // group_id is the name of the dashboard section\r\n      // a section is a group of logical views\r\n      // e.g. inventory is a group of views related to inventory management\r\n      $scope.currentSection = group_id\r\n\r\n      if (false === $scope.sidebarIsExpanded)\r\n        $scope.toggleSidebar();\r\n\r\n\r\n      $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id]\r\n    }\r\n\r\n\r\n    $scope.saveStormConfiguration = function(){\r\n\r\n      for (var k in $scope.StormConfiguration) {\r\n        Configuration.set(k, $scope.StormConfiguration[k], true);\r\n      }\r\n\r\n      if ($scope.StormConfiguration.hasOwnProperty(\"theme\"))\r\n        Configuration.applyTheme($scope.StormConfiguration.theme)\r\n    }\r\n\r\n\r\n    $scope.showSubSidebar = function(id) {\r\n\r\n      $scope.showingSubSidebar = true\r\n\r\n      var sidebars = [\r\n        'inventory',\r\n        'system',\r\n        'contents'\r\n      ]\r\n\r\n      if (sidebars.indexOf(id) < 0) {\r\n        return false\r\n      }\r\n\r\n      $scope.currentSidebarSection = id\r\n    }\r\n\r\n    $scope.hideSubSidebar = function() {\r\n      $scope.showingSubSidebar = false\r\n    }\r\n  }\r\n])\r\n\r\napp\r\n.component('sidebar', {\r\n  templateUrl: '/modules/data_dashboard/src/components/sidebar/sidebar.component.html',\r\n  controller: 'SidebarController',\r\n  bindings: {}\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/sidebar/sidebar.component.js","var app = angular.module('DataDashboard');\r\n\r\n\r\napp.controller('sortingSelectorController', \r\n  [\r\n  '$scope',\r\n  function(scope) {\r\n\r\n    var ctrl = this;\r\n\r\n    this.$onInit = function() {\r\n      scope.ctrl = this;\r\n      scope.ctrl.query = this.query || {};\r\n\r\n      \r\n      if (!scope.ctrl.query.sort_by)\r\n        scope.ctrl.query.sort_by = 'id';\r\n      if (!scope.ctrl.query.sort_order)\r\n        scope.ctrl.query.sort_order = 'DESC';\r\n\r\n      scope.ctrl.resourceAttributes = this.resourceAttributes || [];\r\n    }\r\n\r\n\r\n    scope.applySorting = function(){\r\n      console.log(\"sortingSelector.applySorting\",{\r\n        sort_by : scope.ctrl.query.sort_by,\r\n        sort_order: scope.ctrl.query.sort_order\r\n      })\r\n      scope.ctrl.onUpdate({\r\n        sort_by : scope.ctrl.query.sort_by,\r\n        sort_order: scope.ctrl.query.sort_order\r\n      })\r\n\r\n      $(\"#sortingModal\").modal('hide');\r\n\r\n    }\r\n\r\n\r\n  }\r\n])\r\n\r\napp\r\n  .component('sortingSelector', {\r\n    templateUrl: '/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.html',\r\n    controller: 'sortingSelectorController',\r\n    bindings: {\r\n      query: '=',\r\n      resourceAttributes: '=',\r\n      onUpdate : '&'\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.js","var app = angular.module('DataDashboard')\r\napp.controller('SwitchController', [\r\n  '$scope', '$element', '$attrs',\r\n  function (scope, $element, $attrs) {\r\n    this.$onInit = function () {\r\n      scope.ctrl = this\r\n\r\n      scope.ctrl.value = this.value\r\n\r\n      // Theme is success danger info primary warning default\r\n      scope.ctrl.theme = $attrs.theme || 'info'\r\n\r\n      scope.ctrl.align = $attrs.align || ''\r\n    }\r\n\r\n    $element.on('click', function () {\r\n      if (scope.ctrl.readOnly === true) {\r\n        return\r\n      }\r\n\r\n      scope.ctrl.value = !scope.ctrl.value\r\n\r\n      // Params must be wrapped in an object\r\n      // then when using the on-update attribute i can write\r\n      // on-update=\"somfunc(params)\"\r\n\r\n      scope.$apply()\r\n\r\n      scope.ctrl.onUpdate()\r\n    })\r\n  }\r\n])\r\napp\r\n  .component('switch', {\r\n    templateUrl: '/modules/data_dashboard/src/components/switch/switch.component.html',\r\n    controller: 'SwitchController',\r\n    bindings: {\r\n      value: '=',\r\n      onUpdate: '&',\r\n      class: '@',\r\n      align: '@',\r\n      readOnly: '@'\r\n    }\r\n  })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/switch/switch.component.js","'use strict'\r\n\r\nangular\r\n  .module('DataDashboard')\r\n  .controller('TaxesSelectorController', TaxesSelectorController)\r\n  .component('taxesSelector', {\r\n  templateUrl: '/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.html',\r\n  controller: 'TaxesSelectorController',\r\n  bindings: {\r\n    tax: '=',\r\n    onError: '&',\r\n    onChange: '&'\r\n  }\r\n})\r\n\r\nTaxesSelectorController.$inject = ['$marketcloud', '$scope']\r\n\r\nfunction TaxesSelectorController ($marketcloud, scope) {\r\n  this.$onInit = function () {\r\n    scope.ctrl = this\r\n  }\r\n\r\n  $marketcloud.taxes.list()\r\n    .then(function (response) {\r\n  scope.ctrl.taxes = response.data.data\r\n})\r\n    .catch(function (response) {\r\n  scope.ctrl.onError(response)\r\n})\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.js","var app = angular.module('DataDashboard');\r\n\r\n\r\napp.controller('ToolbarSearchController', \r\n  [\r\n  '$scope',\r\n  function(scope) {\r\n\r\n    var ctrl = this;\r\n    scope.searchWord = '';\r\n\r\n    this.$onInit = function() {\r\n      scope.ctrl = this;\r\n      \r\n      scope.ctrl.query = {}\r\n\r\n      if (!this.propertyName)\r\n        this.propertyName = \"name\";\r\n\r\n      scope.ctrl.query[ctrl.propertyName] = {\r\n        $options : 'i',\r\n        $regex : ''\r\n      };\r\n      \r\n    }\r\n\r\n\r\n    scope.onQueryChange = function(){\r\n\r\n      scope.ctrl.query[ctrl.propertyName][\"$regex\"] = scope.searchWord\r\n      return scope.ctrl.onUpdate({\r\n        query : scope.ctrl.query\r\n      })\r\n    }\r\n\r\n\r\n\r\n  }\r\n])\r\n\r\napp\r\n  .component('toolbarSearch', {\r\n    templateUrl: '/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.html',\r\n    controller: 'ToolbarSearchController',\r\n    bindings: {\r\n      onUpdate : '&',\r\n      propertyName : '@'\r\n    }\r\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.js","var app = angular.module('DataDashboard')\r\napp.controller('PaymentMethodsController', ['$scope', '$http', '$marketcloud', '$location', 'paymentMethods',\r\n  function(scope, http, $marketcloud, location, paymentMethods) {\r\n    scope.paymentMethods = paymentMethods.data.data\r\n      /* scope.integrations = integrations.data.data; */\r\n    scope.modalMode = 'update'\r\n    scope.paymentMethod = {\r\n      name: '',\r\n      description: '',\r\n      active: false\r\n\r\n    }\r\n\r\n    scope.loadPaymentMethods = function() {\r\n      $marketcloud.paymentMethods.list()\r\n        .then(function(response) {\r\n          scope.paymentMethods = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An erro has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.availableChargeOptions = [{\r\n      label: 'No additional charge',\r\n      value: 'no_cost'\r\n    }, {\r\n      label: 'Fixed fee',\r\n      value: 'fixed_fee'\r\n    }, {\r\n      label: 'Percentage based fee',\r\n      value: 'percentage_fee'\r\n    }, {\r\n      label: 'Fixed plus percentage',\r\n      value: 'fixed_plus_percentage'\r\n    }]\r\n\r\n    scope.delete = function(payment) {\r\n\r\n      payment = payment || scope.payment;\r\n\r\n      \r\n      $marketcloud.paymentMethods.delete(payment.id)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Payment method deleted.', 1.5)\r\n          scope.payment = {}\r\n          return $marketcloud.paymentMethods.list()\r\n        })\r\n        .then(function(response) {\r\n          scope.paymentMethods = response.data.data\r\n          $('#addManualPaymentMethodModal').modal('hide')\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, please try again.')\r\n        })\r\n    }\r\n\r\n    scope.save = function() {\r\n      $marketcloud.paymentMethods.save(scope.payment)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Payment method created.', 1.5)\r\n          scope.payment = {}\r\n          return $marketcloud.paymentMethods.list()\r\n        })\r\n        .then(function(response) {\r\n          scope.paymentMethods = response.data.data\r\n          $('#addManualPaymentMethodModal').modal('hide')\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, please try again.')\r\n        })\r\n    }\r\n    scope.createPayment = function() {\r\n      scope.modalMode = 'create'\r\n      scope.payment = {}\r\n      $('#addManualPaymentMethodModal').modal('show')\r\n    }\r\n    scope.editPayment = function(payment) {\r\n      scope.modalMode = 'update'\r\n\r\n      scope.payment = payment\r\n\r\n      $('#addManualPaymentMethodModal').modal('show')\r\n    }\r\n\r\n    scope.update = function(updates) {\r\n      var payload = updates || scope.payment\r\n\r\n      $marketcloud.paymentMethods.update(scope.payment.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Payment method updated.', 1.5)\r\n          return $marketcloud.paymentMethods.list()\r\n        })\r\n        .then(function(response) {\r\n          scope.paymentMethods = response.data.data\r\n          $('#addManualPaymentMethodModal').modal('hide')\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, please try again.')\r\n        })\r\n    }\r\n\r\n    scope.togglePaymentMethod = function(paymentMethod) {\r\n      $marketcloud.paymentMethods.update(paymentMethod.id, paymentMethod)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Update successful', 1.5)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/PaymentMethods.controller.js","'use strict'\r\n/* globals angular */\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('AnalyticsController', [\r\n  '$scope',\r\n  '$http',\r\n  '$routeParams',\r\n  'analytics',\r\n  'moment',\r\n  'carts',\r\n  'customers',\r\n  '$location',\r\n  function(scope, http, params,  analytics, moment, carts,customers, $location) {\r\n\r\n\r\n    scope.currentRange = \"This month\";\r\n    if ($location.search().range)\r\n      scope.currentRange = $location.search().range;\r\n\r\n\r\n\r\n   \r\n\r\n    var today = new Date()\r\n    today.setHours(0, 0, 0, 0)\r\n    today = today.getTime()\r\n\r\n    var yesterday = new Date()\r\n    yesterday.setDate(yesterday.getDate() - 1)\r\n    yesterday.setHours(0, 0, 0, 0)\r\n    yesterday = yesterday.getTime()\r\n\r\n\r\n    var oneWeekAgo = new Date();\r\n    oneWeekAgo.setDate(oneWeekAgo.getDate()  - 7);\r\n    oneWeekAgo.setHours(0, 0, 0, 0);\r\n    oneWeekAgo = oneWeekAgo.getTime();\r\n\r\n    var orders = analytics.data.data\r\n\r\n\r\n   \r\n\r\n    var salesVolumePerDay = {}\r\n\r\n    var numberOfOrdersPerDay = {}\r\n\r\n\r\n\r\n\r\n    orders\r\n      .filter(function(x) {\r\n        // We consider only orders not canceled or refunded or failed for the analytics\r\n        var invalid_orders = ['failed', 'canceled', 'refunded']\r\n        return invalid_orders.indexOf(x.status) < 0\r\n      })\r\n      .map(function(x) {\r\n        return {\r\n          created_at: x.created_at,\r\n          total: x.total\r\n        }\r\n      })\r\n      .forEach(function(x) {\r\n        var d = new Date(x.created_at)\r\n        var month = String(d.getMonth() + 1)\r\n        if (month.length < 2) {\r\n          month = '0' + month\r\n        }\r\n        var day = d.getFullYear() + '-' + month + '-' + d.getDate()\r\n\r\n\r\n        if (!salesVolumePerDay[day]) {\r\n          salesVolumePerDay[day] = 0\r\n        }\r\n\r\n        salesVolumePerDay[day] += x.total\r\n\r\n\r\n        if (!numberOfOrdersPerDay[day])\r\n          numberOfOrdersPerDay[day] = 0;\r\n\r\n        numberOfOrdersPerDay[day]++;\r\n\r\n      })\r\n\r\n\r\n    var goodOrders = orders\r\n      .filter(function(x) {\r\n        // We consider only orders not canceled or refunded or failed for the analytics\r\n        var invalid_orders = ['failed', 'canceled', 'refunded']\r\n        return invalid_orders.indexOf(x.status) < 0\r\n    })\r\n\r\n\r\n    // Given a date object\r\n    // returns yyyy-mm-dd\r\n    function getDateKeyFromDate(d) {\r\n      var month = String(d.getMonth() + 1)\r\n      \r\n      if (month.length < 2)\r\n          month = '0' + month\r\n      \r\n      var day = d.getFullYear() + '-' + month + '-' + d.getDate()\r\n\r\n      \r\n      return day;\r\n    }\r\n\r\n    \r\n    var ordersPerDay = {};\r\n\r\n    // We have to prefill days labels\r\n\r\n    \r\n    var d = new Date();\r\n    switch(scope.currentRange.toLowerCase()) {\r\n      case \"this month\":\r\n        for (var i =1; i <30; i++){\r\n          var key = getDateKeyFromDate(d);\r\n          ordersPerDay[key] = [];\r\n          d.setDate(d.getDate() - i);\r\n        }\r\n      break;\r\n\r\n      case \"this week\":\r\n      for (var i =1; i <7; i++){\r\n          var key = getDateKeyFromDate(d);\r\n          ordersPerDay[key] = [];\r\n          d.setDate(d.getDate() - i);\r\n        }\r\n      break;\r\n\r\n      case \"yesterday\":\r\n        var yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        var key = getDateKeyFromDate(yesterday);\r\n        ordersPerDay[key] = [];\r\n      break;\r\n\r\n      case \"today\":\r\n        var today = new Date();\r\n        var key = getDateKeyFromDate(today);\r\n        ordersPerDay[key] = [];\r\n      break;\r\n    }\r\n\r\n    goodOrders.forEach(function(order){\r\n      var d = new Date(order.created_at);\r\n      \r\n      var day = getDateKeyFromDate(d);\r\n\r\n      if (ordersPerDay[day])\r\n        ordersPerDay[day].push(order);\r\n      else\r\n        ordersPerDay[day] = [order];\r\n    })\r\n\r\n    scope.dateLabels = Object.keys(ordersPerDay);\r\n    scope.formattedDateLabels = scope.dateLabels.map(function(label){\r\n      return moment(label, 'YYYY-M-DD').format('MMM Do')\r\n    })\r\n\r\n    scope.ordersVolumePerDay = []\r\n    scope.ordersCountPerDay = []\r\n\r\n    scope.dateLabels.forEach(function(date){\r\n      var numberOfOrdersThisDate = ordersPerDay[date].length;\r\n      var salesThisDate = ordersPerDay[date].map( function(order){\r\n        return order.total\r\n      })\r\n      .reduce(function(a,b){\r\n        return a+b\r\n      },0)\r\n\r\n      scope.ordersCountPerDay.push(numberOfOrdersThisDate)\r\n      scope.ordersVolumePerDay.push(salesThisDate)\r\n    })\r\n\r\n    scope.totalOrdersValue = \r\n      goodOrders\r\n      .map(function(order) {\r\n        return order.total;\r\n      })\r\n      .reduce(function(a,b){\r\n        return a + b\r\n      },0).toFixed(2)\r\n\r\n\r\n    scope.totalOrdersCount = goodOrders.length;\r\n    /*\r\n     *\tHere we feed the Chart.js chart on the dashboard homepage\r\n     *\r\n     *\tThis chart shows orders volume for this month (last 30 days)\r\n     */\r\n\r\n\r\n\r\n    \r\n    scope.chartOptions = {\r\n      scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\r\n    }\r\n\r\n    scope.chartOptions = {\r\n      scales: {\r\n         xAxes : [ {\r\n            gridLines : {\r\n                display : false\r\n            }\r\n        } ],\r\n        yAxes: [{\r\n          scaleLabel: {\r\n            display: true,\r\n            labelString: scope.application.currency_code\r\n          }\r\n        }]\r\n      }\r\n    }\r\n\r\n\r\n\r\n    carts = carts.data.data;\r\n\r\n    customers =customers.data.data;\r\n\r\n\r\n    scope.totalCustomersCount = customers.length\r\n\r\n\r\n    var totalCartsCount = carts.length;\r\n    scope.totalCartsCount = totalCartsCount\r\n\r\n    // Carts with item inside\r\n    var abandonedCarts = carts.filter( function(cart){return cart.status === \"open\" && cart.items.length > 0});\r\n    var abandonedCartsCount = abandonedCarts.length;\r\n\r\n    // Empty carts\r\n    var emptyCartsCount = carts.filter( function(cart){return cart.status === \"open\" && cart.items.length === 0}).length;\r\n\r\n    //\r\n    var convertedCartsCount = carts.filter( function(cart){ return cart.status === \"closed\"}).length;\r\n\r\n\r\n    scope.abandonedCartsTotalValue = abandonedCarts.map(function(cart){\r\n      return cart.total;\r\n    })\r\n    .reduce(function(a,b){\r\n      return a + b;\r\n    },0)\r\n\r\n\r\n    scope.CartsDatasets = [\r\n      abandonedCartsCount,\r\n      emptyCartsCount,\r\n      convertedCartsCount\r\n    ]\r\n\r\n\r\n\r\n\r\n    scope.CartsLabels = [\r\n    'Abandoned',\r\n    'Empty',\r\n    'Converted'\r\n    ]\r\n\r\n    scope.CartsChartOptions = {\r\n      legend: {\r\n            display: true,\r\n            position: 'bottom'\r\n        }\r\n\r\n    }\r\n\r\n    \r\n\r\n    scope.setCurrentTimeRange = function(range) {\r\n\r\n      range = range.toLowerCase();\r\n\r\n      scope.currentRange = range;\r\n\r\n      return $location.path('/analytics').search(\"range\",range);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    var totalCartValue = carts\r\n    .map(function(cart) { return cart.total })\r\n    .reduce(function(a,b){\r\n      return a+b\r\n    },0)\r\n\r\n\r\n    scope.averageCartValue = 0;\r\n\r\n    if (totalCartValue > 0)\r\n      scope.averageCartValue = (totalCartValue / carts.length).toFixed(2)\r\n\r\n\r\n    var totalOrdersValue = orders.map( function(order){\r\n      return order.total\r\n    })\r\n    .reduce(function(a,b){\r\n      return a + b;\r\n    },0)\r\n\r\n\r\n    scope.averageOrderValue = 0;\r\n\r\n    if (totalOrdersValue > 0)\r\n      scope.averageOrderValue = (totalOrdersValue / orders.length).toFixed(2);\r\n    \r\n\r\n  }\r\n\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/analytics.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', 'role', '$location',\r\n  function (scope, http, $application, rootScope, rolePresets, role, location) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n    rootScope.currentSection = 'application.collaborators'\r\n\r\n    scope.role = role.data.data\r\n\r\n    scope.preset_name = 'public'\r\n    scope.errors = {}\r\n\r\n    scope.presets = rolePresets\r\n    scope.applyPreset = function () {\r\n      if (!scope.presets.hasOwnProperty(scope.preset_name)) {\r\n        return\r\n      }\r\n\r\n      for (var k in (scope.presets[scope.preset_name])) {\r\n        scope.role.endpoints[k] = scope.presets[scope.preset_name][k]\r\n      }\r\n    }\r\n    scope.clearErrors = function () {\r\n      scope.errors = {}\r\n    }\r\n    scope.formHasErrors = function () {\r\n      return Object.keys(scope.errors).length > 0\r\n    }\r\n    var validateRole = function () {\r\n      scope.clearErrors()\r\n      if (scope.role.name.length > 253) {\r\n        scope.errors.name = 'Name too long'\r\n\r\n        return false\r\n      }\r\n\r\n      if (scope.role.name.length < 1) {\r\n        scope.errors.name = 'Name too short'\r\n        return false\r\n      }\r\n\r\n      return true\r\n    }\r\n    scope.updateRole = function () {\r\n      if (!validateRole()) {\r\n        return\r\n      }\r\n      http({\r\n        method: 'PUT',\r\n        url: '/applications/' + scope.application.id + '/roles/' + scope.role.id,\r\n        data: scope.role\r\n      })\r\n        .then(function (response) {\r\n          notie.alert(1, 'Role successfuly created.', 1.5)\r\n          location.path('#/application/acl')\r\n        }).catch(function (error) {\r\n          notie.alert(2, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n  }])\r\n\r\napp.controller('NewRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', '$location',\r\n  function (scope, http, $application, rootScope, rolePresets, location) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n    rootScope.currentSection = 'application.acl'\r\n\r\n    scope.preset_name = 'public'\r\n    scope.errors = {}\r\n    scope.newRole = {\r\n      name: '',\r\n      description: '',\r\n      endpoints: angular.copy(rolePresets.public)\r\n    }\r\n    scope.presets = rolePresets\r\n    scope.applyPreset = function () {\r\n      if (!scope.presets.hasOwnProperty(scope.preset_name)) {\r\n        return\r\n      }\r\n\r\n      for (var k in (scope.presets[scope.preset_name])) {\r\n        scope.newRole.endpoints[k] = scope.presets[scope.preset_name][k]\r\n      }\r\n    }\r\n    scope.clearErrors = function () {\r\n      scope.errors = {}\r\n    }\r\n    scope.formHasErrors = function () {\r\n      return Object.keys(scope.errors).length > 0\r\n    }\r\n    var validateRole = function () {\r\n      scope.clearErrors()\r\n      if (scope.newRole.name.length > 253) {\r\n        scope.errors.name = 'Name too long'\r\n\r\n        return false\r\n      }\r\n\r\n      if (scope.newRole.name.length < 1) {\r\n        scope.errors.name = 'Name too short'\r\n        return false\r\n      }\r\n\r\n      return true\r\n    }\r\n    scope.saveRole = function () {\r\n      if (!validateRole()) {\r\n        return\r\n      }\r\n      http({\r\n        method: 'POST',\r\n        url: '/applications/' + scope.application.id + '/roles',\r\n        data: scope.newRole\r\n      })\r\n        .then(function (response) {\r\n          notie.alert(1, 'Role successfuly created.', 1.5)\r\n          location.path('/applications/' + scope.application.id + '/acl')\r\n        }).catch(function (error) {\r\n          notie.alert(2, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n  }])\r\n\r\napp.controller('ACLController', ['$scope', '$http', 'roles', '$application', '$rootScope',\r\n  function (scope, http, roles, $application, rootScope) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n    rootScope.currentSection = 'application.acl'\r\n\r\n    scope.roles = roles.data.data\r\n\r\n    scope.load = function () {\r\n      http({\r\n        method: 'GET',\r\n        url: '/applications/' + scope.application.id + '/roles'\r\n      })\r\n        .then(function (response) {\r\n          scope.roles = response.data.data\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(2, 'An error has occurred while reloading roles.', 1)\r\n        })\r\n    }\r\n\r\n    scope.delete = function (role) {\r\n      http({\r\n        method: 'DELETE',\r\n        url: '/applications/' + scope.application.id + '/roles/' + role.id\r\n      })\r\n        .then(function (response) {\r\n          notie.alert(1, 'Role correctly deleted', 1)\r\n          scope.load()\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(3, 'An error has occurred, role not deleted', 1)\r\n        })\r\n    }\r\n  }])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/acl.controller.js"," \r\nvar app = angular.module('DataDashboard');\r\napp.controller('CreateApplicationController', ['$scope', '$http', '$location', '$rootScope',\r\n        function(scope, http, location, $rootScope) {\r\n\r\n\r\n            scope.application = {};\r\n\r\n\r\n            scope.create = function() {\r\n                scope._invalid = null;\r\n                var validation = window.Models.Application.validate(scope.application);\r\n                if (false === validation.valid) {\r\n                    scope._invalid = validation.invalidPropertyName;\r\n                }\r\n                http({\r\n                        method: 'POST',\r\n                        url: '/applications',\r\n                        data: scope.application\r\n                    })\r\n                    .then(function(response) {\r\n                        notie.alert(1, \"Application created\", 1.5);\r\n                        location.path('#/applications/list')\r\n\r\n                    })\r\n                    .catch(function(error) {\r\n                        notie.alert(3, \"An error has occurred, please try again\", 1.5);\r\n                    })\r\n            }\r\n\r\n\r\n        }\r\n    ]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/application.new.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('ListApplicationsController', ['$scope',\r\n  function (scope) {\r\n    \r\n    scope.applications = window.applications;\r\n\r\n\r\n  }])\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/applications.list.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('ApplicationBillingController', [\r\n  '$scope',\r\n  '$http',\r\n  '$rootScope',\r\n  '$application',\r\n  '$account',\r\n  function(scope, http, rootScope, $application, $account) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n\r\n    rootScope.currentSection = 'application.billing'\r\n\r\n    // The form's step\r\n    scope.step = 1\r\n\r\n    // The selected plan\r\n    scope.selected_plan = null\r\n\r\n    // the error message\r\n    scope.error = null\r\n\r\n    scope.invalidPropertyName = null\r\n\r\n    // holds the card data\r\n    scope.card = {}\r\n\r\n    // idle, processing, error, success\r\n    scope.creditCardFormState = 'idle'\r\n\r\n    scope.showYearlyPlans = false\r\n\r\n    scope.goToStep = function(step) {\r\n      scope.step = step\r\n    }\r\n\r\n    // Loads the current user information like profile and billing\r\n    scope.account = $account.get();\r\n\r\n\r\n\r\n    scope.selectPlan = function(plan_id) {\r\n      scope.plans.forEach(function(plan) {\r\n        if (plan.id === plan_id) {\r\n          scope.selected_plan = plan\r\n        }\r\n      })\r\n      console.log('selected_plan', scope.selected_plan)\r\n      scope.goToStep(2)\r\n    }\r\n\r\n    var validateCard = function() {\r\n      scope.error = null\r\n\r\n      if (!Stripe.card.validateExpiry(scope.card.exp_month, scope.card.exp_year)) {\r\n        scope.error = 'The card\\'s expiration is invalid'\r\n        scope.invalidPropertyName = 'card.expiry'\r\n      }\r\n\r\n      if (!Stripe.card.validateCVC(scope.card.cvc)) {\r\n        scope.error = 'The card\\'s cvc is invalid'\r\n        scope.invalidPropertyName = 'card.cvc'\r\n      }\r\n\r\n      if (!Stripe.card.validateCardNumber(scope.card.number)) {\r\n        scope.error = 'The card\\'s number is invalid'\r\n        scope.invalidPropertyName = 'card.number'\r\n      }\r\n\r\n      return (scope.error === null)\r\n    }\r\n\r\n    scope.updateApplicationSubscription = function() {\r\n      scope.creditCardFormState = 'processing'\r\n      http({\r\n          method: 'PUT',\r\n          url: '/applications/' + application.id + '/billing',\r\n          data: {\r\n            plan_id: scope.selected_plan.id\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          scope.goToStep(3)\r\n          scope.creditCardFormState = 'success'\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error)\r\n          scope.error = error\r\n          notie.alert(2, error.data.errors[0].message || 'Payment failed, please check your billing information.')\r\n          scope.creditCardFormState = 'error'\r\n        })\r\n    }\r\n\r\n    scope.filterByInterval = function(value, index, arr) {\r\n      if (scope.showYearlyPlans === true) {\r\n        return value.interval === 'yearly'\r\n      } else {\r\n        return value.interval === 'monthly'\r\n      }\r\n    }\r\n\r\n    scope.plans = []\r\n\r\n    http.get('/applications/' + scope.application.id + '/plans')\r\n      .then(function(response) {\r\n        console.log('PLANS', response.data)\r\n        scope.plans = response.data.data\r\n\r\n        scope.plans.forEach(function(plan) {\r\n          plan.api_calls_quota_max = plan.api_calls_quota_max / 1000\r\n          plan.api_calls_quota_max = plan.api_calls_quota_max + 'K'\r\n        })\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error)\r\n      })\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/billing.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('CollaboratorsController', ['$scope', '$http', 'collaborators', '$application', '$rootScope',\r\n  function(scope, http, collaborators, $application, rootScope) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n    rootScope.currentSection = 'application.collaborators'\r\n\r\n    scope.mode = null\r\n\r\n    scope.collaborators = collaborators.data.data\r\n\r\n    scope.load = function() {\r\n      http({\r\n          method: 'GET',\r\n          url: '/applications/' + scope.application.id + '/collaborators'\r\n        })\r\n        .then(function(response) {\r\n          scope.collaborators = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(2, 'An error has occurred while reloading collaborators.', 1)\r\n        })\r\n    }\r\n\r\n    /* scope.edit = function(collaborator) {\r\n      scope.newCollaborator = collaborator;\r\n      scope.showUpdateModal();\r\n    };\r\n    scope.showUpdateModal = function() {\r\n      scope.mode = 'update';\r\n      $('#newCollaboratorModal').modal('show');\r\n    }; */\r\n\r\n    scope.showCreateModal = function() {\r\n      scope.mode = 'create'\r\n      $('#newCollaboratorModal').modal('show')\r\n    }\r\n\r\n    scope.saveCollaborator = function() {\r\n      http({\r\n          method: 'POST',\r\n          url: '/applications/' + scope.application.id + '/collaborators',\r\n          data: scope.newCollaborator\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collaborator correctly created', 1.5)\r\n          scope.newCollaborator = {}\r\n          $('#newCollaboratorModal').modal('hide')\r\n          scope.load()\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, collaborator not created', 1.5)\r\n          scope.newCollaborator = {}\r\n        })\r\n    }\r\n\r\n    scope.updateCollaborator = function(collaborator) {\r\n      http({\r\n          method: 'PUT',\r\n          url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email,\r\n          data: {\r\n            role: collaborator.role\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collaborator correctly updated', 1)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, collaborator not updated', 1)\r\n          scope.newCollaborator = {}\r\n        })\r\n    }\r\n\r\n    scope.delete = function(collaborator) {\r\n      http({\r\n          method: 'DELETE',\r\n          url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collaborator correctly deleted', 1)\r\n          scope.load()\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, collaborator not deleted', 1)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/collaborators.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('DeployController', ['$scope', '$rootScope', '$application',\r\n  function (scope, $rootScope, $application) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n\r\n    scope.selectedTemplate = null\r\n\r\n    $rootScope.application = application\r\n    $rootScope.currentSection = 'application.deploy'\r\n\r\n    scope.getHerokuURL = function () {\r\n      var str = 'https://heroku.com/deploy'\r\n      str += '?template=' + scope.selectedTemplate\r\n      str += '&env[MARKETCLOUD_PUBLIC_KEY]=' + encodeURIComponent(scope.application.public_key)\r\n      str += '&env[MARKETCLOUD_SECRET_KEY]=' + encodeURIComponent(scope.application.secret_key)\r\n      return str\r\n    }\r\n  }])\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/deploy.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('IntegrationsController', function($scope, $http, $application, $rootScope) {\r\n  var application = $application.get()\r\n  scope.application = application\r\n  $scope.integrations = [{\r\n    name: 'braintree',\r\n    tags: ['payments'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\r\n    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\r\n    links: {\r\n      'view': '/documentation/integrations/braintree'\r\n    }\r\n  }, {\r\n    name: 'stripe',\r\n    tags: ['payments'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\r\n    description: 'Web and mobile payments. Built for developers.',\r\n    links: {\r\n      'view': '/documentation/integrations/stripe'\r\n    }\r\n  }, {\r\n    name: 'facebook',\r\n    tags: ['authentication'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\r\n    description: 'Facebook authentication',\r\n    links: {\r\n      'view': '/documentation/guides/facebook-login'\r\n    }\r\n  }]\r\n  rootScope.currentSection = 'application.integrations'\r\n})\r\n\r\napp.controller('IntegrationStripeController', function($scope, $http, $routeParams, StripeIntegration) {\r\n  console.log('Integration status', StripeIntegration)\r\n\r\n  /*\r\n   *  The integration states are\r\n   *\r\n   *  Not installed\r\n   *  Installed inactive\r\n   *  Installed active\r\n   *\r\n   *  Installed means that the oauth flow was completed and we have the data\r\n   *  StripeIntegration is the object we use to inject the integration state fetched from the api\r\n   *\r\n   *  If it's null, we conclude that it is not installed\r\n   */\r\n  if (StripeIntegration) {\r\n    $scope.isIntegrationInstalled = true\r\n    $scope.StripeIntegration = StripeIntegration\r\n  } else {\r\n    $scope.isIntegrationInstalled = false\r\n  }\r\n\r\n  $scope.currentApplication = $application.get()\r\n\r\n  // TODO\r\n  // Lo switch deve essere visibile se e solo se l'integrazione è installata. così da\r\n  // non essere clicccabile altrimenti.\r\n\r\n  $scope.toggleIntegration = function() {\r\n    alert($scope.StripeIntegration.isActive)\r\n    return $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/stripe',\r\n        data: {\r\n          isActive: $scope.StripeIntegration.isActive\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n})\r\n\r\napp.controller('IntegrationBraintreeController', function($scope, $http, $routeParams, BraintreeIntegration) {\r\n  // This bool is used to show/hide credentials form\r\n  // This form is used to update the credentials\r\n  $scope.displayCredentialsForm = false\r\n\r\n  $scope.currentApplication = $application.get()\r\n\r\n  $scope.braintreeConfiguration = BraintreeIntegration.data.data\r\n\r\n  $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data)\r\n\r\n  // If the integration is not enabled we initialize it to false\r\n  if (!$scope.braintreeUpdate.hasOwnProperty('isActive')) {\r\n    $scope.braintreeUpdate.isActive = false\r\n  }\r\n\r\n  $scope.toggleCredentialsForm = function() {\r\n    $scope.displayCredentialsForm = !$scope.displayCredentialsForm\r\n  }\r\n\r\n  $scope.showModal = function() {\r\n    $('#BraintreeCredentialsModal').modal('show')\r\n  }\r\n\r\n  $scope.toggleIntegration = function() {\r\n    return $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\r\n        data: {\r\n          isActive: $scope.braintreeConfiguration.isActive\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n  $scope.saveBraintreeConfiguration = function() {\r\n    var payload = {\r\n      environment: $scope.braintreeUpdate.environment,\r\n      isActive: $scope.braintreeUpdate.isActive\r\n    }\r\n\r\n    // If the user also changed the config,\r\n    if (\r\n      $scope.braintreeUpdate.merchantId &&\r\n      $scope.braintreeUpdate.publicKey &&\r\n      $scope.braintreeUpdate.privateKey\r\n    ) {\r\n      payload.merchantId = $scope.braintreeUpdate.merchantId\r\n      payload.publicKey = $scope.braintreeUpdate.publicKey\r\n      payload.privateKey = $scope.braintreeUpdate.privateKey\r\n    }\r\n\r\n    console.log('PUTTING', payload)\r\n    $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\r\n        data: payload\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n        $('#BraintreeCredentialsModal').modal('hide')\r\n        $scope.braintreeConfiguration = angular.copy({\r\n          environment: payload.environment,\r\n          isActive: payload.isActive\r\n        })\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/integrations.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('NavigationController',\r\n  ['$scope', '$route', '$rootScope', '$application',\r\n    function ($scope, $route, $rootScope, $application) {\r\n      var application = $application.get()\r\n      scope.application = application\r\n\r\n\t\t// $rootScope.$broadcast('$dashboardSectionChange',{section : $route.current.$$route.name});\r\n\r\n      $scope.$on('$dashboardSectionChange', function ($event, args) {\r\n\t\t\t// Intercepting the new section event\r\n\t\t\t// $scope.currentSection = args.section.split('.')[0];\r\n        $scope.currentSection = args.section\r\n\r\n        $scope.showNavigation = ($scope.currentSection !== 'home' && $scope.currentSection !== 'create')\r\n      })\r\n    }])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/navigation.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('ApplicationOverviewController', ['$scope', '$http', '$application', '$rootScope',\r\n  function (scope, http, $application, rootScope) {\r\n    scope.activities = []\r\n\r\n    // Not loading activities as a route resolve\r\n    // this is because the http method is still quite slow.\r\n    // so we load it after showing the view.\r\n    http({\r\n      url : '/applications/'+$application.get(\"id\") +'/activity',\r\n      method : 'GET'\r\n    })\r\n    .then( function(response) {\r\n      scope.activities = response.data.data;\r\n    })\r\n\r\n    var application = $application.get()\r\n    scope.application = application\r\n\r\n        // TODO grab statistical information\r\n\r\n    rootScope.currentSection = 'application.overview'\r\n\r\n    function getNextMonth (date) {\r\n      var next_month = new Date(date)\r\n      next_month.setMonth(date.getMonth() + 1)\r\n      return next_month\r\n    }\r\n\r\n    scope.kilobytesToGigabytes = function (kb) {\r\n      return (kb / 1024) / 1024\r\n    }\r\n\r\n    scope.application.renew_date\r\n    scope.getMethodCSSClass = function (a) {\r\n      var cls = null\r\n      switch (a.method) {\r\n        case 'GET':\r\n          cls = 'label-success'\r\n          break\r\n        case 'POST':\r\n          cls = 'label-info'\r\n          break\r\n        case 'PUT':\r\n          cls = 'label-warning'\r\n          break\r\n        case 'PATCH':\r\n          cls = 'label-warning'\r\n          break\r\n        case 'DELETE':\r\n          cls = 'label-danger'\r\n          break\r\n        default:\r\n          cls = 'label-success'\r\n          break\r\n\r\n      }\r\n      return cls\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/overview.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.factory('BillingPlans', function () {\r\n  var BILLING_PLANS = {\r\n    'free': {\r\n      name: 'free',\r\n      id: 'free',\r\n      price_monthly: 0,\r\n      price_yearly: 0,\r\n      api_calls_quota_max: '5000',\r\n      storage: 0.5\r\n    },\r\n    'month-19': {\r\n      name: 'cumulus',\r\n      id: 'month-19',\r\n      price_monthly: 19,\r\n      price_yearly: 190,\r\n      api_calls_quota_max: '100000',\r\n      storage: 1\r\n    },\r\n    'month-49': {\r\n      name: 'stratus',\r\n      id: 'month-49',\r\n      price_monthly: 49,\r\n      price_yearly: 490,\r\n      api_calls_quota_max: '450000',\r\n      storage: 2\r\n    },\r\n    'month-99': {\r\n      name: 'nimbo stratus',\r\n      id: 'month-99',\r\n      price_monthly: 99,\r\n      price_yearly: 990,\r\n      api_calls_quota_max: '1500000',\r\n      storage: 5\r\n    }\r\n  }\r\n  return BILLING_PLANS\r\n})\r\n\r\napp.controller('ApplicationSettingsController', ['$scope', '$application', '$http', '$location', '$rootScope', 'BillingPlans',\r\n  function (scope, $application, $http, $location, rootScope, BillingPlans) {\r\n    var application = $application.get()\r\n    scope.application = application\r\n\r\n    rootScope.currentSection = 'application.settings'\r\n\r\n    scope.plans = BillingPlans\r\n\r\n    scope.currentPlan = null\r\n\r\n    for (var k in BillingPlans) {\r\n      if (scope.application.plan_name === BillingPlans[k].name) {\r\n        scope.currentPlan = BillingPlans[k]\r\n      }\r\n    }\r\n\r\n    scope.updateApplication = function () {\r\n      var update = {\r\n        url: scope.application.url,\r\n        name: scope.application.name\r\n      }\r\n\r\n      $http\r\n                .put('/applications/' + scope.application.id, update)\r\n                .then(function (response) {\r\n                  notie.alert(1, 'The application has been updated.', 1.5)\r\n                })\r\n                .catch(function (error) {\r\n                  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n                })\r\n    }\r\n\r\n    scope.deleteApplication = function () {\r\n      notie.confirm('Do you really want to delete the application? It is not reversible!', 'Confirm', 'Cancel', function () {\r\n        $http\r\n                    .delete('/applications/' + scope.application.id)\r\n                    .then(function (response) {\r\n                      notie.alert(1, 'The application has been deleted.', 1.5)\r\n                      $location.path('/')\r\n                    })\r\n                    .catch(function (response) {\r\n                      notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n                    })\r\n      })\r\n    }\r\n\r\n    scope.regenerateKeys = function () {\r\n      notie.confirm('Do you really want to update the application\\'s keys?', 'Confirm', 'Cancel', function () {\r\n        $http\r\n                    .put('/applications/' + scope.application.id + '/regenerateKeys')\r\n                    .then(function (response) {\r\n                      scope.application.public_key = response.data.data.public_key\r\n                      scope.application.secret_key = response.data.data.secret_key\r\n                      notie.alert(1, 'Keys regenerated correctly.', 1.5)\r\n                    })\r\n                    .catch(function (response) {\r\n                      notie.alert(3, 'An error has occurred. Please retry', 1.5)\r\n                    })\r\n      })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/settings.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('WebhooksController', [\r\n  '$scope',\r\n  '$http',\r\n  'webhooks',\r\n  '$application',\r\n  '$rootScope',\r\n  function(scope, http, webhooks, $application, rootScope) {\r\n    rootScope.currentSection = 'application.webhooks'\r\n\r\n    var application = $application.get()\r\n    scope.application = application\r\n\r\n    scope.mode = null\r\n    scope.error = null\r\n    scope.invalidPropertyName = null\r\n\r\n    scope.application = application\r\n    scope.webhooks = webhooks.data.data\r\n\r\n    scope.newWebhook = {}\r\n\r\n    var webhookMethods = ['create', 'update', 'delete']\r\n\r\n    var webhookResources = [\r\n      'addresses',\r\n      'brands',\r\n      'carts',\r\n      'categories',\r\n      'collections',\r\n      'contents',\r\n      'coupons',\r\n      'invoices',\r\n      'files',\r\n      'orders',\r\n      'paymentMethods',\r\n      'products',\r\n      'promotions',\r\n      'stores',\r\n      'taxes',\r\n      'users',\r\n      'variables'\r\n    ]\r\n\r\n    /* scope.events = [\r\n      'products.create',\r\n      'products.delete',\r\n      'products.update',\r\n      'brands.create',\r\n      'brands.delete',\r\n      'brands.update',\r\n      'categories.create',\r\n      'categories.delete',\r\n      'categories.update',\r\n      'orders.create',\r\n      'orders.delete',\r\n      'orders.update',\r\n      'carts.create',\r\n      'carts.delete',\r\n      'carts.update',\r\n      'payments.create',\r\n      'payments.delete',\r\n      'payments.update',\r\n      'shippings.create',\r\n      'shippings.delete',\r\n      'shippings.update',\r\n      'users.create',\r\n      'users.update',\r\n      'users.delete'\r\n    ]; */\r\n\r\n    scope.events = []\r\n\r\n    webhookResources.forEach(function(resource) {\r\n      webhookMethods.forEach(function(method) {\r\n        scope.events.push(resource + '.' + method)\r\n      })\r\n    })\r\n\r\n    scope.events.splice(scope.events.indexOf(\"orders.delete\"), 0, \"payments.create\");\r\n\r\n    scope.load = function() {\r\n      http({\r\n          method: 'GET',\r\n          url: '/applications/' + scope.application.id + '/webhooks'\r\n        })\r\n        .then(function(response) {\r\n          console.log('LOAD', response)\r\n          scope.webhooks = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(2, 'An error has occurred while reloading webhooks.', 1)\r\n        })\r\n    }\r\n\r\n    scope.edit = function(hook) {\r\n      scope.newWebhook = hook\r\n      scope.showUpdateModal()\r\n    }\r\n\r\n    scope.showUpdateModal = function() {\r\n      scope.mode = 'update'\r\n      $('#newWebhookModal').modal('show')\r\n    }\r\n\r\n    scope.showCreateModal = function() {\r\n      scope.mode = 'create'\r\n      scope.newWebhook = {}\r\n      $('#newWebhookModal').modal('show')\r\n    }\r\n\r\n    scope.validateWebhook = function() {\r\n      scope.error = null\r\n      scope.invalidPropertyName = null\r\n      if (scope.validateUrl() === false) {\r\n        scope.error = 'The URL is not valid. Remember to specify the protocol http:// or https:// at the beginning.'\r\n        scope.invalidPropertyName = 'url'\r\n        return false\r\n      }\r\n\r\n      if (!scope.newWebhook.event) {\r\n        scope.error = 'Please select a valid event from the menu'\r\n        scope.invalidPropertyName = 'event'\r\n        return false\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    scope.saveWebhook = function() {\r\n      if (!scope.validateWebhook()) {\r\n        return\r\n      }\r\n\r\n      http({\r\n          method: 'POST',\r\n          url: '/applications/' + scope.application.id + '/webhooks',\r\n          data: scope.newWebhook\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Webhook correctly created', 1)\r\n          scope.newWebhook = {}\r\n          $('#newWebhookModal').modal('hide')\r\n          scope.load()\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, webhook not created', 1)\r\n          scope.newWebhook = {}\r\n        })\r\n    }\r\n\r\n    scope.validateUrl = function() {\r\n      var regex = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i\r\n      return regex.test(scope.newWebhook.url)\r\n    }\r\n\r\n    scope.updateWebhook = function() {\r\n      if (!scope.validateWebhook()) {\r\n        return\r\n      }\r\n\r\n      var update = {\r\n        event: scope.newWebhook.event,\r\n        url: scope.newWebhook.url\r\n      }\r\n\r\n      http({\r\n          method: 'PUT',\r\n          url: '/applications/' + scope.application.id + '/webhooks/' + scope.newWebhook.id,\r\n          data: update\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Webhook correctly updated', 1)\r\n          scope.newWebhook = {}\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, webhook not updated', 1)\r\n        })\r\n    }\r\n\r\n    scope.delete = function(hook) {\r\n      http({\r\n          method: 'DELETE',\r\n          url: '/applications/' + scope.application.id + '/webhooks/' + hook.id\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Webhook correctly deleted', 1)\r\n          scope.load()\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, webhook not deleted', 1)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/webhooks.controller.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditBrandTranslationsController', EditBrandTranslationsController)\r\n\r\n  EditBrandTranslationsController.$inject = [\r\n    '$scope',\r\n    '$marketcloud',\r\n    'brand',\r\n    '$http',\r\n    '$application',\r\n    '$location',\r\n    'LocalesFactory'\r\n  ]\r\n\r\n  function EditBrandTranslationsController(scope, $marketcloud, brand, $http, $application, $location, locales) {\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n\r\n    // Injecting resolve data into the controller\r\n    scope.brand = brand.data.data\r\n\r\n    // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n\r\n    // mocking the retrieval of locales\r\n    scope.locales = locales\r\n\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n\r\n\r\n    // Slugs functions\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false;\r\n\r\n    scope.updateSlug = function() {\r\n      scope.brand.locales[scope.currentLocale.code].slug = getSlugFromString(scope.brand.locales[scope.currentLocale.code].name)\r\n    }\r\n\r\n    // Which locale we are currently editing\r\n    scope.currentLocale = scope.availableLocales[0]\r\n\r\n    // Init locales object\r\n    if (!scope.brand.hasOwnProperty('locales')) {\r\n      scope.brand.locales = {}\r\n    }\r\n\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.brand.locales.hasOwnProperty(locale.code)) {\r\n        scope.brand.locales[locale.code] = {}\r\n      }\r\n    })\r\n\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.brand.locales)\r\n      }\r\n\r\n      $marketcloud.brands.update(scope.brand.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.typeof = function(y) {\r\n      return (typeof y)\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brandTranslations.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditBrandController', [\r\n  '$scope',\r\n  '$http',\r\n  'brand',\r\n  '$location',\r\n  '$marketcloud',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, brandResponse, location, $marketcloud, $utils, $validation,$models) {\r\n    scope.brand = brandResponse.data.data\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Brand.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'locales',\r\n      'seo',\r\n      'application_id',\r\n      'images',\r\n      'slug',\r\n      'updated_at',\r\n      'created_at'\r\n    )\r\n\r\n    scope.customPropertiesData = {};\r\n\r\n\r\n    for (var k in scope.brand){\r\n      if (coreProperties.indexOf(k) === -1){\r\n        scope.customPropertiesData[k] = scope.brand[k]\r\n        delete scope.brand[k];\r\n      }\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.brand.images.splice(i, 1)\r\n    }\r\n\r\n    scope.updateBrand = function() {\r\n      scope.brand.image_url = scope.brand.images[0]\r\n\r\n      var toSave = angular.copy(scope.brand);\r\n\r\n      for (var k in scope.customPropertiesData)\r\n        toSave[k] = scope.customPropertiesData[k];\r\n\r\n\r\n      $marketcloud.brands.update(scope.brand.id, toSave)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Brand successfully update.', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            $validation.showErrorMessage(validation,$models.Brand.schema , '[ng-model=\"brand.'+validation.invalidPropertyName+'\"]')\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n\r\n\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.brand.slug = $utils.getSlugFromString(scope.brand.name)\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('BrandsController', ['$scope', '$marketcloud', 'brands',\r\n  function (scope, $marketcloud, resources) {\r\n    scope.brands = resources.data.data\r\n\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    scope.loadPage = function (page_number) {\r\n      return scope.loadData({page: page_number})\r\n    }\r\n    scope.loadData = function (query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n      $marketcloud.brands.list(query)\r\n\t\t\t\t.then(function (response) {\r\n  scope.brands = response.data.data\r\n\r\n  scope.pagination = {\r\n    currentPage: response.data.page,\r\n    numberOfPages: response.data.pages,\r\n    nextPage: response.data._links.next || null,\r\n    previousPage: response.data._links.prev || null,\r\n    count: response.data.count\r\n  }\r\n})\r\n\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n})\r\n    }\r\n\r\n    scope.deleteBrand = function (brand_id, index) {\r\n      $marketcloud.brands.delete(brand_id)\r\n\t\t\t\t.then(function (response) {\r\n  scope.loadData({\r\n    page: scope.currentPage\r\n  })\r\n  notie.alert(1, 'Brand deleted', 1.5)\r\n})\r\n\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.list.js","var app = angular.module('DataDashboard')\r\napp.controller('BrandController', [\r\n  '$scope', \r\n  '$http', \r\n  '$marketcloud', \r\n  '$location',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\r\n\r\n\r\n    scope.newBrand = {};\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Brand.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n       'id',\r\n      'locales',\r\n      'seo',\r\n      'application_id',\r\n      'images',\r\n      'slug',\r\n      'updated_at',\r\n      'created_at'\r\n    )\r\n\r\n    scope.customPropertiesData = {}\r\n\r\n    // For imageThumbnail\r\n    scope.removeImage = function(i) {\r\n      scope.newBrand.images.splice(i, 1)\r\n    }\r\n\r\n\r\n    scope.unsafeSlug = false;\r\n\r\n    scope.updateSlug = function() {\r\n      scope.newBrand.slug = $utils.getSlugFromString(scope.newBrand.name)\r\n    }\r\n\r\n    scope.saveBrand = function() {\r\n      scope.newBrand.image_url = scope.newBrand.images[0];\r\n\r\n      var toSave = angular.copy(scope.newBrand);\r\n\r\n      for (var k in scope.customPropertiesData)\r\n        toSave[k] = scope.customPropertiesData[k];\r\n\r\n      $marketcloud.brands.save(toSave)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Brand saved', 1.5)\r\n          location.path('/brands')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            $validation.showErrorMessage(validation,$models.Brand.schema , '[ng-model=\"newBrand.'+validation.invalidPropertyName+'\"]')\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.new.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditCategoryController', \r\n  [\r\n    '$scope', \r\n    '$http', \r\n    'category', \r\n    '$location', \r\n    '$marketcloud',\r\n    '$utils',\r\n    '$validation',\r\n    '$models',\r\n  function(scope, http, category, location, $marketcloud, $utils, $validation, $models) {\r\n    scope.loadingData = true\r\n\r\n    scope.category = category.data.data\r\n\r\n    scope.categories = [];\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Brand.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'locales',\r\n      'seo',\r\n      'application_id',\r\n      'images',\r\n      'slug',\r\n      'parent_id',\r\n      'path',\r\n      'updated_at',\r\n      'created_at'\r\n    )\r\n\r\n    scope.customPropertiesData = {};\r\n\r\n\r\n    for (var k in scope.category){\r\n      if (coreProperties.indexOf(k) === -1){\r\n        scope.customPropertiesData[k] = scope.category[k]\r\n        delete scope.category[k];\r\n      }\r\n    }\r\n\r\n    // For image thumbnail\r\n    scope.removeImage = function(i) {\r\n      scope.category.images.splice(i, 1)\r\n    }\r\n\r\n    // Loading categories\r\n    $marketcloud.categories.list()\r\n      .then(function(response) {\r\n        scope.categories = response.data.data\r\n      })\r\n      .catch(function() {\r\n        notie.alert(2, 'An error has occurred while loading categories', 1.5)\r\n      })\r\n\r\n    scope.updateCategory = function() {\r\n      scope.category.image_url = scope.category.images[0]\r\n\r\n      var toSave = angular.copy(scope.category);\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        toSave[k] = scope.customPropertiesData[k];\r\n      }\r\n\r\n      $marketcloud.categories.update(category.data.data.id, toSave)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Category updated with success ', 2)\r\n          location.path('/categories')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            $validation.showErrorMessage(validation,$models.Category.schema , '[ng-model=\"category.'+validation.invalidPropertyName+'\"]')\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n\r\n    \r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.category.slug = $utils.getSlugFromString(scope.category.name)\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('CategoriesController', ['$scope', 'categories', '$q', '$marketcloud',\r\n  function (scope, resources, $q, $marketcloud) {\r\n    scope.categories = resources.data.data\r\n\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    scope.toggleAll = function () {\r\n      scope.categories.forEach(function (p) {\r\n        p.selected = scope.selectAll\r\n      })\r\n    }\r\n\r\n    scope.getSelectedItems = function () {\r\n      return scope.categories.filter(function (p) {\r\n        return p.selected === true\r\n      })\r\n    }\r\n\r\n    scope.bulkDelete = function () {\r\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\r\n        var defer = $q.defer()\r\n\r\n        var promises = []\r\n\r\n        scope.getSelectedItems().forEach(function (category) {\r\n          promises.push($marketcloud.categories.delete(category.id))\r\n        })\r\n\r\n        $q.all(promises)\r\n\t\t\t\t\t\t.then(function () {\r\n  notie.alert(1, 'All items have been deleted', 1.5)\r\n  scope.loadPage(scope.currentPage)\r\n})\r\n\r\n        return defer.promise\r\n      })\r\n    }\r\n\r\n    scope.loadPage = function (page_number) {\r\n      scope.query.page = page_number\r\n      return scope.loadData()\r\n    }\r\n    scope.loadData = function (query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n      $marketcloud.categories.list(query)\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.categories = response.data.data\r\n\r\n  scope.pagination = {\r\n    currentPage: response.data.page,\r\n    numberOfPages: response.data.pages,\r\n    nextPage: response.data._links.next || null,\r\n    previousPage: response.data._links.prev || null,\r\n    count: response.data.count\r\n  }\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n})\r\n    }\r\n\r\n    scope.deleteCategory = function (category_id, index) {\r\n      $marketcloud.categories.delete(category_id)\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.loadData({\r\n    page: 1\r\n  })\r\n  notie.alert(1, 'Category deleted', 1.5)\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.list.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('CategoryController', \r\n  [\r\n  '$scope', \r\n  '$http', \r\n  '$marketcloud', \r\n  '$location',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\r\n\r\n    scope.customPropertiesData = {};\r\n    scope.newCategory = {};\r\n\r\n\r\n    scope.categories = []\r\n      // Loading categories\r\n    $marketcloud.categories.list()\r\n      .then(function(response) {\r\n        scope.categories = response.data.data\r\n      })\r\n      .catch(function() {\r\n        notie.alert(3, 'An error has occurred. Please retry', 1.5)\r\n      })\r\n\r\n\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = $models.Category.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'locales',\r\n      'seo',\r\n      'application_id',\r\n      'images',\r\n      'slug',\r\n      'parent_id',\r\n      'path',\r\n      'updated_at',\r\n      'created_at'\r\n    )\r\n\r\n    \r\n\r\n    // For image thumbnails\r\n    scope.removeImage = function(i) {\r\n      scope.newCategory.images.splice(i, 1)\r\n    }\r\n\r\n    scope.saveCategory = function() {\r\n      scope.newCategory.image_url = scope.newCategory.images[0]\r\n      \r\n      var toSave = angular.copy(scope.newCategory);\r\n\r\n      for (var k in scope.customPropertiesData)\r\n        toSave[k] = scope.customPropertiesData[k];\r\n\r\n      $marketcloud.categories.save(toSave)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Category saved', 1.5)\r\n          location.path('/categories')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validationObject = response.data.errors[0];\r\n            var invalidPropertyName = validationObject.invalidPropertyName;\r\n\r\n            $validation.showErrorMessage(validationObject,$models.Category.schema , '[ng-model=\"newCategory.'+invalidPropertyName+'\"]')\r\n\r\n\r\n          } else {\r\n            notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n          }\r\n\r\n        })\r\n    }\r\n\r\n    \r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.newCategory.slug = $utils.getSlugFromString(scope.newCategory.name)\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.new.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditCategoryTranslationsController', EditCategoryTranslationsController)\r\n\r\n  EditCategoryTranslationsController.$inject = [\r\n    '$scope',\r\n    '$marketcloud',\r\n    'category',\r\n    '$http',\r\n    '$location',\r\n    '$application',\r\n    'LocalesFactory'\r\n  ]\r\n\r\n  function EditCategoryTranslationsController(scope, $marketcloud, category, $http, $location, $application, locales) {\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n\r\n    // Injecting resolve data into the controller\r\n    scope.category = category.data.data\r\n\r\n    // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n\r\n    // mocking the retrieval of locales\r\n    scope.locales = locales\r\n\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .filter(function(localeCode) {\r\n        // When splitting an empty string, we get [\"\"]\r\n        return localeCode !== ''\r\n      })\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n\r\n    // Which locale we are currently editing\r\n    scope.currentLocale = scope.availableLocales[0]\r\n\r\n    // Init locales object\r\n    if (!scope.category.hasOwnProperty('locales')) {\r\n      scope.category.locales = {}\r\n    }\r\n\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.category.locales.hasOwnProperty(locale.code)) {\r\n        scope.category.locales[locale.code] = {}\r\n      }\r\n    })\r\n\r\n\r\n    // Slugs functions\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false;\r\n\r\n    scope.updateSlug = function() {\r\n      scope.category.locales[scope.currentLocale.code].slug = getSlugFromString(scope.category.locales[scope.currentLocale.code].name)\r\n    }\r\n\r\n    scope.getFlagClassName = function() {\r\n      if (scope.currentLocale) {\r\n        return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n      }\r\n    }\r\n\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.category.locales)\r\n      }\r\n\r\n      $marketcloud.categories.update(scope.category.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.typeof = function(y) {\r\n      return (typeof y)\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categoryTranslations.controller.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditCollectionTranslationsController', EditCollectionTranslationsController)\r\n\r\n  EditCollectionTranslationsController.$inject = [\r\n    '$scope',\r\n    '$marketcloud',\r\n    'collection',\r\n    '$http',\r\n    '$application',\r\n    '$location',\r\n    'LocalesFactory'\r\n  ]\r\n\r\n  function EditCollectionTranslationsController(scope, $marketcloud, collection, $http, $application, $location, locales) {\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n\r\n    // Injecting resolve data into the controller\r\n    scope.collection = collection.data.data\r\n\r\n    // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n\r\n    // mocking the retrieval of locales\r\n    scope.locales = locales\r\n\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n\r\n    // Which locale we are currently editing\r\n    scope.currentLocale = scope.availableLocales[0]\r\n\r\n    // Init locales object\r\n    if (!scope.collection.hasOwnProperty('locales')) {\r\n      scope.collection.locales = {}\r\n    }\r\n\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.collection.locales.hasOwnProperty(locale.code)) {\r\n        scope.collection.locales[locale.code] = {}\r\n      }\r\n    })\r\n\r\n\r\n\r\n    // Slugs functions\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false;\r\n\r\n    scope.updateSlug = function() {\r\n      scope.collection.locales[scope.currentLocale.code].slug = getSlugFromString(scope.collection.locales[scope.currentLocale.code].name)\r\n    }\r\n\r\n\r\n\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.collection.locales)\r\n      }\r\n\r\n      $marketcloud.collections.update(scope.collection.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.typeof = function(y) {\r\n      return (typeof y)\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collectionTranslations.controller.js","var app = angular.module('DataDashboard');\r\n\r\napp.controller('CollectionController', [\r\n\t'$scope',\r\n\t'$http',\r\n\t'$marketcloud',\r\n\t'$location',\r\n\t'$utils',\r\n\tfunction(scope, http, $marketcloud, location, $utils) {\r\n\r\n\r\n\t\tscope.collection ={\r\n\t\t\titems : []\r\n\t\t};\r\n\r\n\t\tscope.products =  [];\r\n\t\tscope.itemsToAdd = [];\r\n\r\n\r\n\t\tscope.query = {};\r\n\r\n\r\n\r\n\t\tscope.prepareRegex = function() {\r\n\t\t\tscope.query.name.$options = 'i';\r\n\t\t};\r\n\t\t\r\n\t\tscope.addProductToCollection = function(product) {\r\n\t\t\tscope.itemsToAdd.push(product);\r\n\t\t\tscope.query.name.$regex = '';\r\n\t\t\tscope.products = [];\r\n\t\t};\r\n\r\n\t\tscope.removeProductFromCollection = function(i) {\r\n\t\t\tscope.itemsToAdd.splice(i, 1);\r\n\t\t};\r\n\r\n\r\n\r\n\t\tscope.showTheList = false;\r\n\t\tscope.showList = function(){\r\n\t\t\tscope.showTheList = true;\r\n\t\t};\r\n\t\tscope.hideList = function(){\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tscope.showTheList = false;\r\n\t\t\t\tscope.$apply();\r\n\t\t\t},200);\r\n\t\t\t\t\r\n\t\t};\r\n\t\tscope.loadProducts = function(query) {\r\n\t\t\tquery = query || scope.query;\r\n\t\t\t\r\n\t\t\t$marketcloud.products.list(query)\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\r\n\t\t\t\t\tscope.products = response.data.data\r\n\t\t\t\t\t.filter(function(item){\r\n\t\t\t\t\t\treturn scope.itemsToAdd\r\n\t\t\t\t\t\t\t\t.map(function(i){\r\n\t\t\t\t\t\t\t\t\treturn i.id;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.indexOf(item.id) < 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(3,'An error has occurred. Please try again');\r\n\t\t\t\t});\r\n\r\n\r\n\t\t};\r\n\r\n\t\tscope.loadProducts();\r\n\r\n\r\n\t\tscope.saveCollection = function() {\r\n\t\t\tscope.collection.items = scope.itemsToAdd.map(function(item){\r\n\t\t\t\treturn {product_id : item.id};\r\n\t\t\t});\r\n\t\t\t$marketcloud.collections.save(scope.collection)\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tnotie.alert(1,'Collection saved',1.5);\r\n\t\t\t\t\tlocation.path('/collections');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(2,'An error has occurred, please try again',1.5);\r\n\t\t\t\t});\r\n\r\n\t\t};\r\n\t}\r\n]);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location',\r\n  function(scope, http, $marketcloud, location) {\r\n    scope.collection = {\r\n      items: []\r\n    }\r\n\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n\r\n    scope.customPropertiesData = {};\r\n\r\n    scope.query = {}\r\n\r\n    // Slug related functions\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.collection.slug = getSlugFromString(scope.collection.name)\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.addProductToCollection = function(product) {\r\n      scope.itemsToAdd.push(product)\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.removeProductFromCollection = function(i) {\r\n      scope.itemsToAdd.splice(i, 1)\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.loadProducts()\r\n\r\n    scope.saveCollection = function() {\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.collection[k] = scope.customPropertiesData[k]\r\n      }\r\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\r\n        return {\r\n          product_id: item.id\r\n        }\r\n      })\r\n      $marketcloud.collections.save(scope.collection)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collection saved', 1.5)\r\n          location.path('/collections')\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(2, 'An error has occurred, please try again', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.create.js","angular.module('DataDashboard')\r\n.controller('EditCollectionController', [\r\n  '$scope', \r\n  '$http', \r\n  '$marketcloud', \r\n  '$location', \r\n  'collection',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, collection,$utils,$validation, $models) {\r\n    scope.collection = collection.data.data\r\n\r\n    scope.products = []\r\n    scope.itemsToAdd = angular.copy(scope.collection.items)\r\n\r\n    scope.query = {}\r\n\r\n    // This will hold custom properties for further processing\r\n    scope.customPropertiesData = {}\r\n\r\n      // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Collection.getPropertyNames();\r\n\r\n    coreProperties.push(\r\n        'id',\r\n        'application_id',\r\n        'seo'\r\n        )\r\n\r\n    for (var k in scope.collection) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.collection[k]\r\n        delete scope.collection[k]\r\n      }\r\n    }\r\n\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.collection.slug = $utils.getSlugFromString(scope.collection.name)\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.addProductToCollection = function(product) {\r\n      scope.itemsToAdd.push(product)\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.removeProductFromCollection = function(i) {\r\n      scope.itemsToAdd.splice(i, 1)\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.loadProducts()\r\n\r\n    scope.saveCollection = function() {\r\n\r\n        // let's re-assemble the custom properties first.\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.collection[k] = scope.customPropertiesData[k]\r\n      }\r\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\r\n        return {\r\n          product_id: item.id\r\n        }\r\n      })\r\n      $marketcloud.collections.update(scope.collection.id, scope.collection)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collection saved', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            $validation.showErrorMessage(validation,$models.Collection.schema , '[ng-model=\"collection.'+validation.invalidPropertyName+'\"]')\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('CreateCollectionController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$location',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\r\n    scope.collection = {\r\n      items: []\r\n    }\r\n\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n\r\n    scope.customPropertiesData = {};\r\n\r\n    scope.query = {}\r\n\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.collection.slug = $utils.getSlugFromString(scope.collection.name)\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.addProductToCollection = function(product) {\r\n      scope.itemsToAdd.push(product)\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.removeProductFromCollection = function(i) {\r\n      scope.itemsToAdd.splice(i, 1)\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.loadProducts()\r\n\r\n    scope.saveCollection = function() {\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.collection[k] = scope.customPropertiesData[k]\r\n      }\r\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\r\n        return {\r\n          product_id: item.id\r\n        }\r\n      })\r\n      $marketcloud.collections.save(scope.collection)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Collection saved', 1.5)\r\n          location.path('/collections')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            $validation.showErrorMessage(validation,$models.Collection.schema , '[ng-model=\"collection.'+validation.invalidPropertyName+'\"]')\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.new.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditContentTranslationsController', EditContentTranslationsController)\r\n\r\n  EditContentTranslationsController.$inject = [\r\n    '$scope',\r\n    '$marketcloud',\r\n    'content',\r\n    '$http',\r\n    '$application',\r\n    '$location',\r\n    'LocalesFactory'\r\n  ]\r\n\r\n  function EditContentTranslationsController(scope, $marketcloud, content, $http, $application, $location, locales) {\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n\r\n    // Injecting resolve data into the controller\r\n    scope.content = content.data.data\r\n\r\n    // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n\r\n    // mocking the retrieval of locales\r\n    scope.locales = locales\r\n\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n\r\n    // Which locale we are currently editing\r\n    scope.currentLocale = scope.availableLocales[0]\r\n\r\n    // Init locales object\r\n    if (!scope.content.hasOwnProperty('locales')) {\r\n      scope.content.locales = {}\r\n    }\r\n\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.content.locales.hasOwnProperty(locale.code)) {\r\n        scope.content.locales[locale.code] = {}\r\n      }\r\n    })\r\n\r\n\r\n\r\n    // Slugs functions\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false;\r\n\r\n    scope.updateSlug = function() {\r\n      scope.content.locales[scope.currentLocale.code].slug = getSlugFromString(scope.content.locales[scope.currentLocale.code].name)\r\n    }\r\n\r\n\r\n\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.content.locales)\r\n      }\r\n\r\n      $marketcloud.contents.update(scope.content.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.typeof = function(y) {\r\n      return (typeof y)\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contentTranslations.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditContentController', [\r\n  '$scope',\r\n  '$http',\r\n  'content',\r\n  '$location',\r\n  '$marketcloud',\r\n  'moment',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\r\n    scope.content = content.data.data\r\n\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n\r\n    scope.selectedProducts = []\r\n\r\n    if (scope.content.products && scope.content.products.length > 0) {\r\n      scope.selectedProducts = scope.content.products\r\n    }\r\n\r\n    scope.content.date = $moment(scope.content.date);\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Content.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'locales',\r\n      'seo',\r\n      'application_id',\r\n      'images',\r\n      'slug',\r\n      'published',\r\n      'category',\r\n      'date',\r\n      'updated_at',\r\n      'created_at',\r\n      'type'\r\n    )\r\n\r\n    scope.customPropertiesData = {};\r\n\r\n\r\n    for (var k in scope.content){\r\n      if (coreProperties.indexOf(k) === -1){\r\n        scope.customPropertiesData[k] = scope.content[k]\r\n        delete scope.content[k];\r\n      }\r\n    }\r\n\r\n    scope.removeProduct = function (idx) {\r\n      scope.selectedProducts.splice(idx, 1)\r\n    }\r\n\r\n    scope.addProduct = function (product) {\r\n      product.quantity = 1\r\n\r\n      scope.selectedProducts.push(product)\r\n\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.unsafeSlug = false\r\n    scope.updateSlug = function() {\r\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\r\n    }\r\n\r\n    scope.getImagesContainer = function() {\r\n      return scope.content.author.images\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.content.author.images.splice(i, 1)\r\n    }\r\n\r\n    scope.updateContent = function() {\r\n      var toSave = angular.copy(scope.content);\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        toSave[k] = scope.customPropertiesData[k];\r\n      }\r\n\r\n      var products = scope.selectedProducts.map(function (prod) { return parseInt(prod.id) });\r\n\r\n      toSave.items = products\r\n\r\n      $marketcloud.contents.update(scope.content.id, toSave)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Content updated with success', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.Content.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/content.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('ContentController', [\r\n  '$scope',\r\n  '$http',\r\n  '$location',\r\n  '$marketcloud',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  '$account',\r\n  function (scope, http, location, $marketcloud, $utils, $validation, $models, $account) {\r\n\r\n    scope.content = {\r\n      title: '',\r\n      slug: '',\r\n      text: '',\r\n      published: false,\r\n      items: [],\r\n      author: {\r\n        name: $account.get('full_name'),\r\n        description: '',\r\n        images: [$account.get('image_url')]\r\n\r\n      },\r\n      seo: {\r\n        meta: {},\r\n        twitter: {},\r\n        facebook: {}\r\n      }\r\n    }\r\n\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n\r\n    scope.selectedProducts = []\r\n\r\n    scope.customPropertiesData = {}\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function() {\r\n      return scope.content.author.images\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.content.author.images.splice(i, 1)\r\n    }\r\n\r\n    // This function is invoked when a seo property\r\n    // changes.\r\n    scope.computeSeoTags = function() {\r\n\r\n    }\r\n\r\n    scope.removeProduct = function (idx) {\r\n      scope.selectedProducts.splice(idx, 1);\r\n    }\r\n\r\n    scope.addProduct = function (product) {\r\n      product.quantity = 1\r\n\r\n      scope.selectedProducts.push(product)\r\n\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.unsafeSlug = false\r\n    scope.updateSlug = function() {\r\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\r\n    }\r\n    scope.saveContent = function() {\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.content[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      var products = scope.selectedProducts.map(function (prod) { return parseInt(prod.id) });\r\n\r\n      if (products.length > 0) {\r\n        scope.content.items = products\r\n      }\r\n\r\n      $validation.hideErrors()\r\n      $marketcloud.contents.save(scope.content)\r\n        .then(function(response) {\r\n          // title text author\r\n          notie.alert(1, 'Content saved', 2)\r\n          location.path('/contents')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.Content.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/content.new.js","var app = angular.module('DataDashboard')\r\napp.controller('ContentsController',\r\n  [\r\n    '$scope',\r\n    '$http',\r\n    'contents',\r\n    '$marketcloud',\r\n    function (scope, http, resources, $marketcloud) {\r\n\t\t\t// Pagination\r\n      scope.pagination = {\r\n        currentPage: resources.data.page,\r\n        numberOfPages: resources.data.pages,\r\n        nextPage: resources.data._links.next || null,\r\n        previousPage: resources.data._links.prev || null,\r\n        count: resources.data.count\r\n      }\r\n\r\n\t\t\t// Query\r\n      scope.query = {\r\n        per_page: 20\r\n      }\r\n\r\n\t\t\t// Initial data resolved from the router\r\n      scope.contents = resources.data.data\r\n\r\n      scope.loadPage = function (p) {\r\n        return scope.loadData({page: p})\r\n      }\r\n      scope.loadData = function (query) {\r\n        if (!query) {\r\n          query = scope.query\r\n        }\r\n\r\n        $marketcloud.contents.list(query)\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.contents = response.data.data\r\n\r\n  scope.pagination = {\r\n    currentPage: response.data.page,\r\n    numberOfPages: response.data.pages,\r\n    nextPage: response.data._links.next || null,\r\n    previousPage: response.data._links.prev || null,\r\n    count: response.data.count\r\n  }\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n})\r\n      }\r\n      scope.setPublishing = function (content) {\r\n        return http({\r\n          method: 'PUT',\r\n          url: API_BASE_URL + '/contents/' + content.id,\r\n          data: {\r\n            published: content.published\r\n          },\r\n          headers: {\r\n            Authorization: window.public_key + ':' + window.token\r\n          }\r\n\r\n        })\r\n\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Updated!', 1.5)\r\n})\r\n\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n})\r\n      }\r\n\r\n      scope.deleteContent = function (content_id, index) {\r\n        $marketcloud.contents.delete(content_id)\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.loadData({\r\n    page: 1\r\n  })\r\n  notie.alert(1, 'Content deleted', 1.5)\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n})\r\n      }\r\n    }\r\n  ])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/contents.list.js","angular.module('DataDashboard').controller('EditGroupedProductController', ['$scope', '$marketcloud', 'product', '$http',\r\n  function (scope, $marketcloud, product, $http) {\r\n    scope.customPropertiesData = {}\r\n\r\n    scope.itemsToAdd = []\r\n\r\n\t\t\t// Injecting resolve data into the controller\r\n    scope.product = product.data.data\r\n\r\n    var product_ids = scope.product.items.map(function (product) {\r\n      return product.product_id\r\n    })\r\n\r\n    $marketcloud.products.list({\r\n      id: product_ids.join(',')\r\n    })\r\n\t\t\t.then(function (response) {\r\n  var p_map = {}\r\n\r\n  scope.product.items.forEach(function (i) {\r\n    p_map[i.product_id] = i\r\n  })\r\n\r\n\t\t\t\t// We fetch the products data, then we must add the properties\r\n\t\t\t\t// related to them being in the grouped product, such as the quantity\r\n  scope.itemsToAdd = response.data.data.map(function (prod) {\r\n    var p = angular.copy(prod)\r\n    p.quantity = p_map[p.id]['quantity']\r\n    return p\r\n  })\r\n\t\t\t\t// scope.product.items = response.data.data;\r\n})\r\n\t\t\t.catch(function (error) {\r\n  notie.alert(3, 'An error has occurred', 1.5)\r\n})\r\n\r\n\t\t\t// mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Product.getPropertyNames()\r\n    coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'items')\r\n    for (var k in scope.product) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.product[k]\r\n        delete scope.product[k]\r\n      }\r\n    }\r\n\r\n    function getSlugFromString (v) {\r\n      return\tv\r\n\t\t\t\t\t\t.split(' ')\r\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\r\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\r\n\t\t\t\t\t\t.join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n\t\t\t// This method must be implemented in order to\r\n\t\t\t// make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    scope.categories = []\r\n\t\t\t// Loading categories\r\n\t\t\t/* $http({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: API_BASE_URL+'/categories',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: window.public_key + ':' + window.token\r\n\t\t\t\t}\r\n\t\t\t}) */\r\n    $marketcloud.categories.list()\r\n\t\t\t\t.success(function (response) {\r\n  scope.categories = response.data\r\n})\r\n\t\t\t\t.error(function () {\r\n  notie.alert(2, 'An error has occurred while loading categories', 2)\r\n})\r\n\r\n    scope.brands = []\r\n\t\t\t// Loading brands\r\n\r\n    $marketcloud.brands.list()\r\n\t\t\t\t.success(function (response) {\r\n  scope.brands = response.data\r\n})\r\n\t\t\t\t.error(function () {\r\n  notie.alert(2, 'An error has occurred while loading brands', 2)\r\n})\r\n\r\n    scope.filterVariantProps = function (o) {\r\n      var p = {}\r\n      for (var k in o) {\r\n\t\t\t\t\t// if its not an inherited property, then it's a variant property name\r\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\r\n          p[k] = o[k]\r\n        }\r\n      }\r\n      return p\r\n\r\n\t\t\t\t// return o\r\n    }\r\n\r\n    scope.getVariantStyle = function (i) {\r\n\t\t\t\t// var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\r\n\t\t\t\t// ]\r\n      var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\r\n      return r[i % r.length]\r\n    }\r\n    scope.getVariantStyle = function (i) {\r\n      var r = [{\r\n        'color': 'red'\r\n      }, {\r\n        'color': 'green'\r\n      }, {\r\n        'color': 'blue'\r\n      }, {\r\n        'color': 'pink'\r\n      }]\r\n      return r[i % r.length]\r\n    }\r\n\r\n    scope.newAttribute = {\r\n      name: null,\r\n      value: null,\r\n      type: null\r\n    }\r\n    scope.newAttribute.type = 'string'\r\n    scope.availableTypes = [\r\n\t\t\t\t{name: 'String', value: 'string'},\r\n\t\t\t\t{name: 'Number', value: 'number'},\r\n\t\t\t\t{name: 'Boolean', value: 'boolean'}\r\n    ]\r\n\r\n    scope.filterNotNullProperties = function (item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) { result[k] = item[k] }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.updateProduct = function () {\r\n\t\t\t\t// let's re-assemble the product first.\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.product[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      scope.product.items = scope.itemsToAdd.map(function (item) {\r\n        return {product_id: item.id, quantity: item.quantity}\r\n      })\r\n\r\n      $marketcloud.products.update(scope.product.id, scope.product)\r\n\t\t\t\t\t.success(function (response) {\r\n  notie.alert(1, 'Update Succeded', 1.5)\r\n})\r\n\t\t\t\t\t.error(function (response) {\r\n  notie.alert(3, 'Update failed', 1.5)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/groupedProducts.edit.js","\r\nangular.module('DataDashboard').controller('NewGroupedProductController', [\r\n  '$scope', '$http', '$location', '$marketcloud',\r\n  function (scope, $http, location, $marketcloud) {\r\n    scope.categories = []\r\n    scope.error = null\r\n    scope.newCategory = {}\r\n    scope.brands = []\r\n    scope.newBrand = {}\r\n\r\n\t\t\t// This method must be implemented in order to\r\n\t\t\t// make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    function getSlugFromString (v) {\r\n      return\tv\r\n\t\t\t\t\t\t.split(' ')\r\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\r\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\r\n\t\t\t\t\t\t.join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    scope.loadCategories = function () {\r\n      $marketcloud.categories.list({})\r\n\t\t\t\t\t.success(function (response) {\r\n  scope.categories = response.data\r\n})\r\n\t\t\t\t\t.error(function () {\r\n  console.log('An error has occurred while loading categories')\r\n})\r\n    }\r\n\r\n\t\t\t// Initializing the categories array\r\n    scope.loadCategories()\r\n\r\n    scope.saveCategory = function () {\r\n      $marketcloud.categories.save(scope.newCategory)\r\n\t\t\t\t\t.success(function (response) {\r\n  $('#newCategoryModal').modal('hide')\r\n  scope.categories.push(scope.newCategory)\r\n  scope.newCategory = {}\r\n})\r\n\t\t\t\t\t.error(function (response) {\r\n  $('#newCategoryModal').hide()\r\n  notie.alert(3, 'An error has occurred. Category not saved', 1)\r\n})\r\n    }\r\n\r\n    scope.loadBrands = function () {\r\n      $marketcloud.brands.list({})\r\n\t\t\t\t\t.success(function (response) {\r\n  scope.brands = response.data\r\n})\r\n\t\t\t\t\t.error(function () {\r\n  console.log('An error has occurred while loading brands')\r\n})\r\n    }\r\n\t\t\t// Initializing the brands array\r\n    scope.loadBrands()\r\n\r\n    scope.saveBrand = function () {\r\n      $marketcloud.brands.save(scope.newBrand)\r\n\t\t\t\t\t.success(function (response) {\r\n  $('#newBrandModal').modal('hide')\r\n  scope.brands.push(scope.newBrand)\r\n  scope.newBrand = {}\r\n})\r\n\t\t\t\t\t.error(function (response) {\r\n  $('#newBrandModal').hide()\r\n  notie.alert(3, 'An error has occurred. Brand not saved', 1)\r\n})\r\n    }\r\n\r\n    scope.product = {\r\n      type: 'grouped_product',\r\n      price: 0,\r\n      name: '',\r\n      description: '',\r\n      stock_type: 'status',\r\n      stock_status: 'in_stock',\r\n      images: [],\r\n      has_variants: false,\r\n      published: true,\r\n      items: []\r\n\r\n    }\r\n\r\n    scope.productError = null\r\n    scope.newCustomProperty = {}\r\n    scope.customPropertiesData = {}\r\n\r\n\t\t\t// This contains validation Errors\r\n    scope.Forms = {}\r\n\r\n    scope.Forms.newCustomProperty = {\r\n      name: null,\r\n      value: null\r\n    }\r\n\r\n\t\t\t// Array of new properties's names (strings)\r\n    scope.customPropertiesNames = []\r\n\r\n    scope.hideErrors = function () {\r\n      scope.error = null\r\n      scope.errorField = null\r\n    }\r\n\r\n    scope.saveProduct = function () {\r\n      for (var k in scope.product) {\r\n        if (scope.product[k] === null) {\r\n          delete scope.product[k]\r\n          console.log('Un null')\r\n        }\r\n      }\r\n\r\n      scope.hideErrors()\r\n\r\n\t\t\t\t// Custom properties cannot be validated through Schematic.\r\n      var props_to_validate = {}\r\n      var known_props = Models.GroupedProduct.getPropertyNames()\r\n      for (var k in scope.product) {\r\n        if (known_props.indexOf(k) > -1) {\r\n          props_to_validate[k] = scope.product[k]\r\n        }\r\n      }\r\n\t\t\t\t/* var validation = Models.GroupedProduct.validate(scope.product);\r\n\r\n\t\t\t\tif (validation.valid === false) {\r\n\t\t\t\t\tscope.errorField = validation.invalidPropertyName;\r\n\r\n\t\t\t\t\tif (validation.failedValidator === 'required')\r\n\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field is required';\r\n\t\t\t\t\telse if (validation.failedValidator === 'min') {\r\n\t\t\t\t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\r\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\r\n\r\n\t\t\t\t\t} else if (validation.failedValidator === 'max') {\r\n\r\n\t\t\t\t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\r\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field has an invalid value ('+props_to_validate[scope.errorField]+')';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} */\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.product[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      for (var key in scope.product) {\r\n        if (scope.product[key] === null) {\r\n          delete scope.product[key]\r\n        }\r\n      }\r\n      console.log('Saving this prod', scope.product)\r\n\r\n      scope.product.items = scope.product.items.map(function (item) {\r\n        return {product_id: item.id}\r\n      })\r\n\r\n      $marketcloud.products.save(scope.product)\r\n\t\t\t\t\t.success(function (response) {\r\n  notie.alert(1, 'Product saved', 1.5)\r\n  location.path('/products')\r\n})\r\n\t\t\t\t\t.error(function (response) {\r\n  notie.alert(2, 'An error has occurred. Product not saved', 1)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/groupedProducts.new.js","var app = angular.module('DataDashboard')\r\napp.controller('EditCouponController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$location', \r\n  '$validation', \r\n  '$models', \r\n  'coupon',\r\n  function(scope, http, $marketcloud, location,  $validation, $models, coupon) {\r\n    scope.coupon = coupon.data.data\r\n\r\n    scope.save = function() {\r\n      $validation.hideErrors()\r\n      $marketcloud.coupons.update(scope.coupon.id, scope.coupon)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Coupon updated', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.Coupon.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n\r\n    if ('expiration_date' in scope.coupon) {\r\n      scope.hasExpirationDate = true\r\n    }\r\n\r\n    if ('usages_left' in scope.coupon) {\r\n      scope.limitedUsage = true\r\n    }\r\n\r\n    scope.toggleCouponExpiration = function() {\r\n      scope.coupon.expiration_date = null\r\n    }\r\n\r\n    scope.toggleCouponUsage = function() {\r\n      scope.coupon.usages_left = null\r\n    }\r\n\r\n    scope.clearTargetId = function(){\r\n      scope.coupon.target_id = null;\r\n    }\r\n\r\n    scope.addCondition = function() {\r\n      scope.coupon.conditions.push(scope.newCondition)\r\n      scope.newCondition = {}\r\n    }\r\n    scope.addEffect = function() {\r\n      scope.coupon.effects.push(scope.newEffect)\r\n      scope.newEffect = {}\r\n    }\r\n\r\n    // Target management\r\n    // Stuff to add a product.\r\n    // This must be packaged into a component\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n      // This is used as a reference after i pick a product\r\n    scope.targetProduct = null\r\n      // If the coupon already has a target product\r\n      // we must load it\r\n    if (scope.coupon.target_type === 'PRODUCT_COUPON') {\r\n      $marketcloud.products.getById(scope.coupon.target_id)\r\n        .then(function(response) {\r\n          scope.targetProduct = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(2, 'An error has occurred', 2)\r\n        })\r\n    }\r\n\r\n    scope.query = {}\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.selectProductAsTarget = function(product) {\r\n      scope.targetProduct = product\r\n      scope.coupon.target_id = product.id\r\n    }\r\n    scope.resetTargetProduct = function() {\r\n      scope.targetProduct = null\r\n    }\r\n\r\n    scope.loadProducts()\r\n\r\n    scope.handleCategoryChange = function() {}\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/coupons/coupon.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('NewCouponController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$location',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, $validation, $models) {\r\n    scope.coupon = {\r\n      active: true,\r\n      discount_type: 'NET_REDUCTION'\r\n    }\r\n    scope.randomizeCode = function() {\r\n      scope.coupon.code = Math.random().toString(36).substr(2, 10).toUpperCase()\r\n    }\r\n\r\n    scope.updateCouponExpiration = function() {\r\n      if (scope.hasExpirationDate !== true) {\r\n        delete scope.coupon.expiration_date\r\n      }\r\n    }\r\n\r\n    scope.clearTargetId = function(){\r\n      scope.coupon.target_id = null;\r\n    }\r\n\r\n    scope.updateCouponUsage = function() {\r\n      if (scope.limitedUsage !== true) {\r\n        delete scope.coupon.usages_left\r\n      }\r\n    }\r\n\r\n    scope.save = function() {\r\n\r\n      \r\n      for (var k in scope.coupon) {\r\n        if (scope.coupon[k] === null) {\r\n          delete scope.coupon[k]\r\n        }\r\n      }\r\n\r\n      $validation.hideErrors()\r\n\r\n      $marketcloud.coupons.save(scope.coupon)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Coupon saved', 1.5)\r\n          location.path('/coupons')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"coupon.'+validation.invalidPropertyName+'\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\r\n\r\n            $validation.showErrorMessage(validation,$models.Coupon.schema , selector)\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n\r\n    scope.addCondition = function() {\r\n      scope.coupon.conditions.push(scope.newCondition)\r\n      scope.newCondition = {}\r\n    }\r\n    scope.addEffect = function() {\r\n      scope.coupon.effects.push(scope.newEffect)\r\n      scope.newEffect = {}\r\n    }\r\n\r\n    // Stuff to add a product.\r\n    // This must be packaged into a component\r\n    scope.products = []\r\n    scope.itemsToAdd = []\r\n      // This is used as a reference after i pick a product\r\n    scope.targetProduct = null\r\n\r\n    scope.query = {}\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.selectProductAsTarget = function(product) {\r\n      scope.targetProduct = product\r\n      scope.coupon.target_id = product.id\r\n    }\r\n    scope.resetTargetProduct = function() {\r\n      scope.targetProduct = null\r\n    }\r\n\r\n    scope.loadProducts()\r\n\r\n    scope.handleCategoryChange = function() {\r\n\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/coupons/coupons.new.js","var app = angular.module('DataDashboard');\r\n\r\napp.controller('DeployController',['$scope','$application',function(scope, $application){\r\n\r\n\tscope.selectedTemplate = null;\r\n\r\n\tscope.getHerokuURL = function() {\r\n\t\tvar str = 'https://heroku.com/deploy';\r\n\t\tstr += '?template='+scope.selectedTemplate;\r\n\t\tstr += '&env[MARKETCLOUD_PUBLIC_KEY]='+$application.get().public_key;\r\n\t\tstr += '&env[MARKETCLOUD_SECRET_KEY]='+$application.get().secret_key;\r\n\t\treturn str;\r\n\r\n\t};\r\n\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/deploy.js","'use strict'\r\n/* globals angular */\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('HomeController', [\r\n  '$scope',\r\n  '$http',\r\n  '$routeParams',\r\n  'analytics',\r\n  'moment',\r\n  function(scope, http, params,  analytics, moment) {\r\n    scope.activities = []\r\n\r\n    var getResourceNameFromPath = function(p) {\r\n      var names = {\r\n        'orders': 'an order',\r\n        'products': 'a product',\r\n        'categories': 'a category',\r\n        'brands': 'a brand',\r\n        'users' : 'a user',\r\n        'cart' : 'a cart',\r\n        'promotions' : 'a promotion',\r\n        'collection' : 'a collection'\r\n\r\n      }\r\n      var resourcename = p.split('/')[2]\r\n\r\n      if (names.hasOwnProperty(resourcename)) {\r\n        return names[resourcename]\r\n      } else {\r\n        return resourcename\r\n      }\r\n    }\r\n\r\n    // What i want to match\r\n    // new orders\r\n    // updates to orders\r\n    // Updates to inventory\r\n    scope.alerts = []\r\n\r\n\r\n    // ORders used to display stats\r\n    scope.analytics = {\r\n      today: {\r\n        total: 0,\r\n        count: 0\r\n\r\n      },\r\n      yesterday: {\r\n        total: 0,\r\n        count: 0\r\n      },\r\n      this_week: {\r\n        total: 0,\r\n        count: 0\r\n      },\r\n      this_month: {\r\n        total: 0,\r\n        count: 0\r\n      }\r\n    }\r\n\r\n    var today = new Date()\r\n    today.setHours(0, 0, 0, 0)\r\n    today = today.getTime()\r\n\r\n    var yesterday = new Date()\r\n    yesterday.setDate(yesterday.getDate() - 1)\r\n    yesterday.setHours(0, 0, 0, 0)\r\n    yesterday = yesterday.getTime()\r\n\r\n\r\n    var oneWeekAgo = new Date();\r\n    oneWeekAgo.setDate(oneWeekAgo.getDate()  - 7);\r\n    oneWeekAgo.setHours(0, 0, 0, 0);\r\n    oneWeekAgo = oneWeekAgo.getTime();\r\n\r\n    var orders = analytics.data.data\r\n\r\n\r\n    scope.ordersToManage = orders.filter( function(order){\r\n      return [\r\n        'processing',\r\n        'pending',\r\n        'on_hold'\r\n      ].indexOf(order.status) > -1\r\n    }).slice(0,10)\r\n\r\n\r\n    var salesVolumePerDay = {}\r\n\r\n    var numberOfOrdersPerDay = {}\r\n\r\n    scope.orders_data = []\r\n    scope.orders_labels = []\r\n\r\n    var last_30_days = []\r\n    var last_30_days_labels = []\r\n    for (var i = 1; i < 30; i++) {\r\n      var d = new Date()\r\n      d.setDate(d.getDate() - i)\r\n      var month = String(d.getMonth() + 1)\r\n      if (month.length < 2) {\r\n        month = '0' + month\r\n      }\r\n      var day = d.getFullYear() + '-' + month + '-' + d.getDate()\r\n\r\n      last_30_days_labels.push(day)\r\n      last_30_days.push({\r\n        date: day,\r\n        value: 0\r\n      })\r\n      salesVolumePerDay[day] = 0\r\n    }\r\n\r\n    orders\r\n      .filter(function(x) {\r\n        // We consider only orders not canceled or refunded or failed for the analytics\r\n        var invalid_orders = ['failed', 'canceled', 'refunded']\r\n        return invalid_orders.indexOf(x.status) < 0\r\n      })\r\n      .map(function(x) {\r\n        return {\r\n          created_at: x.created_at,\r\n          total: x.total\r\n        }\r\n      })\r\n      .forEach(function(x) {\r\n        var d = new Date(x.created_at)\r\n        var month = String(d.getMonth() + 1)\r\n        if (month.length < 2) {\r\n          month = '0' + month\r\n        }\r\n        var day = d.getFullYear() + '-' + month + '-' + d.getDate()\r\n\r\n\r\n        if (!salesVolumePerDay[day]) {\r\n          salesVolumePerDay[day] = 0\r\n        }\r\n\r\n        salesVolumePerDay[day] += x.total\r\n\r\n\r\n        if (!numberOfOrdersPerDay[day])\r\n          numberOfOrdersPerDay[day] = 0;\r\n\r\n        numberOfOrdersPerDay[day]++;\r\n\r\n      })\r\n\r\n    orders\r\n      .filter(function(x) {\r\n        // We consider only orders not canceled or refunded or failed for the analytics\r\n        var invalid_orders = ['failed', 'canceled', 'refunded']\r\n        return invalid_orders.indexOf(x.status) < 0\r\n      })\r\n      .map(function(x) {\r\n        return {\r\n          created_at: x.created_at,\r\n          total: x.total\r\n        }\r\n      })\r\n      .forEach(function(x) {\r\n        if (x.created_at > today) {\r\n          scope.analytics.today.total = Math.round((scope.analytics.today.total + x.total) * 1000) / 1000\r\n          scope.analytics.today.count++\r\n\r\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\r\n          scope.analytics.this_month.count++\r\n        } else if (x.created_at > yesterday) {\r\n          scope.analytics.yesterday.total = Math.round((scope.analytics.yesterday.total + x.total) * 1000) / 1000\r\n          scope.analytics.yesterday.count++\r\n\r\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\r\n          scope.analytics.this_month.count++\r\n        } else if (x.created_at > oneWeekAgo) {\r\n          scope.analytics.this_week.total = Math.round((scope.analytics.this_week.total + x.total) * 1000) / 1000\r\n          scope.analytics.this_week.count++\r\n\r\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\r\n          scope.analytics.this_month.count++\r\n        } else {\r\n          scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\r\n          scope.analytics.this_month.count++\r\n        }\r\n      })\r\n\r\n    /*\r\n     *\tHere we feed the Chart.js chart on the dashboard homepage\r\n     *\r\n     *\tThis chart shows orders volume for this month (last 30 days)\r\n     */\r\n    scope.orders_volume_data = []\r\n    scope.orders_count_data = []\r\n    scope.orders_volume_labels = []\r\n\r\n    \r\n\r\n    for (var k in salesVolumePerDay) {\r\n      scope.orders_volume_data.unshift(parseFloat(Number(salesVolumePerDay[k]).toFixed(2)))\r\n      scope.orders_count_data.unshift(numberOfOrdersPerDay[k]);\r\n      scope.orders_volume_labels.unshift(moment(k, 'YYYY-M-DD').format('MMM Do'))\r\n    }\r\n\r\n    scope.datasets = [\r\n      scope.orders_volume_data,\r\n      scope.orders_count_data\r\n    ]\r\n\r\n\r\n    scope.getMethodCSSClass = function(a) {\r\n      var cls = null\r\n      switch (a.method) {\r\n        case 'GET':\r\n          cls = 'label-success'\r\n          break\r\n        case 'POST':\r\n          cls = 'label-info'\r\n          break\r\n        case 'PUT':\r\n          cls = 'label-warning'\r\n          break\r\n        case 'PATCH':\r\n          cls = 'label-warning'\r\n          break\r\n        case 'DELETE':\r\n          cls = 'label-danger'\r\n          break\r\n        default:\r\n          cls = 'label-success'\r\n          break\r\n\r\n      }\r\n      return cls\r\n    }\r\n\r\n    scope.chartOptions = {\r\n      scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\r\n    }\r\n\r\n    scope.chartOptions = {\r\n      scales: {\r\n         xAxes : [ {\r\n            gridLines : {\r\n                display : false\r\n            }\r\n        } ],\r\n        yAxes: [{\r\n          scaleLabel: {\r\n            display: true,\r\n            labelString: scope.application.currency_code\r\n          }\r\n        }]\r\n      }\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/home.js","var app = angular.module('DataDashboard')\r\napp.controller('IntegrationsController',\r\n\r\n  ['$scope', '$http', '$application',function($scope, $http,$application) {\r\n  $scope.integrations = [{\r\n    name: 'braintree',\r\n    tags: ['payments'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\r\n    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\r\n    links: {\r\n      'view': '/documentation/integrations/braintree'\r\n    }\r\n  }, {\r\n    name: 'stripe',\r\n    tags: ['payments'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\r\n    description: 'Web and mobile payments. Built for developers.',\r\n    links: {\r\n      'view': '/documentation/integrations/stripe'\r\n    }\r\n  }, {\r\n    name: 'facebook',\r\n    tags: ['authentication'],\r\n    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\r\n    description: 'Facebook auth integration',\r\n    links: {\r\n      'view': '/documentation/guides/facebook-login'\r\n    }\r\n  }]\r\n}])\r\n\r\napp.controller('IntegrationStripeController', \r\n  [\r\n  '$scope', \r\n  '$http',\r\n  '$routeParams',\r\n  'StripeIntegration',\r\n  '$application',\r\n  function($scope, $http, $routeParams, StripeIntegration, $application) {\r\n  /*\r\n   *  The integration states are\r\n   *\r\n   *  Not installed\r\n   *  Installed inactive\r\n   *  Installed active\r\n   *\r\n   *  Installed means that the oauth flow was completed and we have the data\r\n   *  StripeIntegration is the object we use to inject the integration state fetched from the api\r\n   *\r\n   *  If it's null, we conclude that it is not installed\r\n   */\r\n  if (StripeIntegration) {\r\n    $scope.isIntegrationInstalled = true\r\n    $scope.StripeIntegration = StripeIntegration.data.data\r\n  } else {\r\n    $scope.isIntegrationInstalled = false\r\n  }\r\n\r\n  $scope.currentApplication = $application.get()\r\n\r\n  // TODO\r\n  // Lo switch deve essere visibile se e solo se l'integrazione è installata. così da\r\n  // non essere clicccabile altrimenti.\r\n\r\n  $scope.toggleIntegration = function() {\r\n    return $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/stripe',\r\n        data: {\r\n          isActive: $scope.StripeIntegration.isActive\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n}])\r\n\r\napp.controller('IntegrationBraintreeController', [\r\n  '$scope', \r\n  '$http', \r\n  '$routeParams', \r\n  'BraintreeIntegration',\r\n  '$application',\r\n  function($scope, $http, $routeParams, BraintreeIntegration,$application) {\r\n  // This bool is used to show/hide credentials form\r\n  // This form is used to update the credentials\r\n  $scope.displayCredentialsForm = false\r\n\r\n  $scope.currentApplication = $application.get()\r\n\r\n  if (BraintreeIntegration) {\r\n    $scope.isIntegrationInstalled = true\r\n    $scope.braintreeConfiguration = BraintreeIntegration.data.data\r\n    $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data)\r\n  } else {\r\n    $scope.isIntegrationInstalled = false\r\n  }\r\n\r\n  $scope.toggleCredentialsForm = function() {\r\n    $scope.displayCredentialsForm = !$scope.displayCredentialsForm\r\n  }\r\n\r\n  $scope.showModal = function() {\r\n    $('#BraintreeCredentialsModal').modal('show')\r\n  }\r\n\r\n  $scope.toggleIntegration = function() {\r\n    return $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\r\n        data: {\r\n          isActive: $scope.braintreeConfiguration.isActive\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n\r\n  $scope.saveBraintreeConfiguration = function() {\r\n    console.log(\"Sending\", $scope.braintreeUpdate)\r\n    $http({\r\n        method: 'PUT',\r\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\r\n        data: $scope.braintreeUpdate\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Integration correctly updated', 1)\r\n        $('#BraintreeCredentialsModal').modal('hide')\r\n        $scope.isIntegrationInstalled = true\r\n        $scope.braintreeConfiguration = angular.copy({\r\n          environment: $scope.braintreeUpdate.environment,\r\n          isActive: $scope.braintreeUpdate.isActive\r\n        })\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\r\n      })\r\n  }\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/integrations.js","var app = angular.module('DataDashboard')\r\napp.controller('NewInvoiceController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$application',\r\n  '$location',\r\n  'parentOrder',\r\n  'orders',\r\n  'Countries',\r\n  '$validation',\r\n  '$models',\r\n  function (scope, http, $marketcloud, $application, location, parentOrder, orders, countries, $validation, $models) {\r\n    scope.invoice = {\r\n      company: {\r\n        name: $application.get('company_name'),\r\n        email: $application.get('email_address'),\r\n        address: $application.get('company_address'),\r\n        country: $application.get('company_country'),\r\n        city: $application.get('company_city'),\r\n        state: $application.get('company_state'),\r\n        postal_code: $application.get('company_postalcode'),\r\n        vat: $application.get('company_taxid')\r\n\r\n      },\r\n      customer: {},\r\n      date_created: new Date(),\r\n      date_due: new Date(),\r\n      lineItems: [{\r\n        name: '',\r\n        description: '',\r\n        quantity: 0,\r\n        price: 0\r\n      }]\r\n    }\r\n\r\n    console.log(scope.invoice)\r\n\r\n    function setNextInvoiceNumber () {\r\n      $marketcloud.invoices.list()\r\n      .then(function (response) {\r\n        var applicationSettings = $application.get()\r\n        var lastNumber = response.data.data.map(function (invoice) {\r\n          return invoice.number\r\n        })\r\n        .map(function (number) {\r\n          if (number.indexOf && number.indexOf(applicationSettings.invoices_prefix) > -1) {\r\n            number = number.replace(applicationSettings.invoices_prefix, '')\r\n          }\r\n\r\n          if (!isNaN(number)) { number = Number(number) }\r\n          return number\r\n        })\r\n        .sort(function (a, b) {\r\n          return a - b\r\n        })\r\n        .pop()\r\n\r\n        console.log('LastNumber is ', lastNumber)\r\n\r\n        if (!isNaN(lastNumber)) {\r\n          lastNumber = Number(lastNumber)\r\n          scope.invoice.number = applicationSettings.invoices_prefix + String(lastNumber + 1)\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error)\r\n      })\r\n    }\r\n\r\n    function fillDataFromOrder (order) {\r\n      console.log('fillDataFromOrder', order)\r\n      scope.parentOrder = order\r\n      scope.invoice = {\r\n        order_id: scope.parentOrder.id,\r\n        company: {\r\n          name: $application.get('company_name'),\r\n          email: $application.get('email_address'),\r\n          address: $application.get('company_address'),\r\n          country: $application.get('company_country'),\r\n          city: $application.get('company_city'),\r\n          state: $application.get('company_state'),\r\n          postal_code: $application.get('company_postalcode'),\r\n          vat: $application.get('company_taxid')\r\n        },\r\n        customer: {},\r\n        date_created: new Date(),\r\n        date_due: new Date(),\r\n        lineItems: scope.parentOrder.products.map(function (p) {\r\n          p.description = ''\r\n          return p\r\n        })\r\n      }\r\n\r\n      // adding shipping to line items\r\n      if (scope.parentOrder.hasOwnProperty('shipping')) {\r\n        scope.invoice.lineItems.push({\r\n          name: 'Shipping ' + scope.parentOrder.shipping.name,\r\n          description: scope.parentOrder.shipping.description,\r\n          quantity: 1,\r\n          price: scope.parentOrder.shipping_total\r\n        })\r\n      }\r\n\r\n      // adding payment method fee to line items\r\n      if (scope.parentOrder.hasOwnProperty('payment_method')) {\r\n        scope.invoice.lineItems.push({\r\n          name: 'Payment method ' + scope.parentOrder.payment_method.name,\r\n          description: scope.parentOrder.payment_method.description,\r\n          quantity: 1,\r\n          price: scope.parentOrder.payment_method_total\r\n        })\r\n      }\r\n\r\n      // adding coupons to line items\r\n      if (scope.parentOrder.hasOwnProperty('coupon')) {\r\n        scope.invoice.lineItems.push({\r\n          name: 'Coupon ' + scope.parentOrder.coupon.name,\r\n          description: scope.parentOrder.coupon.description,\r\n          quantity: 1,\r\n          price: 0 - Number(scope.parentOrder.coupon_total)\r\n        })\r\n      }\r\n\r\n      // adding promotions to line items\r\n      if (scope.parentOrder.hasOwnProperty('promotion')) {\r\n        scope.invoice.lineItems.push({\r\n          name: 'Promotion ' + scope.parentOrder.promotion.name,\r\n          description: scope.parentOrder.promotion.description,\r\n          quantity: 1,\r\n          price: 0 - Number(scope.parentOrder.promotion_total)\r\n        })\r\n      }\r\n\r\n      // We gather customer's invoicing data from the billing address.\r\n      for (var k in scope.parentOrder.billing_address) {\r\n        scope.invoice.customer[k] = scope.parentOrder.billing_address[k]\r\n      }\r\n    }\r\n\r\n    // If the parentOrder is populated, we prefill data\r\n    if (parentOrder && parentOrder.data) {\r\n      // Must check for 404s\r\n      fillDataFromOrder(parentOrder.data.data)\r\n    } else {\r\n      scope.parentOrder = null\r\n    }\r\n\r\n    setNextInvoiceNumber()\r\n\r\n    scope.orders = orders.data.data\r\n    scope.ordersQuery = {\r\n      per_page: 5,\r\n      page: 1\r\n    }\r\n    scope.showTheList = false\r\n    scope.showList = function () {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function () {\r\n      window.setTimeout(function () {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n    scope.loadNextOrders = function () {\r\n      scope.showTheList = true\r\n      scope.ordersQuery.page += 1\r\n\r\n      $marketcloud.orders.list(scope.ordersQuery)\r\n      .then(function (response) {\r\n        scope.orders = response.data.data\r\n      })\r\n      .catch(function (error) {\r\n        notie.alert(3)\r\n      })\r\n    }\r\n    scope.loadPreviousOrders = function () {\r\n      scope.showTheList = true\r\n\r\n      if (scope.ordersQuery.page <= 1) { return }\r\n\r\n      scope.ordersQuery.page -= 1\r\n\r\n      $marketcloud.orders.list(scope.ordersQuery)\r\n      .then(function (response) {\r\n        scope.orders = response.data.data\r\n      })\r\n      .catch(function (error) {\r\n        notie.alert(3)\r\n      })\r\n    }\r\n    scope.selectOrder = function (order) {\r\n      scope.showTheList = false\r\n      scope.invoice.order_id = order.id\r\n\r\n      fillDataFromOrder(order)\r\n    }\r\n\r\n    scope.countries = countries\r\n    scope.customerStates = []\r\n    scope.companyStates = []\r\n\r\n    scope.getInvoiceTotal = function () {\r\n      return scope.invoice.lineItems\r\n        .map(function (item) {\r\n          return item.price * item.quantity\r\n        })\r\n        .reduce(function (a, b) {\r\n          return a + b\r\n        }).toFixed(2)\r\n    }\r\n\r\n    scope.updateCompanyStates = function () {\r\n      http({\r\n        method: 'GET',\r\n        url: '/countries/' + scope.invoice.company.country.toLowerCase()\r\n      })\r\n        .then(function (response) {\r\n          scope.companyStates = response.data\r\n        })\r\n        .catch(function (error) {\r\n          var type = null\r\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\r\n\r\n          if (type === 'StatesListNotAvailable') {\r\n            scope.companyStates = []\r\n          }\r\n          /* else {\r\n            // Commenting this error because it seems to be disorientating for users\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          } */\r\n        })\r\n    }\r\n\r\n    // Immediatly invoking the function in order to load states\r\n    // but only if the value is already assigned.\r\n    if (scope.invoice.company.country) {\r\n      scope.updateCompanyStates()\r\n    }\r\n\r\n    scope.updateCustomerStates = function () {\r\n      if (!scope.invoice.customer.country) { return }\r\n\r\n      http({\r\n        method: 'GET',\r\n        url: '/countries/' + scope.invoice.customer.country.toLowerCase()\r\n      })\r\n        .then(function (response) {\r\n          scope.customerStates = response.data\r\n        })\r\n        .catch(function (error) {\r\n          var type = null\r\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\r\n\r\n          if (type === 'StatesListNotAvailable') {\r\n            scope.customerStates = []\r\n          }/* else {\r\n            // Commenting this error because it seems to be disorientating for users\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          } */\r\n        })\r\n    }\r\n\r\n    // Immediatly invoking the function in order to load states\r\n    // but only if the value is already assigned.\r\n    if (scope.invoice.customer.country) {\r\n      scope.updateCustomerStates()\r\n    }\r\n\r\n    scope.saveInvoice = function (goToOrder) {\r\n      goToOrder = goToOrder || false\r\n\r\n      $validation.hideErrors()\r\n      console.log('Salvo questo', angular.copy(scope.invoice))\r\n      $marketcloud.invoices.save(scope.invoice)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Invoice saved', 1.5)\r\n          if (goToOrder === true) {\r\n            return location.path('/orders/' + scope.invoice.order_id + '/view')\r\n          }\r\n          location.path('/invoices')\r\n        })\r\n        .catch(function (response) {\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5)\r\n\r\n            var validation = response.data.errors[0]\r\n            var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]'\r\n\r\n            if (angular.element(selector).length === 0) { selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]' }\r\n\r\n            $validation.showErrorMessage(validation, $models.Invoice.schema, selector)\r\n          } else { notie.alert(3, 'An error has occurred. Please try again', 2) }\r\n        })\r\n    }\r\n\r\n    scope.addLineItem = function () {\r\n      scope.invoice.lineItems.push({\r\n        name: '',\r\n        description: '',\r\n        quantity: null,\r\n        price: null\r\n      })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/invoices/invoice.new.js","var app = angular.module('DataDashboard')\r\napp.controller('EditInvoiceController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$location',\r\n  'invoice',\r\n  'Countries',\r\n  '$validation',\r\n  '$models',\r\n  function (scope, http, $marketcloud, location, invoice, countries, $validation, $models) {\r\n    scope.invoice = invoice.data.data\r\n    console.log('Prima di fottere le date', angular.copy(scope.invoice))\r\n    // Angular wants the input[date] to be valid date objects :@\r\n    scope.invoice.date_due = moment(scope.invoice.date_due)\r\n    scope.invoice.date_created = moment(scope.invoice.date_created)\r\n\r\n    console.log('Dopo di fottere le date', angular.copy(scope.invoice))\r\n\r\n    scope.countries = countries\r\n    scope.customerStates = []\r\n    scope.companyStates = []\r\n\r\n    scope.alert = function (m) {\r\n      window.alert(m)\r\n    }\r\n\r\n    scope.getInvoiceTotal = function () {\r\n      return scope.invoice.lineItems\r\n        .map(function (item) {\r\n          return item.price * item.quantity\r\n        })\r\n        .reduce(function (a, b) {\r\n          return a + b\r\n        }).toFixed(2)\r\n    }\r\n\r\n    scope.updateCompanyStates = function () {\r\n      http({\r\n        method: 'GET',\r\n          // url : '/modules/shared/geography/countries/'+scope.invoice.company.country.toLowerCase()+'.json'\r\n        url: '/countries/' + scope.invoice.company.country.toLowerCase()\r\n      })\r\n        .then(function (response) {\r\n          scope.companyStates = response.data\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n          var type = null\r\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\r\n\r\n          if (type === 'StatesListNotAvailable') {\r\n            scope.companyStates = []\r\n          } else {\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          }\r\n        })\r\n    }\r\n\r\n    scope.updateCustomerStates = function () {\r\n      if (!scope.invoice.customer.country) { return }\r\n\r\n      http({\r\n        method: 'GET',\r\n        url: '/countries/' + scope.invoice.customer.country.toLowerCase()\r\n      })\r\n        .then(function (response) {\r\n          scope.customerStates = response.data\r\n        })\r\n        .catch(function (error) {\r\n          var type = null\r\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\r\n\r\n          if (type === 'StatesListNotAvailable') {\r\n            scope.customerStates = []\r\n          } else {\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          }\r\n        })\r\n    }\r\n\r\n    scope.updateCustomerStates()\r\n    scope.updateCompanyStates()\r\n    scope.debug = function () { console.log(scope.invoice) }\r\n\r\n    scope.saveInvoice = function () {\r\n      if (typeof scope.invoice.date_created.toDate === 'function') {\r\n        scope.invoice.date_created = scope.invoice.date_created.toDate()\r\n        scope.invoice.date_created.setHours(12)\r\n      }\r\n      if (typeof scope.invoice.date_due.toDate === 'function') {\r\n        scope.invoice.date_due = scope.invoice.date_due.toDate()\r\n        scope.invoice.date_due.setHours(12)\r\n      }\r\n      console.log('Salvo', angular.copy(scope.invoice))\r\n      $validation.hideErrors()\r\n      $marketcloud.invoices.update(scope.invoice.id, scope.invoice)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Invoice saved', 1.5)\r\n          location.path('/invoices')\r\n        })\r\n        .catch(function (response) {\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5)\r\n\r\n            var validation = response.data.errors[0]\r\n            var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]'\r\n\r\n            if (angular.element(selector).length === 0) { selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]' }\r\n\r\n            $validation.showErrorMessage(validation, $models.Invoice.schema, selector)\r\n          } else { notie.alert(3, 'An error has occurred.', 2) }\r\n        })\r\n    }\r\n\r\n    scope.addLineItem = function () {\r\n      scope.invoice.lineItems.push({\r\n        name: '',\r\n        description: '',\r\n        quantity: null,\r\n        price: null\r\n      })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/invoices/invoices.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('LocalizationController', ['$scope', '$http', 'Currencies', 'Timezones', 'LocalesFactory', '$application',\r\n  function(scope, http, currencies, timezones, locales, $application) {\r\n    scope.application = $application.get()\r\n\r\n    scope.currencies = currencies;\r\n\r\n    for (var k in scope.currencies){\r\n      scope.currencies[k].name_plus_code = scope.currencies[k].name+ \" (\" + scope.currencies[k].code + \")\";\r\n    }\r\n    scope.activeCurrencies = []\r\n      // string '[{code,rate},{code,rate},{code,rate}]'\r\n      // array  [{code,rate},{code,rate},{code,rate}]\r\n      //\r\n\r\n    if (typeof $application.get().currencies !== 'string') {\r\n      $application.get().currencies = '[]'\r\n    }\r\n    var saved_currencies = JSON.parse($application.get().currencies)\r\n\r\n    // scope.currencies.forEach(function(currency){\r\n    for (var k in scope.currencies) {\r\n      var currency = scope.currencies[k]\r\n      saved_currencies.forEach(function(saved_currency) {\r\n        if (saved_currency.code === currency.code) {\r\n          var new_currency_obj = angular.copy(currency)\r\n          new_currency_obj.rate = saved_currency.rate\r\n          scope.activeCurrencies.push(new_currency_obj)\r\n        }\r\n      })\r\n    }\r\n    // })\r\n\r\n    /*\r\n     *  Adds a currency and updates app's settings\r\n     */\r\n    scope.addCurrency = function(currency) {\r\n      if (scope.activeCurrencies.map(function(c) {\r\n          return c.code\r\n        }).indexOf(currency.code) > -1) {\r\n        return\r\n      }\r\n      currency.rate = 1\r\n      scope.activeCurrencies.push(currency)\r\n\r\n      // saving the new settings configuration\r\n      scope.updateSettings()\r\n    }\r\n\r\n    /*\r\n     *  Removes a currency and updates app's settings\r\n     */\r\n    scope.removeCurrency = function(i) {\r\n      scope.activeCurrencies.splice(i, 1)\r\n\r\n      // saving the new settings configuration\r\n      scope.updateSettings()\r\n    }\r\n\r\n    /*\r\n      There are better APIs for currency exchange, but they are not free.\r\n      Fixer only has a small subset of currencies.\r\n      This is free for 1000 reqs/month\r\n        https://currencylayer.com/product\r\n      This starts from 12$/month and also free for 1000 res/month\r\n      https://openexchangerates.org/signup\r\n\r\n      We ended up using Yahoo Finance through Yahoo Query Console.\r\n      It's a bit hacky but its working for now and it is the\r\n      only free service with any exchange rate.\r\n      very gouda.\r\n\r\n      Yahoo Finance is DEAD 8 Nov 2017\r\n    */\r\n/*\r\n    function buildURL(from_currency_code, to_currency_code) {\r\n      return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20csv%20where%20url%3D%22http%3A%2F%2Ffinance.yahoo.com%2Fd%2Fquotes.csv%3Fe%3D.csv%26f%3Dnl1d1t1%26s%3D' + from_currency_code + to_currency_code + '%3DX%22%3B&format=json&callback='\r\n    }\r\n\r\n    scope.applyExchangeRate = function(currencyToApply) {\r\n      http({\r\n          method: 'GET',\r\n          url: buildURL($application.get().currency_code, currencyToApply.code)\r\n        }).then(function(response) {\r\n          currencyToApply.rate = Number(response.data.query.results.row.col1)\r\n        })\r\n        .catch(function(err) {\r\n          notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\r\n        })\r\n    }*/\r\n\r\n    function buildURL(from_currency_code, to_currency_code) {\r\n      return 'https://api.fixer.io/latest?symbols='+to_currency_code+'&base='+from_currency_code\r\n    }\r\n\r\n    scope.applyExchangeRate = function(currencyToApply) {\r\n      http({\r\n          method: 'GET',\r\n          url: buildURL($application.get().currency_code, currencyToApply.code)\r\n        }).then(function(response) {\r\n          console.log(\"LA RISPOSONA DI FIXER\",response)\r\n          console.log(\"Io \")\r\n          currencyToApply.rate = Number(response.data.rates[currencyToApply.code])\r\n        })\r\n        .catch(function(err) {\r\n          notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\r\n        })\r\n    }\r\n\r\n    scope.applyAllExchangeRates = function() {\r\n      scope.activeCurrencies.forEach(function(currencyToApply) {\r\n        if (scope.exchangeRates.hasOwnProperty(currencyToApply.code)) {\r\n          currencyToApply.rate = scope.exchangeRates[currencyToApply.code]\r\n        }\r\n      })\r\n    }\r\n\r\n    // This is for sorting the locales by name\r\n    function compare(a, b) {\r\n      if (a.name < b.name) {\r\n        return -1\r\n      } else if (a.name > b.name) {\r\n        return 1\r\n      } else {\r\n        return 0\r\n      }\r\n    }\r\n\r\n    // Locales are provided by the factory as an object with the code as key\r\n    // For sorting them, we need an array.\r\n    scope.locales = Object.keys(locales)\r\n      .map(function(k) {\r\n        return locales[k]\r\n      })\r\n      .sort(compare)\r\n\r\n    if (scope.application.locales === '') {\r\n      scope.activeLocales = []\r\n    } else {\r\n      scope.activeLocales = scope.application.locales.split(',').map(function(code) {\r\n        return locales[code]\r\n      })\r\n    }\r\n\r\n    /*\r\n     *  Adds a locale to the app and saves\r\n     */\r\n    scope.addLocale = function(locale) {\r\n      if (scope.activeLocales.map(function(l) {\r\n          return l.code\r\n        }).indexOf(locale.code) > -1) {\r\n        return\r\n      }\r\n\r\n      scope.activeLocales.push(locale)\r\n\r\n      // saving the new settings configuration\r\n      scope.updateSettings()\r\n    }\r\n\r\n    scope.getFlagClassName = function(locale) {\r\n      return 'flag-icon-' + locale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n\r\n    /*\r\n     *  Removes a locale to the app and saves\r\n     */\r\n    scope.removeLocale = function(i) {\r\n      scope.activeLocales.splice(i, 1)\r\n\r\n      // saving the new settings configuration\r\n      scope.updateSettings()\r\n    }\r\n\r\n    // Let's re-pack the active locales in a single string\r\n    function activeLocalesToString() {\r\n      return scope.activeLocales.map(function(locale) {\r\n          return locale.code\r\n        })\r\n        .join(',')\r\n    }\r\n\r\n    function activeCurrenciesToString() {\r\n      return JSON.stringify(scope.activeCurrencies.map(function(c) {\r\n        return {\r\n          code: c.code,\r\n          rate: c.rate\r\n        }\r\n      }))\r\n    }\r\n\r\n    scope.updateSettings = function() {\r\n      var payload = {\r\n        locales: activeLocalesToString(),\r\n        currencies: activeCurrenciesToString()\r\n      }\r\n\r\n      http({\r\n          method: 'PUT',\r\n          url: '/applications/' + scope.application.id,\r\n          data: payload\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Application successfully updated', 1)\r\n          console.log('Setto i locales a ', response.data.data.locales)\r\n          $application.set('locales', response.data.data.locales)\r\n          $application.set('currencies', response.data.data.currencies)\r\n        })\r\n        .catch(function(err) {\r\n          notie.alert(3, 'An error has occurred.')\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/localization.controller.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('MediaListController', ['$scope', '$http', 'media', '$marketcloud', '$q',\r\n  function(scope, http, resources, $marketcloud, $q) {\r\n    // Pagination\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n\r\n    scope.inspectFile = function(file) {\r\n      scope.inspectedFile = file;\r\n      $(\"#inspectFileModal\").modal(\"show\");\r\n    }\r\n\r\n    scope.formatFileSize = function(file) {\r\n      if (!file)\r\n        return \"\";\r\n\r\n      var size = Number(file.size);\r\n      var formatted = size + \"b\";\r\n\r\n      var kb = 1000;\r\n      var mb = kb * 1000;\r\n      var gb = mb * 1000;\r\n\r\n      if (size > kb && size < mb) {\r\n        // Kilobytes\r\n        size = (size / kb).toFixed(2);\r\n        return String(size) + \" KB\"\r\n      } else if (size > mb && size < gb) {\r\n        // Megabytes\r\n        size = (size / mb).toFixed(2);\r\n        return String(size) + \" MB\"\r\n      } else {\r\n        size = (size / gb).toFixed(2);\r\n        return String(size) + \" GB\";\r\n      }\r\n    }\r\n\r\n    // Query\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n    scope.toggleAll = function() {\r\n      scope.media.forEach(function(p) {\r\n        p.selected = scope.selectAll\r\n      })\r\n    }\r\n\r\n    scope.getSelectedItems = function() {\r\n      return scope.media.filter(function(p) {\r\n        return p.selected === true\r\n      })\r\n    }\r\n\r\n    scope.bulkDelete = function() {\r\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function() {\r\n        var defer = $q.defer()\r\n\r\n        var promises = []\r\n\r\n        scope\r\n          .getSelectedItems()\r\n          .forEach(function(item) {\r\n            promises.push($marketcloud.media.delete(item.id))\r\n          })\r\n\r\n        $q.all(promises)\r\n          .then(function() {\r\n            notie.alert(1, 'All items have been deleted', 1.5)\r\n            scope.loadPage(scope.currentPage)\r\n          })\r\n\r\n        return defer.promise\r\n      })\r\n    }\r\n\r\n    // Initial data resolved from the router\r\n    scope.media = resources.data.data\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function() {\r\n      return scope.media\r\n    }\r\n\r\n    scope.loadPage = function(page) {\r\n      scope.query.page = page\r\n      return scope.loadData({\r\n        page: page\r\n      })\r\n    }\r\n\r\n    scope.loadData = function(query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n      return $marketcloud.media.list(query)\r\n        .then(function(response) {\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n\r\n          scope.media = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n\r\n    scope.updateInspectedFile = function(){\r\n      console.log(\"Saving this\",scope.inspectedFile)\r\n      $marketcloud.media.update(scope.inspectedFile.id,{name : scope.inspectedFile.name})\r\n      .then(function(response){\r\n        notie.alert(1, 'File updated', 1.5)\r\n      })\r\n      .catch(function(error){\r\n        notie.alert(3, 'An error has occurred. Please retry.', 1.5)\r\n      })\r\n    }\r\n\r\n    scope.deleteMedia = function(media_id, index) {\r\n      $marketcloud.media.delete(media_id)\r\n        .then(function(response) {\r\n          scope.loadData({\r\n            page: scope.currentPage\r\n          })\r\n          notie.alert(1, 'Media deleted', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/media.list.js","  var MediaManagerControllerDependencies = [\r\n    '$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'\r\n  ]\r\n\r\n  var MediaManagerController = function (scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\r\n    var ctrl = null\r\n    this.$onInit = function () {\r\n      // Reference to the controller\r\n      ctrl = this\r\n\r\n      // List of image urls\r\n      ctrl.images = ctrl.images || []\r\n\r\n      // List of image objects\r\n      // ctrl.media = ctrl.media || [];\r\n\r\n      scope.closeOnUploadComplete = $attrs.closeOnUploadComplete\r\n\r\n      /* Component configuration from attributes */\r\n      // The classes used to style the button\r\n      scope.buttonClass = $attrs.buttonClass\r\n\r\n      // The text displayed on the button\r\n      scope.buttonText = $attrs.buttonText\r\n\r\n      // The icon displayed on the button\r\n      scope.buttonIcon = $attrs.buttonIcon || null\r\n\r\n      var tabs = $attrs.tabs || 'library,from_disk,from_url'\r\n\r\n      // This will hold an array of tab names\r\n      // The component will show only those tabs\r\n      // whose name is in this array\r\n      //\r\n      // The first tab will be the active one.\r\n      // TODO to improve this, we can add an attribute \"activeTab\"\r\n\r\n      scope.tabs = tabs.split(',')\r\n\r\n      // This is the name of the parent function which will return a reference to the image container\r\n      // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\r\n    }\r\n\r\n    /* Uploader configuration */\r\n    scope.uploader = new FileUploader({\r\n      url: window.API_BASE_URL + '/media',\r\n      arrayKey: '',\r\n      headers: {\r\n        'Authorization': window.public_key + ':' + window.token\r\n      },\r\n      filters: []\r\n    })\r\n\r\n    // When closeDialog is called from within the component\r\n    // we notify the parent component/controller by calling the on-close-dialog\r\n    // callback\r\n    scope.closeDialog = function () {\r\n      ctrl.onCloseDialog()\r\n    }\r\n\r\n    scope.openDialog = function () {\r\n      ctrl.onOpenDialog()\r\n    }\r\n\r\n    scope.uploadImages = function () {\r\n      ctrl.onUploadImages()\r\n    }\r\n\r\n    scope.image = {}\r\n    scope.media_files = []\r\n    scope.loadingMediaFiles = false\r\n\r\n    // Used to keep filters and pagination state\r\n    scope.query = {}\r\n\r\n    // Initializing the pagination object to null\r\n    // This allows for convenient check on view pagination === null => dont show pagination\r\n    scope.pagination = null\r\n\r\n    scope.loadMedias = function (query) {\r\n      scope.media_files = []\r\n      scope.loadingMediaFiles = true\r\n      /* $http({\r\n          method: 'GET',\r\n          url: window.API_BASE_URL + '/media',\r\n          headers: {\r\n            Authorization: window.public_key\r\n          }\r\n        }) */\r\n      $marketcloud.media.list(query || {})\r\n        .then(function (response) {\r\n          scope.loadingMediaFiles = false\r\n          scope.media_files = response.data.data\r\n\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n        })\r\n        .catch(function (response) {\r\n          scope.loadingMediaFiles = false\r\n          notie.alert(2, 'An error has occurred, please retry.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.loadPage = function (page_number) {\r\n      scope.query.page = page_number\r\n      return scope.loadData()\r\n    }\r\n\r\n    scope.loadMore = function () {\r\n      var pageToFetch = scope.media_files.length / 20 + 1\r\n      $marketcloud.media.list({page: pageToFetch})\r\n      .then(function (response) {\r\n        scope.loadingMediaFiles = false\r\n\r\n        scope.media_files = scope.media_files.concat(response.data.data)\r\n      })\r\n        .catch(function (response) {\r\n          scope.loadingMediaFiles = false\r\n          notie.alert(2, 'An error has occurred, please retry.', 1.5)\r\n        })\r\n    }\r\n    scope.loadData = function (query) {\r\n      scope.media_files = []\r\n      scope.loadingMediaFiles = true\r\n\r\n      if (!query) { query = scope.query || {} }\r\n\r\n      $marketcloud.media\r\n        .list(query)\r\n        .then(function (response) {\r\n          scope.loadingMediaFiles = false\r\n          scope.media_files = response.data.data\r\n\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n        })\r\n        .catch(function (response) {\r\n          scope.loadingMediaFiles = false\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    // Calling it right now because we want to initialize the media library\r\n    if (scope.media_files.length === 0) {\r\n      scope.loadMedias()\r\n    }\r\n\r\n    scope.showProgressBar = false\r\n    scope.uploadingImages = false\r\n\r\n    scope.howManySelectedMedia = function () {\r\n      return ctrl.images.length\r\n    }\r\n\r\n    scope.addSelectedFromLibrary = function () {\r\n      var modal = $element.find('#MediaManagerModal');\r\n      $(modal).modal('hide')\r\n      /*$('#MediaManagerModal').modal('hide')*/\r\n    }\r\n\r\n    scope.isImageSelected = function (image) {\r\n      return ctrl.images.indexOf(image.url) > -1\r\n    }\r\n    scope.selectImage = function (image) {\r\n      if (image.selected === true) {\r\n        image.selected = false\r\n        removeImage(image)\r\n      } else {\r\n        image.selected = true\r\n        ctrl.images.push(image.url)\r\n      }\r\n    }\r\n\r\n    var removeImage = function (image) {\r\n      // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\r\n      var pos = ctrl.images.indexOf(image.url)\r\n      if (pos > -1) {\r\n        ctrl.images.splice(pos, 1)\r\n      }\r\n\r\n      // Rimuovo il media\r\n      /* for (var i =0; i< ctrl.media.length;i++) {\r\n        if (ctrl.media[i].url === image.url)\r\n          ctrl.media.splice(i,1);\r\n      } */\r\n    }\r\n\r\n    scope.uploader.onCompleteAll = function () {\r\n      scope.loadMedias()\r\n      scope.showProgressBar = false\r\n      scope.uploadingImages = false\r\n      scope.uploader.clearQueue()\r\n\r\n      // Checking if we need to close the dialog\r\n      if (scope.closeOnUploadComplete === 'true') {\r\n        scope.closeDialog()\r\n        /*$('#MediaManagerModal').modal('hide')*/\r\n        var modal = $element.find('#MediaManagerModal');\r\n        $(modal).modal('hide')\r\n      }\r\n\r\n      if (ctrl.onUploadComplete) {\r\n        ctrl.onUploadComplete()\r\n      }\r\n    }\r\n\r\n    scope.uploader.onProgressAll = function (progress) {\r\n\r\n    }\r\n\r\n    scope.uploader.onErrorItem = function (item, response, status, headers) {\r\n      var err = new Error('Error uploading an item')\r\n      err.response = response\r\n      err.status = status\r\n      err.headers = headers\r\n      $exceptionHandler(err)\r\n    }\r\n\r\n    scope.chooseFileFromStorage = function () {\r\n      $('#chooseFileFromStorageButton').trigger('click')\r\n    }\r\n\r\n    scope.uploadSelectedImages = function () {\r\n      scope.showProgressBar = true\r\n      scope.uploadingImages = true\r\n      scope.uploader.uploadAll()\r\n    }\r\n\r\n    scope.addImageFromUrl = function () {\r\n      ctrl.images.push(scope.image.url)\r\n      // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\r\n      scope.image.url = null\r\n    }\r\n\r\n    scope.showMediaManagerModal = function () {\r\n      /*$('#MediaManagerModal').modal('show')*/\r\n      var modal = $element.find('#MediaManagerModal');\r\n      $(modal).modal('show')\r\n\r\n      // Notifying the parent\r\n      scope.openDialog()\r\n    }\r\n  }\r\n\r\n  MediaManagerController.$inject = MediaManagerControllerDependencies\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('MediaManagerController', MediaManagerController)\r\n\r\n  angular.module('DataDashboard')\r\n    .component('mediaManager', {\r\n      templateUrl: '/modules/data_dashboard/templates/modals/media_manager.html',\r\n      controller: 'MediaManagerController',\r\n      bindings: {\r\n        onCloseDialog: '&',\r\n        onOpenDialog: '&',\r\n        onUploadComplete: '&',\r\n        // imagesContainer: '=',\r\n        images: '=?',\r\n        media: '=?',\r\n        buttonClass: '@',\r\n        buttonIcon: '@',\r\n        buttonText: '@',\r\n        closeOnUploadComplete: '@'\r\n      }\r\n    })\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/media_manager.controller.js","var app = angular.module('DataDashboard')\r\napp.controller('EditNotificationController', [\r\n  '$scope',\r\n  '$http',\r\n  'notification',\r\n  '$location',\r\n  '$marketcloud',\r\n  'NotificationsPresetsFactory',\r\n  function(scope, http, notification, $location, $marketcloud, NotificationsPresets) {\r\n    scope.events = {\r\n      'invoices.create': 'An invoice is created',\r\n      'orders.create': 'An order is created',\r\n      'users.create': 'A new user is created',\r\n      'users.recoverPassword': 'A user wants to recover the password',\r\n      'orders.update.processing': 'An order is paid',\r\n      'orders.update.completed': 'An order is shipped'\r\n    }\r\n\r\n    // name => label\r\n    // This object is used to map template variable names\r\n    // to more user friendly names\r\n    scope.templateVariablesLabels = {\r\n      title: 'Title',\r\n      introduction: 'introduction',\r\n      productLabel: 'Product Label',\r\n      priceLabel: 'Price Label',\r\n      customerInformationLabel: 'Customer information label',\r\n      shippingAddressLabel: 'Shipping address label',\r\n      billingAddressLabel: 'Billing address label',\r\n      tracking_code_introduction: 'Shipment tracking introduction',\r\n      redirect_url: 'Redirect URL',\r\n      buttonLabel: 'Button Label'\r\n    }\r\n\r\n    scope.presets = NotificationsPresets\r\n\r\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\r\n      return scope.events[e]\r\n    })\r\n\r\n    scope.updateNotificationPreset = function() {\r\n      if (scope.presets.hasOwnProperty(scope.notification.event)) {\r\n        var e = scope.notification.event\r\n        for (var k in scope.presets[e]) {\r\n          scope.notification[k] = scope.presets[e][k]\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.notification = notification.data.data\r\n\r\n    // Notifications created before templates were available might need some more work\r\n    if (!scope.notification.template) {\r\n      scope.notification.template = angular.copy(scope.presets[scope.notification.event].template)\r\n    }\r\n\r\n    // In the same way, some notification might have only a subset of template values.\r\n    for (var tplKey in scope.presets[scope.notification.event].template) {\r\n      if (!(tplKey in scope.notification.template)) {\r\n        scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey]\r\n      }\r\n    }\r\n\r\n    scope.save = function() {\r\n      $marketcloud.notifications.update(scope.notification.id, scope.notification)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Item successfully updated!', 1.5)\r\n          $location.path('/notifications')\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('NotificationsController', ['$scope', '$http', '$marketcloud', 'notifications',\r\n  function (scope, http, $marketcloud, notifications) {\r\n    scope.notifications = notifications.data.data\r\n\r\n    scope.delete = function (notification, index) {\r\n      $marketcloud.notifications.delete(notification.id)\r\n\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Notification deleted', 1.5)\r\n  scope.notifications.splice(index, 1)\r\n})\r\n\t\t\t\t.catch(function (error) {\r\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n})\r\n    }\r\n\r\n    scope.toggleNotification = function (notification) {\r\n      $marketcloud.notifications.update(notification.id, notification)\r\n\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Update successful', 1.5)\r\n})\r\n\t\t\t\t.catch(function (error) {\r\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.js","var app = angular.module('DataDashboard')\r\napp.controller('NewNotificationController', ['$scope', '$http', '$location', '$marketcloud', 'NotificationsPresetsFactory',\r\n  function(scope, http, $location, $marketcloud, NotificationsPresets) {\r\n    scope.events = {\r\n      'invoices.create': 'An invoice is created',\r\n      'orders.create': 'An order is created',\r\n      'users.create': 'A new user is created',\r\n      'users.recoverPassword': 'A user wants to recover the password',\r\n      'orders.update.processing': 'An order is paid',\r\n      'orders.update.completed': 'An order is shipped'\r\n    }\r\n\r\n    scope.notification = {\r\n      event: null,\r\n      name: null,\r\n      description: null,\r\n      subject: null,\r\n      sendCopyToOwner: false,\r\n      active: false\r\n    }\r\n\r\n    scope.query = {}\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.presets = NotificationsPresets\r\n\r\n    // name => label\r\n    // This object is used to map template variable names\r\n    // to more user friendly names\r\n    scope.templateVariablesLabels = {\r\n      title: 'Title',\r\n      introduction: 'introduction',\r\n      productLabel: 'Product Label',\r\n      priceLabel: 'Price Label',\r\n      customerInformationLabel: 'Customer information label',\r\n      shippingAddressLabel: 'Shipping address label',\r\n      billingAddressLabel: 'Billing address label',\r\n      tracking_code_introduction: 'Shipment tracking introduction',\r\n      redirect_url  :'Redirect URL',\r\n      buttonLabel : 'Button Label'\r\n    }\r\n\r\n    scope.updateNotificationPreset = function() {\r\n      if (scope.presets.hasOwnProperty(scope.notification.event)) {\r\n        var e = scope.notification.event\r\n        for (var k in scope.presets[e]) {\r\n          scope.notification[k] = scope.presets[e][k]\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\r\n      return scope.events[e]\r\n    })\r\n\r\n    scope.save = function() {\r\n      $marketcloud.notifications.save(scope.notification)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Notification saved', 1.5)\r\n          $location.path('/notifications')\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.new.js","var app = angular.module('DataDashboard')\r\napp.controller('PreviewNotificationController',\r\n  ['$scope', '$http', 'notification', '$location', '$marketcloud',\r\n    function (scope, http, notification, $location, $marketcloud) {\r\n      scope.notification = JSON.parse(notification)\r\n\r\n      scope.sampleData = {}\r\n\r\n      scope.sampleData['orders.update.completed'] = {}\r\n\r\n      scope.sampleData['orders.update.processing'] = {}\r\n\r\n      scope.sampleData['orders.created'] = {}\r\n\r\n      scope.sampleData['users.created'] = {}\r\n    }\r\n  ])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.preview.js","var app = angular.module('DataDashboard')\r\napp.controller('TranslateNotificationController', ['$scope',\r\n  '$http',\r\n  'notification',\r\n  '$marketcloud',\r\n  'LocalesFactory',\r\n  '$application',\r\n  '$location',\r\n  'NotificationsPresetsFactory',\r\n  function(scope, http, notification, $marketcloud, locales, $application, $location, NotificationsPresets) {\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n    scope.presets = NotificationsPresets\r\n    scope.notification = notification.data.data\r\n      // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n      // mocking the retrieval of locales\r\n    scope.locales = locales\r\n      // name => label\r\n      // This object is used to map template variable names\r\n      // to more user friendly names\r\n    scope.templateVariablesLabels = {\r\n      title: 'Title',\r\n      introduction: 'introduction',\r\n      productLabel: 'Product Label',\r\n      priceLabel: 'Price Label',\r\n      customerInformationLabel: 'Customer information label',\r\n      shippingAddressLabel: 'Shipping address label',\r\n      billingAddressLabel: 'Billing address label',\r\n      tracking_code_introduction: 'Shipment tracking introduction',\r\n      redirect_url: 'Redirect URL',\r\n      buttonLabel: 'Button Label'\r\n    }\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n      // Which locale we are currently editing\r\n    scope.currentLocale = scope.availableLocales[0]\r\n      // Init locales object\r\n    if (!scope.notification.hasOwnProperty('locales')) {\r\n      scope.notification.locales = {}\r\n    }\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.notification.locales.hasOwnProperty(locale.code)) {\r\n        scope.notification.locales[locale.code] = {}\r\n      }\r\n    })\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n    scope.events = {\r\n      'invoices.create': 'An order is created',\r\n      'orders.create': 'An order is created',\r\n      // 'orders.update.canceled'     : 'An order is canceled',\r\n      'users.create': 'A new user is created',\r\n      'orders.update.processing': 'An order is paid',\r\n      'orders.update.completed': 'An order is shipped'\r\n    }\r\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\r\n      return scope.events[e]\r\n    })\r\n    scope.updateNotificationPreset = function() {\r\n        if (scope.presets.hasOwnProperty(scope.notification.event)) {\r\n          var e = scope.notification.event\r\n          for (var k in scope.presets[e]) {\r\n            scope.notification[k] = scope.presets[e][k]\r\n          }\r\n        }\r\n      }\r\n      // Notifications created before templates were available might need some more work\r\n    if (!scope.notification.template) {\r\n      scope.notification.template = angular.copy(scope.presets[scope.notification.event])\r\n    }\r\n    // In the same way, some notification might have only a subset of template values.\r\n    for (var tplKey in scope.presets[scope.notification.event].template) {\r\n      if (!(tplKey in scope.notification.template)) {\r\n        scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey]\r\n      }\r\n    }\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.notification.locales)\r\n      }\r\n      $marketcloud.notifications.update(scope.notification.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.translations.js","'use strict'\r\n/* global angular: true  */\r\n/* global API_BASE_URL: true  */\r\n/* global notie: true  */\r\n/* global alert: true  */\r\n\r\nvar app = angular.module('DataDashboard')\r\napp.controller('OrdersController', [\r\n  '$q',\r\n  '$scope',\r\n  '$http',\r\n  '$location',\r\n  'ordersResponse',\r\n  '$marketcloud',\r\n  '$route',\r\n  '$utils',\r\n  function($q, scope, http, $location, resources, $marketcloud, $route, $utils) {\r\n    // Pagination\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    // Query\r\n    scope.query = {\r\n      page: 1,\r\n      per_page: 20\r\n    }\r\n\r\n\r\n    // Parsing URL parameters, if provided\r\n\r\n    // Applying Url query\r\n    var urlQuery = {}\r\n    try {\r\n      urlQuery = JSON.parse($route.current.params.query)\r\n    } catch (e) {\r\n      console.log(\"Non ho potuto parsare il JSON di questa stringa \", $route.current.params.query)\r\n      urlQuery = {};\r\n    }\r\n\r\n    console.log(\"Sono il controller ed inizializzo la query usando query URL Params \", urlQuery)\r\n    for (var k in urlQuery) {\r\n      scope.query[k] = urlQuery[k];\r\n    }\r\n\r\n    // Initial data resolved from the router\r\n    scope.orders = resources.data.data\r\n\r\n\r\n\r\n    // This computes a \"paid\" flag on each order\r\n    // it is calculated checking each payment status\r\n    function setPaidFlag(order) {\r\n      // Old api set payment instead of payments\r\n      if (order.hasOwnProperty('payment')) {\r\n        order.paid = true\r\n      } else if (order.hasOwnProperty('payments')) {\r\n        order.paid = (order.payments.filter(function(p) {\r\n          return p.successful\r\n        }).length > 0)\r\n      } else {\r\n        order.paid = false\r\n      }\r\n    }\r\n\r\n    // Setting the paid flag\r\n    scope.orders.forEach(setPaidFlag)\r\n\r\n    // Util\r\n    scope.timestampToDate = function(t) {\r\n      var a = new Date(t)\r\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\r\n      return a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\r\n    }\r\n\r\n    /*\r\n      BULK EDIT\r\n    */\r\n    scope.toggleAll = function() {\r\n      scope.orders.forEach(function(o) {\r\n        o.selected = scope.selectAll\r\n      })\r\n    }\r\n    scope.getSelectedItems = function() {\r\n      return scope.orders.filter(function(o) {\r\n        return o.selected === true\r\n      })\r\n    }\r\n    scope.bulkExport = function() {\r\n\r\n      // If there are no selected items, we export the whole current view\r\n      if (scope.getSelectedItems().length === 0)\r\n        return scope.downloadCSV(scope.orders);\r\n\r\n      scope.downloadCSV(scope.getSelectedItems())\r\n    }\r\n\r\n    scope.bulkJSONExport = function() {\r\n      // If there are no selected items, we export the whole current view\r\n      if (scope.getSelectedItems().length === 0)\r\n        return $utils.exportAsJSON(scope.orders);\r\n\r\n      $utils.exportAsJSON(scope.getSelectedItems());\r\n    }\r\n\r\n    scope.bulkUpdateStatus = function(status) {\r\n\r\n      if (!status)\r\n        status = scope.bulkStatusChange;\r\n\r\n\r\n      var defer = $q.defer()\r\n\r\n      var promises = []\r\n\r\n      scope.getSelectedItems()\r\n        .forEach(function(order) {\r\n          promises.push($marketcloud.orders.update(order.id, {\r\n            status: status\r\n          }))\r\n        })\r\n\r\n      $q.all(promises)\r\n        .then(function() {\r\n          notie.alert(1, 'All orders have been updated', 1.5)\r\n          scope.loadPage(scope.pagination.currentPage)\r\n        })\r\n\r\n      return defer.promise\r\n    }\r\n\r\n    scope.bulkDelete = function() {\r\n      /*notie.confirm('Delete ' + scope.getSelectedItems().length + ' orders?', 'Delete', 'Cancel', function() {*/\r\n      window.Alert.confirm({\r\n        title: 'Delete ' + scope.getSelectedItems().length + ' orders?',\r\n        message: 'Deleted orders cannot be recovered. Do you want to continue?',\r\n        onConfirm: function() {\r\n\r\n\r\n          var defer = $q.defer()\r\n\r\n          var promises = []\r\n\r\n          scope.getSelectedItems().forEach(function(order) {\r\n            promises.push($marketcloud.orders.delete(order.id))\r\n          })\r\n\r\n          $q.all(promises)\r\n            .then(function() {\r\n              notie.alert(1, 'All orders have been deleted', 1.5)\r\n              scope.loadPage(scope.pagination.currentPage)\r\n            })\r\n\r\n          return defer.promise\r\n        }\r\n      })\r\n    }\r\n\r\n    function jsonToCsv(json) {\r\n      // Questo non va bene, i fields devono essere l'unione di\r\n      // campi dell'ordine e campi dei prodotti\r\n      // perchè csv è un formato di merda\r\n      var order_fields = [\r\n        'id',\r\n        'created_at',\r\n        'status',\r\n        'total',\r\n        'items_total',\r\n        'shipping_total',\r\n        'taxes_total',\r\n        // shipping address\r\n        'shipping_address_email',\r\n        'shipping_address_full_name',\r\n        'shipping_address_country',\r\n        'shipping_address_city',\r\n        'shipping_address_address1',\r\n        'shipping_address_state',\r\n        'shipping_address_postal_code',\r\n        // billing address\r\n        'billing_address_email',\r\n        'billing_address_full_name',\r\n        'billing_address_country',\r\n        'billing_address_city',\r\n        'billing_address_address1',\r\n        'billing_address_state',\r\n        'billing_address_postal_code',\r\n        // Products\r\n        'product_name',\r\n        'product_id',\r\n        'product_price',\r\n        'product_price_discount',\r\n        'product_weight',\r\n        'product_depth',\r\n        'product_width',\r\n        'product_height',\r\n        'variant_name_1',\r\n        'variant_value_1',\r\n        'variant_name_2',\r\n        'variant_value_2',\r\n        'variant_name_3',\r\n        'variant_value_3',\r\n        'variant_name_4',\r\n        'variant_value_4',\r\n        'variant_name_5',\r\n        'variant_value_5'\r\n      ]\r\n\r\n      // var fields = Object.keys(json[0]);\r\n      var fields = order_fields\r\n\r\n      var csv = json.map(function(row) {\r\n        return fields.map(function(fieldName) {\r\n          return JSON.stringify(row[fieldName] || '')\r\n        })\r\n      })\r\n      csv.unshift(fields) // add header column\r\n      return csv.join('\\r\\n')\r\n    }\r\n\r\n    scope.downloadCSV = function(array_to_download) {\r\n      // Here we will push order lines and product lines\r\n      var to_transform = []\r\n\r\n      // For each order we add\r\n      // order id\r\n      array_to_download.forEach(function(order) {\r\n        var order_data = {\r\n          'items_total': order.items_total,\r\n          'shipping_total': order.shipping_total,\r\n          'taxes_total': order.taxes_total,\r\n          'total': order.total,\r\n          'created_at': new Date(order.created_at),\r\n          'status': order.status,\r\n          'id': order.id\r\n        }\r\n\r\n        // Adding flattened shipping address\r\n        for (var ks in order.shipping_address) {\r\n          order_data['shipping_address_' + ks] = order.shipping_address[ks]\r\n        }\r\n        for (var kb in order.billing_address) {\r\n          order_data['billing_address_' + kb] = order.billing_address[kb]\r\n        }\r\n\r\n        to_transform.push(order_data)\r\n\r\n        // Ora per ogni prodotto aggiungo una riga, prima però devo estendere le chiavi dell'ordine\r\n        var product_props = [\r\n          'name',\r\n          'id',\r\n          'price',\r\n          'price_discount',\r\n          'weight',\r\n          'depth',\r\n          'width',\r\n          'height'\r\n        ]\r\n        order.products.forEach(function(product) {\r\n          // Prima prendiamo i dati del parent\r\n          // Poi, se ha varianti\r\n          // prendiamo i dati di variante che sovrascrivono quelli del parent\r\n          // (ad esempio un price diverso perchè la maglietta verde costa diverso)\r\n          // e poi prendiamo le proprietà strutturali della variante e le assegnamo\r\n          // alloggetto in forma di variant_name_1 variant_value_1\r\n\r\n          var prod_data = {\r\n\r\n          }\r\n          product_props.forEach(function(prop) {\r\n              prod_data['product_' + prop] = product[prop]\r\n            })\r\n            // Ho aggiunto le proprietà di base, ora devo aggiungere le varianti\r\n            // solo se il prodotto le ha.\r\n\r\n          if (product.has_variants === true) {\r\n            // Gli attributi base, possono essere sovrascritti\r\n            product_props.forEach(function(prop) {\r\n                if (product.variant.hasOwnProperty(prop)) {\r\n                  prod_data['product_' + prop] = product.variant[prop]\r\n                }\r\n              })\r\n              // Gli attributi varianti\r\n            var variants_counter = 1\r\n            for (var variant_name in product.variantsDefinition) {\r\n              prod_data['variant_name_' + variants_counter] = variant_name\r\n              prod_data['variant_value_' + variants_counter] = product.variant[variant_name]\r\n              variants_counter++\r\n            }\r\n          }\r\n\r\n          to_transform.push(prod_data)\r\n        })\r\n      })\r\n\r\n      buildDownload(to_transform)\r\n    }\r\n\r\n    function buildDownload(data) {\r\n      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + jsonToCsv(data))\r\n      var link = document.createElement('a')\r\n      link.setAttribute('href', encodedUri)\r\n      link.setAttribute('download', 'exported_orders.csv')\r\n      document.body.appendChild(link) // Required for FF\r\n\r\n      link.click() // This will download the data file named \"my_data.csv\".\r\n    }\r\n\r\n    scope.nullOrUndefined = function(value) {\r\n      return (value === null || typeof value === 'undefined')\r\n    }\r\n\r\n\r\n    scope.loadPage = function(page_number) {\r\n      scope.query.page = Number(page_number)\r\n      return scope.loadData(scope.query)\r\n    }\r\n\r\n    scope.loadData = function(query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n\r\n\r\n      return $marketcloud.orders.list(query)\r\n        .then(function(response) {\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n\r\n          scope.orders = response.data.data;\r\n\r\n          scope.orders.forEach(setPaidFlag)\r\n\r\n          // This little trick allows us to get back to the latest state of the view when we hit a back button.\r\n          window.history.pushState(scope.query, \"List orders\", '#/orders?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n\r\n    scope.deleteOrder = function(order) {\r\n      notie.confirm('Delete order?<p>Deleting the order, inventory quantities will be re-assigned.</p>', 'Delete', 'Cancel', function() {\r\n        $marketcloud.orders.delete(order.id)\r\n          .then(function() {\r\n            notie.alert(1, 'Order deleted succesfully', 1)\r\n            scope.loadPage(scope.pagination.currentPage)\r\n          })\r\n          .catch(function() {\r\n            notie.alert(3, 'An error has occurred, order not deleted.', 1)\r\n          })\r\n      })\r\n    }\r\n\r\n\r\n    /* FILTERS */\r\n    scope.filters = [];\r\n\r\n    var notFilters = [\r\n      'per_page',\r\n      'page',\r\n      'sort_by',\r\n      'sort_order'\r\n    ]\r\n\r\n    function isOperator(key) {\r\n      return notFilters.indexOf(key) >= 0\r\n    };\r\n\r\n\r\n    for (var k in scope.query) {\r\n      if (!isOperator(k)) {\r\n        console.log(k + \" is not an operator\")\r\n        scope.filters.push({\r\n          name: k,\r\n          value: scope.query[k]\r\n        })\r\n      }\r\n    }\r\n\r\n    scope.applyFilters = function() {\r\n\r\n      scope.filters.forEach(function(filter) {\r\n        scope.query[filter.name] = filter.value;\r\n      })\r\n      scope.loadData();\r\n    }\r\n\r\n    scope.saveNewFilterAndApply = function() {\r\n\r\n      scope.addFilter(scope.newFilter);\r\n\r\n      scope.newFilter = {\r\n        name: '',\r\n        value: null\r\n      }\r\n      $('#singleFilterModal').modal('hide');\r\n    }\r\n\r\n    scope.addFilter = function(key,value) {\r\n      \r\n      if (\"object\" === typeof key)\r\n        this.filters.push(key);\r\n      else if (\"string\" === typeof key)\r\n        this.filters.push({\r\n          name : key,\r\n          value : value\r\n        })\r\n      else \r\n        throw new Error(\"addFilter(Filter: f) or addFilter(String: fName, Any: fValue)\")\r\n\r\n      scope.applyFilters();\r\n    }\r\n\r\n    /*\r\n     *  @param {Number} index The position of the filter to remove\r\n     *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\r\n     */\r\n    scope.removeFilter = function(index, applyToQuery) {\r\n      if (typeof applyToQuery === 'undefined') {\r\n        applyToQuery = true\r\n      }\r\n\r\n      var filterToRemove = scope.filters.splice(index, 1)\r\n\r\n      filterToRemove = filterToRemove[0]\r\n\r\n      delete scope.query[filterToRemove.name]\r\n\r\n      if (applyToQuery === true) {\r\n        scope.applyFilters()\r\n      }\r\n    }\r\n\r\n\r\n    // Removes a filter given its name in the filters array\r\n    scope.removeFilterByName = function(name) {\r\n      scope.filters = scope.filters.filter(function(filter) {\r\n        return filter.name !== name;\r\n      })\r\n\r\n      delete scope.query[name];\r\n\r\n      scope.applyFilters();\r\n\r\n    }\r\n\r\n    scope.removeFilterByPosition = function(pos){\r\n      scope.filters.splice(pos,1);\r\n      scope.applyFilters();\r\n    }\r\n\r\n\r\n    scope.setQueryParam = function(key,value) {\r\n      scope.query[key] = value;\r\n      scope.loadData();\r\n    }\r\n\r\n    scope.deleteQueryParam = function(key) {\r\n      delete scope.query[key];\r\n      scope.loadData();\r\n    }    \r\n\r\n\r\n    scope.sortingAttributes = [\r\n      'id',\r\n      'status',\r\n      'created_at',\r\n      'total',\r\n      'items_total',\r\n      'shipping_total',\r\n      'taxes_total',\r\n      'coupon_total',\r\n      'promotion_total'\r\n    ]\r\n\r\n    scope.applySorting = function() {\r\n      scope.loadData()\r\n        //$(\"#sortingModal\").modal('hide');\r\n    }\r\n\r\n\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.list.js","var app = angular.module('DataDashboard')\r\napp.controller('NewOrderController', ['$scope', '$marketcloud',\r\n  function (scope, marketcloud) {\r\n    scope.order = {\r\n      items: []\r\n    }\r\n\r\n    scope.products = [\r\n\t\t\t{name: 'Scolapasta', price: 12},\r\n\t\t\t{name: 'Cucchiaio', price: 1},\r\n\t\t\t{name: 'Forchetta', price: 2}\r\n    ]\r\n\r\n    scope.saveOrder = function () {\r\n      console.log('Saving this order', scope.order)\r\n    }\r\n\r\n\t\t\t// Shows/hide modal for products\r\n    scope.toggleProductsModal = function () {\r\n      console.log('Showing products modal')\r\n      $('#itemsModal').modal('show')\r\n    }\r\n\r\n\t\t\t// loads some products from backend\r\n    scope.loadInventory = function (query) {\r\n      console.log('Loading inventory', query)\r\n    }\r\n\r\n\t\t\t// Adds a line item to the order\r\n    scope.addItemToOrder = function (item) {\r\n      console.log('Item added to order', item)\r\n    }\r\n\r\n\t\t\t// loads some addresses from backend\r\n    scope.loadAddresses = function (query) {\r\n      console.log('Loading addresses', query)\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.new.js","var app = angular.module('DataDashboard')\r\napp.controller('OrderController', ['$scope', '$http', 'order', 'shippingMethods', '$marketcloud', 'paymentMethods', 'Countries',\r\n  function (scope, http, order, shippingMethods, $marketcloud, paymentMethods, countries) {\r\n    scope.paymentMethods = paymentMethods.data.data\r\n    scope.countries = countries\r\n    // Data fetched by the resolve\r\n    scope.order = order.data.data\r\n    scope.products = [];\r\n    scope.itemsToAdd = [];\r\n\r\n    scope.addressToEdit = {}\r\n\r\n    // List of shipping methods\r\n    // @property Array<Object>\r\n    scope.shippingMethods = shippingMethods.data.data\r\n\r\n    // New shipment\r\n    scope.newShipment = {\r\n      tracking_code: null,\r\n      tracking_link: null,\r\n      date: new Date(),\r\n      delivery_date: new Date(),\r\n      method: null,\r\n      description: null\r\n    }\r\n    scope.saveShipmentAndFullfill = false\r\n\r\n    // New payment\r\n    scope.newPayment = {\r\n      method: 'Manual',\r\n      description: null,\r\n      amount: scope.order.total\r\n    }\r\n    scope.savePaymentAndSetToProcessing = false\r\n\r\n    scope.payments = []\r\n\r\n    scope.showEditAddressDialog = function (addressToEdit) {\r\n      scope.addressToEdit = addressToEdit\r\n      $('#editAddressModal').modal('show')\r\n    }\r\n\r\n    scope.onUpdateOrder = function () {\r\n      $marketcloud.orders.update(scope.order.id, scope.order)\r\n      .then(function (res) {\r\n        notie.alert(1, 'Order successfully updated', 1.5);\r\n        scope.order = res.data.data;\r\n        scope.addingProduct = false;\r\n        scope.editingOrder = false;\r\n      });\r\n    }\r\n\r\n    scope.editOrder = function () {\r\n      scope.editingOrder = true;\r\n    }\r\n\r\n    scope.onRemoveItemFromOrder = function (idx) {\r\n      console.log(idx);\r\n      var product = scope.order.products[idx];\r\n      notie.confirm('Are you sure you want to remove ' + product.name + '?', 'Yes, remove.', ' No.', function () {\r\n        scope.$apply(function() {\r\n          scope.order.items.splice(idx, 1);\r\n          scope.order.products.splice(idx, 1);\r\n        });\r\n      });\r\n    }\r\n\r\n    scope.query = {};\r\n\r\n    scope.onAddProduct = function () {\r\n      scope.addingProduct = true;\r\n    }\r\n\r\n    scope.onCloseAddingProduct = function () {\r\n      scope.addingProduct = false;\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n            .filter(function(item) {\r\n              return scope.itemsToAdd\r\n                .map(function(i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.addProduct = function (product) {\r\n      product.quantity = 1;\r\n\r\n      if (product.has_variants) {\r\n        product.selectedVariant = {};\r\n        Object.keys(product.variantsDefinition).forEach(function (k) {\r\n          product.selectedVariant[k] = product.variantsDefinition[k][0]\r\n        })\r\n      }\r\n\r\n      scope.order.items.push({\r\n        product_id: product.id,\r\n        quantity: product.quantity,\r\n        variant_id: product.has_variants ? 1 : null\r\n      });\r\n      scope.order.products.push(product);\r\n      scope.query.name.$regex = '';\r\n      scope.products = [];\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    scope.saveAddress = function () {\r\n      $marketcloud.orders.update(scope.order.id, {\r\n        billing_address: scope.order.billing_address,\r\n        shipping_address: scope.order.shipping_address\r\n      })\r\n          .then(function () {\r\n            notie.alert(1, 'Order successfully updated', 1.5)\r\n            $('#editAddressModal').modal('hide')\r\n          })\r\n          .catch(function () {\r\n            notie.alert(2, 'An error has occurred, order not updated', 1.5)\r\n            $('#editAddressModal').modal('hide')\r\n          })\r\n    }\r\n      /* scope.order = null;\r\n\r\n      scope.loadingData = true; */\r\n\r\n    // Checking shipment dates\r\n    function assignDataToShipments () {\r\n      if (Array.isArray(scope.order.shipments)) {\r\n        scope.order.shipments = scope.order.shipments.map(function (shipment) {\r\n          if (shipment.date) {\r\n            shipment.date = moment(shipment.date)\r\n          }\r\n          if (shipment.delivery_date) {\r\n            shipment.delivery_date = moment(shipment.delivery_date)\r\n          }\r\n\r\n          if (shipment.method) {\r\n            scope.shippingMethods.forEach(function (method) {\r\n              if (shipment.method.id === method.id) {\r\n                shipment.method = method\r\n              }\r\n            })\r\n          }\r\n\r\n          return shipment\r\n        })\r\n      }\r\n    }\r\n\r\n    assignDataToShipments()\r\n\r\n    scope.refundedProducts = []\r\n\r\n    if (scope.order.refunds) {\r\n      scope.order.refunds.forEach(function (refund) {\r\n        refund.line_items.forEach(function (item) {\r\n          scope.refundedProducts.push(item)\r\n        })\r\n      })\r\n    }\r\n\r\n    function getLineItemPrice (lineItem) {\r\n      if (lineItem.variant) {\r\n        if (lineItem.variant.price_discount) { return lineItem.variant.price_discount * lineItem.quantity } else { return lineItem.variant.price * lineItem.quantity }\r\n      } else {\r\n        if (lineItem.price_discount) { return lineItem.price_discount * lineItem.quantity } else { return lineItem.price * lineItem.quantity }\r\n      }\r\n    }\r\n\r\n    function getLineItemTaxes (lineItem) {\r\n      var price = getLineItemPrice(lineItem)\r\n      var tax_rate = lineItem.applied_tax_rate\r\n\r\n      return ((tax_rate / 100) * price) * lineItem.quantity\r\n    }\r\n\r\n    scope.showRefundModal = function () {\r\n      scope.newRefund = {\r\n        created_at: new Date(),\r\n        reason: '',\r\n        line_items: [],\r\n        items_total: 0,\r\n        taxes_total: 0,\r\n        total: 0,\r\n        restock_refunded_items: false\r\n      }\r\n\r\n      scope.newRefund.line_items = scope.order.products.map(function (product) {\r\n        var p = angular.copy(product)\r\n        p.quantityInOrder = product.quantity\r\n\r\n        p.product_id = product.id\r\n\r\n        p.variant_id = 0\r\n\r\n        if (p.hasOwnProperty('variant')) { p.variant_id = p.variant.id }\r\n\r\n        return p\r\n      })\r\n\r\n      scope.updateNewRefund()\r\n\r\n      $('#RefundModal').modal('show')\r\n    }\r\n\r\n    scope.saveRefund = function () {\r\n      scope.refundErrorMessage = ''\r\n\r\n      scope.newRefund.line_items = scope.newRefund.line_items.filter(function (item) {\r\n        return item.quantity > 0\r\n      })\r\n\r\n      if (scope.newRefund.total <= 0) {\r\n        scope.refundErrorMessage = 'Refund total must be greater than zero.'\r\n        return\r\n      }\r\n\r\n      $marketcloud.refunds.save(scope.order.id, scope.newRefund)\r\n        .then(function (response) {\r\n          $('#RefundModal').modal('hide')\r\n          window.Alert.success({\r\n            message: 'Refund saved successfully!'\r\n          })\r\n        })\r\n        .catch(function (response) {\r\n          scope.refundErrorMessage = 'Unable to create refund. Please review the inserted data.'\r\n        })\r\n    }\r\n\r\n    scope.updateNewRefund = function () {\r\n      scope.newRefund.items_total = 0\r\n      scope.newRefund.taxes_total = 0\r\n\r\n      scope.newRefund.line_items.forEach(function (item) {\r\n        scope.newRefund.items_total += getLineItemPrice(item)\r\n        scope.newRefund.taxes_total += getLineItemTaxes(item)\r\n      })\r\n\r\n      scope.newRefund.total = scope.newRefund.items_total + scope.newRefund.taxes_total\r\n      console.log('updateNewRefund ' + scope.newRefund.total)\r\n    }\r\n\r\n    scope.getVariantStyle = function (i) {\r\n      var r = [{\r\n        'color': '#c0392b'\r\n      }, {\r\n        'color': '#27ae60'\r\n      }, {\r\n        'color': '#2c3e50'\r\n      }, {\r\n        'color': '#d35400'\r\n      }]\r\n      return r[i % r.length]\r\n    }\r\n    scope.getVariantClass = function (i) {\r\n      var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger']\r\n      return 'label solid ' + (classes[i % classes.length])\r\n    }\r\n    scope.getSelectedVariantValues = function (p) {\r\n      var temp = {}\r\n      Object.keys(p.variantsDefinition)\r\n        .forEach(function (k) {\r\n          temp[k] = p.variant[k]\r\n        })\r\n      return temp\r\n    }\r\n\r\n    scope.getSelectedVariantKeysAndValues = function (p) {\r\n      var temp = {}\r\n      Object.keys(p.variantsDefinition)\r\n        .forEach(function (k) {\r\n          temp[k] = k + ': ' + String(p.variant[k])\r\n        })\r\n      return temp\r\n    }\r\n\r\n    scope.updateSelectedVariantForProduct = function (idx, key, value) {\r\n      var selectedVariantData = scope.order.products[idx].selectedVariant\r\n\r\n\r\n      var productVariants = scope.order.products[idx].variants\r\n\r\n      var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData)\r\n\r\n      scope.order.items[idx].variant_id = selectedVariant.variant_id\r\n    }\r\n\r\n    var findObjectWithKeyValue = function (array, object) {\r\n      var current = array\r\n      var result\r\n\r\n      Object.keys(object).forEach(function (k) {\r\n        var value = object[k]\r\n\r\n        current = current.filter(function (val) {\r\n          return val[k] === value\r\n        })\r\n\r\n        if (current.length === 1) {\r\n          result = current[0]\r\n        }\r\n      })\r\n\r\n      return result\r\n    }\r\n\r\n    // delete scope.order['items']\r\n\r\n    scope.updateStatus = function (status) {\r\n      scope.order.status = status\r\n      $marketcloud.orders.update(scope.order.id, {\r\n        status: scope.order.status\r\n      })\r\n        .then(function (response) {\r\n          notie.alert(1, 'Order successfully updated', 1)\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(2, 'An error has occurred. Please try again.', 1)\r\n        })\r\n    }\r\n\r\n    // Util\r\n    scope.timestampToDate = function (t, showHours) {\r\n      var a = new Date(t)\r\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\r\n      var the_date = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\r\n\r\n      if (showHours === true) {\r\n        the_date += ' at ' + a.getHours() + ':' + a.getMinutes()\r\n      }\r\n\r\n      return the_date\r\n    }\r\n\r\n    function syntaxHighlight (json) {\r\n      if (typeof json !== 'string') {\r\n        json = JSON.stringify(json, null, 2)\r\n      }\r\n\r\n      json = json.replace(/&/g, '&amp;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;')\r\n        .replace(new RegExp('\\n', 'g'), '<br>')\r\n        .replace(new RegExp('\\t'), '&nbsp;&nbsp;')\r\n      return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\r\n        var cls = 'number'\r\n        if (/^\"/.test(match)) {\r\n          if (/:$/.test(match)) {\r\n            cls = 'key'\r\n          } else {\r\n            cls = 'string'\r\n          }\r\n        } else if (/true|false/.test(match)) {\r\n          cls = 'boolean'\r\n        } else if (/null/.test(match)) {\r\n          cls = 'null'\r\n        }\r\n        return '<span class=\"' + cls + '\">' + match + '</span>'\r\n      })\r\n    }\r\n    scope.inspectObject = function (p) {\r\n      scope.json = syntaxHighlight(p)\r\n      $('#JsonInspector').modal('show')\r\n    }\r\n\r\n    scope.round = function (numb) {\r\n      return Math.round(numb * 1000) / 1000\r\n    }\r\n\r\n    scope.fullfill = function () {\r\n      // Sets the order to completed\r\n      notie.confirm('This will set the order as completed, and eventually send notifications. Confirm?',\r\n        'Confirm',\r\n        'Cancel',\r\n        function () {\r\n          $marketcloud.orders.update(scope.order.id, {\r\n            status: 'completed'\r\n          })\r\n            .then(function (response) {\r\n              scope.order.status = 'completed'\r\n              notie.alert(1, 'Order successfully updated', 1)\r\n            })\r\n            .catch(function (response) {\r\n              notie.alert(2, 'An error has occurred. Please try again.', 1)\r\n            })\r\n        })\r\n    }\r\n\r\n    scope.setToProcessing = function () {\r\n      // Sets the order to processing\r\n      window.Alert.confirm({\r\n        title: 'Confirm order status update?',\r\n        message: 'This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\r\n        onConfirm: function () {\r\n          $marketcloud.orders.update(scope.order.id, {\r\n            status: 'processing'\r\n          })\r\n              .then(function (response) {\r\n                scope.order.status = 'processing'\r\n                window.Alert.success({\r\n                  message: 'Order successfully updated'\r\n                })\r\n              })\r\n              .catch(function (response) {\r\n                window.Alert.error({})\r\n              })\r\n        }\r\n      })\r\n        /*      notie.confirm('This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\r\n                'Confirm',\r\n                'Cancel',\r\n                function() {\r\n                  $marketcloud.orders.update(scope.order.id, {\r\n                      status: 'processing'\r\n                    })\r\n                    .then(function(response) {\r\n                      scope.order.status = 'processing'\r\n                      notie.alert(1, 'Order successfully updated', 1)\r\n                    })\r\n                    .catch(function(response) {\r\n                      notie.alert(2, 'An error has occurred. Please try again.', 1)\r\n                    })\r\n                }) */\r\n    }\r\n\r\n    scope.updateShipmentUrl = function () {\r\n      var trackingCode = scope.newShipment.tracking_code\r\n      var shipmetUrlStructures = {\r\n        gls: `http://online.gls-slovenia.com/tt_page.php?tt_value=${trackingCode}`,\r\n        postaSlovenije: `http://sledenje.posta.si/Default.aspx?tn=${trackingCode}&guid=577712B3-9D04&lang=sl`\r\n      }\r\n\r\n      if (scope.shipmentURIPreset) {\r\n        if (scope.shipmentURIPreset === 'gls') {\r\n          scope.newShipment.tracking_link = shipmetUrlStructures.gls\r\n        } else if (scope.shipmentURIPreset === 'postaSlovenije') {\r\n          scope.newShipment.tracking_link = shipmetUrlStructures.postaSlovenije\r\n        }\r\n      } else {\r\n        scope.newShipment.tracking_link = ''\r\n        scope.newShipment.tracking_code = ''\r\n      }\r\n    }\r\n\r\n    scope.saveShipment = function () {\r\n      // Removing all validation feedback from the shipment\r\n      $('#shipmentModal .has-error').removeClass('has-error')\r\n      $('#shipmentModal .error').remove()\r\n\r\n      // Validating the new shipment\r\n      if (scope.newShipment.method === null) {\r\n        if (scope.order.shipping) {\r\n          scope.newShipment.method = scope.order.shipping\r\n        } else {\r\n          $('select[ng-model=\"newShipment.method\"]').parent().addClass('has-error')\r\n          $('select[ng-model=\"newShipment.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'))\r\n          return\r\n        }\r\n      }\r\n\r\n      if (scope.newShipment.date) { scope.newShipment.date = new Date(scope.newShipment.date) }\r\n\r\n      if (scope.newShipment.delivery_date) { scope.newShipment.delivery_date = new Date(scope.newShipment.delivery_date) }\r\n\r\n      var shipmentToSave = angular.copy(scope.newShipment)\r\n\r\n      // Saving the new shipment\r\n      http({\r\n        method: 'POST',\r\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments',\r\n        data: shipmentToSave,\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n        .then(function (response) {\r\n          // Resetting the shipment\r\n          scope.newShipment = {\r\n            tracking_code: null,\r\n            tracking_link: null,\r\n            date: new Date(),\r\n            delivery_date: new Date(),\r\n            method: null,\r\n            description: null\r\n          }\r\n          if (scope.order.shipments) {\r\n            scope.order.shipments.push(shipmentToSave)\r\n          } else {\r\n            scope.order.shipments = [shipmentToSave]\r\n          }\r\n\r\n          $('#shipmentModal').modal('hide')\r\n\r\n          if (scope.saveShipmentAndFullfill === true) {\r\n            scope.fullfill()\r\n          }\r\n\r\n          assignDataToShipments()\r\n        })\r\n        .catch(function (response) {\r\n          // $('#shipmentModal').modal('hide')\r\n          notie.alert(2, 'An error has occurred, please check your input', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.updateShipment = function () {\r\n      // Removing all validation feedback from the shipment\r\n      $('#esitShipmentModal .has-error').removeClass('has-error')\r\n      $('#editShipmentModal .error').remove()\r\n\r\n      // Validating the new shipment\r\n      if (scope.shipmentToEdit.method === null) {\r\n        $('select[ng-model=\"shipmentToEdit.method\"]').parent().addClass('has-error')\r\n        $('select[ng-model=\"shipmentToEdit.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'))\r\n        return\r\n      }\r\n\r\n      var shipmentToSave = angular.copy(scope.shipmentToEdit)\r\n\r\n      if (shipmentToSave.date && shipmentToSave.date.toDate) {\r\n        shipmentToSave.date = shipmentToSave.date.toDate()\r\n        // scope.shipmentToEdit.date = new Date(scope.shipmentToEdit.date)\r\n      }\r\n\r\n      if (shipmentToSave.delivery_date && shipmentToSave.delivery_date.toDate) {\r\n        // scope.shipmentToEdit.delivery_date = new Date(scope.shipmentToEdit.delivery_date)\r\n        shipmentToSave.delivery_date = shipmentToSave.delivery_date.toDate()\r\n      }\r\n\r\n      http({\r\n        method: 'PUT',\r\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments/' + scope.shipmentToEditIndex,\r\n        data: shipmentToSave,\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        scope.shipmentToEdit = {}\r\n        $('#editShipmentModal').modal('hide')\r\n        notie.alert(1, 'Shipment updated', 1.5)\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error)\r\n        notie.alert(2, 'An error has occurred, please check your input', 1.5)\r\n      })\r\n    }\r\n\r\n    scope.showShipmentModal = function () {\r\n      $('#shipmentModal').modal('show')\r\n    }\r\n\r\n    scope.showEditShipmentModal = function (shipment, index) {\r\n      scope.shipmentToEdit = shipment\r\n      scope.shipmentToEditIndex = index\r\n\r\n      $('#editShipmentModal').modal('show')\r\n    }\r\n\r\n    scope.showPaymentModal = function () {\r\n      $('#paymentModal').modal('show')\r\n    }\r\n\r\n    scope.orderToCSV = function () {\r\n\r\n    }\r\n\r\n    scope.createPDFInvoice = function () {\r\n      if (!scope.order.invoice_id) { return console.log('Order withouth invoice') }\r\n\r\n      http({\r\n        method: 'POST',\r\n        url: window.API_BASE_URL + '/invoices/' + scope.order.invoice_id + '/pdf',\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        var invoiceUrl = response.data.data.url\r\n        Object.assign(document.createElement('a'), { target: '_blank', href: invoiceUrl}).click()\r\n      })\r\n      .catch(function (error) {\r\n        alert('error')\r\n        console.log(error)\r\n      })\r\n    }\r\n\r\n    scope.createPDFCreditNote = function (refund) {\r\n      http({\r\n        method: 'POST',\r\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/refunds/' + refund.id + '/pdf',\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        var refundUrl = response.data.data.url\r\n        Object.assign(document.createElement('a'), { target: '_blank', href: refundUrl}).click()\r\n      })\r\n      .catch(function (error) {\r\n        alert('error')\r\n        console.log(error)\r\n      })\r\n    }\r\n\r\n    scope.savePayment = function () {\r\n      http({\r\n        method: 'POST',\r\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/payments',\r\n        data: scope.newPayment,\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n        .then(function (response) {\r\n          $('#paymentModal').modal('hide')\r\n          notie.alert(1, 'Payment saved', 1.5)\r\n            // var orderPayments = response.data.data.payments\r\n          scope.order.payments = response.data.data.payments\r\n\r\n          scope.newPayment = {}\r\n\r\n          if (scope.savePaymentAndSetToProcessing === true) {\r\n            scope.setToProcessing()\r\n          }\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n          $('#paymentModal').modal('hide')\r\n        })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.view.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditProductTranslationsController', EditProductTranslationsController)\r\n\r\n  EditProductTranslationsController.$inject = [\r\n    '$scope',\r\n    '$marketcloud',\r\n    'product',\r\n    '$http',\r\n    '$application',\r\n    '$location',\r\n    'LocalesFactory'\r\n  ]\r\n\r\n  function EditProductTranslationsController(scope, $marketcloud, product, $http, $application, $location, locales) {\r\n    // If the current application does not have additional locales\r\n    // we redirect the user to the locales settings.\r\n    //\r\n    // We might want to prompt the user and ask them\r\n    // Go to settings or stay in the previous page?\r\n    if ($application.getAvailableLocaleCodes().length === 0) {\r\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\r\n      return $location.path('/system/localization')\r\n    }\r\n\r\n    // Injecting resolve data into the controller\r\n    scope.product = product.data.data\r\n\r\n    // This is fetched from the app's config\r\n    scope.availableLocales = []\r\n\r\n    // mocking the retrieval of locales\r\n    // THese are ALL the locals available in the world\r\n    scope.locales = locales\r\n\r\n    // available locales\r\n    // Fetched from app settings,\r\n    // THese are the locals that the store owner wants for this app.\r\n    scope.availableLocales = []\r\n\r\n    scope.availableLocales = $application.get().locales.split(',')\r\n      .map(function(code) {\r\n        return scope.locales[code]\r\n      })\r\n\r\n    // Which locale we are currently editing\r\n    // We already know that we have at least 1 locale\r\n    scope.currentLocale = scope.availableLocales[0]\r\n\r\n    // This will hold custom properties for further processing\r\n    scope.customPropertiesData = {}\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Product.getPropertyNames()\r\n\r\n    // Should we be able to edit the slug? this is a on/off\r\n    scope.unsafeSlug = false\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'variants',\r\n      'variantsDefinition',\r\n      'display_price_discount',\r\n      'display_price',\r\n      'has_variants', // for legacy reasons\r\n      'type',\r\n      'media',\r\n      'tax_id',\r\n      'locales',\r\n      'seo',\r\n      'requires_shipping',\r\n      'product_id',\r\n      'variant_id',\r\n      'application_id')\r\n\r\n    for (var k in scope.product) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.product[k]\r\n        delete scope.product[k]\r\n      }\r\n    }\r\n\r\n    // Handling variants\r\n    // The locale will look like this\r\n    /*\r\n      {\r\n        locales : {\r\n          \"it-IT\" : {\r\n            ..\r\n            variants : {\r\n              colors : {\r\n                label : \"colori\",\r\n                values: {\r\n                  \"red\"  : \"rosso\",\r\n                  \"yellow\" : \"giallo\"\r\n                  ...\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    */\r\n\r\n    if (product.type === 'product_with_variants') {\r\n      for (var localeName in scope.product.locales) {\r\n        var locale = scope.product.locales[localeName]\r\n        if (!locale.hasOwnProperty('variants')) {\r\n          // Let's initialize the variants in the locale!\r\n          locale.variants = {}\r\n\r\n          for (v_name in scope.product.variantsDefinition) {\r\n            // We want to initialize the values translation table\r\n            var variant_values_translations = {}\r\n            var variant_values = scope.product.variantsDefinition[v_name]\r\n            variant_values.forEach(function(v) {\r\n              variant_values_translations[v] = ''\r\n            })\r\n            locale.variants[v_name] = {\r\n              label: '',\r\n              values: variant_values_translations\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Init locales object\r\n    if (!scope.product.hasOwnProperty('locales')) {\r\n      scope.product.locales = {}\r\n    }\r\n\r\n    scope.customPropertiesDataLocales = {}\r\n\r\n    // Checking that the product has initialized every locale sub object\r\n    scope.availableLocales.forEach(function(locale) {\r\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\r\n      if (!scope.product.locales.hasOwnProperty(locale.code)) {\r\n        scope.product.locales[locale.code] = {}\r\n      }\r\n\r\n      // Initializing the container for custom properties translations\r\n      scope.customPropertiesDataLocales[locale.code] = {}\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.customPropertiesDataLocales[locale.code][k] = getTranslatedValueForCustomProperty(k, locale)\r\n      }\r\n\r\n      function getTranslatedValueForCustomProperty(k, locale) {\r\n        if (typeof scope.product.locales[locale.code][k] !== 'undefined') {\r\n          return scope.product.locales[locale.code][k]\r\n        }\r\n\r\n        return {\r\n          value: scope.customPropertiesData[k],\r\n          label: k\r\n        }\r\n      }\r\n    })\r\n\r\n    scope.getFlagClassName = function() {\r\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\r\n    }\r\n\r\n    scope.isRichText = function(str) {\r\n      if (typeof str !== 'string')\r\n        return false;\r\n\r\n      var doc = new DOMParser().parseFromString(str, \"text/html\");\r\n      return [].slice.call(doc.body.childNodes).some(function(node) {\r\n        return node.nodeType === 1\r\n      } );\r\n    }\r\n\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n\r\n    scope.updateSlug = function() {\r\n      scope.product.locales[scope.currentLocale.code].slug = getSlugFromString(scope.product.locales[scope.currentLocale.code].name)\r\n    }\r\n\r\n    scope.updateTranslations = function() {\r\n      var payload = {\r\n        locales: angular.copy(scope.product.locales)\r\n      }\r\n\r\n      for (var locale in scope.customPropertiesDataLocales) {\r\n        // Custom properties of locale \"l\"\r\n        var customPropertiesForSingleLocale = scope.customPropertiesDataLocales[locale]\r\n\r\n        for (var k in customPropertiesForSingleLocale) {\r\n          payload.locales[locale][k] = customPropertiesForSingleLocale[k]\r\n        }\r\n      }\r\n\r\n      $marketcloud.products.update(scope.product.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'All updates have been saved.', 2)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.typeof = function(y) {\r\n      return (typeof y)\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/productTranslations.controller.js","angular.module('DataDashboard').controller('EditBundledProductController', ['$scope', '$marketcloud', 'product', '$http',\r\n  function (scope, $marketcloud, product, $http) {\r\n    scope.customPropertiesData = {}\r\n    scope.itemsToAdd = []\r\n    // Injecting resolve data into the controller\r\n    scope.product = product.data.data\r\n    // scope.product.included_products = scope.product.included_products\r\n\r\n    if (!scope.product.hasOwnProperty()) {\r\n      var product_ids = []\r\n    }\r\n\r\n    scope.product.included_products.forEach(function (product, idx) {\r\n      if (product.has_variants) {\r\n        var tempProd = product.variants.find(function (item) {\r\n          return product.selected_variant_id === item.variant_id\r\n        })\r\n        product.selectedVariant = {}\r\n        console.log(product)\r\n        Object.keys(product.variantsDefinition).forEach(function (k) {\r\n          product.selectedVariant[k] = tempProd[k]\r\n        })\r\n      }\r\n    })\r\n\r\n    // Lists is not currenty used\r\n    // scope.product.lists.forEach(function (list) {\r\n    //   var this_list_ids = list.items.map(function (item) {\r\n    //     return item.product_id\r\n    //   })\r\n    //   product_ids = product_ids.concat(this_list_ids)\r\n    // })\r\n\r\n    scope.addProductsCardConfig = {\r\n      additionalFields: []\r\n    }\r\n    scope.addNewList = function () {\r\n      scope.product.lists.unshift({\r\n        name: '',\r\n        required: false,\r\n        items: []\r\n      })\r\n    }\r\n\r\n    scope.removeList = function (index) {\r\n      scope.product.lists.splice(index, 1)\r\n    }\r\n\r\n    scope.showAddProductsToListModal = function (list) {\r\n      scope.currentList = list\r\n      $('#addProductsToListModal').modal('show')\r\n    }\r\n\r\n    $marketcloud.products.list({\r\n      id: product_ids.join(',')\r\n    })\r\n      .then(function (response) {\r\n        var p_map = {}\r\n\r\n        response.data.data.forEach(function (i) {\r\n          p_map[i.id] = i\r\n        })\r\n\r\n        // We fetch the products data, then we must add the properties\r\n        // related to them being in the bundled product\r\n        scope.product.lists.map(function (opt) {\r\n          opt.items = opt.items.map(function (item) {\r\n            return p_map[item.product_id]\r\n          })\r\n          return opt\r\n        })\r\n      })\r\n      .catch(function (error) {\r\n        notie.alert(3, 'An error has occurred', 1.5)\r\n      })\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    // var coreProperties = Models.Product.getPropertyNames()\r\n    // coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'lists')\r\n    // for (var k in scope.product) {\r\n    //   if (coreProperties.indexOf(k) < 0) {\r\n    //     scope.customPropertiesData[k] = scope.product[k]\r\n    //     delete scope.product[k]\r\n    //   }\r\n    // }\r\n\r\n    function getSlugFromString(v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function (item) { return item.replace(/\\W/g, '') })\r\n        .map(function (item) { return item.toLowerCase() })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    scope.categories = []\r\n\r\n    $marketcloud.categories.list()\r\n      .then(function (response) {\r\n        scope.categories = response.data.data\r\n      })\r\n      .catch(function () {\r\n        notie.alert(2, 'An error has occurred while loading categories', 1.5)\r\n      })\r\n\r\n    scope.brands = []\r\n    // Loading brands\r\n\r\n    $marketcloud.brands.list()\r\n      .then(function (response) {\r\n        scope.brands = response.data.data\r\n      })\r\n      .catch(function () {\r\n        notie.alert(2, 'An error has occurred while loading brands', 1.5)\r\n      })\r\n\r\n    scope.newAttribute = {\r\n      name: null,\r\n      value: null,\r\n      type: null\r\n    }\r\n    scope.newAttribute.type = 'string'\r\n    scope.availableTypes = [\r\n      { name: 'String', value: 'string' },\r\n      { name: 'Number', value: 'number' },\r\n      { name: 'Boolean', value: 'boolean' }\r\n    ]\r\n\r\n    scope.filterNotNullProperties = function (item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n\r\n    scope.updateSelectedVariantForProduct = function (idx, key, value) {\r\n      var selectedVariantData = scope.product.included_products[idx].selectedVariant\r\n      var productVariants = scope.product.included_products[idx].variants\r\n\r\n      var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData)\r\n\r\n      scope.product.included_items[idx].variant_id = selectedVariant.variant_id\r\n    }\r\n\r\n    var findObjectWithKeyValue = function (array, object) {\r\n      var current = array\r\n      var result\r\n\r\n      Object.keys(object).forEach(function (k) {\r\n        var value = object[k]\r\n\r\n        current = current.filter(function (val) {\r\n          return val[k] === value\r\n        })\r\n\r\n        if (current.length === 1) {\r\n          result = current[0]\r\n        }\r\n      })\r\n\r\n      return result\r\n    }\r\n\r\n    scope.prepareRegex = function () {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadProducts = function (query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function (response) {\r\n          scope.products = response.data.data\r\n          scope.products\r\n            .filter(function (item) {\r\n              return scope.itemsToAdd\r\n                .map(function (i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.removeProduct = function (idx) {\r\n      scope.product.included_products.splice(idx, 1);\r\n      scope.product.included_items.splice(idx, 1);\r\n    }\r\n\r\n    scope.addProduct = function (product) {\r\n      if (product.type !== 'bundled_product') {\r\n        product.quantity = 1\r\n\r\n        var newProduct = {\r\n          product_id: product.id,\r\n          quantity: product.quantity\r\n        }\r\n\r\n        if (product.has_variants) {\r\n          newProduct.variant_id = 1\r\n        }\r\n\r\n        scope.product.included_items.push(newProduct)\r\n\r\n        if (product.has_variants) {\r\n          product.selectedVariant = {};\r\n          Object.keys(product.variantsDefinition).forEach(function (k) {\r\n            product.selectedVariant[k] = product.variantsDefinition[k][0]\r\n          })\r\n        }\r\n\r\n        scope.product.included_products.push(product)\r\n      } else {\r\n        notie.alert(3, 'You can not include a bundled product in a bundled product.')\r\n      }\r\n\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.updateProduct = function () {\r\n      var update = angular.copy(scope.product)\r\n\r\n      delete update.included_products\r\n      delete update.selectedVariant\r\n      // let's re-assemble the product first.\r\n      for (var k in scope.customPropertiesData) {\r\n        update[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      update.lists.forEach(function (list) {\r\n        list.items = list.items.map(function (item) {\r\n          return { product_id: item.id }\r\n        })\r\n      })\r\n\r\n      $marketcloud.products.update(update.id, update)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Update Succeded', 1.5)\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(3, 'Update failed', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function () {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function () {\r\n      window.setTimeout(function () {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/bundledProduct.edit.js","\r\nangular.module('DataDashboard').controller('NewBundledProductController', [\r\n  '$scope', '$http', '$location', '$marketcloud',\r\n  function (scope, $http, location, $marketcloud) {\r\n    scope.categories = []\r\n    scope.catch = null\r\n    scope.newCategory = {}\r\n    scope.brands = []\r\n    scope.newBrand = {}\r\n    scope.itemsToAdd = []\r\n    scope.selectedProducts = []\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    function getSlugFromString (v) {\r\n      return v\r\n        .split(' ')\r\n        .map(function (item) { return item.replace(/\\W/g, '') })\r\n        .map(function (item) { return item.toLowerCase() })\r\n        .join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    scope.addEmptyVariant = function () {\r\n      console.log('ads')\r\n    }\r\n\r\n    scope.loadCategories = function () {\r\n      $marketcloud.categories.list({})\r\n        .then(function (response) {\r\n          scope.categories = response.data.data\r\n        })\r\n        .catch(function () {\r\n          console.log('An error has occurred while loading categories')\r\n        })\r\n    }\r\n\r\n    // Initializing the categories array\r\n    scope.loadCategories()\r\n\r\n    scope.saveCategory = function () {\r\n      $marketcloud.categories.save(scope.newCategory)\r\n        .then(function (response) {\r\n          $('#newCategoryModal').modal('hide')\r\n          scope.categories.push(scope.newCategory)\r\n          scope.newCategory = {}\r\n        })\r\n        .catch(function (response) {\r\n          $('#newCategoryModal').hide()\r\n          notie.alert(3, 'An error has occurred. Category not saved', 1)\r\n        })\r\n    }\r\n\r\n    scope.loadBrands = function () {\r\n      $marketcloud.brands.list({})\r\n        .then(function (response) {\r\n          scope.brands = response.data.data\r\n        })\r\n        .catch(function () {\r\n          notie.alert(2, 'An error has occurred while loading brands', 1.5)\r\n        })\r\n    }\r\n    // Initializing the brands array\r\n    scope.loadBrands()\r\n\r\n    scope.saveBrand = function () {\r\n      $marketcloud.brands.save(scope.newBrand)\r\n        .then(function (response) {\r\n          $('#newBrandModal').modal('hide')\r\n          scope.brands.push(scope.newBrand)\r\n          scope.newBrand = {}\r\n        })\r\n        .catch(function (response) {\r\n          $('#newBrandModal').hide()\r\n          notie.alert(3, 'An error has occurred. Brand not saved', 1)\r\n        })\r\n    }\r\n\r\n    scope.addProductsCardConfig = {\r\n      additionalFields: []\r\n    }\r\n    scope.addNewList = function () {\r\n      scope.product.lists.unshift({\r\n        name: '',\r\n        required: false,\r\n        items: []\r\n      })\r\n    }\r\n\r\n    scope.removeList = function (index) {\r\n      scope.product.lists.splice(index, 1)\r\n    }\r\n\r\n    scope.showAddProductsToListModal = function (list) {\r\n      scope.currentList = list\r\n      $('#addProductsToListModal').modal('show')\r\n    }\r\n\r\n    scope.product = {\r\n      type: 'bundled_product',\r\n      name: '',\r\n      description: '',\r\n      stock_type: 'status',\r\n      stock_status: 'in_stock',\r\n      included_items: [],\r\n      images: [],\r\n      media: [],\r\n      has_variants: false,\r\n      published: true,\r\n      lists: []\r\n    }\r\n\r\n    scope.productError = null\r\n    scope.newCustomProperty = {}\r\n    scope.customPropertiesData = {}\r\n\r\n    // This contains validation Errors\r\n    scope.Forms = {}\r\n\r\n    scope.Forms.newCustomProperty = {\r\n      name: null,\r\n      value: null\r\n    }\r\n\r\n    // Array of new properties's names (strings)\r\n    scope.customPropertiesNames = []\r\n\r\n    scope.hideErrors = function () {\r\n      scope.catch = null\r\n      scope.catchField = null\r\n    }\r\n\r\n    scope.saveProduct = function (skipSaving) {\r\n      console.log(scope.product)\r\n      for (var k in scope.product) {\r\n        if (scope.product[k] === null) {\r\n          delete scope.product[k]\r\n        }\r\n      }\r\n\r\n      scope.hideErrors()\r\n\r\n      // Custom properties cannot be validated through Schematic.\r\n      var props_to_validate = {}\r\n      var known_props = Models.GroupedProduct.getPropertyNames()\r\n      for (var k in scope.product) {\r\n        if (known_props.indexOf(k) > -1) { props_to_validate[k] = scope.product[k] }\r\n      }\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.product[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      for (var key in scope.product) {\r\n        if (scope.product[key] === null) {\r\n          delete scope.product[key]\r\n        }\r\n      }\r\n\r\n      var to_save = angular.copy(scope.product)\r\n\r\n      for (var k in to_save.lists) {\r\n        to_save.lists[k].items = to_save.lists[k].items.map(function (item) {\r\n          return { product_id: item.id }\r\n        })\r\n      }\r\n\r\n      if (skipSaving === true) { return }\r\n      $marketcloud.products.save(to_save)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Product saved', 1.5)\r\n          location.path('/products')\r\n        })\r\n        .catch(function (response) {\r\n          notie.alert(2, 'An error has occurred. Product not saved', 1)\r\n        })\r\n    }\r\n\r\n    scope.prepareRegex = function () {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadProducts = function (query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function (response) {\r\n          scope.products = response.data.data\r\n            .filter(function (item) {\r\n              return scope.itemsToAdd\r\n                .map(function (i) {\r\n                  return i.id\r\n                })\r\n                .indexOf(item.id) < 0\r\n            })\r\n        })\r\n        .catch(function (response) {\r\n          console.log(response);\r\n          notie.alert(3, 'An error has occurred. Please try again')\r\n        })\r\n    }\r\n\r\n    scope.updateSelectedVariantForProduct = function (idx, key, value) {\r\n      var selectedVariantData = scope.selectedProducts[idx].selectedVariant\r\n\r\n      var productVariants = scope.selectedProducts[idx].variants\r\n\r\n      var selectedVariant = findObjectWithKeyValue(productVariants, selectedVariantData)\r\n\r\n      scope.product.included_items[idx].variant_id = selectedVariant.variant_id\r\n    }\r\n\r\n    var findObjectWithKeyValue = function (array, object) {\r\n      var current = array\r\n      var result\r\n\r\n      Object.keys(object).forEach(function (k) {\r\n        var value = object[k]\r\n\r\n        current = current.filter(function (val) {\r\n          return val[k] === value\r\n        })\r\n\r\n        if (current.length === 1) {\r\n          result = current[0]\r\n        }\r\n      })\r\n\r\n      return result\r\n    }\r\n\r\n    scope.removeProduct = function (idx) {\r\n      scope.product.included_products.splice(idx, 1);\r\n      scope.product.included_items.splice(idx, 1);\r\n      console.log(scope.product);\r\n    }\r\n\r\n    scope.addProduct = function (product) {\r\n      if (product.type !== 'bundled_product') {\r\n        product.quantity = 1\r\n        var newProduct = {\r\n          product_id: product.id,\r\n          quantity: product.quantity\r\n        }\r\n\r\n        if (product.has_variants) {\r\n          newProduct.variant_id = 1\r\n        }\r\n\r\n        scope.product.included_items.push(newProduct)\r\n\r\n        if (product.has_variants) {\r\n          product.selectedVariant = {};\r\n          Object.keys(product.variantsDefinition).forEach(function (k) {\r\n            product.selectedVariant[k] = product.variantsDefinition[k][0]\r\n          })\r\n        }\r\n\r\n        scope.selectedProducts.push(product)\r\n      } else {\r\n        notie.alert(3, 'You can not include a bundled product in a bundled product.')\r\n      }\r\n      scope.query.name.$regex = ''\r\n      scope.products = []\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function () {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function () {\r\n      window.setTimeout(function () {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/bundledProduct.new.js","angular.module('DataDashboard').controller('EditConfigurableProductController', ['$scope', '$marketcloud', 'product', '$http',\r\n  function (scope, $marketcloud, product, $http) {\r\n    scope.customPropertiesData = {}\r\n\r\n\t\t\t// Injecting resolve data into the controller\r\n    scope.product = product.data.data\r\n\r\n    if (!scope.product.hasOwnProperty()) {\r\n      var product_ids = []\r\n    }\r\n\r\n    scope.product.options.forEach(function (option) {\r\n      var this_option_ids = option.items.map(function (item) {\r\n        return item.product_id\r\n      })\r\n      product_ids = product_ids.concat(this_option_ids)\r\n    })\r\n\r\n    scope.addProductsCardConfig = {\r\n      additionalFields: []\r\n    }\r\n    scope.addNewOption = function () {\r\n      scope.product.options.unshift({\r\n        name: '',\r\n        required: false,\r\n        items: []\r\n      })\r\n    }\r\n\r\n    scope.removeOption = function (index) {\r\n      scope.product.options.splice(index, 1)\r\n    }\r\n\r\n    scope.showAddProductsToOptionModal = function (option) {\r\n      scope.currentOption = option\r\n      $('#addProductsToOptionModal').modal('show')\r\n    }\r\n\r\n    $marketcloud.products.list({\r\n      id: product_ids.join(',')\r\n    })\r\n\t\t\t.then(function (response) {\r\n  var p_map = {}\r\n\r\n  response.data.data.forEach(function (i) {\r\n    p_map[i.id] = i\r\n  })\r\n\r\n\t\t\t\t// We fetch the products data, then we must add the properties\r\n\t\t\t\t// related to them being in the bundled product\r\n  scope.product.options.map(function (opt) {\r\n    opt.items = opt.items.map(function (item) {\r\n      return p_map[item.product_id]\r\n    })\r\n    return opt\r\n  })\r\n})\r\n\t\t\t.catch(function (error) {\r\n  notie.alert(3, 'An error has occurred', 1.5)\r\n})\r\n\r\n\t\t\t// mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Product.getPropertyNames()\r\n    coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'options')\r\n    for (var k in scope.product) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.product[k]\r\n        delete scope.product[k]\r\n      }\r\n    }\r\n\r\n    function getSlugFromString (v) {\r\n      return\tv\r\n\t\t\t\t\t\t.split(' ')\r\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\r\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\r\n\t\t\t\t\t\t.join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n\t\t\t// This method must be implemented in order to\r\n\t\t\t// make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    scope.categories = []\r\n\r\n    $marketcloud.categories.list()\r\n\t\t\t\t.then(function (response) {\r\n  scope.categories = response.data.data\r\n})\r\n\t\t\t\t.catch(function () {\r\n  notie.alert(2, 'An error has occurred while loading categories', 1.5)\r\n})\r\n\r\n    scope.brands = []\r\n\t\t\t// Loading brands\r\n\r\n    $marketcloud.brands.list()\r\n\t\t\t\t.then(function (response) {\r\n  scope.brands = response.data.data\r\n})\r\n\t\t\t\t.catch(function () {\r\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\r\n})\r\n\r\n    scope.newAttribute = {\r\n      name: null,\r\n      value: null,\r\n      type: null\r\n    }\r\n    scope.newAttribute.type = 'string'\r\n    scope.availableTypes = [\r\n\t\t\t\t{name: 'String', value: 'string'},\r\n\t\t\t\t{name: 'Number', value: 'number'},\r\n\t\t\t\t{name: 'Boolean', value: 'boolean'}\r\n    ]\r\n\r\n    scope.filterNotNullProperties = function (item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.updateProduct = function () {\r\n      var update = angular.copy(scope.product)\r\n\t\t\t\t// let's re-assemble the product first.\r\n      for (var k in scope.customPropertiesData) {\r\n        update[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      update.options.forEach(function (option) {\r\n        option.items = option.items.map(function (item) {\r\n          return {product_id: item.id}\r\n        })\r\n      })\r\n\r\n      $marketcloud.products.update(update.id, update)\r\n\t\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Update Succeded', 1.5)\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'Update failed', 1.5)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/configurableProduct.edit.js","\r\nangular.module('DataDashboard').controller('NewConfigurableProductController', [\r\n  '$scope', '$http', '$location', '$marketcloud',\r\n  function (scope, $http, location, $marketcloud) {\r\n    scope.categories = []\r\n    scope.catch = null\r\n    scope.newCategory = {}\r\n    scope.brands = []\r\n    scope.newBrand = {}\r\n\r\n\t\t\t// This method must be implemented in order to\r\n\t\t\t// make the media manager work\r\n    scope.getImagesContainer = function () {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function (i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    function getSlugFromString (v) {\r\n      return\tv\r\n\t\t\t\t\t\t.split(' ')\r\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\r\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\r\n\t\t\t\t\t\t.join('-')\r\n    }\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function () {\r\n      scope.product.slug = getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    scope.loadCategories = function () {\r\n      $marketcloud.categories.list({})\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.categories = response.data.data\r\n})\r\n\t\t\t\t\t.catch(function () {\r\n  console.log('An error has occurred while loading categories')\r\n})\r\n    }\r\n\r\n\t\t\t// Initializing the categories array\r\n    scope.loadCategories()\r\n\r\n    scope.saveCategory = function () {\r\n      $marketcloud.categories.save(scope.newCategory)\r\n\t\t\t\t\t.then(function (response) {\r\n  $('#newCategoryModal').modal('hide')\r\n  scope.categories.push(scope.newCategory)\r\n  scope.newCategory = {}\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  $('#newCategoryModal').hide()\r\n  notie.alert(3, 'An error has occurred. Category not saved', 1)\r\n})\r\n    }\r\n\r\n    scope.loadBrands = function () {\r\n      $marketcloud.brands.list({})\r\n\t\t\t\t\t.then(function (response) {\r\n  scope.brands = response.data.data\r\n})\r\n\t\t\t\t\t.catch(function () {\r\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\r\n})\r\n    }\r\n\t\t\t// Initializing the brands array\r\n    scope.loadBrands()\r\n\r\n    scope.saveBrand = function () {\r\n      $marketcloud.brands.save(scope.newBrand)\r\n\t\t\t\t\t.then(function (response) {\r\n  $('#newBrandModal').modal('hide')\r\n  scope.brands.push(scope.newBrand)\r\n  scope.newBrand = {}\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  $('#newBrandModal').hide()\r\n  notie.alert(3, 'An error has occurred. Brand not saved', 1)\r\n})\r\n    }\r\n\r\n    scope.addProductsCardConfig = {\r\n      additionalFields: []\r\n    }\r\n    scope.addNewOption = function () {\r\n      scope.product.options.unshift({\r\n        name: '',\r\n        required: false,\r\n        items: []\r\n      })\r\n    }\r\n\r\n    scope.removeOption = function (index) {\r\n      scope.product.options.splice(index, 1)\r\n    }\r\n\r\n    scope.showAddProductsToOptionModal = function (option) {\r\n      scope.currentOption = option\r\n      $('#addProductsToOptionModal').modal('show')\r\n    }\r\n\r\n    scope.product = {\r\n      type: 'configurable_product',\r\n      name: '',\r\n      description: '',\r\n      stock_type: 'status',\r\n      stock_status: 'in_stock',\r\n      images: [],\r\n      media: [],\r\n      has_variants: false,\r\n      published: true,\r\n      options: []\r\n\r\n    }\r\n\r\n    scope.productError = null\r\n    scope.newCustomProperty = {}\r\n    scope.customPropertiesData = {}\r\n\r\n\t\t\t// This contains validation Errors\r\n    scope.Forms = {}\r\n\r\n    scope.Forms.newCustomProperty = {\r\n      name: null,\r\n      value: null\r\n    }\r\n\r\n\t\t\t// Array of new properties's names (strings)\r\n    scope.customPropertiesNames = []\r\n\r\n    scope.hideErrors = function () {\r\n      scope.catch = null\r\n      scope.catchField = null\r\n    }\r\n\r\n    scope.saveProduct = function (skipSaving) {\r\n      for (var k in scope.product) {\r\n        if (scope.product[k] === null) {\r\n          delete scope.product[k]\r\n        }\r\n      }\r\n\r\n      scope.hideErrors()\r\n\r\n\t\t\t\t// Custom properties cannot be validated through Schematic.\r\n      var props_to_validate = {}\r\n      var known_props = Models.GroupedProduct.getPropertyNames()\r\n      for (var k in scope.product) {\r\n        if (known_props.indexOf(k) > -1) { props_to_validate[k] = scope.product[k] }\r\n      }\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.product[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      for (var key in scope.product) {\r\n        if (scope.product[key] === null) {\r\n          delete scope.product[key]\r\n        }\r\n      }\r\n\r\n      var to_save = angular.copy(scope.product)\r\n\r\n      for (var k in to_save.options) {\r\n        to_save.options[k].items = to_save.options[k].items.map(function (item) {\r\n          return {product_id: item.id}\r\n        })\r\n      }\r\n\r\n      if (skipSaving === true) { return }\r\n      $marketcloud.products.save(to_save)\r\n\t\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Product saved', 1.5)\r\n  location.path('/products')\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(2, 'An error has occurred. Product not saved', 1)\r\n})\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/configurableProduct.new.js","angular.module('DataDashboard')\r\n.controller('ListProductsController', [\r\n  '$scope',\r\n  '$location',\r\n  '$marketcloud',\r\n  '$http',\r\n  '$q',\r\n  'products',\r\n  '$route',\r\n  '$rootScope',\r\n  'StormConfiguration',\r\n  '$utils',\r\n  '$models',\r\n  function(scope, $location, $marketcloud, http, $q, resources,$route,$rootScope, StormConfiguration, $utils, $models) {\r\n    'use strict'\r\n\r\n    // This array will hold our data\r\n    scope.products = []\r\n\r\n\r\n\r\n\r\n\r\n    // Bulk control\r\n    // Here we place selected prodocuts for bulk actions\r\n    scope.selected = []\r\n\r\n    // BUlk operations buttons\r\n    scope.showBulkControls = false\r\n\r\n\r\n    // Keeping track of which resources are selected\r\n    scope.selections = {}\r\n\r\n    // The main resource\r\n    scope.products = resources.data.data\r\n\r\n    // The columns we are showing\r\n    // Loading from config or initializing\r\n    scope.showing_attributes = StormConfiguration.get('products_list_showing_attributes') || []\r\n\r\n    // Attributes not togglable in view\r\n    scope.reserved_attributes = [\r\n      'name',\r\n      'type',\r\n      'price',\r\n      'inventory',\r\n      'published'\r\n    ]\r\n\r\n    // Initializing pagination\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    // The query object to filter results from the api\r\n    scope.query = {\r\n      per_page: 20,\r\n      page : scope.pagination.currentPage\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    // Parsing URL parameters, if provided\r\n    // Applying Url query\r\n    var urlQuery = {}\r\n    try {\r\n      urlQuery = JSON.parse($route.current.params.query)\r\n    } catch(e) {\r\n      urlQuery = {};\r\n    }\r\n\r\n    for (var k in urlQuery){\r\n      scope.query[k] = urlQuery[k];\r\n    }\r\n\r\n\r\n\r\n    /************************************************************\r\n     *                         COLUMNS\r\n     **************************************************************/\r\n\r\n    // We assign to available_attributes\r\n    // those keys of products\r\n    scope.available_attributes = []\r\n\r\n    // Building the available_attributes array\r\n    scope.products.forEach(function(p) {\r\n      // Attributes to add to available_attributes\r\n      var new_attributes =\r\n        Object.keys(p)\r\n        .filter(function(key) {\r\n          // It must not be in reserved list\r\n          return scope.reserved_attributes.indexOf(key) === -1\r\n        })\r\n        .filter(function(key) {\r\n          // must be something we can render\r\n          var types = ['number', 'string', 'boolean']\r\n          return types.indexOf(typeof p[key]) > -1\r\n        })\r\n        .filter(function(key) {\r\n          // must not be a duplicate\r\n          return scope.available_attributes.indexOf(key) === -1\r\n        })\r\n      scope.available_attributes = scope.available_attributes.concat(new_attributes)\r\n    })\r\n\r\n    /*\r\n        For legacy reasons, some products may have overwritten the type property\r\n        so we infer it again here\r\n     */\r\n\r\n    scope.products.forEach(function(product) {\r\n      if (product.type === 'simple_product' || product.type === 'product_with_variants' || product.type === 'bundled_product') {\r\n        return\r\n      }\r\n\r\n      if (product.hasOwnProperty('variants') && product.hasOwnProperty('variantsDefinition')) {\r\n        product.type = 'product_with_variants'\r\n      } else {\r\n        product.type = 'simple_product'\r\n      }\r\n    })\r\n\r\n    /*\r\n     *    Shows or hides a column by name\r\n     *    @param {String} name The name of the column to show/hide\r\n     */\r\n    scope.toggleColumn = function(name) {\r\n      var i = scope.showing_attributes.indexOf(name)\r\n      if (i > -1) {\r\n        scope.showing_attributes.splice(i, 1)\r\n      } else {\r\n        scope.showing_attributes.push(name)\r\n      }\r\n\r\n      StormConfiguration.set('products_list_showing_attributes', scope.showing_attributes)\r\n    }\r\n\r\n    scope.filterColumnNamesPattern = ''\r\n    scope.filterColumnNames = function(item) {\r\n      return item.indexOf(scope.filterColumnNamesPattern) > -1\r\n    }\r\n\r\n    /************************************************************\r\n     *                         FILTERS\r\n     **************************************************************/\r\n\r\n\r\n\r\n    // We want to be able to filter also by reserved attributes\r\n    scope.filterAttributes = scope.reserved_attributes.concat(scope.available_attributes)\r\n\r\n    scope.applyFilters = function(filters){\r\n      filters.forEach( function(filter){\r\n        scope.query[filter.name] = filter.value;\r\n      })\r\n      scope.loadData();\r\n    }\r\n\r\n    scope.applySorting = function() {\r\n      scope.loadData()\r\n      $(\"#sortingModal\").modal('hide');\r\n    }\r\n\r\n    scope.sortByColumn = function(columnName) {\r\n\r\n      var order = null;\r\n\r\n      if (scope.query.sort_order === 'DESC')\r\n        order = 'ASC'\r\n      else\r\n        order = 'DESC';\r\n\r\n      scope.query.sort_by = columnName;\r\n\r\n      scope.query.sort_order = order;\r\n\r\n      scope.loadData();\r\n    }\r\n\r\n\r\n\r\n\r\n    /************************************************************\r\n     *                         MULTIPLE/BULK SELECTION\r\n     **************************************************************/\r\n\r\n    // Holding query fields\r\n    // When listing data this oobject is sent\r\n\r\n    scope.isItemSelected = function(item) {\r\n      return scope.selected.indexOf(item.id) > -1\r\n    }\r\n\r\n    scope.toggleItemSelection = function(item) {\r\n      // If is not selected, we select it\r\n      if (!scope.isItemSelected(item)) {\r\n        return scope.selected.push(item.id)\r\n      }\r\n\r\n      // If selected we find it and remove it\r\n      for (var i = scope.selected.length - 1; i >= 0; i--) {\r\n        if (scope.selected[i] === item.id) {\r\n          scope.selected.splice(i, 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.toggleAll = function() {\r\n      if (scope.selectAll === false) {\r\n        scope.selected = []\r\n      } else {\r\n        scope.selected = scope.products.map(function(product) {\r\n          return product.id\r\n        })\r\n      }\r\n    }\r\n\r\n    scope.$watch('selected', function(newValue, oldValue) {\r\n      // Have to recaulcate scope.selections\r\n      var tmp = {}\r\n      scope.selected.forEach(function(id) {\r\n        tmp[id] = true\r\n      })\r\n      scope.selections = tmp\r\n    })\r\n\r\n    scope.getSelectedItems = function() {\r\n      return scope.products.filter(function(p) {\r\n        return scope.isItemSelected(p)\r\n      })\r\n    }\r\n\r\n    scope.bulkSetPublishing = function(flag) {\r\n      // flag must be boolean\r\n\r\n      var defer = $q.defer()\r\n\r\n      var promises = []\r\n\r\n      scope.getSelectedItems().forEach(function(product) {\r\n        promises.push($marketcloud.products.update(product.id, {\r\n          published: flag\r\n        }))\r\n      })\r\n\r\n      $q.all(promises)\r\n        .then(function() {\r\n          notie.alert(1, 'All products have been updated', 1.5)\r\n          scope.loadPage(scope.pagination.currentPage)\r\n        })\r\n\r\n      return defer.promise\r\n    }\r\n\r\n    scope.bulkDelete = function() {\r\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' products?', 'Delete', 'Cancel', function() {\r\n        var defer = $q.defer()\r\n\r\n        var promises = []\r\n\r\n        scope.getSelectedItems().forEach(function(product) {\r\n          promises.push($marketcloud.products.delete(product.id))\r\n        })\r\n\r\n        $q.all(promises)\r\n          .then(function() {\r\n            notie.alert(1, 'All products have been deleted', 1.5)\r\n            scope.loadPage(scope.pagination.currentPage)\r\n          })\r\n\r\n        return defer.promise\r\n      })\r\n    }\r\n\r\n    scope.bulkJSONExport = function(){\r\n      // If there are no selected items, we export the whole current view\r\n      if (scope.getSelectedItems().length === 0)\r\n        return $utils.exportAsJSON(scope.products);\r\n\r\n      $utils.exportAsJSON(scope.getSelectedItems());\r\n    }\r\n\r\n    scope.bulkCSVExport = function(){\r\n      var _data = scope.getSelectedItems()\r\n\r\n      // If there are no selected items, we export the whole current view\r\n      if (_data.length === 0)\r\n        _data = scope.products;\r\n\r\n      var bucket = [];\r\n\r\n      _data.forEach(function(product){\r\n        if (\"simple_product\" === product.type){\r\n          bucket.push(product);\r\n        } else if (\"product_with_variants\" === product.type){\r\n\r\n          var productWithoutVariants = angular.copy(product);\r\n          delete productWithoutVariants.variants;\r\n          bucket.push(productWithoutVariants);\r\n\r\n          var variantNames = [];\r\n\r\n          product.variants.forEach(function(i){\r\n            i.type = \"variant\";\r\n            bucket.push(i)\r\n          })\r\n\r\n        } else {\r\n          bucket.push(product);\r\n        }\r\n      })\r\n\r\n      _data = bucket;\r\n\r\n\r\n      console.log(\"Prima di flatten\",angular.copy(_data) )\r\n\r\n      _data = _data.map( $utils.flatten );\r\n\r\n      console.log(\"Dopo di flatten\",angular.copy(_data) )\r\n\r\n      var _csv = $utils.JSONToCSV(_data)\r\n\r\n      console.log(\"IL CSV\",angular.copy(_csv) )\r\n      return $utils.exportAsCSV(_csv);\r\n    }\r\n\r\n    /************************************************************\r\n     *                         IMPORT/EXPORT\r\n     **************************************************************/\r\n    scope.importProducts = function() {\r\n      notie.alert(4, 'Contact us at info@marketcloud.studio404.net with import subject', 1.5)\r\n    }\r\n\r\n\r\n    // Shows the file selector dialog\r\n    scope.chooseJSONFile = function(){\r\n      scope.importMode = 'JSON';\r\n      document.querySelector(\"#JSONFileInput\").click();\r\n    }\r\n    scope.chooseCSVFile = function(){\r\n      scope.importMode = 'CSV';\r\n      document.querySelector(\"#CSVFileInput\").click();\r\n    }\r\n\r\n    // Updates the local copy of file contents\r\n    scope.JSONFileChanged = function(){\r\n\r\n      var file = document.getElementById(\"JSONFileInput\").files[0];\r\n\r\n      //Resetting the file input so we can re-try uploads\r\n      // of the same file and still detect changes\r\n      document.getElementById(\"JSONFileInput\").value = \"\";\r\n\r\n      if (file) {\r\n          var reader = new FileReader();\r\n          reader.readAsText(file, \"UTF-8\");\r\n          reader.onload = function (evt) {\r\n\r\n            // TODO add try catch to manage invalid json\r\n            try {\r\n              var jsonLines = JSON.parse(evt.target.result)\r\n            } catch(e) {\r\n              return Alert.error({\r\n                message : 'Invalid JSON file, please check file syntax'\r\n              })\r\n            }\r\n\r\n            scope.importJSON(jsonLines)\r\n          }\r\n          reader.onerror = function (evt) {\r\n              notie.alert(3,\"error reading file\",2)\r\n          }\r\n      }\r\n    }\r\n\r\n    scope.CSVFileChanged = function(){\r\n\r\n      var file = document.getElementById(\"CSVFileInput\").files[0];\r\n\r\n      //Resetting the file input so we can re-try uploads\r\n      // of the same file and still detect changes\r\n      document.getElementById(\"CSVFileInput\").value = \"\";\r\n\r\n      if (file) {\r\n          var reader = new FileReader();\r\n          reader.readAsText(file, \"UTF-8\");\r\n          reader.onload = function (evt) {\r\n\r\n            // TODO add try catch to manage invalid json\r\n            var csvFileContent = evt.target.result;\r\n\r\n            var productsToImport = $utils.CSVToJSON(csvFileContent);\r\n\r\n            // Sacrifice brevity in the name of clarity for the greater good\r\n            // We flatten jsons before exporting to CSV so now we must unflatten them\r\n            productsToImport = productsToImport.map( $utils.unflatten );\r\n\r\n            scope.importJSON(productsToImport);\r\n\r\n\r\n\r\n            // JSON is an array\r\n\r\n          }\r\n          reader.onerror = function (evt) {\r\n              notie.alert(3,\"error reading file\",2)\r\n          }\r\n      }\r\n    }\r\n\r\n    // Upload json content\r\n    scope.uploadJSON = function(){\r\n      // Importing as json this file\r\n      var jsonLines = JSON.parse(scope.fileContent);\r\n      console.log(\"jsonLines è \",jsonLines)\r\n      scope.importJSON(jsonLines);\r\n    }\r\n\r\n    // Upload ccsv content\r\n    scope.uploadCSV = function(){\r\n      // Importing as json this file\r\n      // TODO CSV TO JSON\r\n      //var jsonLines = JSON.parse(scope.fileContent);\r\n      //scope.importJSON(jsonLines);\r\n      console.log(\"To implement...\")\r\n    }\r\n\r\n\r\n    // Import json\r\n    scope.importJSON = function(lines){\r\n      var productsToImport = [];\r\n      var invalidItemIndex = null;\r\n      var invalidItems = []\r\n\r\n\r\n      for (var i =0; i< lines.length; i++){\r\n        var line = lines[i];\r\n        if (line.type === \"simple_product\"){\r\n\r\n          var validation = $models.Product.validate(line);\r\n          if (false === validation.valid) {\r\n            //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\r\n            Alert.error({\r\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\r\n            })\r\n            invalidItems.push(line);\r\n            break;\r\n          }\r\n          productsToImport.push(line);\r\n        } else if (line.type === \"product_with_variants\" ){\r\n\r\n          var validation = $models.ProductWithVariants.validate(line);\r\n          if (false === validation.valid) {\r\n            //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\r\n            Alert.error({\r\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\r\n            })\r\n            invalidItems.push(line);\r\n            break;\r\n          } else {\r\n            productsToImport.push(line);\r\n          }\r\n        } else if (line.type === \"variant\"){\r\n          if (!productsToImport[productsToImport.length-1].variants)\r\n            productsToImport[productsToImport.length-1].variants = []\r\n\r\n          var validation = $models.Variant.validate(line);\r\n          if (false === validation.valid) {\r\n            //notie.alert(3,\"Please check your CSV, line \"+i+\" is invalid.\",2);\r\n            Alert.error({\r\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\r\n            })\r\n            invalidItems.push(line);\r\n\r\n            break;\r\n          } else {\r\n            productsToImport[productsToImport.length-1].variants.push(line);\r\n          }\r\n\r\n\r\n        } else {\r\n          notie.alert(3,\"Invalid data\",2);\r\n        }\r\n      }\r\n\r\n      if (0 === invalidItems.length) {\r\n        // No invalid items, we can proceed\r\n        console.log(\"Ecco cosa importare\", productsToImport)\r\n        importData(productsToImport)\r\n      } else {\r\n        console.log(\"validation\",validation)\r\n        console.log(\"Import aborted due to invalid items\",invalidItems);\r\n\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    function importData(items) {\r\n      console.log(\"GOING TO IMPORT \"+items.length+\" PRODUCTS FROM FILE\");\r\n      var defer = $q.defer()\r\n      var promises = []\r\n\r\n      var failures = [];\r\n\r\n      function push(r){ promises.push(r)}\r\n      function noop(r){ failures.push(r)}\r\n\r\n      function noop2(i){\r\n        failures.push(i);\r\n        return function(error){}\r\n      }\r\n\r\n\r\n      items.forEach(function(product) {\r\n        if (\"simple_product\" === product.type)\r\n          promises.push($marketcloud.products.save(product).then(push).catch(function(error){\r\n            failures.push(product)\r\n          }) );\r\n\r\n        if (\"product_with_variants\" === product.type) {\r\n\r\n          var productWithoutVariants = angular.copy(product);\r\n          delete productWithoutVariants.variants;\r\n\r\n\r\n          var newPromise = $q(function(resolve,reject){\r\n\r\n            return $marketcloud.products.save(productWithoutVariants)\r\n            .then(function(response){\r\n              var product_id = response.data.data.id;\r\n              return $marketcloud.variants.save(product_id,product.variants);\r\n            })\r\n            .then(resolve)\r\n            .catch(reject)\r\n\r\n          })\r\n\r\n\r\n          promises.push(newPromise.then(push).catch(function(error){\r\n            failures.push(product)\r\n          }) );\r\n        }\r\n      })\r\n\r\n      $q.all(promises)\r\n        .then(function(data) {\r\n\r\n          if (failures.length > 0) {\r\n            console.log(\"FAILURES\",failures)\r\n            var msg = '<p>Not every item was imported. Import failed for '+failures.length+' items:</p><ul>';\r\n\r\n            failures.forEach(function(item){\r\n              msg += '<li class=\"text-left\">'+item.name+'</lI>';\r\n            })\r\n            msg += '</ul>';\r\n            Alert.warning({\r\n              message : msg\r\n            })\r\n          } else {\r\n            Alert.success({\r\n              message : 'All items were imported'\r\n            })\r\n          }\r\n          scope.loadPage(1)\r\n        })\r\n        .catch(function(){\r\n          console.log(\"ALL FINISHED WITH ERROR\")\r\n          console.log(\"Failures\",failures);\r\n          notie.alert(2,\"Import succeded partially, Only the first \");\r\n          scope.loadPage(1)\r\n        })\r\n\r\n      return defer.promise\r\n    }\r\n\r\n\r\n\r\n    /************************************************************\r\n     *                        DUPLICATE\r\n     **************************************************************/\r\n    scope.cloneProduct = function(product_to_duplicate) {\r\n      var product_to_save = angular.copy(product_to_duplicate)\r\n      delete product_to_save.id\r\n      delete product_to_save.product_id\r\n      delete product_to_save.variant_id\r\n      delete product_to_save._id\r\n\r\n      product_to_save.name += ' (Copy)'\r\n      product_to_save.published = false\r\n\r\n      switch (product_to_save.stock_type) {\r\n        case 'track':\r\n          delete product_to_save['stock_status']\r\n          break\r\n        case 'status':\r\n          delete product_to_save['stock_level']\r\n          break\r\n        case 'infinite':\r\n          delete product_to_save['stock_level']\r\n          delete product_to_save['stock_status']\r\n          break\r\n      }\r\n\r\n      // NOTE this uses client side info. it is a utility\r\n      //\r\n      delete product_to_save.variants\r\n\r\n      $marketcloud.products.save(product_to_save)\r\n        .then(function(response) {\r\n          console.log(\"RESPONSATI\", response)\r\n          if (product_to_save.has_variants === true || product_to_save.type === 'product_with_variants') {\r\n            return http({\r\n              method: 'POST',\r\n              url: API_BASE_URL + '/products/' + response.data.data.id + '/variants',\r\n              data: product_to_duplicate.variants,\r\n              headers: {\r\n                Authorization: window.public_key + ':' + window.token\r\n              }\r\n            })\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          scope.loadPage(scope.pagination.currentPage)\r\n          notie.alert(1, 'Product successfully cloned', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    /************************************************************\r\n     *                         QUERY OPERATIONS\r\n     **************************************************************/\r\n    scope.setPublishing = function(prod) {\r\n      $marketcloud.products.update(prod.id, {\r\n          published: prod.published\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Updated!', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.alterColumnNames = function(name) {\r\n      if (name === 'stock_level') {\r\n        return 'Inventory'\r\n      } else {\r\n        return name\r\n      }\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.loadData = function(query) {\r\n\r\n\r\n      if (scope.query.q === '') {\r\n        delete scope.query.q\r\n      }\r\n\r\n      if (query) {\r\n        if (\"object\" !== typeof query)\r\n          throw new TypeError(\"loadData(query) query must be an object of filters\");\r\n\r\n        for (var k in query)\r\n          scope.query[k] = query[k];\r\n      }\r\n\r\n\r\n      return $marketcloud.products.list(scope.query)\r\n        .then(function(response) {\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n\r\n          // This little trick allows us to get back to the latest state of the view when we hit a back button.\r\n          // We don't use $location because it has a weird behaviour appending #/#/path\r\n          window.history.pushState(scope.query, \"List products\", '#/products?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query) ) );\r\n\r\n          scope.products = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.loadPage = function(page_number) {\r\n      scope.query.page = Number(page_number)\r\n      scope.loadData()\r\n    }\r\n\r\n    scope.deleteProduct = function(prod_id, index) {\r\n      http({\r\n          method: 'DELETE',\r\n          url: API_BASE_URL + '/products/' + prod_id,\r\n          headers: {\r\n\r\n            Authorization: window.public_key + ':' + window.token\r\n          }\r\n\r\n        })\r\n        .then(function(response) {\r\n          scope.loadPage(scope.pagination.currentPage)\r\n          notie.alert(1, 'Product deleted', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/products.list.js","angular.module('DataDashboard')\r\n  .controller('EditProductWithVariantsController',\r\n    [\r\n      '$scope',\r\n      '$marketcloud',\r\n      'product',\r\n      '$http',\r\n      '$utils',\r\n      function(scope, $marketcloud, product, $http, $utils) {\r\n      scope.customPropertiesData = {}\r\n\r\n      // Injecting resolve data into the controller\r\n      scope.product = product.data.data\r\n\r\n      scope.selectedCategories = []\r\n\r\n      if (scope.product.categories && scope.product.categories.length) {\r\n        var cats = scope.product.categories.split(',')\r\n\r\n        var promises = []\r\n        cats.forEach(function (categoryId) {\r\n          promises.push($marketcloud.categories.list({\r\n            id: categoryId\r\n          }))\r\n        })\r\n\r\n        Promise.all(promises)\r\n          .then(function (response) {\r\n            response.forEach(function (res) {\r\n              if (res.data.data[0]) {\r\n                var category = {\r\n                  category_id: res.data.data[0].id,\r\n                  text: res.data.data[0].path\r\n                }\r\n                scope.selectedCategories.push(category)\r\n              }\r\n            })\r\n          })\r\n      }\r\n\r\n\r\n      // Listening to category selector events\r\n      scope.$on('selectedCategory', function (event, data) {\r\n        var categoryId = data.category_id\r\n\r\n        if (scope.selectedCategories.map(cat => cat.category_id).indexOf(categoryId) === -1) {\r\n          scope.selectedCategories.push(data)\r\n        }\r\n      })\r\n\r\n      // mapping non-core attributes into scope.customPropertiesData\r\n      var coreProperties = Models.Product.getPropertyNames()\r\n      coreProperties.push(\r\n        'id',\r\n        'currencies',\r\n        'display_price',\r\n        'display_price_discount',\r\n        'has_variants',\r\n        'type',\r\n        'media',\r\n        'tax_id',\r\n        'locales',\r\n        'seo',\r\n        'requires_shipping',\r\n        'variants',\r\n        'variantsDefinition',\r\n        'product_id',\r\n        'variant_id',\r\n        'application_id'\r\n      )\r\n\r\n      for (var k in scope.product) {\r\n        if (coreProperties.indexOf(k) < 0) {\r\n          scope.customPropertiesData[k] = scope.product[k]\r\n          delete scope.product[k]\r\n        }\r\n      }\r\n\r\n      scope.unsafeSlug = false\r\n\r\n      scope.updateSlug = function() {\r\n        scope.product.slug = $utils.getSlugFromString(scope.product.name)\r\n      }\r\n\r\n      // This method must be implemented in order to\r\n      // make the media manager work\r\n      scope.getImagesContainer = function() {\r\n        return scope.product.images\r\n      }\r\n\r\n      scope.removeImage = function(i) {\r\n        scope.product.images.splice(i, 1)\r\n      }\r\n\r\n      scope.setMainCategoryToLast = function () {\r\n\r\n        if (scope.selectedCategories.length > 0) {\r\n          scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id\r\n        } else {\r\n          scope.product.category_id = null\r\n        }\r\n      }\r\n\r\n      scope.categories = []\r\n        // Loading categories\r\n      $marketcloud.categories.list()\r\n        .then(function(response) {\r\n          scope.categories = response.data.data\r\n        })\r\n        .catch(function() {\r\n          console.error('An error has occurred while loading categories')\r\n        })\r\n\r\n      scope.brands = []\r\n        // Loading brands\r\n\r\n      $marketcloud.brands.list()\r\n        .then(function(response) {\r\n          scope.brands = response.data.data\r\n        })\r\n        .catch(function() {\r\n          console.error('An error has occurred while loading brands')\r\n        })\r\n\r\n      scope.filterVariantProps = function(o) {\r\n        var p = {}\r\n        for (var k in o) {\r\n          // if its not an inherited property, then it's a variant property name\r\n          if (scope.product.variantsDefinition.hasOwnProperty(k)) {\r\n            p[k] = o[k]\r\n          }\r\n        }\r\n        return p\r\n\r\n        // return o\r\n      }\r\n\r\n      scope.getVariantStyle = function(i) {\r\n        // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\r\n        // ]\r\n        var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\r\n        return r[i % r.length]\r\n      }\r\n      scope.getVariantStyle = function(i) {\r\n        var r = [{\r\n          'color': 'red'\r\n        }, {\r\n          'color': 'green'\r\n        }, {\r\n          'color': 'blue'\r\n        }, {\r\n          'color': 'pink'\r\n        }]\r\n        return r[i % r.length]\r\n      }\r\n\r\n      scope.newAttribute = {\r\n        name: null,\r\n        value: null,\r\n        type: null\r\n      }\r\n      scope.newAttribute.type = 'string'\r\n      scope.availableTypes = [{\r\n        name: 'String',\r\n        value: 'string'\r\n      }, {\r\n        name: 'Number',\r\n        value: 'number'\r\n      }, {\r\n        name: 'Boolean',\r\n        value: 'boolean'\r\n      }]\r\n\r\n      scope.filterNotNullProperties = function(item) {\r\n        var result = {}\r\n        for (var k in item) {\r\n          if (item[k]) {\r\n            result[k] = item[k]\r\n          }\r\n        }\r\n        return result\r\n      }\r\n\r\n      scope.newVariant = {}\r\n      scope.saveNewVariant = function() {\r\n        var variantToSave = angular.copy(scope.product)\r\n          // Removing useless stuff in the variant\r\n        delete variantToSave['variants']\r\n        delete variantToSave['type']\r\n        delete variantToSave['variantsDefinition']\r\n        delete variantToSave['is_master']\r\n        delete variantToSave['has_variants']\r\n        delete variantToSave['published']\r\n\r\n        for (var k in scope.newVariant) {\r\n          if (scope.product.variantsDefinition[k].indexOf(scope.newVariant[k]) < 0) {\r\n            scope.product.variantsDefinition[k].push(scope.newVariant[k])\r\n          }\r\n          variantToSave[k] = scope.newVariant[k]\r\n        }\r\n\r\n\r\n        // Devo aggiornare products perchè variants definition è cambiato\r\n        // poi salvo la variante\r\n\r\n        scope.updateProduct()\r\n          .then(function(response) {\r\n            return $http({\r\n              method: 'POST',\r\n              url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\r\n              data: variantToSave,\r\n              headers: {\r\n                Authorization: window.public_key + ':' + window.token\r\n              }\r\n            })\r\n          })\r\n          .then(function(response) {\r\n            notie.alert(1, 'Variant successfully created', 1)\r\n            scope.product = response.data.data\r\n            $('#addVariantModal').modal('hide')\r\n          })\r\n          .catch(function(response) {\r\n            notie.alert(2, 'An error has occurred. Variants not saved', 1)\r\n          })\r\n      }\r\n\r\n      scope.deleteVariant = function(variant, i) {\r\n        return $http({\r\n            method: 'DELETE',\r\n            url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\r\n            headers: {\r\n              Authorization: window.public_key + ':' + window.token\r\n            }\r\n          })\r\n          .then(function(response) {\r\n            notie.alert(1, 'Variant deleted', 1.5)\r\n            scope.product.variants.splice(i, 1)\r\n          })\r\n          .catch(function(response) {\r\n            notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n          })\r\n      }\r\n\r\n      scope.updateProduct = function() {\r\n        var payload = angular.copy(scope.product)\r\n\r\n        // let's re-assemble the product first.\r\n        for (var k in scope.customPropertiesData) {\r\n          payload[k] = scope.customPropertiesData[k]\r\n        }\r\n\r\n        var categories = ''\r\n        scope.selectedCategories.forEach(function (category, idx) {\r\n          categories += category.category_id\r\n\r\n          if (idx < scope.selectedCategories.length - 1) {\r\n            categories += ','\r\n          }\r\n        })\r\n\r\n        payload.categories = categories\r\n\r\n        switch (payload.stock_type) {\r\n          case 'infinite':\r\n            delete payload.stock_level\r\n            delete payload.stock_status\r\n            break\r\n\r\n          case 'status':\r\n            delete payload.stock_level\r\n            break\r\n\r\n          case 'track':\r\n            delete payload.stock_status\r\n            break\r\n        }\r\n\r\n        return $marketcloud.products.update(payload.id, payload)\r\n          .then(function(response) {\r\n            notie.alert(1, 'Update Succeded', 1.5)\r\n          })\r\n          .catch(function(response) {\r\n            notie.alert(3, 'Update failed', 1.5)\r\n          })\r\n      }\r\n    }\r\n  ])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/productsWithVariants.edit.js","angular.module('DataDashboard')\r\n  .controller('NewProductWithVariantsController', [\r\n    '$scope', '$http', '$location', '$marketcloud', '$utils',\r\n    function (scope, $http, location, $marketcloud, $utils) {\r\n\r\n\r\n      scope.categories = []\r\n      scope.error = null\r\n      scope.newCategory = {}\r\n      scope.brands = []\r\n      scope.newBrand = {}\r\n      scope.selectedCategories = []\r\n\r\n      // Temporary storage for variants\r\n      // while theyre being built\r\n      scope.addedVariants = {}\r\n\r\n      // Listening to category selector events\r\n      scope.$on('selectedCategory', function (event, data) {\r\n        var categoryId = data.category_id\r\n\r\n        if (scope.selectedCategories.map(cat => cat.category_id).indexOf(categoryId) === -1) {\r\n          scope.selectedCategories.push(data)\r\n        }\r\n      })\r\n      // mapping non-core attributes into scope.customPropertiesData\r\n      var coreProperties = Models.Product.getPropertyNames()\r\n      coreProperties.push(\r\n        'id',\r\n        'display_price',\r\n        'display_price_discount',\r\n        'has_variants',\r\n        'type',\r\n        'media',\r\n        'tax_id',\r\n        'locales',\r\n        'seo',\r\n        'requires_shipping',\r\n        'variants',\r\n        'variantsDefinition',\r\n        'product_id',\r\n        'variant_id',\r\n        'application_id'\r\n      )\r\n\r\n      scope.isBoolean = function(d) {\r\n        return typeof d === 'boolean'\r\n      }\r\n\r\n      scope.isString = function(d) {\r\n        return typeof d === 'string'\r\n      }\r\n\r\n      scope.isNumber = function(d) {\r\n        return typeof d === 'number'\r\n      }\r\n\r\n      // This method must be implemented in order to\r\n      // make the media manager work\r\n      scope.getImagesContainer = function() {\r\n        return scope.product.images\r\n      }\r\n\r\n      scope.removeImage = function(i) {\r\n        scope.product.images.splice(i, 1)\r\n      }\r\n\r\n\r\n      scope.setMainCategoryToLast = function () {\r\n\r\n        if (scope.selectedCategories.length > 0) {\r\n          scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id\r\n        } else {\r\n          scope.product.category_id = null\r\n        }\r\n      }\r\n\r\n      scope.unsafeSlug = false\r\n\r\n      scope.updateSlug = function() {\r\n        scope.product.slug = $utils.getSlugFromString(scope.product.name)\r\n      }\r\n\r\n      scope.loadCategories = function() {\r\n        $marketcloud.categories.list({})\r\n          .then(function(response) {\r\n            scope.categories = response.data.data\r\n          })\r\n          .catch(function() {\r\n            notie.alert(2, 'An error has occurred while loading categories', 2)\r\n          })\r\n      }\r\n\r\n      // Initializing the categories array\r\n      scope.loadCategories()\r\n\r\n      scope.query = {\r\n        // The product must be simple_product as this\r\n        type: 'product_with_variants'\r\n      }\r\n      scope.prepareRegex = function() {\r\n        scope.query.name.$options = 'i'\r\n      }\r\n\r\n      scope.showTheList = false\r\n      scope.showList = function() {\r\n        scope.showTheList = true\r\n      }\r\n      scope.hideList = function() {\r\n        window.setTimeout(function() {\r\n          scope.showTheList = false\r\n          scope.$apply()\r\n        }, 200)\r\n      }\r\n\r\n      scope.applyTemplate = function(product) {\r\n        var tpl = angular.copy(product)\r\n\r\n\r\n\r\n        console.log(\"====================\",\"Vado ad applicare questo template\",angular.copy(tpl),\"==========================\")\r\n\r\n        delete tpl['id']\r\n\r\n\r\n        scope.addedVariants2 = [];\r\n\r\n        for (var k in tpl.variantsDefinition) {\r\n          var newAddedVariant = {\r\n            name : k,\r\n            values :tpl.variantsDefinition[k].map(function(v){\r\n              return {text:v}\r\n            })\r\n          }\r\n          scope.addedVariants2.push(newAddedVariant)\r\n        }\r\n\r\n        scope.computedVariants = tpl.variants.map(function(item){\r\n          var v = angular.copy(item)\r\n          delete v[\"id\"];\r\n          delete v[\"product_id\"];\r\n          delete v[\"variant_id\"]\r\n          return v;\r\n        })\r\n\r\n        console.log(\"Ora computedVariants è\",angular.copy(scope.computedVariants))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        delete tpl.variants\r\n\r\n\r\n        scope.product = tpl\r\n\r\n        // Making sure that inventory is initialized\r\n        scope.product.stock_type = tpl.stock_type || \"status\";\r\n        scope.product.stock_status = tpl.stock_status || \"in_stock\";\r\n\r\n\r\n        console.log(\"Applicato questo template\",tpl)\r\n\r\n        //scope.updateVariantsConfiguration()\r\n\r\n        console.log(\"Dopo updateVariantsConfiguration\",angular.copy(scope.computedVariants))\r\n        // Taking care of variants\r\n\r\n\r\n        for (var k in scope.product) {\r\n          if (coreProperties.indexOf(k) < 0) {\r\n            scope.customPropertiesData[k] = scope.product[k]\r\n            delete scope.product[k]\r\n          }\r\n        }\r\n\r\n\r\n      }\r\n\r\n      scope.loadProducts = function(query) {\r\n        query = query || scope.query\r\n\r\n        $marketcloud.products.list(query)\r\n          .then(function(response) {\r\n            scope.products = response.data.data\r\n          })\r\n          .catch(function(response) {\r\n            notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n          })\r\n      }\r\n\r\n      // Loading products right away\r\n      scope.loadProducts()\r\n\r\n      scope.saveCategory = function() {\r\n        $marketcloud.categories.save(scope.newCategory)\r\n          .then(function(response) {\r\n            $('#newCategoryModal').modal('hide')\r\n            scope.categories.push(scope.newCategory)\r\n            scope.newCategory = {}\r\n          })\r\n          .catch(function(response) {\r\n            $('#newCategoryModal').hide()\r\n            notie.alert(3, 'An error has occurred. Category not saved', 1)\r\n          })\r\n      }\r\n\r\n      scope.loadBrands = function() {\r\n          $marketcloud.brands.list({})\r\n            .then(function(response) {\r\n              scope.brands = response.data.data\r\n            })\r\n            .catch(function() {\r\n              notie.alert(2, 'An error has occurred while loading brands', 2)\r\n            })\r\n        }\r\n        // Initializing the brands array\r\n      scope.loadBrands()\r\n      window.inspect = function(){console.log(angular.copy(scope.product))};\r\n\r\n      scope.saveBrand = function() {\r\n        $marketcloud.brands.save(scope.newBrand)\r\n          .then(function(response) {\r\n            $('#newBrandModal').modal('hide')\r\n            scope.brands.push(scope.newBrand)\r\n            scope.newBrand = {}\r\n          })\r\n          .catch(function(response) {\r\n            $('#newBrandModal').hide()\r\n            notie.alert(3, 'An error has occurred. Brand not saved', 1)\r\n          })\r\n      }\r\n\r\n      scope.product = {\r\n        type: 'product_with_variants',\r\n        name: '',\r\n        description: '',\r\n        stock_type: 'status',\r\n        stock_status: 'in_stock',\r\n        images: [],\r\n        variants: {},\r\n        published: false,\r\n        has_variants: true // Flag for legacy compatibility\r\n      }\r\n\r\n      scope.customPropertiesData = {}\r\n        // This contains validation Errors\r\n\r\n      // Array of new properties's names (strings)\r\n      scope.customPropertiesNames = []\r\n\r\n      scope.computedVariants = []\r\n\r\n      // Each tyme the parent's stock type is changed, the variants must be updated\r\n      scope.updateStockManagementForVariants = function() {\r\n        var stock_type = scope.product.stock_type\r\n\r\n        if (stock_type === 'track') {\r\n          delete scope.product.stock_status\r\n          scope.computedVariants.forEach(function(v) {\r\n            delete v['stock_status']\r\n          })\r\n          return\r\n        }\r\n\r\n        if (stock_type === 'status') {\r\n          delete scope.product.stock_level\r\n          scope.computedVariants.forEach(function(v) {\r\n            delete v['stock_level']\r\n          })\r\n          return\r\n        }\r\n\r\n        if (stock_type === 'infinite') {\r\n          delete scope.product.stock_status\r\n          delete scope.product.stock_level\r\n          scope.computedVariants.forEach(function(v) {\r\n            delete v['stock_level']\r\n            delete v['stock_status']\r\n          })\r\n          return\r\n        }\r\n      }\r\n\r\n      scope.properties_to_inherit = [\r\n        'price',\r\n        'sku',\r\n        'stock_level',\r\n        'stock_type',\r\n        'stock_status'\r\n        // Add here more props you want to override now!\r\n        // e.g. stock_level\r\n\r\n      ]\r\n\r\n      function transformVariantObject(o) {\r\n        var buf = []\r\n        for (var k in o) {\r\n          buf.push({\r\n            name: k,\r\n            values: o[k].map(function(a) {\r\n              return a.text\r\n            })\r\n          })\r\n        }\r\n        return buf\r\n      }\r\n\r\n      function getArrayOfVariants(arrayOfVariants) {\r\n        if (arrayOfVariants.length === 0) {\r\n          return []\r\n        }\r\n        if (arrayOfVariants.length === 1) {\r\n          var v = arrayOfVariants[0]\r\n          var buf = []\r\n          v.values.forEach(function(e) {\r\n            var o = {}\r\n            o[v.name] = e\r\n            buf.push(o)\r\n          })\r\n          return buf\r\n        }\r\n        var output = arrayOfVariants.reduce(function(a, b) {\r\n          if (!(a instanceof Array)) {\r\n            // Se non è un array, è la prima botta di reduce,\r\n            // fatta con la prima variante (el 0 di arrayOfVariants)\r\n            var buf = []\r\n            a.values.forEach(function(el_a) {\r\n              b.values.forEach(function(el_b) {\r\n                var o = {}\r\n                o[a.name] = el_a\r\n                o[b.name] = el_b\r\n                buf.push(o)\r\n              })\r\n            })\r\n            return buf\r\n          } else {\r\n            // Se è un array, allora non è la prima botta di reduce\r\n            // Quindi per ogni elemento dell''array finale, aggiungo pezzi di variante\r\n            var buf = []\r\n            b.values.forEach(function(el_b) {\r\n              // Ad ogni elemento dell array di varianti costruito al passo\r\n              // precedente aggiungo un pezzo di nuova variante\r\n              a.forEach(function(el_a) {\r\n                var o = JSON.parse(JSON.stringify(el_a))\r\n                o[b.name] = el_b\r\n                buf.push(o)\r\n              })\r\n            })\r\n            return buf\r\n          }\r\n        })\r\n        return output\r\n      }\r\n\r\n      function attachInheritedProperties(variants) {\r\n        return variants.map(function(variant) {\r\n          console.log(\"ATTACHO LE INHERITED PROPERTIES DA \",angular.copy(scope.product))\r\n          scope.properties_to_inherit.forEach(function(i, index) {\r\n\r\n\r\n            if (scope.product[i]) {\r\n\r\n              variant[i] = scope.product[i];\r\n            }\r\n          })\r\n          return variant\r\n        })\r\n      }\r\n\r\n      scope.filterVariantProps = function(o) {\r\n        var p = {}\r\n        for (var k in o) {\r\n          // if its not an inherited property, then it's a variant property name\r\n          if (scope.properties_to_inherit.indexOf(k) < 0 && k !== 'save') {\r\n            // The property k is not an inherited property but a variant\r\n            p[k] = o[k]\r\n          }\r\n        }\r\n        return p\r\n      }\r\n\r\n      // Return a subset of the object in which only variant related\r\n      // keys are kept\r\n      scope.filterVariantProps = function(o) {\r\n        var variantNames = scope.addedVariants2.map(function(v){\r\n          return v.name\r\n        })\r\n        var p = {}\r\n        for (var k in o) {\r\n          // if its not an inherited property, then it's a variant property name\r\n          if (variantNames.indexOf(k) > -1 ) {\r\n            // The property k is not an inherited property but a variant\r\n            p[k] = o[k]\r\n          }\r\n        }\r\n        return p\r\n      }\r\n\r\n      scope.getVariantStyle = function(i) {\r\n        var r = [{\r\n          'color': 'red'\r\n        }, {\r\n          'color': 'green'\r\n        }, {\r\n          'color': 'blue'\r\n        }, {\r\n          'color': 'pink'\r\n        }]\r\n        return r[i % r.length]\r\n      }\r\n\r\n      /*\r\n        variants Array<{name :\"size\", values : [\"cl\",\"l\",\"s\"]}\r\n      */\r\n      function getArrayOfVariants2(variants) {\r\n        variants = variants.filter(function(v) {\r\n          return v.values.length > 0\r\n        })\r\n\r\n        if (variants.length === 0) {\r\n          return []\r\n        }\r\n\r\n        if (variants.length === 1) {\r\n          var result = []\r\n          variants[0].values.forEach(function(v) {\r\n            var o = {}\r\n            o[variants[0].name] = v\r\n            result.push(o)\r\n          })\r\n          return result\r\n        }\r\n\r\n        var combine = function(v1, v2) {\r\n          var output = []\r\n\r\n          // 2 cases, one is that v1 is a {name,values}\r\n          // other case is that v1 is the already created bag\r\n          // [{size:x, color : red}]\r\n          if (v1 instanceof Array) {\r\n            var _out = []\r\n            v1.forEach(function(variant) {\r\n              v2.values.forEach(function(value) {\r\n                var o = angular.copy(variant)\r\n                o[v2.name] = value\r\n                _out.push(o)\r\n              })\r\n            })\r\n            return _out\r\n          }\r\n\r\n          v1.values.forEach(function(val1) {\r\n            v2.values.forEach(function(val2) {\r\n              var o = {}\r\n              o[v1.name] = val1\r\n              o[v2.name] = val2\r\n\r\n              output.push(o)\r\n            })\r\n          })\r\n          return output\r\n        }\r\n\r\n        var counter = 0\r\n        var out = []\r\n\r\n        while (variants[counter + 1]) {\r\n          out = combine(variants[counter], variants[counter + 1])\r\n          variants[counter + 1] = out\r\n          counter++\r\n        }\r\n\r\n        return out\r\n      }\r\n\r\n      scope.deleteVariant = function(variantName, $index) {\r\n        scope.addedVariants2.splice($index, 1)\r\n        scope.updateVariantsConfiguration()\r\n      }\r\n\r\n      scope.addedVariants2 = []\r\n      scope.addEmptyVariant = function() {\r\n        scope.addedVariants2.push({\r\n          name: '',\r\n          values: []\r\n        })\r\n      }\r\n\r\n      scope.updateVariantsConfiguration = function() {\r\n        // Transforming addedVariants2\r\n        scope.computedVariants = []\r\n        scope.addedVariants = {}\r\n        scope.addedVariants2.forEach(function(variant) {\r\n          scope.addedVariants[variant.name] = variant.values.map(function(i) {\r\n            return i.text\r\n          })\r\n\r\n          variant.values = variant.values.map(function(i) {\r\n            return i.text\r\n          })\r\n        })\r\n\r\n\r\n        var temp_ComputedVariants = getArrayOfVariants2(angular.copy(scope.addedVariants2))\r\n\r\n        scope.computedVariants = temp_ComputedVariants\r\n        scope.computedVariants = attachInheritedProperties(temp_ComputedVariants)\r\n\r\n        scope.computedVariants.forEach(function(v) {\r\n          v.save = true\r\n        })\r\n\r\n        // Ricalcolo le variants definition, le added sono scope.addedVariants\r\n        scope.product.variantsDefinition = scope.addedVariants\r\n      }\r\n\r\n      scope.getVariantClass = function(i) {\r\n        var classes = ['label-default', 'label-info', 'label-success', 'label-warning', 'label-danger']\r\n        return 'label solid ' + (classes[i % classes.length])\r\n      }\r\n\r\n      scope.hideErrors = function() {\r\n        scope.error = null\r\n        scope.errorField = null\r\n      }\r\n\r\n      scope.saveProduct = function(overwrites) {\r\n        for (var k in scope.product) {\r\n          if (scope.product[k] === null) {\r\n            delete scope.product[k]\r\n          }\r\n        }\r\n\r\n        scope.hideErrors()\r\n\r\n        scope.product.variants = []\r\n\r\n        // Custom properties and variants cannot be validated through Schematic.\r\n        var props_to_validate = {}\r\n        var known_props = Models.Product.getPropertyNames()\r\n        for (var k in scope.product) {\r\n          if (known_props.indexOf(k) > -1) {\r\n            props_to_validate[k] = scope.product[k]\r\n          }\r\n        }\r\n        var validation = Models.Product.validate(props_to_validate)\r\n\r\n        if (validation.valid === false) {\r\n          scope.errorField = validation.invalidPropertyName\r\n\r\n          if (validation.failedValidator === 'required') {\r\n            scope.error = 'The ' + scope.errorField + ' field is required'\r\n          } else if (validation.failedValidator === 'min') {\r\n            if (typeof scope.product[validation.invalidPropertyName] === 'string') {\r\n              scope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters'\r\n            } else {\r\n              scope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min\r\n            }\r\n          } else if (validation.failedValidator === 'max') {\r\n            if (typeof scope.product[validation.invalidPropertyName] === 'string') {\r\n              scope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters'\r\n            } else {\r\n              scope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min\r\n            }\r\n          } else {\r\n            scope.error = 'The ' + scope.errorField + ' field has an invalid value (' + props_to_validate[scope.errorField] + ')'\r\n          }\r\n          return\r\n        }\r\n\r\n        for (var k in scope.customPropertiesData) {\r\n          scope.product[k] = scope.customPropertiesData[k]\r\n        }\r\n\r\n        for (var key in scope.product) {\r\n          if (scope.product[key] === null) {\r\n            delete scope.product[key]\r\n          }\r\n        }\r\n\r\n        var variantsToSave = angular.copy(scope.computedVariants\r\n          .filter(function(variant) {\r\n            return variant.save === true\r\n          })\r\n          .map(function(variant) {\r\n            var obj = angular.copy(scope.product)\r\n\r\n            // Removing useless stuff in the variant\r\n            delete obj['variants']\r\n            delete obj['variantsDefinition']\r\n            delete obj['is_master']\r\n            delete obj['has_variants']\r\n            delete obj['published']\r\n\r\n            for (var k in variant) {\r\n              obj[k] = variant[k]\r\n            }\r\n\r\n            // Remove the flag used to distinguish\r\n            // between variants to save and not to save\r\n            delete variant['save']\r\n\r\n            return obj\r\n          }))\r\n\r\n        for (var k in overwrites) {\r\n          scope.product[k] = overwrites[k]\r\n        }\r\n\r\n        var categories = ''\r\n        scope.selectedCategories.forEach(function (category, idx) {\r\n          categories += category.category_id\r\n\r\n          if (idx < scope.selectedCategories.length - 1) {\r\n            categories += ','\r\n          }\r\n        })\r\n\r\n        if (categories.length > 0) {\r\n          scope.product.categories = categories\r\n        }\r\n\r\n        $marketcloud.products.save(scope.product)\r\n          .then(function(response) {\r\n            // Now i must save variants.\r\n\r\n            // Ogni variante deve essere pretrattata\r\n            // Ad esempio devo aggiungere il campo is_variant e images\r\n            /* if ('undefined' !== mixpanel)\r\n              mixpanel.track('products.create') */\r\n\r\n            var savedProduct = response.data.data\r\n\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url: API_BASE_URL + '/products/' + savedProduct.id + '/variants',\r\n                data: variantsToSave,\r\n                headers: {\r\n                  Authorization: window.public_key + ':' + window.token\r\n                }\r\n              })\r\n              .then(function(response) {\r\n                notie.alert(1, 'Product successfully created', 1)\r\n                location.path('/products')\r\n              })\r\n              .catch(function(response) {\r\n                notie.alert(2, 'An error has occurred. Variants not saved', 1)\r\n              })\r\n          })\r\n          .catch(function(response) {\r\n            notie.alert(2, 'An error has occurred. Product not saved', 1)\r\n          })\r\n      }\r\n    }\r\n  ])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/productsWithVariants.new.js","(function() {\r\n  'use strict'\r\n\r\n  angular.module('DataDashboard')\r\n    .controller('EditSimpleProductController', EditSimpleProductController)\r\n\r\n  EditSimpleProductController.$inject = [\r\n  '$scope',\r\n  '$marketcloud',\r\n  'product',\r\n  '$http',\r\n  '$utils',\r\n  '$validation']\r\n\r\n  function EditSimpleProductController(scope, $marketcloud, product, $http, $utils,$validation) {\r\n    // Injecting resolve data into the controller\r\n    scope.product = product.data.data\r\n\r\n    // This will hold custom properties for further processing\r\n    scope.customPropertiesData = {}\r\n\r\n    // Should we be able to edit the slug? this is a on/off\r\n    scope.unsafeSlug = false\r\n\r\n    scope.selectedCategories = []\r\n\r\n    if (scope.product.categories && scope.product.categories.length) {\r\n      var cats = scope.product.categories.split(',')\r\n      var promises = []\r\n      cats.forEach(function (categoryId) {\r\n        promises.push($marketcloud.categories.list({\r\n          id: categoryId\r\n        }))\r\n      })\r\n\r\n      Promise.all(promises)\r\n        .then(function (response) {\r\n          response.forEach(function (res) {\r\n            if (res.data.data[0]) {\r\n              var category = {\r\n                category_id: res.data.data[0].id,\r\n                text: res.data.data[0].path\r\n              }\r\n              scope.selectedCategories.push(category)\r\n            }\r\n          })\r\n        })\r\n    }\r\n\r\n    // Listening to category selector events\r\n    scope.$on('selectedCategory', function (event, data) {\r\n      var categoryId = data.category_id\r\n\r\n      if (scope.selectedCategories.map(cat => cat.category_id).indexOf(categoryId) === -1) {\r\n        scope.selectedCategories.push(data)\r\n      }\r\n    })\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    var coreProperties = Models.Product.getPropertyNames()\r\n\r\n    scope.schema = Models.Product.schema\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'currencies',\r\n      'display_price_discount',\r\n      'display_price',\r\n      'has_variants', // for legacy reasons\r\n      'type',\r\n      'media',\r\n      'tax_id',\r\n      'locales',\r\n      'seo',\r\n      'requires_shipping',\r\n      'product_id',\r\n      'variant_id',\r\n      'application_id'\r\n    )\r\n\r\n    for (var k in scope.product) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.product[k]\r\n        delete scope.product[k]\r\n      }\r\n    }\r\n\r\n    scope.updateSlug = function() {\r\n      scope.product.slug = $utils.getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\r\n      var toMove = JSON.parse(JSON.stringify(target[fromIndex]))\r\n\r\n      // We ensure that the indexes exist\r\n      if (fromIndex > target.length - 1) {\r\n        return\r\n      }\r\n\r\n      // First we remove the element to move\r\n      target.splice(fromIndex, 1)\r\n\r\n      // Then we add it to the desired position\r\n      target.splice(toIndex, 0, toMove)\r\n    }\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function() {\r\n      return scope.product.images\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n    scope.setMainCategoryToLast = function () {\r\n\r\n      if (scope.selectedCategories.length > 0) {\r\n        scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id\r\n      } else {\r\n        scope.product.category_id = null\r\n      }\r\n    }\r\n\r\n    scope.newAttribute = {\r\n      name: null,\r\n      value: null,\r\n      type: null\r\n    }\r\n    scope.newAttribute.type = 'string'\r\n    scope.availableTypes = [{\r\n      name: 'String',\r\n      value: 'string'\r\n    }, {\r\n      name: 'Number',\r\n      value: 'number'\r\n    }, {\r\n      name: 'Boolean',\r\n      value: 'boolean'\r\n    }]\r\n\r\n    scope.filterNotNullProperties = function(item) {\r\n      var result = {}\r\n      for (var k in item) {\r\n        if (item[k]) {\r\n          result[k] = item[k]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n\r\n    scope.updateProduct = function() {\r\n      // let's re-assemble the product first.\r\n      for (var k in scope.customPropertiesData) {\r\n        scope.product[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      switch (scope.product.stock_type) {\r\n        case 'status':\r\n          delete scope.product.stock_level\r\n          break\r\n\r\n        case 'track':\r\n          delete scope.product.stock_status\r\n          break\r\n      }\r\n\r\n      var categories = ''\r\n      scope.selectedCategories.forEach(function (category, idx) {\r\n        categories += category.category_id\r\n\r\n        if (idx < scope.selectedCategories.length - 1) {\r\n          categories += ','\r\n        }\r\n      })\r\n\r\n      scope.product.categories = categories\r\n\r\n      $marketcloud.products.update(scope.product.id, scope.product)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Update Succeded', 1.5)\r\n        })\r\n        .catch(function(error) {\r\n          console.log(\"erore\",error)\r\n          if (400 === error.status){\r\n\r\n            notie.alert(2, 'Please check the data you entered', 1.5)\r\n\r\n            var validation = error.data.errors[0];\r\n            var invalidPropertyName = \"product.\"+validation.invalidPropertyName;\r\n\r\n            var element = angular.element('[ng-model=\"'+invalidPropertyName+'\"]').parent()\r\n\r\n            $validation.showErrorMessage(validation,'[ng-model=\"'+invalidPropertyName+'\"]')\r\n\r\n\r\n\r\n\r\n          } else\r\n            notie.alert(3, 'Update failed', 1.5)\r\n        })\r\n    }\r\n  }\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/simpleProduct.edit.js","angular.module('DataDashboard').controller('NewSimpleProductController', [\r\n  '$scope', '$http', '$location', '$marketcloud','$utils','$models',\r\n  function(scope, $http, location, $marketcloud, $utils, Models) {\r\n    scope.error = null\r\n\r\n    scope.brands = []\r\n    scope.newBrand = {}\r\n\r\n    scope.selectedCategories = []\r\n\r\n    scope.validation = {\r\n      valid: true\r\n    }\r\n\r\n    // Listening to category selector events\r\n    scope.$on('selectedCategory', function (event, data) {\r\n      var categoryId = data.category_id\r\n\r\n      if (scope.selectedCategories.map(cat => cat.category_id).indexOf(categoryId) === -1) {\r\n        scope.selectedCategories.push(data)\r\n      }\r\n    })\r\n\r\n    // mapping non-core attributes into scope.customPropertiesData\r\n    console.log(\"Cerco qui le core propseties\",Models.Product, Models)\r\n    var coreProperties = Models.Product.getPropertyNames()\r\n\r\n    coreProperties.push(\r\n      'id',\r\n      'display_price_discount',\r\n      'display_price',\r\n      'has_variants', // for legacy reasons\r\n      'type',\r\n      'media',\r\n      'tax_id',\r\n      'locales',\r\n      'seo',\r\n      'requires_shipping',\r\n      'product_id',\r\n      'variant_id',\r\n      'application_id'\r\n    )\r\n\r\n    scope.product = {\r\n      price: null,\r\n      name: '',\r\n      description: '',\r\n      stock_type: 'status',\r\n      images: [],\r\n      media: [],\r\n      published: false,\r\n      type: 'simple_product'\r\n\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.product.images.splice(i, 1)\r\n    }\r\n\r\n\r\n    scope.unsafeSlug = false\r\n\r\n    scope.updateSlug = function() {\r\n      scope.product.slug = $utils.getSlugFromString(scope.product.name)\r\n    }\r\n\r\n    scope.applyTemplate = function(product) {\r\n      var tpl = angular.copy(product)\r\n\r\n      delete tpl['id']\r\n\r\n      scope.product = tpl\r\n\r\n      for (var k in scope.product) {\r\n        if (coreProperties.indexOf(k) < 0) {\r\n          scope.customPropertiesData[k] = scope.product[k]\r\n          delete scope.product[k]\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.query = {\r\n      // The product must be simple_product as this\r\n      type: 'simple_product'\r\n    }\r\n    scope.prepareRegex = function() {\r\n      scope.query.name.$options = 'i'\r\n    }\r\n\r\n    scope.showTheList = false\r\n    scope.showList = function() {\r\n      scope.showTheList = true\r\n    }\r\n    scope.hideList = function() {\r\n      window.setTimeout(function() {\r\n        scope.showTheList = false\r\n        scope.$apply()\r\n      }, 200)\r\n    }\r\n\r\n    scope.loadProducts = function(query) {\r\n      query = query || scope.query\r\n\r\n      $marketcloud.products.list(query)\r\n        .then(function(response) {\r\n          scope.products = response.data.data\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n        })\r\n    }\r\n\r\n    // Loading products right away\r\n    scope.loadProducts()\r\n\r\n    scope.productError = null\r\n    scope.newCustomProperty = {}\r\n    scope.customPropertiesData = {}\r\n      // This contains validation Errors\r\n    scope.Forms = {}\r\n    scope.Forms.newCustomProperty = {\r\n      name: null,\r\n      value: null\r\n    }\r\n\r\n    // Array of new properties's names (strings)\r\n    scope.customPropertiesNames = []\r\n\r\n    scope.properties_to_inherit = [\r\n      'price',\r\n      'sku',\r\n      'stock_level',\r\n      'stock_type',\r\n      'stock_status'\r\n      // Add here more props you want to override now!\r\n      // e.g. stock_level\r\n\r\n    ]\r\n\r\n    scope.hideErrors = function() {\r\n      scope.error = null\r\n      scope.errorField = null\r\n    }\r\n\r\n\r\n    scope.setMainCategoryToLast = function () {\r\n\r\n      if (scope.selectedCategories.length > 0) {\r\n        scope.product.category_id = scope.selectedCategories[scope.selectedCategories.length - 1].category_id\r\n      } else {\r\n        scope.product.category_id = null\r\n      }\r\n    }\r\n\r\n    scope.saveProduct = function(overwrites) {\r\n      for (var k in scope.product) {\r\n        if (scope.product[k] === null) {\r\n          delete scope.product[k]\r\n        }\r\n      }\r\n\r\n      scope.hideErrors()\r\n\r\n      // this scope properti is bound to the error-message component\r\n      // TODO schematic needs custom validator, so i can do something like\r\n\r\n      scope.validation = Models.Product.validate(scope.product)\r\n\r\n\r\n      if (scope.validation.valid === false) {\r\n        return;\r\n      }\r\n\r\n      var categories = ''\r\n      scope.selectedCategories.forEach(function (category, idx) {\r\n        categories += category.category_id\r\n\r\n        if (idx < scope.selectedCategories.length - 1) {\r\n          categories += ','\r\n        }\r\n      })\r\n\r\n      if (categories.length > 0) {\r\n        scope.product.categories = categories\r\n      }\r\n\r\n      for (var kk in scope.customPropertiesData) {\r\n        scope.product[kk] = scope.customPropertiesData[kk]\r\n      }\r\n\r\n      for (var key in scope.product) {\r\n        if (scope.product[key] === null) {\r\n          delete scope.product[key]\r\n        }\r\n      }\r\n\r\n      for (var k in overwrites) {\r\n        scope.product[k] = overwrites[k]\r\n      }\r\n\r\n      $marketcloud.products.save(scope.product)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Product saved successfully.', 1.5)\r\n          location.path('/products')\r\n        })\r\n        .catch(function(error) {\r\n\r\n          if (error.status === 400) {\r\n            scope.validation = error.data.errors[0]\r\n            return;\r\n          }\r\n\r\n          notie.alert(2, 'An error has occurred. Product not saved', 1)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/simpleProduct.new.js","var app = angular.module('DataDashboard')\r\napp.controller('EditPromotionController', ['$scope', '$http', '$marketcloud', 'promotion',\r\n  function (scope, http, $marketcloud, promotion) {\r\n    scope.promotion = promotion.data.data\r\n\t\t// Initializing stuff\r\n    scope.newCondition = {}\r\n    scope.newEffect = {}\r\n\r\n    scope.save = function () {\r\n      scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion)\r\n      if (scope.$promotionValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      $marketcloud.promotions.update(scope.promotion.id, scope.promotion)\r\n\t\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Promotion saved', 1.5)\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred. Promotion not saved', 1.5)\r\n})\r\n    }\r\n\r\n    scope.addCondition = function () {\r\n      scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition)\r\n      if (scope.$newConditionValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      scope.promotion.conditions.push(scope.newCondition)\r\n      scope.newCondition = {}\r\n    }\r\n    scope.removeCondition = function (i) {\r\n      scope.promotion.conditions.splice(i, 1)\r\n    }\r\n    scope.removeEffect = function (i) {\r\n      scope.promotion.effects.splice(i, 1)\r\n    }\r\n    scope.addEffect = function () {\r\n      scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect)\r\n\r\n      if (scope.$newEffectValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      scope.promotion.effects.push(scope.newEffect)\r\n      scope.newEffect = {}\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/promotions/promotions.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('NewPromotionController', ['$scope', '$http', '$marketcloud', '$location',\r\n  function (scope, http, $marketcloud, location) {\r\n\t\t// Defaults\r\n    scope.promotion = {\r\n      name: null,\r\n      conditions: [],\r\n      effects: [],\r\n      active: false,\r\n      priority: 0\r\n    }\r\n    scope.newCondition = {}\r\n    scope.newEffect = {}\r\n\r\n    scope.save = function () {\r\n      scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion)\r\n      if (scope.$promotionValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      $marketcloud.promotions.save(scope.promotion)\r\n\t\t\t\t\t.then(function (response) {\r\n  notie.alert(1, 'Promotion saved', 1.5)\r\n  location.path('/promotions')\r\n})\r\n\t\t\t\t\t.catch(function (response) {\r\n  notie.alert(3, 'An error has occurred. Promotion not saved', 1.5)\r\n})\r\n    }\r\n\r\n    scope.addCondition = function () {\r\n      scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition)\r\n      if (scope.$newConditionValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      scope.promotion.conditions.push(scope.newCondition)\r\n      scope.newCondition = {}\r\n    }\r\n    scope.removeCondition = function (i) {\r\n      scope.promotion.conditions.splice(i, 1)\r\n    }\r\n    scope.removeEffect = function (i) {\r\n      scope.promotion.effects.splice(i, 1)\r\n    }\r\n    scope.addEffect = function () {\r\n      scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect)\r\n\r\n      if (scope.$newEffectValidation.valid !== true) {\r\n        return\r\n      }\r\n\r\n      scope.promotion.effects.push(scope.newEffect)\r\n      scope.newEffect = {}\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/promotions/promotions.new.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('ListResourcesController', [\r\n  '$scope',\r\n  'resources',\r\n  'resourceName',\r\n  '$q',\r\n  '$marketcloud',\r\n  'dependencies',\r\n  '$utils',\r\n  function(scope, resources, resource_name, $q, $marketcloud, $dependencies, $utils) {\r\n    scope.resources = resources.data.data\r\n    scope.dependencies = {}\r\n\r\n    scope.$dependencies = $dependencies\r\n\r\n    scope.pagination = $utils.getPaginationFromHTTPResponse(resources);\r\n\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    scope.prepareRegex = function() {\r\n      for (var k in scope.query) {\r\n        if (typeof scope.query[k] === 'object' && scope.query[k].hasOwnProperty('$regex')) {\r\n          scope.query[k]['$options'] = 'i'\r\n        }\r\n      }\r\n    }\r\n\r\n    scope.toggleAll = function() {\r\n      scope.resources.forEach(function(p) {\r\n        p.selected = scope.selectAll\r\n      })\r\n    }\r\n\r\n    scope.getSelectedItems = function() {\r\n      return scope.resources.filter(function(p) {\r\n        return p.selected === true\r\n      })\r\n    }\r\n\r\n    scope.update = function(id, update) {\r\n      return $marketcloud[resource_name].update(id, update)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Item updated.', 1.5)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.bulkDelete = function() {\r\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function() {\r\n        var defer = $q.defer()\r\n\r\n        var promises = []\r\n\r\n        scope\r\n          .getSelectedItems()\r\n          .forEach(function(item) {\r\n            promises.push($marketcloud[resource_name].delete(item.id))\r\n          })\r\n\r\n        $q.all(promises)\r\n          .then(function() {\r\n            notie.alert(1, 'All items have been deleted', 1.5)\r\n            scope.loadData()\r\n          })\r\n\r\n        return defer.promise\r\n      })\r\n    }\r\n    scope.bulkUpdate = function(update) {\r\n      notie.confirm('Update ' + scope.getSelectedItems().length + ' items?', 'Update', 'Cancel', function() {\r\n        var defer = $q.defer()\r\n\r\n        var promises = []\r\n\r\n\r\n\r\n        scope\r\n          .getSelectedItems()\r\n          .forEach(function(item) {\r\n            promises.push($marketcloud[resource_name].update(item.id, update))\r\n          })\r\n\r\n        $q.all(promises)\r\n          .then(function() {\r\n            notie.alert(1, 'All items have been updated', 1.5)\r\n            scope.loadData()\r\n          })\r\n\r\n        return defer.promise\r\n      })\r\n    }\r\n\r\n    scope.bulkJSONExport = function() {\r\n      // If there are no selected items, we export the whole current view\r\n      if (scope.getSelectedItems().length === 0)\r\n        return $utils.exportAsJSON(scope.resources);\r\n\r\n      $utils.exportAsJSON(scope.getSelectedItems());\r\n    }\r\n\r\n\r\n\r\n    scope.toggle = function(resource) {\r\n      $marketcloud[resource_name].update(resource.id, resource)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Update successful', 1.5)\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.loadPage = function(page_number) {\r\n      scope.query.page = page_number\r\n      return scope.loadData()\r\n    }\r\n\r\n    scope.resetQuery = function() {\r\n      var currentPage = scope.query.page || 1\r\n      scope.query = {\r\n        per_page: 20,\r\n        page: currentPage\r\n      }\r\n    }\r\n    scope.loadData = function(query) {\r\n\r\n\r\n\r\n      if (query) {\r\n        if (\"object\" !== typeof query)\r\n          throw new TypeError(\"loadData(query) query must be an object of filters\");\r\n\r\n        for (var k in query)\r\n          scope.query[k] = query[k];\r\n      }\r\n\r\n\r\n\r\n      if ($dependencies.queryOverrides) {\r\n        for (var k in $dependencies.queryOverrides)\r\n          scope.query[k] = $dependencies.queryOverrides[k];\r\n      }\r\n      \r\n      return $marketcloud[resource_name]\r\n        .list(scope.query)\r\n        .then(function(response) {\r\n\r\n          scope.resources = response.data.data\r\n\r\n          scope.pagination = $utils.getPaginationFromHTTPResponse(response);\r\n\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.delete = function(resource_id, index) {\r\n      $marketcloud[resource_name].delete(resource_id)\r\n        .then(function(response) {\r\n          scope.loadData()\r\n          notie.alert(1, 'Item deleted', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n\r\n\r\n    /************************************************************\r\n     *                        DUPLICATE\r\n     **************************************************************/\r\n    scope.clone = function(instance) {\r\n\r\n      var toSave = angular.copy(instance)\r\n      delete toSave.id\r\n      delete toSave._id\r\n\r\n      if (toSave.name)\r\n        toSave.name += ' (Copy)'\r\n      else if (toSave.title)\r\n        toSave.title += ' (Copy)'\r\n\r\n\r\n      $marketcloud[resource_name].save(toSave)\r\n        .then(function(response) {\r\n          scope.loadData();\r\n          notie.alert(1, \"Item successfully cloned\", 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n\r\n\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/resource.list.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('SettingsController', [\r\n  '$scope',\r\n  '$http',\r\n  'Currencies',\r\n  'Timezones',\r\n  'Countries',\r\n  '$application',\r\n  function (scope, http, currencies, timezones, countries, $application) {\r\n    scope.countries = countries\r\n    scope.timezones = timezones\r\n    scope.application = $application.get()\r\n\r\n    scope.images = []\r\n\r\n    scope.application.apply_discounts_before_taxes = Boolean(scope.application.apply_discounts_before_taxes)\r\n\r\n    scope.currencies = Object.keys(currencies)\r\n      .map(function (c) {\r\n        return currencies[c]\r\n      })\r\n      .map(function (c) {\r\n        c.label = c.name + ' (' + c.symbol + ')'\r\n        return c\r\n      })\r\n      .sort(function (a, b) {\r\n        a = a.name\r\n        b = b.name\r\n        if (a > b) {\r\n          return 1\r\n        } else if (b > a) {\r\n          return -1\r\n        } else {\r\n          return 0\r\n        }\r\n      })\r\n\r\n    scope.tax_options = [{\r\n      value: 'nothing',\r\n      label: 'Don\\'t tax'\r\n    }, {\r\n      value: 'products_only',\r\n      label: 'Tax products only'\r\n    }, {\r\n      value: 'shipping_only',\r\n      label: 'Tax shipping only'\r\n    }, {\r\n      value: 'all',\r\n      label: 'Tax shipping and products'\r\n    }]\r\n\r\n    scope.refreshApplicationData = function () {\r\n      $http({\r\n        url: '/applications/list/' + Number(scope.application.id),\r\n        method: 'GET'\r\n      })\r\n        .then(function (response) {\r\n          $application.set(response.data.data)\r\n        })\r\n        .catch(function (error) {\r\n          notie.alert(3, \"An error has occurred while reloading application's data. Refreshing the page...\")\r\n          window.location.reload()\r\n        })\r\n    }\r\n\r\n    scope.updateSettings = function () {\r\n      var payload = {\r\n        name: scope.application.name,\r\n        url: scope.application.url,\r\n        timezone: scope.application.timezone,\r\n        currency_code: scope.application.currency_code,\r\n        tax_rate: scope.application.tax_rate,\r\n        tax_type: scope.application.tax_type,\r\n        apply_discounts_before_taxes: scope.application.apply_discounts_before_taxes,\r\n        email_address: scope.application.email_address,\r\n        company_name: scope.application.company_name,\r\n        company_taxid: scope.application.company_taxid,\r\n        company_country: scope.application.company_country,\r\n        company_state: scope.application.company_state,\r\n        company_city: scope.application.company_city,\r\n        company_address: scope.application.company_address,\r\n        company_postalcode: scope.application.company_postalcode,\r\n        invoices_prefix: scope.application.invoices_prefix,\r\n        es_weights: scope.application.es_weights\r\n      }\r\n\r\n      if (scope.images.length >= 1) { payload.logo = scope.images[0] }\r\n\r\n      http({\r\n        method: 'PUT',\r\n        url: window.API_BASE_URL + '/application',\r\n        data: payload,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': window.public_key + ':' + window.token\r\n        }\r\n      })\r\n        .then(function (response) {\r\n          notie.alert(1, 'Application successfully updated', 1)\r\n        })\r\n        .catch(function (err) {\r\n          notie.alert(3, 'An error has occurred.')\r\n        })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/settings.controller.js","var app = angular.module('DataDashboard')\r\nvar controller = null\r\napp.controller('EditShippingController', [\r\n  '$scope',\r\n  '$http',\r\n  '$location',\r\n  'Countries',\r\n  'shipping',\r\n  '$marketcloud',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, location, countries, shippingRequest, $marketcloud, $validation, $models) {\r\n    scope.availableRules = [\r\n      'max_value',\r\n      'min_value',\r\n      'max_weight',\r\n      'min_weight',\r\n      'max_height',\r\n      'min_height',\r\n      'max_depth',\r\n      'min_depth',\r\n      'max_width',\r\n      'min_width'\r\n    ]\r\n\r\n    scope.getShippingRules = function() {\r\n      var o = {}\r\n      for (var k in scope.shipping) {\r\n        if (scope.availableRules.indexOf(k) > -1) {\r\n          o[k] = angular.copy(scope.shipping[k])\r\n        }\r\n      }\r\n      return o\r\n    }\r\n\r\n\r\n\r\n    scope.howManyRules = function(o) {\r\n      var count = 0\r\n\r\n      for (var k in scope.shipping) {\r\n        if (scope.availableRules.indexOf(k) > -1) {\r\n          count++\r\n        }\r\n      }\r\n      return count\r\n    }\r\n\r\n    scope.countries = angular.copy(countries)\r\n    scope.countries.unshift({\r\n      name: 'All countries',\r\n      code: 'ALL'\r\n    }, {\r\n      name: 'Europe',\r\n      code: 'EUROPE'\r\n    })\r\n\r\n    scope.shipping = {\r\n      availability: 'ALL',\r\n      base_cost: 0,\r\n      per_item_cost: 0,\r\n      zones: []\r\n    }\r\n\r\n    scope.shipping = shippingRequest.data.data;\r\n\r\n    scope.shipping.zones = scope.shipping.zones || [];\r\n\r\n    scope.newRule = {}\r\n    scope.addRule = function() {\r\n      scope.shipping[scope.newRule.name] = scope.newRule.value\r\n\r\n      scope.newRule = {}\r\n    }\r\n\r\n    scope.removeRule = function(name) {\r\n      scope.shipping[name] = null;\r\n    }\r\n\r\n    scope.ruleNameToDescription = function(name) {\r\n      return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum')\r\n    }\r\n\r\n    scope.newZone = {}\r\n    scope.addZone = function() {\r\n      scope.shipping.zones.push(scope.newZone)\r\n      scope.newZone = null\r\n    }\r\n    scope.removeZone = function($index) {\r\n      scope.shipping.zones.splice($index, 1);\r\n    }\r\n\r\n    scope.updateShipping = function() {\r\n      \r\n      $validation.hideErrors();\r\n\r\n      $marketcloud.shippings.update(scope.shipping.id, scope.shipping)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Shipping updated', 2)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"shipping.'+validation.invalidPropertyName+'\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\r\n\r\n            $validation.showErrorMessage(validation,$models.Shipping.schema , selector)\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shipping.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('ShippingsController',\r\n    [\r\n      '$scope',\r\n      '$http',\r\n      '$location',\r\n      'Countries',\r\n      'shippings',\r\n      '$marketcloud',\r\n      '$utils',\r\n    function(scope, http, location, countries, shippings, $marketcloud, $utils) {\r\n\r\n    scope.shippings = shippings.data.data\r\n\r\n    scope.countries = countries;\r\n\r\n    scope.pagination = $utils.getPaginationFromHTTPResponse(shippings);\r\n\r\n    // Holding query fields\r\n    // When listing data this oobject is sent\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    scope.availableRules = [\r\n      'max_value',\r\n      'min_value',\r\n      'max_weight',\r\n      'min_weight',\r\n      'max_height',\r\n      'min_height',\r\n      'max_depth',\r\n      'min_depth',\r\n      'max_width',\r\n      'min_width'\r\n    ]\r\n\r\n\r\n    scope.getShippingRules = function(shipping) {\r\n      var o = {}\r\n      for (var k in shipping) {\r\n        if (scope.availableRules.indexOf(k) > -1) {\r\n          o[k] = angular.copy(shipping[k])\r\n        }\r\n      }\r\n\r\n      console.log(\"Le shipping rules\", o)\r\n      return o\r\n    }\r\n\r\n    scope.ruleNameToDescription = function(name) {\r\n      return name.replace(/\\_/gi, ' ')\r\n        .replace(/min/, 'Minimum')\r\n        .replace(/max/, 'Maximum')\r\n    }\r\n\r\n    scope.loadData = function() {\r\n      if (scope.query.q === '') {\r\n        delete scope.query.q\r\n      }\r\n\r\n      return $marketcloud.shippings.list(scope.query)\r\n        .then(function(response) {\r\n          scope.shippings = response.data.data;\r\n          scope.pagination = $utils.getPaginationFromHTTPResponse(response);\r\n        })\r\n        .error(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.loadPage = function(page_number) {\r\n      scope.query.page = Number(page_number)\r\n      scope.loadData()\r\n    }\r\n\r\n    scope.deleteShipping = function(id) {\r\n      $marketcloud.shippings.delete(id)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Shipping method successfully deleted', 1.5)\r\n          scope.loadPage()\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred', 1.5)\r\n        })\r\n    }\r\n\r\n    /************************************************************\r\n     *                        DUPLICATE\r\n     **************************************************************/\r\n    scope.clone = function(shippingRule) {\r\n      console.log(\"Cloning\");\r\n      \r\n      var toSave = angular.copy(shippingRule)\r\n      delete shippingRule.id\r\n      delete toSave._id\r\n\r\n      toSave.name += ' (Copy)'\r\n\r\n\r\n      $marketcloud.shippings.save(toSave)\r\n        .then(function(response) {\r\n          scope.loadPage();\r\n          notie.alert(1,\"Shipping rule successfully cloned\",1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.list.js","var app = angular.module('DataDashboard')\r\napp.controller('CreateShippingController', [\r\n  '$scope',\r\n  '$http',\r\n  '$location',\r\n  'Countries',\r\n  '$marketcloud',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, location, countries, $marketcloud, $validation, $models) {\r\n    scope.availableRules = [\r\n      'max_value',\r\n      'min_value',\r\n      'max_weight',\r\n      'min_weight',\r\n      'max_height',\r\n      'min_height',\r\n      'max_depth',\r\n      'min_depth',\r\n      'max_width',\r\n      'min_width'\r\n    ]\r\n\r\n    scope.getShippingRules = function() {\r\n      var o = {}\r\n      for (var k in scope.shipping) {\r\n        if (scope.availableRules.indexOf(k) > -1) {\r\n          o[k] = angular.copy(scope.shipping[k])\r\n        }\r\n      }\r\n      return o\r\n    }\r\n    scope.howManyRules = function(o) {\r\n      var count = 0\r\n\r\n      for (var k in scope.shipping) {\r\n        if (scope.availableRules.indexOf(k) > -1) {\r\n          count++\r\n        }\r\n      }\r\n      return count\r\n    }\r\n\r\n    scope.countries = angular.copy(countries)\r\n\r\n    scope.filterCountries = function(query) {\r\n      var data = scope.countries.filter(function(country) {\r\n        return country.name.indexOf(query) > -1\r\n      }).sort(function(a, b) {\r\n        return a.name > b.name\r\n      })\r\n      return {\r\n        data: data\r\n      }\r\n    }\r\n\r\n    // Adding a handy \"all\" destination\r\n    scope.countries.unshift({\r\n      name: 'All countries',\r\n      code: 'ALL'\r\n    })\r\n\r\n    scope.shipping = {\r\n      name: '',\r\n      base_cost: 0,\r\n      per_item_cost: 0,\r\n      zones: []\r\n    }\r\n\r\n    scope.newRule = {}\r\n    scope.addRule = function() {\r\n      scope.shipping[scope.newRule.name] = scope.newRule.value\r\n\r\n      scope.newRule = {}\r\n    }\r\n\r\n    scope.removeRule = function(name) {\r\n      delete scope.shipping[name]\r\n    }\r\n\r\n    scope.ruleNameToDescription = function(name) {\r\n      return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum')\r\n    }\r\n\r\n    scope.newZone = {}\r\n    scope.addZone = function() {\r\n      scope.shipping.zones.push(scope.newZone)\r\n      scope.newZone = null\r\n    }\r\n    scope.removeZone = function($index) {\r\n      scope.shipping.zones.splice($index, 1)\r\n    }\r\n\r\n    scope.saveShipping = function() {\r\n      \r\n      $validation.hideErrors()\r\n\r\n      $marketcloud.shippings.save(scope.shipping)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Shipping saved.', 1.5)\r\n          location.path('/shippings')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400){\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"shipping.'+validation.invalidPropertyName+'\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\r\n\r\n            $validation.showErrorMessage(validation,$models.Shipping.schema , selector)\r\n          } else \r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.new.js","\r\nvar app = angular.module('DataDashboard')\r\n\r\napp.controller('SidebarController', [\r\n  '$scope', '$http', '$routeParams', '$location', '$rootScope', '$route',\r\n  function ($scope, $http, $params, $location, $root, $route) {\r\n    $scope.showingSubSidebar = false\r\n\r\n    $scope.currentSidebarSection = null\r\n\r\n    $scope.currentSection = null\r\n\r\n    $scope.$on('$dashboardSectionChange', function ($event, args) {\r\n\t\t\t// Intercepting the new section event\r\n      if (args.section) {\r\n        $scope.currentSection = args.section.split('.')[0]\r\n\r\n        $root.currentSection = args.section.split('.')[0]\r\n        $root.currentSubsection = args.section.split('.')[1] || null\r\n\r\n        if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\r\n          $scope.hideSubSidebar()\r\n        }\r\n      }\r\n    })\r\n\r\n    $scope.switchToApp = function (app_id) {\r\n      var current_app_id = window.current_application.id\r\n\t\t\t// We just need to swap the current urls with the desired app id\r\n      var url = '/applications/' + app_id + '/dashboard#/'\r\n\r\n      window.location.href = url\r\n    }\r\n\r\n    $scope.subEntriesGroupToShow = null\r\n\r\n    $scope.subSideBars = {\r\n      inventory: false,\r\n      system: false\r\n    }\r\n    $scope.showSubEntries = function (id) {\r\n      $scope.subEntriesGroupToShow = id\r\n    }\r\n\r\n    $scope.subEntriesGroupShown = {\r\n      inventory: false,\r\n      system: false\r\n    }\r\n\r\n    $scope.toggleSubEntries = function (group_id) {\r\n\t\t\t// group_id is the name of the dashboard section\r\n\t\t\t// a section is a group of logical views\r\n\t\t\t// e.g. inventory is a group of views related to inventory management\r\n      $scope.currentSection = group_id\r\n\r\n      $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id]\r\n    }\r\n    $scope.showSubSidebar = function (id) {\r\n      $scope.showingSubSidebar = true\r\n\r\n      var sidebars = [\r\n        'inventory',\r\n        'system',\r\n        'contents'\r\n      ]\r\n\r\n      if (sidebars.indexOf(id) < 0) {\r\n        return false\r\n      }\r\n\r\n      $scope.currentSidebarSection = id\r\n    }\r\n\r\n    $scope.hideSubSidebar = function () {\r\n      $scope.showingSubSidebar = false\r\n    }\r\n  }\r\n])\r\n\r\napp.controller('NavbarController', ['$scope', '$http', '$routeParams', '$location',\r\n  function ($scope, $http, $params, $location) {\r\n\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/sidebar.js","var app = angular.module('DataDashboard')\r\napp.controller('CreateStaticContentController', [\r\n  '$scope',\r\n  '$http',\r\n  '$location',\r\n  '$marketcloud',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, location, $marketcloud, $utils, $validation, $models) {\r\n\r\n\r\n    scope.content = {\r\n     name : '',\r\n     content : ''\r\n    }\r\n\r\n\r\n    // This function is invoked when a seo property\r\n    // changes.\r\n    scope.computeSeoTags = function() {\r\n\r\n    }\r\n\r\n    scope.unsafeSlug = false\r\n    scope.updateSlug = function() {\r\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\r\n    }\r\n    scope.saveContent = function() {\r\n      $validation.hideErrors()\r\n      $marketcloud.staticContents.save(scope.content)\r\n        .then(function(response) {\r\n          // title text author\r\n          notie.alert(1, 'Static content saved', 2)\r\n          location.path('/contents/static')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.StaticContent.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/staticContents/staticContent.new.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditStaticContentController', [\r\n  '$scope',\r\n  '$http',\r\n  'content',\r\n  '$location',\r\n  '$marketcloud',\r\n  'moment',\r\n  '$utils',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\r\n    scope.content = content.data.data\r\n\r\n\r\n\r\n\r\n\r\n    scope.unsafeSlug = false\r\n    scope.updateSlug = function() {\r\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\r\n    }\r\n\r\n    scope.getImagesContainer = function() {\r\n      return scope.content.author.images\r\n    }\r\n\r\n\r\n\r\n    scope.updateContent = function() {\r\n      $marketcloud.staticContents.update(scope.content.id, scope.content)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Content updated with success', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.StaticContent.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/staticContents/staticContents.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.controller('EditTaxController', [\r\n  '$scope',\r\n  '$http',\r\n  '$marketcloud',\r\n  '$location',\r\n  'Countries',\r\n  'tax',\r\n  'TaxRates',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, countries, tax, tax_rates, $validation, $models) {\r\n\r\n    scope.tax_rates = tax_rates\r\n\r\n    scope.countriesWithTaxRates = scope.tax_rates\r\n      .map(function(r) {\r\n        return r.country\r\n      })\r\n      .filter(function(item, pos, self) {\r\n        return self.indexOf(item) == pos\r\n      })\r\n\r\n    scope.countries = countries\r\n    scope.countries.unshift({\r\n      name: '*'\r\n    })\r\n\r\n    // Cache of states lists\r\n    scope.states = {}\r\n\r\n    // Whenever the country changes,\r\n    // the list of states must be updated\r\n    scope.tax = tax.data.data\r\n\r\n    scope.addRate = function() {\r\n      scope.tax.rates.push({\r\n        name: '',\r\n        country: '',\r\n        state: '',\r\n        postcode: '',\r\n        city: '',\r\n        rate: 0,\r\n        priority: 0\r\n      })\r\n    }\r\n\r\n    scope.deleteRate = function(index) {\r\n      scope.tax.rates.splice(index, 1)\r\n    }\r\n\r\n    scope.updateCity = function(rate) {\r\n      if (rate.postcode.indexOf('*') > -1) {\r\n        rate.city = '*'\r\n      }\r\n    }\r\n    scope.updatePostcode = function(rate) {\r\n      if (rate.state === '*') {\r\n        rate.postcode = '*'\r\n      }\r\n    }\r\n\r\n    scope.updateStates = function(rate) {\r\n      if (rate.country === '*') {\r\n        rate.state = '*'\r\n        rate.city = '*'\r\n        return\r\n      }\r\n\r\n      http({\r\n          method: 'GET',\r\n          url: '/countries/' + rate.country.toLowerCase()\r\n        })\r\n        .then(function(response) {\r\n          scope.states[rate.country] = response.data\r\n          scope.states[rate.country].unshift({\r\n            name: '*'\r\n          })\r\n        })\r\n        .catch(function(error) {\r\n          var type = error.data.errors[0].type\r\n          scope.states[rate.country] = [{\r\n            name: '*'\r\n          }]\r\n\r\n          // We show an empty text input if its not available\r\n          // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\r\n\r\n          if (type !== 'StatesListNotAvailable') {\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          }\r\n        })\r\n    }\r\n\r\n    scope.saveTax = function() {\r\n      $marketcloud.taxes.update(scope.tax.id, scope.tax)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Tax saved', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.Tax.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/taxes/taxes.edit.js","var app = angular.module('DataDashboard')\r\n\r\napp.directive('customOnChange', function() {\r\n  return {\r\n    restrict: 'A',\r\n    link: function(scope, element, attrs) {\r\n      var onChangeHandler = scope.$eval(attrs.customOnChange)\r\n      element.bind('change', onChangeHandler)\r\n    }\r\n  }\r\n})\r\n\r\nfunction csvToJson(csv) {\r\n  var lines = csv.split('\\n')\r\n\r\n  var result = []\r\n\r\n  var headers = lines[0].split(',')\r\n\r\n  for (var i = 1; i < lines.length; i++) {\r\n    var obj = {}\r\n    var currentline = lines[i].split(',')\r\n\r\n    for (var j = 0; j < headers.length; j++) {\r\n      obj[headers[j]] = currentline[j]\r\n    }\r\n\r\n    result.push(obj)\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nfunction validateTaxRates(rates) {\r\n  var testFunction = function(rate) {\r\n    return (\r\n      rate.country &&\r\n      rate.state &&\r\n      rate.postcode &&\r\n      rate.city &&\r\n      rate.rate &&\r\n      rate.hasOwnProperty('priority') // it can be 0 and would fail the simple test\r\n    )\r\n  }\r\n\r\n  // Check that every item pass the test function\r\n  return rates.every(testFunction)\r\n}\r\n\r\nfunction Rate(config) {\r\n  this.state = '*'\r\n  this.postcode = '*'\r\n  this.city = '*'\r\n  this.priority = 0\r\n\r\n  for (var k in config) {\r\n    this[k] = config[k]\r\n  }\r\n\r\n  // We store rates as strings in our default country list\r\n  if (this.rate) {\r\n    this.rate = Number(this.rate)\r\n  }\r\n}\r\n\r\napp.controller('CreateTaxController', [\r\n  '$scope', \r\n  '$http', \r\n  '$marketcloud', \r\n  '$location', \r\n  'Countries', \r\n  'TaxRates',\r\n  '$validation',\r\n  '$models',\r\n  function(scope, http, $marketcloud, location, countries, tax_rates, $validation, $models) {\r\n    scope.countries = countries\r\n    scope.tax_rates = tax_rates\r\n\r\n    scope.countriesWithTaxRates = scope.tax_rates\r\n      .map(function(r) {\r\n        return r.country\r\n      })\r\n      .filter(function(item, pos, self) {\r\n        return self.indexOf(item) == pos\r\n      })\r\n\r\n    scope.countries.unshift({\r\n      name: '*'\r\n    })\r\n\r\n    // Cache of states lists\r\n    scope.states = {}\r\n\r\n    // Whenever the country changes,\r\n    // the list of states must be updated\r\n    scope.tax = {\r\n      rates: []\r\n    }\r\n\r\n    scope.updateCity = function(rate) {\r\n      if (rate.postcode.indexOf('*') > -1) {\r\n        rate.city = '*'\r\n      }\r\n    }\r\n    scope.updatePostcode = function(rate) {\r\n      if (rate.state === '*') {\r\n        rate.postcode = '*'\r\n      }\r\n    }\r\n\r\n    scope.importCSV = function() {\r\n      $('#chooseFileButton').trigger('click')\r\n    }\r\n    scope.handleFileSelect = function(evt) {\r\n      var files = $('#chooseFileButton')[0].files // FileList object\r\n\r\n      // use the 1st file from the list\r\n      var f = files[0]\r\n\r\n      // HTML5 API\r\n      var reader = new FileReader()\r\n\r\n      // Closure to capture the file information.\r\n      reader.onload = (function(theFile) {\r\n        return function(e) {\r\n          // Grabbing the file\r\n          var csv_file = e.target.result\r\n\r\n          // Converting to JSON\r\n          var new_rates = csvToJson(csv_file)\r\n\r\n          if (validateTaxRates(new_rates) === false) {\r\n            notie.alert(2, 'The provided CSV file is not in a valid format', 2)\r\n            return\r\n          }\r\n\r\n          // Transforming into a Rate object to handle defaults\r\n          new_rates = new_rates.map(function(rate) {\r\n            return new Rate(rate)\r\n          })\r\n\r\n          // Pushing new stuff to the bottom\r\n          scope.tax.rates = scope.tax.rates.concat(new_rates)\r\n\r\n          // Calling apply, since Angular is not aware of this async operation\r\n          scope.$apply()\r\n        }\r\n      })(f)\r\n\r\n      // Read in the image file as a data URL.\r\n      reader.readAsText(f)\r\n    }\r\n\r\n    scope.loadRatesFromCountry = function(country) {\r\n      var new_rates = scope.tax_rates\r\n        .filter(function(rate) {\r\n          return rate.country === country\r\n        }).map(function(rate) {\r\n          rate.country = country\r\n          return new Rate(rate)\r\n        })\r\n      scope.tax.rates = scope.tax.rates.concat(new_rates)\r\n    }\r\n\r\n    scope.updateStates = function(rate) {\r\n      if (rate.country === '*') {\r\n        rate.state = '*'\r\n        rate.city = '*'\r\n        return\r\n      }\r\n\r\n      http({\r\n          method: 'GET',\r\n          url: '/countries/' + rate.country.toLowerCase()\r\n        })\r\n        .then(function(response) {\r\n          scope.states[rate.country] = response.data\r\n          scope.states[rate.country].unshift({\r\n            name: '*'\r\n          })\r\n        })\r\n        .catch(function(error) {\r\n          var type = error.data.errors[0].type\r\n          scope.states[rate.country] = '*'\r\n\r\n          // We show an empty text input if its not available\r\n          // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\r\n\r\n          if (type !== 'StatesListNotAvailable') {\r\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n          }\r\n        })\r\n    }\r\n\r\n    scope.addRate = function() {\r\n      scope.tax.rates.push({\r\n        name: '',\r\n        country: '',\r\n        state: '',\r\n        postcode: '',\r\n        city: '',\r\n        rate: 0,\r\n        priority: 0\r\n      })\r\n    }\r\n\r\n    scope.deleteRate = function(index) {\r\n      scope.tax.rates.splice(index, 1)\r\n    }\r\n\r\n    scope.saveTax = function() {\r\n\r\n      $validation.hideErrors();\r\n\r\n      $marketcloud.taxes.save(scope.tax)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Tax saved', 1.5)\r\n          location.path('/system/taxes')\r\n        })\r\n        .catch(function(response) {\r\n\r\n          if (response.status === 400) {\r\n            notie.alert(2, 'The data you entered has some errors', 1.5);\r\n\r\n            var validation = response.data.errors[0];\r\n            var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\r\n\r\n            if (angular.element(selector).length === 0)\r\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\r\n\r\n            $validation.showErrorMessage(validation, $models.Tax.schema, selector)\r\n          } else\r\n            notie.alert(3, 'An error has occurred.', 2)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/taxes/taxes.new.js","'use strict';\r\n/* globals angular */\r\nvar app = angular.module('DataDashboard');\r\nJSON.flatten = function(data) {\r\n    var result = {};\r\n    function recurse (cur, prop) {\r\n        if (Object(cur) !== cur) {\r\n            result[prop] = cur;\r\n        } else if (Array.isArray(cur)) {\r\n             for(var i=0, l=cur.length; i<l; i++)\r\n                 recurse(cur[i], prop + \"[\" + i + \"]\");\r\n            if (l == 0)\r\n                result[prop] = [];\r\n        } else {\r\n            var isEmpty = true;\r\n            for (var p in cur) {\r\n                isEmpty = false;\r\n                recurse(cur[p], prop ? prop+\".\"+p : p);\r\n            }\r\n            if (isEmpty && prop)\r\n                result[prop] = {};\r\n        }\r\n    }\r\n    recurse(data, \"\");\r\n    return result;\r\n}\r\napp.controller('TranslationsController',\r\n\t['$scope', 'resource','resourceType',\r\n\tfunction(scope, resource,type) {\r\n\r\n\t\r\n\t\t// The resource to translate\r\n\t\tscope.resource = resource.data.data;\r\n\t\t// Init locales\r\n\t\tif (!scope.resource.hasOwnProperty('locales')){\r\n\t\t\tscope.resource.locales = {};\r\n\t\t\tscope.availableLocales.forEach(function(locale){\r\n\t\t\t\tscope.resource.locales[locale] = {};\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// Let''s just be sure the locals object has every locale \r\n\t\t\t// initialized to an empty object\r\n\t\t\tscope.availableLocales.forEach(function(locale){\r\n\t\t\t\tif (!scope.resource.locales.hasOwnProperty(locale))\r\n\t\t\t\t\tscope.resource.locales[locale] = {};\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// The type of the resource, product, category, etc...\r\n\t\tscope.type = type;\r\n\r\n\t\tscope.getTranslatableProperties = function(){\r\n\t\t\treturn Object.keys(JSON.flatten(scope.resource))\r\n\t\t\t.filter(function(k){\r\n\t\t\t\treturn (k.indexOf('variant') === -1 &&\r\n\t\t\t\t\t\tk.indexOf('locale') === -1)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tscope.translatables = scope.getTranslatableProperties();\r\n\r\n\t\tvar props_to_translate = {\r\n\t\t\tproducts : [\"name\",\"description\"],\r\n\t\t\tcategories : [\"name\",\"description\"],\r\n\t\t\tbrands : [\"name\",\"description\"],\r\n\t\t\tcollections : [\"name\",\"description\"],\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\r\n\t\tscope.save = function(){\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/translations.js","var app = angular.module('DataDashboard')\r\napp.controller('UsersController', ['$scope', '$marketcloud', 'users',\r\n  function(scope, $marketcloud, resources) {\r\n    scope.users = resources.data.data\r\n\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    // Util\r\n    scope.timestampToDate = function(t) {\r\n      var a = new Date(t)\r\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\r\n      var str = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\r\n      return str\r\n    }\r\n\r\n    scope.loadPage = function(p) {\r\n      scope.query.page = Number(p)\r\n      return scope.loadData(scope.query)\r\n    }\r\n\r\n    scope.delete = function(user) {\r\n      $marketcloud.users.delete(user.id)\r\n        .then(function(response) {\r\n          notie.alert(1, 'User deleted', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.loadData = function(query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n      $marketcloud.users.list(query)\r\n        .then(function(response) {\r\n          scope.users = response.data.data\r\n\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.list.js","var app = angular.module('DataDashboard')\r\n\r\nvar NewUserController = function(scope, $marketcloud, http, location, Countries) {\r\n  scope.user = {\r\n    name: \"\",\r\n    password: \"\",\r\n    registered_with: 'email',\r\n    billing_address : {},\r\n    shipping_address : {}\r\n  }\r\n  scope.countries = Countries\r\n  scope.customPropertiesData = {}\r\n\r\n  scope.copyShippingAddressToBillingAddress = function(){\r\n    for (var k in scope.user.shipping_address)\r\n      scope.user.billing_address[k] = scope.user.shipping_address[k];\r\n  }\r\n\r\n  scope.saveUser = function() {\r\n\r\n    // Joining user object with custom properties\r\n    for (var k in scope.customPropertiesData) {\r\n      scope.user[k] = scope.customPropertiesData[k]\r\n    }\r\n\r\n    console.log(\"Saving this\",scope.user)\r\n    $marketcloud.users.save(scope.user)\r\n      .then(function(response) {\r\n        notie.alert(1, 'User saved', 2)\r\n        location.path('/users')\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(2, 'An error has occurred. Please check the data you entered', 2)\r\n      })\r\n  }\r\n\r\n  // We need to load Roles\r\n  http({\r\n      method: 'GET',\r\n      url: '/applications/' + scope.application.id + '/roles'\r\n    })\r\n    .then(function(response) {\r\n      scope.roles = response.data.data\r\n    })\r\n    .catch(function(response) {\r\n      notie.alert(2, 'An error has occurred while reloading roles.', 1)\r\n    })\r\n\r\n  scope.addCustomProperty = function() {\r\n    if (scope.user.hasOwnProperty(scope.newAttributeName)) {\r\n      scope.userError = 'CUSTOM_PROPERTY_NAME_ALREADY_EXISTS'\r\n    } else {\r\n      scope.customPropertiesData[scope.newAttributeName] = scope.newAttributeValue\r\n      scope.newAttributeValue = null\r\n      scope.newAttributeName = null\r\n    }\r\n  }\r\n\r\n  scope.deleteCustomProperty = function(property_name) {\r\n    delete scope.customPropertiesData[property_name]\r\n  }\r\n}\r\n\r\nNewUserController.$inject = ['$scope', '$marketcloud', '$http', '$location', 'Countries']\r\n\r\napp.controller('NewUserController', NewUserController)\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.new.js","var app = angular.module('DataDashboard')\r\napp.controller('UserController', [\r\n  '$scope',\r\n  '$http', \r\n  '$routeParams', \r\n  'user', \r\n  '$marketcloud',\r\n  'Countries',\r\n  '$utils',\r\n  function(scope, http, params, user, $marketcloud, countries, $utils) {\r\n    // Injecting the resolve's data\r\n    scope.user = user.data.data;\r\n\r\n\r\n\r\n    scope.carts = []\r\n    scope.addresses = []\r\n\r\n    scope.newAddress = {\r\n      email: scope.user.email || '',\r\n      user_id: scope.user.id\r\n    }\r\n\r\n    // This is a list of countries used by the countries autocomplete\r\n    scope.countries = countries\r\n\r\n    scope.update = function() {\r\n      var payload = angular.copy(scope.user)\r\n\r\n      for (var k in scope.customPropertiesData) {\r\n        payload[k] = scope.customPropertiesData[k]\r\n      }\r\n\r\n      delete payload['id']\r\n      delete payload['application_id']\r\n\r\n      $marketcloud.users.update(scope.user.id, payload)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Update Succeded', 2)\r\n        })\r\n        .catch(function(errpr) {\r\n          notie.alert(3, 'An error has occurred, please try again', 2)\r\n        })\r\n    }\r\n\r\n\r\n    scope.toggleAddressVisibility = function(address) {\r\n      address.expanded = !address.expanded;\r\n    }\r\n\r\n    scope.saveAddress = function() {\r\n      $marketcloud.addresses.save(scope.newAddress)\r\n        .then(function(response) {\r\n          notie.alert(1, 'Address created', 2)\r\n          scope.newAddress = {\r\n            email: scope.user.email || '',\r\n            user_id: scope.user.id\r\n          }\r\n          $(\"#addAddressModal\").modal(\"hide\");\r\n          return $marketcloud.addresses.list({\r\n            user_id: scope.user.id\r\n          })\r\n        })\r\n        .then(function(response) {\r\n          scope.addresses = response.data.data\r\n        })\r\n        .catch(function(error) {\r\n          notie.alert(2, 'An error has occurred, please check the data you entered', 2)\r\n        })\r\n    }\r\n\r\n    // Getting the set of core properties from models\r\n    var coreProperties = Models.User.getPropertyNames()\r\n\r\n    // id is a core property often not inside models\r\n    coreProperties.push(\r\n      'id',\r\n      'role',\r\n      'application_id',\r\n      'registered_with',\r\n      'created_at',\r\n      'updated_at',\r\n      'shipping_address',\r\n      'billing_address')\r\n\r\n    // Here we store custom properties\r\n    scope.customPropertiesData = {}\r\n\r\n    for (var k in scope.user) {\r\n      if (coreProperties.indexOf(k) < 0) {\r\n        scope.customPropertiesData[k] = scope.user[k]\r\n        delete scope.user[k]\r\n      }\r\n    }\r\n\r\n    $marketcloud.orders.list({\r\n        \"user.id\": params.userId,\r\n        \"per_page\": 10\r\n      })\r\n      .then(function(response) {\r\n\r\n        scope.orders = response.data.data\r\n      })\r\n      .catch(function(response) {\r\n\r\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\r\n      })\r\n\r\n    $marketcloud.carts.list({\r\n        user_id: params.userId,\r\n        per_page: 10\r\n      })\r\n      .then(function(response) {\r\n\r\n        scope.carts = response.data.data\r\n      })\r\n      .catch(function(response) {\r\n\r\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\r\n      })\r\n\r\n    $marketcloud.addresses.list({\r\n        user_id: params.userId,\r\n        per_page: 5\r\n      })\r\n      .then(function(response) {\r\n\r\n        // We want to \"compress\" the view\r\n        scope.addresses = response.data.data.map(function(address, index) {\r\n          if (0 === index)\r\n            address.expanded = true;\r\n          else\r\n            address.expanded = false;\r\n          return address\r\n        })\r\n\r\n\r\n      })\r\n      .catch(function(response) {\r\n\r\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\r\n      })\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.view.js","var app = angular.module('DataDashboard')\r\napp.controller('EditVariableController',\r\n  ['$scope', '$http', '$location', '$marketcloud', 'variable',\r\n    function (scope, http, location, $marketcloud, variable) {\r\n      scope.variable = variable.data.data\r\n\r\n      function isURL (s) {\r\n        if (typeof s !== 'string') { return false }\r\n        if (typeof s.indexOf !== 'function') { return false }\r\n        return s.indexOf('http://') === 0\r\n      }\r\n\r\n      if (isURL(scope.variable.value)) {\r\n        scope.variable.type = 'URL'\r\n      }\r\n\r\n      scope.containerForNewMediaAttribute = []\r\n\r\n      scope.containersForExistingMediaAttributes = {}\r\n\r\n      scope.$watchCollection('containerForNewMediaAttribute', function () {\r\n        if (scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]) {\r\n          scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\r\n        }\r\n      })\r\n\r\n      if (isURL(scope.variable.value) === true) {\r\n        scope.containersForExistingMediaAttributes['value'] = [scope.variable.value]\r\n        scope.$watchCollection('containersForExistingMediaAttributes.value', function () {\r\n          // If the value is null, it means that we just deleted it, so we don't have to re-update it\r\n          if (scope.variable.value === null) {\r\n            return\r\n          }\r\n          if (scope.containersForExistingMediaAttributes['value']) {\r\n            scope.variable.value = scope.containersForExistingMediaAttributes['value'][scope.containersForExistingMediaAttributes['value'].length - 1]\r\n          }\r\n        })\r\n      }\r\n\r\n      scope.availableTypes =\r\n      [\r\n        { type: 'string', label: 'String' },\r\n        { type: 'number', label: 'Number' },\r\n        { type: 'URL', label: 'Url / Media' },\r\n        { type: 'boolean', label: 'True/False' }\r\n      ]\r\n\r\n      scope.invalidPropertyName = null\r\n      scope.validationMessage = null\r\n      scope.validate = function () {\r\n\r\n      }\r\n\r\n      scope.update = function () {\r\n        var payload = angular.copy(scope.variable)\r\n\r\n        if (payload.type === 'URL') {\r\n          payload.type = 'string'\r\n        }\r\n        $marketcloud.variables.update(scope.variable.id, payload)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Variable successfully saved.', 1.5)\r\n        })\r\n        .catch(function (error) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n      }\r\n    }\r\n  ])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.edit.js","var app = angular.module('DataDashboard')\r\napp.controller('VariablesController', ['$scope', '$http', 'variables', '$marketcloud',\r\n  function(scope, http, resources, $marketcloud) {\r\n    // Pagination\r\n    scope.pagination = {\r\n      currentPage: resources.data.page,\r\n      numberOfPages: resources.data.pages,\r\n      nextPage: resources.data._links.next || null,\r\n      previousPage: resources.data._links.prev || null,\r\n      count: resources.data.count\r\n    }\r\n\r\n    // Query\r\n    scope.query = {\r\n      per_page: 20\r\n    }\r\n\r\n    // Initial data resolved from the router\r\n    scope.variables = resources.data.data\r\n\r\n    scope.loadPage = function(p) {\r\n      return scope.loadData({\r\n        page: p\r\n      })\r\n    }\r\n    scope.loadData = function(query) {\r\n      if (!query) {\r\n        query = scope.query\r\n      }\r\n\r\n      $marketcloud.variables.list(query)\r\n        .then(function(response) {\r\n          scope.variables = response.data.data\r\n\r\n          scope.pagination = {\r\n            currentPage: response.data.page,\r\n            numberOfPages: response.data.pages,\r\n            nextPage: response.data._links.next || null,\r\n            previousPage: response.data._links.prev || null,\r\n            count: response.data.count\r\n          }\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n    scope.setPublishing = function(variable) {\r\n\r\n      $marketcloud.variables.update(variable.id, {\r\n          published: variable.published\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Updated!', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.deleteVariable = function(variable_id, index) {\r\n      $marketcloud.variables.delete(variable_id)\r\n        .then(function(response) {\r\n          scope.loadData({\r\n            page: 1\r\n          })\r\n          notie.alert(1, 'Variable deleted', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.list.js","var app = angular.module('DataDashboard')\r\napp.controller('CreateVariableController', ['$scope', '$http', '$location', '$marketcloud',\r\n  function (scope, http, location, $marketcloud) {\r\n    scope.variable = {\r\n      type: 'string',\r\n      value: '',\r\n      name: ''\r\n    }\r\n\r\n    scope.containerForNewMediaAttribute = []\r\n\r\n    scope.containersForExistingMediaAttributes = {}\r\n\r\n    scope.$watchCollection('containerForNewMediaAttribute', function () {\r\n      scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\r\n    })\r\n\r\n    scope.availableTypes =\r\n    [\r\n        { type: 'string', label: 'String'},\r\n        { type: 'number', label: 'Number'},\r\n        { type: 'URL', label: 'Url / Media'},\r\n        { type: 'boolean', label: 'True/False'}\r\n    ]\r\n\r\n    scope.invalidPropertyName = null\r\n    scope.validationMessage = null\r\n    scope.validate = function () {\r\n\r\n    }\r\n\r\n    scope.save = function () {\r\n      var payload = angular.copy(scope.variable)\r\n      if (payload.type === 'URL') {\r\n        payload.type = 'string'\r\n      }\r\n      $marketcloud.variables.save(payload)\r\n        .then(function (response) {\r\n          notie.alert(1, 'Variable successfully saved.', 1.5)\r\n          location.path('/variables')\r\n        })\r\n        .catch(function (error) {\r\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n        })\r\n    }\r\n  }\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.new.js","angular.module('DataDashboard').controller('EditVariantController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct',\r\n  function(scope, $marketcloud, params, $http, resolvedProduct) {\r\n    scope.product = resolvedProduct.data.data\r\n\r\n    var originalVariantData = null\r\n\r\n    scope.variant = null\r\n\r\n    // This object holds the actual properties of the variant\r\n    // computed by variant + parent\r\n    scope.product_merge_variant = {}\r\n\r\n    // When saving the variant, only what does not match with the parent\r\n    // is saved inside the variant object\r\n    scope.customPropertiesData = {}\r\n\r\n    // These cannot be touched\r\n    scope.variantDefiningProperties = {}\r\n\r\n    scope.currentVariantId = null\r\n\r\n    scope.filterVariantProps = function(o) {\r\n      var p = {}\r\n      for (var k in o) {\r\n        // if its not an inherited property, then it's a variant property name\r\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\r\n          p[k] = k + ': ' + String(o[k])\r\n        }\r\n      }\r\n      return p\r\n\r\n      // return o\r\n    }\r\n\r\n    // This method must be implemented in order to\r\n    // make the media manager work\r\n    scope.getImagesContainer = function() {\r\n      return scope.product_merge_variant.images\r\n    }\r\n\r\n    scope.removeImage = function(i) {\r\n      scope.product_merge_variant.images.splice(i, 1)\r\n    }\r\n\r\n    scope.getVariantStyle = function(i) {\r\n      // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\r\n      // ]\r\n      var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\r\n      return r[i % r.length]\r\n    }\r\n    scope.getVariantStyle = function(i) {\r\n      var r = [{\r\n        'color': '#c0392b'\r\n      }, {\r\n        'color': '#27ae60'\r\n      }, {\r\n        'color': '#2c3e50'\r\n      }, {\r\n        'color': '#d35400'\r\n      }]\r\n      return r[i % r.length]\r\n    }\r\n\r\n    scope.getVariantClass = function(i) {\r\n      var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger']\r\n      return 'label solid ' + (classes[i % classes.length])\r\n    }\r\n\r\n    scope.updateVariant = function() {\r\n      \r\n      \r\n      // We take only some stuff from the main product\r\n      var variantProperties = [\r\n      // Le eliino queste due perchè altrimenti, se metto un prezzo nel parent\r\n      // e nel figlio metto lo stesso, non me lo salva\r\n        //'price',\r\n        //'price_discount',\r\n        'category_id',\r\n        'description',\r\n        'stock_type',\r\n        'stock_status',\r\n        'stock_level',\r\n        'sku',\r\n        'barcode',\r\n        'images',\r\n        'requires_shipping',\r\n        'width',\r\n        'depth',\r\n        'height',\r\n        'weight'\r\n      ]\r\n\r\n      var toSend = angular.copy(scope.variant)\r\n\r\n      for (var k in scope.product_merge_variant) {\r\n        \r\n        // Se la property della variante è\r\n        // deiversa da ciò che sta in product_merge_variant\r\n        // e la properietà è presente in variantProperties\r\n        if (toSend[k] !== scope.product_merge_variant[k] && variantProperties.indexOf(k) > -1) {\r\n\r\n          toSend[k] = scope.product_merge_variant[k]\r\n        }\r\n\r\n        if (k === \"price_discount\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\r\n           console.log(k+\" dovrebbe passare da \"+originalVariantData[k]+\" a \"+scope.product_merge_variant[k])\r\n           toSend.price_discount = scope.product_merge_variant[k]\r\n        }\r\n\r\n        if (k === \"price\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\r\n           toSend.price = scope.product_merge_variant[k]\r\n        }\r\n\r\n\r\n      }\r\n\r\n      console.log(\"product_merge_variant\",angular.copy(scope.product_merge_variant))\r\n      console.log(\"toSend\",angular.copy(toSend))\r\n\r\n      \r\n\r\n\r\n      $http({\r\n          method: 'PUT',\r\n          url: API_BASE_URL + '/products/' + params.productId + '/variants/' + scope.variant.id,\r\n          headers: {\r\n            Authorization: window.public_key + ':' + window.token\r\n          },\r\n          data: toSend\r\n        })\r\n        .then(function(response) {\r\n          notie.alert(1, 'Variant successfully updated', 1.5)\r\n        })\r\n        .catch(function(response) {\r\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\r\n        })\r\n    }\r\n\r\n    scope.setCurrentVariant = function(variant_id) {\r\n      scope.currentVariantId = variant_id\r\n      scope.product.variants.forEach(function(v) {\r\n        if (Number(v.id) === Number(variant_id)) {\r\n          scope.variant = v\r\n           originalVariantData = angular.copy(v)\r\n        }\r\n      })\r\n      for (var k in scope.product) {\r\n        scope.product_merge_variant[k] = scope.product[k]\r\n      }\r\n      for (var j in scope.variant) {\r\n        scope.product_merge_variant[j] = scope.variant[j]\r\n      }\r\n    }\r\n\r\n    scope.setCurrentVariant(Number(params.variantId))\r\n\r\n    scope.product = resolvedProduct.data.data\r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variants.edit.js","angular.module('DataDashboard')\r\n.controller('ListVariantsController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct',\r\n  function(scope, $marketcloud, params, $http, resolvedProduct) {\r\n    \r\n    scope.product = resolvedProduct.data.data\r\n\r\n    // These cannot be touched\r\n    scope.variantDefiningProperties = {}\r\n\r\n    scope.deleteVariant = function(variant) {\r\n    return $http({\r\n        method: 'DELETE',\r\n        url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\r\n        headers: {\r\n          Authorization: window.public_key + ':' + window.token\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        notie.alert(1, 'Variant deleted', 1.5)\r\n        scope.product = response.data.data\r\n      })\r\n      .catch(function(response) {\r\n        notie.alert(3, 'An error has occurred, please try again.', 1.5)\r\n      })\r\n  }\r\n\r\n  scope.clone = function(variant) {\r\n        var variantToSave = angular.copy(variant)\r\n          // Removing useless stuff in the variant\r\n        delete variantToSave['id']\r\n\r\n        return $http({\r\n              method: 'POST',\r\n              url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\r\n              data: variantToSave,\r\n              headers: {\r\n                Authorization: window.public_key + ':' + window.token\r\n              }\r\n        })\r\n        .then( function(response){\r\n          notie.alert(1,\"Variant successfully cloned\",2);\r\n        })\r\n        .catch( function(response){\r\n          notie.alert(2,\"An error has occurred, please try again\",2);\r\n        })\r\n\r\n      }\r\n\r\n\r\n    scope.filterVariantProps = function(o) {\r\n      var p = {}\r\n      for (var k in o) {\r\n        // if its not an inherited property, then it's a variant property name\r\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\r\n          p[k] = k + ': ' + String(o[k])\r\n        }\r\n      }\r\n      return p\r\n\r\n      // return o\r\n    }\r\n\r\n    \r\n    scope.getVariantStyle = function(i) {\r\n      var r = [{\r\n        'color': '#c0392b'\r\n      }, {\r\n        'color': '#27ae60'\r\n      }, {\r\n        'color': '#2c3e50'\r\n      }, {\r\n        'color': '#d35400'\r\n      }]\r\n      return r[i % r.length]\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n   \r\n  }\r\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variants/variants.list.controller.js","var app = angular.module('DataDashboard');\r\n\r\napp.controller('WebhooksController', ['$scope', '$http', '$location','webhooks',\r\n\tfunction(scope, http, location,webhooks) {\r\n\t\r\n\t\t\t\r\n\t\tscope.mode=null;\r\n\r\n\t\tscope.webhooks = [{\r\n\t\t\tevent : 'products.create',\r\n\t\t\tmethod : 'POST',\r\n\t\t\turl : 'mybackend.herokuapp.com/newproduct',\r\n\t\t\theaders : {\r\n\r\n\t\t\t}\r\n\t\t}];\r\n\r\n\r\n\t\tscope.webhooks = webhooks.data.data;\r\n\r\n\r\n\t\tscope.events = [\r\n\t\t\t'products.create',\r\n\t\t\t'products.delete',\r\n\t\t\t'products.update',\r\n\t\t\t'brands.create',\r\n\t\t\t'brands.delete',\r\n\t\t\t'brands.update',\r\n\t\t\t'categories.create',\r\n\t\t\t'categories.delete',\r\n\t\t\t'categories.update',\r\n\t\t\t'orders.create',\r\n\t\t\t'orders.delete',\r\n\t\t\t'orders.update',\r\n\t\t\t'carts.create',\r\n\t\t\t'carts.delete',\r\n\t\t\t'carts.update',\r\n\t\t\t'payments.create',\r\n\t\t\t'payments.delete',\r\n\t\t\t'payments.update',\r\n\t\t\t'shippings.create',\r\n\t\t\t'shippings.delete',\r\n\t\t\t'shippings.update',\r\n\t\t];\r\n\t\tscope.load = function() {\r\n\t\t\thttp({\r\n\t\t\t\tmethod : 'GET',\r\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks'\r\n\t\t\t})\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tscope.webhooks = response.data.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(2,'An error has occurred while reloading webhooks.',1);\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\tscope.edit = function(hook) {\r\n\t\t\tscope.newWebhook = hook;\r\n\t\t\tscope.showUpdateModal();\r\n\t\t};\r\n\t\tscope.showUpdateModal = function() {\r\n\t\t\tscope.mode = 'update';\r\n\t\t\t$('#newWebhookModal').modal('show');\r\n\t\t};\r\n\r\n\t\tscope.showCreateModal = function() {\r\n\t\t\tscope.mode = 'create';\r\n\t\t\t$('#newWebhookModal').modal('show');\r\n\t\t};\r\n\r\n\t\tscope.saveWebhook = function() {\r\n\t\t\thttp({\r\n\t\t\t\tmethod :'POST',\r\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks',\r\n\t\t\t\tdata : scope.newWebhook\r\n\t\t\t})\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tnotie.alert(1,'Webhook correctly created',1);\r\n\t\t\t\t\tscope.newWebhook = {};\r\n\t\t\t\t\t$('#newWebhookModal').modal('hide');\r\n\t\t\t\t\tscope.load();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not created',1);\r\n\t\t\t\t\tscope.newWebhook = {};\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\r\n\t\tscope.updateWebhook = function() {\r\n\t\t\thttp({\r\n\t\t\t\tmethod :'PUT',\r\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks/'+scope.newWebhook.id,\r\n\t\t\t\tdata : scope.newWebhook\r\n\t\t\t})\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tnotie.alert(1,'Webhook correctly updated',1);\r\n\t\t\t\t\tscope.newWebhook = {};\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not updated',1);\r\n\t\t\t\t\tscope.newWebhook = {};\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\r\n\t\tscope.delete = function(hook) {\r\n\t\t\thttp({\r\n\t\t\t\tmethod :'DELETE',\r\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks/'+hook.id\r\n\t\t\t})\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tnotie.alert(1,'Webhook correctly deleted',1);\r\n\t\t\t\t\tscope.load();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(response){\r\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not deleted',1);\r\n\t\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/webhooks.js","var app = angular.module('DataDashboard');\r\n\r\napp.directive('avatar', [function() {\r\n\r\n        return {\r\n            restrict: 'AE',\r\n            replace: true,\r\n            transclude:true,\r\n            scope: {\r\n                initials: '@initials',\r\n                width: '@width',\r\n                bgcolor: '@bgColor',\r\n                textColor: '@textColor',\r\n                wrapper: '=wrapper',\r\n                pictureResolution: '@pictureResolution',\r\n                pixelated: '=pixelated',\r\n                roundShape: '=roundShape',\r\n                class: '@class',\r\n                imgClass: '@imgClass',\r\n                style: '@style',\r\n                string:'@string',\r\n                cornerRadius: '@cornerRadius',\r\n                pictureFormat: '@pictureFormat',\r\n                colorsPalette: '=colorsPalette',\r\n                autoColor: '=autoColor',\r\n                fontWeight: '@fontWeight',\r\n                fontScale: '@fontScale',\r\n                textShadow: '=textShadow',\r\n                bind: '=bind',\r\n                maxLength: '@maxLength',\r\n                upperCase: '=upperCase'\r\n            },\r\n            link: function(scope, element, attrs) {\r\n\r\n                var _long = 45,\r\n                    _picture_resolution = 256,\r\n                    _wrapper = true,\r\n                    _str = \"\", //scope.initials || \"\",\r\n                    _bgcolor = \"#000\",\r\n                    _textcolor = \"#fff\",\r\n                    _pixelated = false,\r\n                    _img_styling = \"vertical-align:top;\",\r\n                    _roundShape = false,\r\n                    _wrapper_styling = \"border-radius:0; display:block; overflow:hidden;\",\r\n                    _extra_classes = \"\",\r\n                    _extra_img_classes = \"\",\r\n                    _extra_styles = \"\",\r\n                    _corner_radius = \"0\",\r\n                    _picture_format = \"png\",\r\n                    _colors_palette = [\"#bdc3c7\",\"#6f7b87\",\"#2c3e50\",\"#2f3193\",\"#662d91\",\"#922790\",\"#ec2176\",\"#ed1c24\",\"#f36622\",\"#f8941e\",\"#fab70f\",\"#fdde00\",\"#d1d219\",\"#8ec73f\",\"#00a650\",\"#00aa9c\",\"#00adef\",\"#0081cd\",\"#005bab\"],\r\n                    _autoColor = false,\r\n                    _font_weight = 100,\r\n                    _font_scale = 100,\r\n                    _text_shadow = false,\r\n                    _bind = false,\r\n                    _img_width = \"100%\",\r\n                    _upperCase = false;\r\n\r\n                // We randomize the bgcolor\r\n                var mc_palette = [\r\n                '#1abc9c',\r\n                '#16a085',\r\n                '#f1c40f',\r\n                '#f39c12',\r\n                '#2ecc71',\r\n                '#27ae60',\r\n                '#27ae60',\r\n                '#e67e22',\r\n                '#d35400',\r\n                '#3498db',\r\n                '#2980b9',\r\n                '#c0392b',\r\n                '#e74c3c',\r\n                '#9b59b6',\r\n                '#8e44ad'\r\n                ]\r\n\r\n                if (scope.initials.length === 0)\r\n                    scope.initials = \"??\";\r\n\r\n                var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y'];\r\n\r\n                var position = dict.indexOf(scope.initials.substr(0,1).toLowerCase());\r\n\r\n                var chosenColorPosition = position % mc_palette.length\r\n                \r\n                if (chosenColorPosition === -1)\r\n                  chosenColorPosition = 0;\r\n\r\n                var chosenColor = mc_palette[chosenColorPosition];\r\n                \r\n                _bgcolor = chosenColor\r\n\r\n                function checkValues(){\r\n\r\n                    if (scope.bind != undefined){\r\n                        _bind = scope.bind;\r\n                    }\r\n\r\n                    if (scope.textColor != undefined) {\r\n                        _textcolor = scope.textColor;\r\n                    }\r\n\r\n                    if (scope.pictureResolution != undefined) {\r\n                        _picture_resolution = scope.pictureResolution;\r\n                    }\r\n\r\n                    if (scope.width != undefined) {\r\n                        _long = scope.width;\r\n                    }   \r\n\r\n                    if (scope.wrapper != undefined) {\r\n                        _wrapper = scope.wrapper;\r\n                        if ( _wrapper === false ) { \r\n                            _img_width = _long;\r\n                        }\r\n                    }\r\n\r\n                    if (scope.pixelated != undefined) {\r\n                        _pixelated = scope.pixelated;\r\n                        if ( _pixelated === true ) { \r\n                            _img_styling += \"image-rendering:pixelated; image-rendering:-moz-crisp-edges;\"; \r\n                        }\r\n                    }\r\n\r\n                    if (scope.roundShape != undefined) {\r\n                        _roundShape = scope.roundShape;\r\n                        if ( _roundShape ) _wrapper_styling += \"border-radius: \"+ _long +\"px;\";\r\n                    } else {\r\n                        if ( scope.cornerRadius != undefined ){\r\n                            _corner_radius = scope.cornerRadius;\r\n                            _wrapper_styling += \"border-radius: \"+ _corner_radius +\"px;\";\r\n                        }\r\n                    }\r\n\r\n                    if (scope.class != undefined) {\r\n                        _extra_classes = scope.class;\r\n                    }\r\n\r\n                    if (scope.imgClass != undefined) {\r\n                        _extra_img_classes = scope.imgClass;\r\n                    }\r\n\r\n                    if (scope.style != undefined) {\r\n                        _extra_styles = scope.style;\r\n                    }\r\n\r\n                    if (scope.initials != undefined) {\r\n                        _str = scope.initials;\r\n                    }\r\n\r\n                    if (scope.string != undefined) {\r\n                        _str = getInitialsFromString( scope.string );\r\n                    }\r\n\r\n                    if (scope.maxLength != undefined) {\r\n                        _str = _str.substr(0, scope.maxLength );\r\n                    }\r\n\r\n                    if (scope.pictureFormat === 'jpeg') {\r\n                        _picture_format = \"jpeg\";\r\n                    }\r\n\r\n                    if (scope.colorsPalette != undefined) {\r\n                        _colors_palette = scope.colorsPalette;\r\n                    }                 \r\n\r\n                    if (scope.bgcolor != undefined) {\r\n                        _bgcolor = scope.bgcolor;\r\n                    } else {\r\n\r\n                        if (scope.autoColor != undefined) {\r\n\r\n                            _autoColor = scope.autoColor;\r\n                            if ( _autoColor === true ) {\r\n                                var i, lon = _str.length, charIndex=0,colorIndex;\r\n                                for(i=0; i<lon;i++) charIndex = _str.charCodeAt(i);\r\n                                colorIndex = charIndex % _colors_palette.length;\r\n                                _bgcolor = _colors_palette[ colorIndex ];\r\n                            }\r\n                        }                     \r\n                    }\r\n\r\n                    if (scope.fontWeight != undefined) {\r\n                        _font_weight = scope.fontWeight;\r\n                    }\r\n\r\n                    if (scope.fontScale != undefined) {\r\n                        _font_scale = scope.fontScale;\r\n                    }\r\n\r\n                    if (scope.textShadow != undefined) {\r\n                        _text_shadow = scope.textShadow;\r\n                    }\r\n\r\n                    if (scope.upperCase === true) {\r\n                        _str = _str.toUpperCase();\r\n                    }\r\n\r\n                }\r\n\r\n                function generateAvatar(name, w, h, bgcolor, textcolor, bgImage) {\r\n                    var WIDTH = 256, HEIGHT = 256, canvas, ctx, _font_size;\r\n\r\n                    if (w != undefined && w > 0) {\r\n                        if (h != undefined && h > 0) {\r\n                            WIDTH = w;\r\n                            HEIGHT = h;\r\n                        }\r\n                    }\r\n\r\n                    canvas = document.createElement('canvas');\r\n                    canvas.id = \"ngAvatar-\" + Date.now();\r\n                    canvas.width = WIDTH;\r\n                    canvas.height = HEIGHT;\r\n\r\n                    ctx = canvas.getContext('2d');\r\n                    ctx.fillStyle = bgcolor;\r\n                    ctx.fillRect(0, 0, WIDTH, HEIGHT);\r\n  \r\n                    _font_size = WIDTH / (2 / ( _font_scale / 100 ));     \r\n                    ctx.font = _font_weight +\" \"+ _font_size +\"px sans-serif\";\r\n\r\n                    if ( _text_shadow === true ) {\r\n                        ctx.shadowColor = \"black\";\r\n                        ctx.shadowOffsetX = 0; \r\n                        ctx.shadowOffsetY = 0; \r\n                        ctx.shadowBlur = 5;                        \r\n                    }\r\n\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.fillStyle = textcolor;\r\n                    //ctx.fillText(_str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) + 5 );\r\n                    ctx.fillText( _str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) );\r\n\r\n                    return canvas.toDataURL(\"image/\"+ _picture_format );\r\n                }\r\n\r\n                function getInitialsFromString(str){\r\n\r\n                    var output = \"\", \r\n                        i = 0, \r\n                        str = str.split(\" \"),\r\n                        len = str.length;\r\n                    \r\n                    for ( i; i < len; i++ ) if ( str[i] != \"\" ) output += str[i][0]; //.toUpperCase();\r\n                    return output;\r\n                }\r\n\r\n                var currentElement = element;\r\n\r\n                function render(){\r\n                    var imgData = generateAvatar( _str, _picture_resolution, _picture_resolution, _bgcolor, _textcolor, null);\r\n\r\n                    var html = '';\r\n                    if (_wrapper) html += '<div class=\"avatar-wrapper '+ _extra_classes +'\" style=\"'+ _wrapper_styling +' width:' + _long + 'px; height:' + _long + 'px; '+ _extra_styles +'\">';\r\n                    html += '<img src=\"' + imgData + '\" class=\"avatar-picture '+ _extra_img_classes +'\" style=\"'+ _img_styling +'\" width=\"'+ _img_width +'\" height=\"\" />';\r\n                    if (_wrapper) html += '</div>';\r\n\r\n                    var replacementElement = angular.element(html);\r\n                    currentElement.replaceWith(replacementElement);\r\n                    currentElement = replacementElement;\r\n                }\r\n\r\n                checkValues();\r\n                if ( _bind === true ){\r\n\r\n                    scope.$watch( 'string', function ( value ) {\r\n\r\n                        checkValues();\r\n                        render();\r\n                    });\r\n\r\n                    scope.$watch( 'initials', function ( value ) {\r\n\r\n                        checkValues();\r\n                        render();\r\n                    });\r\n\r\n                    /*\r\n                    scope.$watch( 'bgcolor', function ( value ) {\r\n                        checkValues();\r\n                        render();\r\n                    });\r\n                    */\r\n\r\n                } else {\r\n\r\n                    render();\r\n                }\r\n\r\n            }\r\n        };\r\n    }]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/avatar.directive.js","(function(app) {\r\n  \"use strict\";\r\n  app.directive('contenteditable', function() {\r\n    return {\r\n      restrict: 'A', // only activate on element attribute\r\n      require: '?ngModel', // get a hold of NgModelController\r\n      link: function(scope, element, attrs, ngModel) {\r\n        if (!ngModel) return; // do nothing if no ng-model\r\n\r\n        // Specify how UI should be updated\r\n        ngModel.$render = function() {\r\n          element.html(ngModel.$viewValue || '');\r\n        };\r\n\r\n        // Listen for change events to enable binding\r\n        element.on('blur keyup change', function() {\r\n          scope.$apply(read);\r\n        });\r\n        read(); // initialize\r\n\r\n        // Write data to the model\r\n        function read() {\r\n          var html = element.html();\r\n          // When we clear the content editable the browser leaves a <br> behind\r\n          // If strip-br attribute is provided then we strip this out\r\n          if (attrs.stripBr && html == '<br>') {\r\n            html = '';\r\n          }\r\n          ngModel.$setViewValue(html);\r\n        }\r\n      }\r\n    };\r\n  });\r\n\r\n\r\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/contenteditable.directive.js","var app = angular.module('DataDashboard');\r\napp.directive('dropdown', function($document) {\r\n  return {\r\n    restrict: \"C\",\r\n    link: function(scope, elem, attr) {\r\n\r\n\r\n\r\n      // Handling nested dropdowns\r\n      angular.element('.dropdown-submenu > a.dropdown-submenu-toggle')\r\n      .on(\"click\", function(e) {\r\n\r\n        // We get a pointer to the submenu\r\n        var submenu = angular.element(this).next('ul');\r\n\r\n\r\n        angular.element(submenu).toggle()\r\n        \r\n\r\n        // Preventing further event handling\r\n        e.stopImmediatePropagation();\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      });\r\n\r\n    }\r\n  }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/dropdown.directive.js","\t\r\n\r\n\tvar app  = angular.module('DataDashboard');\r\n\tapp.directive('fallbackSrc', function() {\r\n\t  return {\r\n\t    link: function(scope, element, attrs) {\r\n\t      element.bind('error', function() {\r\n\t        if (attrs.src !== attrs.fallbackSrc) {\r\n\t          attrs.$set('src', attrs.fallbackSrc);\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t  };\r\n\t});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/fallback_src.js","(function(app){\r\napp.directive('fileModel', [\r\n    '$parse',\r\n    function ($parse) {\r\n      return {\r\n        restrict: 'A',\r\n        link: function(scope, element, attrs) {\r\n          var model = $parse(attrs.fileModel);\r\n          var modelSetter = model.assign;\r\n\r\n          element.bind('change', function(){\r\n            scope.$apply(function(){\r\n              if (attrs.multiple) {\r\n                modelSetter(scope, element[0].files);\r\n              }\r\n              else {\r\n                modelSetter(scope, element[0].files[0]);\r\n              }\r\n            });\r\n          });\r\n        }\r\n      };\r\n    }\r\n  ]);\r\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/fileModel.directive.js","var app  = angular.module('DataDashboard');\r\napp.directive('focusOnShow', function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, $element, $attr) {\r\n\t\t\tif ($attr.ngShow){\r\n\t\t\t\t$scope.$watch($attr.ngShow, function(newValue){\r\n\t\t\t\t\tif(newValue){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\t$element[0].focus();\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t});      \r\n\t\t\t}\r\n\t\t\tif ($attr.ngHide){\r\n\t\t\t\t$scope.$watch($attr.ngHide, function(newValue){\r\n\t\t\t\t\tif(!newValue){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\t$element[0].focus();\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t});      \r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/focusOnShow.directive.js","(function () {\r\n'use strict';\r\n\r\n/**\r\n * Heavily adapted from the `type=\"number\"` directive in Angular's\r\n * /src/ng/directive/input.js\r\n */\r\n\r\nvar NUMBER_REGEXP = /^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/;\r\nvar DEFAULT_PRECISION = 4;\r\n\r\nangular.module('DataDashboard')\r\n\r\n.directive('money', [\"$parse\", function ($parse) {\r\n  function link(scope, el, attrs, ngModelCtrl) {\r\n    var minVal, maxVal, precision, lastValidViewValue;\r\n    var isDefined = angular.isDefined;\r\n    var isUndefined = angular.isUndefined;\r\n    var isNumber = angular.isNumber;\r\n\r\n    /**\r\n     * Returns a rounded number in the precision setup by the directive\r\n     * @param  {Number} num Number to be rounded\r\n     * @return {Number}     Rounded number\r\n     */\r\n    function round(num) {\r\n      var d = Math.pow(10, precision);\r\n      return Math.round(num * d) / d;\r\n    }\r\n\r\n    /**\r\n     * Returns a string that represents the rounded number\r\n     * @param  {Number} value Number to be rounded\r\n     * @return {String}       The string representation\r\n     */\r\n    function formatPrecision(value) {\r\n      return parseFloat(value).toFixed(precision);\r\n    }\r\n\r\n    function isPrecisionValid() {\r\n      return !isNaN(precision) && precision > -1;\r\n    }\r\n\r\n    function isValueValid(value) {\r\n      return angular.isNumber(value) && !isNaN(value);\r\n    }\r\n\r\n    function updateValuePrecision() {\r\n      var modelValue = ngModelCtrl.$modelValue;\r\n\r\n      if (isValueValid(modelValue) && isPrecisionValid()) {\r\n        ngModelCtrl.$modelValue = round(modelValue);\r\n        $parse(attrs.ngModel).assign(scope, ngModelCtrl.$modelValue);\r\n        changeViewValue(formatPrecision(modelValue));\r\n\r\n        // Save the rounded view value\r\n        lastValidViewValue = ngModelCtrl.$viewValue;\r\n      }\r\n    }\r\n\r\n    function changeViewValue(value) {\r\n      ngModelCtrl.$viewValue = value;\r\n      ngModelCtrl.$commitViewValue();\r\n      ngModelCtrl.$render();\r\n    }\r\n\r\n\r\n    ngModelCtrl.$parsers.push(function (value) {\r\n      if (ngModelCtrl.$isEmpty(value)) {\r\n        lastValidViewValue = value;\r\n        return null;\r\n      }\r\n\r\n      // Handle leading decimal point, like \".5\"\r\n      if (value.indexOf('.') === 0) {\r\n        value = '0' + value;\r\n      }\r\n\r\n      // Allow \"-\" inputs only when min < 0\r\n      if (value.indexOf('-') === 0) {\r\n        if (minVal >= 0) {\r\n          changeViewValue('');\r\n          return null;\r\n        } else if (value === '-' || value === '-.') {\r\n          return null;\r\n        }\r\n      }\r\n\r\n      if (NUMBER_REGEXP.test(value)) {\r\n        // Save as valid view value if it's a number\r\n        lastValidViewValue = value;\r\n        return parseFloat(value);\r\n      } else {\r\n        // Render the last valid input in the field\r\n        changeViewValue(lastValidViewValue);\r\n        return lastValidViewValue;\r\n      }\r\n    });\r\n\r\n\r\n    // Min validation\r\n    ngModelCtrl.$validators.min = function (value) {\r\n      return ngModelCtrl.$isEmpty(value) || isUndefined(minVal) || value >= minVal;\r\n    };\r\n    if (isDefined(attrs.min) || attrs.ngMin) {\r\n      attrs.$observe('min', function(val) {\r\n        if (isDefined(val) && !isNumber(val)) {\r\n          val = parseFloat(val, 10);\r\n        }\r\n        minVal = isNumber(val) && !isNaN(val) ? val : undefined;\r\n        ngModelCtrl.$validate();\r\n      });\r\n    } else {\r\n      minVal = 0;\r\n    }\r\n\r\n\r\n    // Max validation\r\n    if (isDefined(attrs.max) || attrs.ngMax) {\r\n      ngModelCtrl.$validators.max = function(value) {\r\n        return ngModelCtrl.$isEmpty(value) || isUndefined(maxVal) || value <= maxVal;\r\n      };\r\n\r\n      attrs.$observe('max', function(val) {\r\n        if (isDefined(val) && !isNumber(val)) {\r\n          val = parseFloat(val, 10);\r\n        }\r\n        maxVal = isNumber(val) && !isNaN(val) ? val : undefined;\r\n        ngModelCtrl.$validate();\r\n      });\r\n    }\r\n\r\n    // Round off (disabled by \"-1\")\r\n    if (isDefined(attrs.precision)) {\r\n      attrs.$observe('precision', function (value) {\r\n        precision = parseInt(value, 10);\r\n\r\n        updateValuePrecision();\r\n      });\r\n    } else {\r\n      precision = DEFAULT_PRECISION;\r\n    }\r\n\r\n    ngModelCtrl.$parsers.push(function (value) {\r\n      if (value) {\r\n        // Round off value to specified precision\r\n        value = isPrecisionValid() ? round(value) : value;\r\n      }\r\n      return value;\r\n    });\r\n\r\n    ngModelCtrl.$formatters.push(function (value) {\r\n      if (isDefined(value)) {\r\n        return isPrecisionValid() && isValueValid(value) ?\r\n          formatPrecision(value) : value;\r\n      } else {\r\n        return '';\r\n      }\r\n    });\r\n\r\n    // Auto-format precision on blur\r\n    el.bind('blur', function () {\r\n      ngModelCtrl.$commitViewValue();\r\n      updateValuePrecision();\r\n    });\r\n  }\r\n\r\n  return {\r\n    restrict: 'A',\r\n    require: 'ngModel',\r\n    link: link\r\n  };\r\n}]);\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/money.directive.js","angular.module('Marketcloud.Shared').directive('ngThumb', ['$window', function($window) {\r\n\tvar helper = {\r\n\t\tsupport: !!($window.FileReader && $window.CanvasRenderingContext2D),\r\n\t\tisFile: function(item) {\r\n\t\t\treturn angular.isObject(item) && item instanceof $window.File;\r\n\t\t},\r\n\t\tisImage: function(file) {\r\n\t\t\tvar type =  '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\r\n\t\t\treturn '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\ttemplate: '<canvas/>',\r\n\t\tlink: function(scope, element, attributes) {\r\n\t\t\tif (!helper.support) return;\r\n\r\n\t\t\tvar params = scope.$eval(attributes.ngThumb);\r\n\r\n\t\t\tif (!helper.isFile(params.file)) return;\r\n\t\t\tif (!helper.isImage(params.file)) return;\r\n\r\n\t\t\tvar canvas = element.find('canvas');\r\n\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\treader.onload = onLoadFile;\r\n\t\t\treader.readAsDataURL(params.file);\r\n\r\n\t\t\tfunction onLoadFile(event) {\r\n\t\t\t\tvar img = new Image();\r\n\t\t\t\timg.onload = onLoadImage;\r\n\t\t\t\timg.src = event.target.result;\r\n\t\t\t}\r\n\r\n\t\t\tfunction onLoadImage() {\r\n\t\t\t\tvar width = params.width || this.width / this.height * params.height;\r\n\t\t\t\tvar height = params.height || this.height / this.width * params.width;\r\n\t\t\t\tcanvas.attr({ width: width, height: height });\r\n                    //canvas.attr({ width: canvas.parent().width, height: canvas.parent().height });\r\n\t\t\t\tcanvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/ng-thumb.directive.js","\r\n(function(app){\r\n\tapp.directive('ngEnter', function() {\r\n\t\treturn function(scope, element, attrs) {\r\n\t\t\telement.bind('keydown keypress', function(event) {\r\n\t\t\t\tif (event.which === 13) {\r\n\t\t\t\t\tscope.$apply(function() {\r\n\t\t\t\t\t\tscope.$eval(attrs.ngEnter);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t});\r\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/ng_enter.js","angular.module('DataDashboard').directive('onChangeAsync', function($timeout) {\r\n  return {\r\n    restrict: 'A',\r\n    require: 'ngModel',\r\n    link: function(scope, element, attr, ctrl) {\r\n      ctrl.$viewChangeListeners.push(function() {\r\n        $timeout(function() {\r\n          scope.$eval(attr.onChangeAsync);\r\n        });\r\n      });\r\n    }\r\n  };\r\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/onChangeAsync.directive.js","(function(app){\r\n\r\napp.directive('onFileChange', function() {\r\n  return {\r\n    restrict: 'A',\r\n    link: function (scope, element, attrs) {\r\n      var onChangeHandler = scope.$eval(attrs.onFileChange);\r\n      element.bind('change', onChangeHandler);\r\n    }\r\n  };\r\n});\r\n\r\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/onFileChange.directive.js","(function() {\r\n    'use strict';\r\n\r\n    angular.module('DataDashboard')\r\n      .factory('$account', ['$http','$q', AccountFactory]);\r\n\r\n\r\n\r\n        /*\r\n         *   AngularJS Factory that handles writes and reads\r\n         *   for the account object.\r\n         *\r\n         *   This avoids the use of the window object;\r\n         *   \r\n         */\r\n        function AccountFactory($http, $q) {\r\n\r\n\r\n          // Container object we will return\r\n          var Factory = {};\r\n\r\n          // This holds the account data\r\n          //Factory.data = window.user\r\n          Factory.data = {};\r\n\r\n\r\n          /*\r\n           *  @param {string} key The name of the property to get\r\n           *  @return {Promise} Promised response\r\n           */\r\n          /*Factory.get = function() {\r\n            if (null === Factory.data) {\r\n              return $http({\r\n                method: 'GET',\r\n                url: '/account/get',\r\n              })\r\n              .then(function(response){\r\n                Factory.data = response.data.data;\r\n                return $q.when({data : Factory.data});\r\n              })\r\n            } else {\r\n              return $q.when({data : Factory.data});\r\n            }\r\n          }*/\r\n\r\n\r\n          /*\r\n           * @param {string} key The name of the property to get\r\n           */\r\n          Factory.get = function(key) {\r\n            if (key)\r\n              return Factory.data[key];\r\n            else\r\n              return Factory.data;\r\n          }\r\n\r\n\r\n\r\n          /*\r\n           * @param {String} key The name of the property to set\r\n           * @param {Mixed} value The value of the property to set\r\n           */\r\n          Factory.set = function(key, value) {\r\n            \r\n            if (\"string\" === typeof key && !!value) {\r\n              Factory.data[key] = value;\r\n            }\r\n\r\n            if (\"object\" === typeof key && !value) {\r\n              Factory.data = key;\r\n            }\r\n          }\r\n\r\n\r\n\r\n          return Factory;\r\n        }\r\n      })();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/account.factory.js","(function() {\r\n  'use strict';\r\n\r\n  angular.module('DataDashboard')\r\n    .factory('$application', ApplicationFactory);\r\n\r\n\r\n\r\n  /*\r\n   *   AngularJS Factory that handles writes and reads\r\n   *   for the application object.\r\n   *\r\n   *   This avoids the use of the window object;\r\n   *   \r\n   */\r\n  function ApplicationFactory() {\r\n\r\n    // Container object we will return\r\n    var Factory = {\r\n      data : {}\r\n    };\r\n\r\n    /*// This holds the application data\r\n    Factory.data = {};\r\n*/\r\n\r\n    /*\r\n     * @param {string} key The name of the property to get\r\n     */\r\n    Factory.get = function(key) {\r\n      if (key)\r\n        return Factory.data[key];\r\n      else\r\n        return Factory.data;\r\n    }\r\n\r\n\r\n    /*\r\n     * @param {String} key The name of the property to set\r\n     * @param {Mixed} value The value of the property to set\r\n     */\r\n    Factory.set = function(key, value) {\r\n      \r\n      if (\"string\" === typeof key && !!value) {\r\n        Factory.data[key] = value;\r\n      }\r\n\r\n      if (\"object\" === typeof key && !value) {\r\n        Factory.data = key;\r\n      }\r\n    }\r\n\r\n\r\n    /*\r\n     * @return {Array<String>} Returns an array of locale codes.\r\n     */\r\n    Factory.getAvailableLocaleCodes = function() {\r\n\r\n      if (!Factory.data.locales) {\r\n        return [];\r\n      }\r\n\r\n      return Factory.data.locales.split(\",\")\r\n        .filter(function(localeCode) {\r\n          // When splitting an empty string, we get [\"\"]\r\n          return localeCode !== \"\";\r\n        })\r\n    }\r\n\r\n    return Factory;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/application.factory.js","(function() {\r\n    'use strict';\r\n\r\n    angular.module('DataDashboard')\r\n      .factory('$cache', [CacheFactory]);\r\n\r\n\r\n\r\n        /*\r\n         *   AngularJS Factory that handles writes and reads\r\n         *   for the account object.\r\n         *\r\n         *   This avoids the use of the window object;\r\n         *   \r\n         */\r\n        function CacheFactory() {\r\n\r\n\r\n          // Container object we will return\r\n          var Factory = {};\r\n\r\n          // This holds the account data\r\n          //Factory.data = window.user\r\n          Factory.data = {};\r\n\r\n\r\n         Factory.set = function(key, value) {\r\n          this.data[key] = value;\r\n         }\r\n\r\n         Factory.get = function(key) {\r\n          return this.data[key];\r\n         }\r\n\r\n         Factory.del = function(key) {\r\n          delete this.data[key];\r\n         }\r\n\r\n         /*\r\n         *  @param {String} pattern\r\n\r\n         *  Deletes all keys matching pattern\r\n         */\r\n         Factory.delByPattern = function(pattern) {\r\n          for(var k in this.data) {\r\n            if (k.indexOf(pattern) > -1){\r\n              console.info(\"Deleting cache for \"+k);\r\n              delete this.data[k];\r\n            }\r\n          }\r\n         }\r\n\r\n         Factory.has = function(key) {\r\n          return this.data.hasOwnProperty(key);\r\n         }\r\n\r\n\r\n\r\n          return Factory;\r\n        }\r\n      })();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/cache.factory.js","(function() {\r\n\t'use strict';\r\n\t\r\n\tangular.module('DataDashboard')\r\n\t\t.factory('LocalesFactory',LocalesFactory);\r\n\r\n\r\n\tfunction LocalesFactory($http) {\r\n\t\treturn {\r\n\t\t\t\t\"af-ZA\": {\r\n\t\t\t\t\t\"code\": \"af-ZA\",\r\n\t\t\t\t\t\"original\": \"Afrikaans\",\r\n\t\t\t\t\t\"name\": \"Afrikaans\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ar\": {\r\n\t\t\t\t\t\"code\": \"ar\",\r\n\t\t\t\t\t\"original\": \"العربية\",\r\n\t\t\t\t\t\"name\": \"Arabic\"\r\n\t\t\t\t},\r\n\t\t\t\t\"bg-BG\": {\r\n\t\t\t\t\t\"code\": \"bg-BG\",\r\n\t\t\t\t\t\"original\": \"Български\",\r\n\t\t\t\t\t\"name\": \"Bulgarian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ca-AD\": {\r\n\t\t\t\t\t\"code\": \"ca-AD\",\r\n\t\t\t\t\t\"original\": \"Català\",\r\n\t\t\t\t\t\"name\": \"Catalan\"\r\n\t\t\t\t},\r\n\t\t\t\t\"cs-CZ\": {\r\n\t\t\t\t\t\"code\": \"cs-CZ\",\r\n\t\t\t\t\t\"original\": \"Čeština\",\r\n\t\t\t\t\t\"name\": \"Czech\"\r\n\t\t\t\t},\r\n\t\t\t\t\"cy-GB\": {\r\n\t\t\t\t\t\"code\": \"cy-GB\",\r\n\t\t\t\t\t\"original\": \"Cymraeg\",\r\n\t\t\t\t\t\"name\": \"Welsh\"\r\n\t\t\t\t},\r\n\t\t\t\t\"da-DK\": {\r\n\t\t\t\t\t\"code\": \"da-DK\",\r\n\t\t\t\t\t\"original\": \"Dansk\",\r\n\t\t\t\t\t\"name\": \"Danish\"\r\n\t\t\t\t},\r\n\t\t\t\t\"de-AT\": {\r\n\t\t\t\t\t\"code\": \"de-AT\",\r\n\t\t\t\t\t\"original\": \"Deutsch (Österreich)\",\r\n\t\t\t\t\t\"name\": \"German (Austria)\",\r\n\t\t\t\t},\r\n\t\t\t\t\"de-CH\": {\r\n\t\t\t\t\t\"code\": \"de-CH\",\r\n\t\t\t\t\t\"original\": \"Deutsch (Schweiz)\",\r\n\t\t\t\t\t\"name\": \"German (Switzerland)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"de-DE\": {\r\n\t\t\t\t\t\"code\": \"de-DE\",\r\n\t\t\t\t\t\"original\": \"Deutsch (Deutschland)\",\r\n\t\t\t\t\t\"name\": \"German (Germany)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"el-GR\": {\r\n\t\t\t\t\t\"code\": \"el-GR\",\r\n\t\t\t\t\t\"original\": \"Ελληνικά\",\r\n\t\t\t\t\t\"name\": \"Greek\"\r\n\t\t\t\t},\r\n\t\t\t\t\"en-GB\": {\r\n\t\t\t\t\t\"code\": \"en-GB\",\r\n\t\t\t\t\t\"original\": \"English (UK)\",\r\n\t\t\t\t\t\"name\": \"English (UK)\",\r\n\t\t\t\t\t\"alpha2\" : \"GB\"\r\n\t\t\t\t},\r\n\t\t\t\t\"en-US\": {\r\n\t\t\t\t\t\"code\": \"en-US\",\r\n\t\t\t\t\t\"original\": \"English (US)\",\r\n\t\t\t\t\t\"name\": \"English (US)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"es-CL\": {\r\n\t\t\t\t\t\"code\": \"es-CL\",\r\n\t\t\t\t\t\"original\": \"Español (Chile)\",\r\n\t\t\t\t\t\"name\": \"Spanish (Chile)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"es-ES\": {\r\n\t\t\t\t\t\"code\": \"es-ES\",\r\n\t\t\t\t\t\"original\": \"Español (España)\",\r\n\t\t\t\t\t\"name\": \"Spanish (Spain)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"es-MX\": {\r\n\t\t\t\t\t\"code\": \"es-MX\",\r\n\t\t\t\t\t\"original\": \"Español (México)\",\r\n\t\t\t\t\t\"name\": \"Spanish (Mexico)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"et-EE\": {\r\n\t\t\t\t\t\"code\": \"et-EE\",\r\n\t\t\t\t\t\"original\": \"Eesti\",\r\n\t\t\t\t\t\"name\": \"Estonian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"eu\": {\r\n\t\t\t\t\t\"code\": \"eu\",\r\n\t\t\t\t\t\"original\": \"Euskara\",\r\n\t\t\t\t\t\"name\": \"Basque\"\r\n\t\t\t\t},\r\n\t\t\t\t\"fa-IR\": {\r\n\t\t\t\t\t\"code\": \"fa-IR\",\r\n\t\t\t\t\t\"original\": \"فارسی\",\r\n\t\t\t\t\t\"name\": \"Persian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"fi-FI\": {\r\n\t\t\t\t\t\"code\": \"fi-FI\",\r\n\t\t\t\t\t\"original\": \"Suomi\",\r\n\t\t\t\t\t\"name\": \"Finnish\"\r\n\t\t\t\t},\r\n\t\t\t\t\"fr-CA\": {\r\n\t\t\t\t\t\"code\": \"fr-CA\",\r\n\t\t\t\t\t\"original\": \"Français (Canada)\",\r\n\t\t\t\t\t\"name\": \"French (Canada)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"fr-FR\": {\r\n\t\t\t\t\t\"code\": \"fr-FR\",\r\n\t\t\t\t\t\"original\": \"Français (France)\",\r\n\t\t\t\t\t\"name\": \"French (France)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"he-IL\": {\r\n\t\t\t\t\t\"code\": \"he-IL\",\r\n\t\t\t\t\t\"original\": \"עברית\",\r\n\t\t\t\t\t\"name\": \"Hebrew\"\r\n\t\t\t\t},\r\n\t\t\t\t\"hr-HR\": {\r\n\t\t\t\t\t\"code\": \"hr-HR\",\r\n\t\t\t\t\t\"original\": \"Hrvatski\",\r\n\t\t\t\t\t\"name\": \"Croatian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"hu-HU\": {\r\n\t\t\t\t\t\"code\": \"hu-HU\",\r\n\t\t\t\t\t\"original\": \"Magyar\",\r\n\t\t\t\t\t\"name\": \"Hungarian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"id-ID\": {\r\n\t\t\t\t\t\"code\": \"id-ID\",\r\n\t\t\t\t\t\"original\": \"Bahasa Indonesia\",\r\n\t\t\t\t\t\"name\": \"Indonesian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"is-IS\": {\r\n\t\t\t\t\t\"code\": \"is-IS\",\r\n\t\t\t\t\t\"original\": \"Íslenska\",\r\n\t\t\t\t\t\"name\": \"Icelandic\"\r\n\t\t\t\t},\r\n\t\t\t\t\"it-IT\": {\r\n\t\t\t\t\t\"code\": \"it-IT\",\r\n\t\t\t\t\t\"original\": \"Italiano\",\r\n\t\t\t\t\t\"name\": \"Italian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ja-JP\": {\r\n\t\t\t\t\t\"code\": \"ja-JP\",\r\n\t\t\t\t\t\"original\": \"日本語\",\r\n\t\t\t\t\t\"name\": \"Japanese\"\r\n\t\t\t\t},\r\n\t\t\t\t\"km-KH\": {\r\n\t\t\t\t\t\"code\": \"km-KH\",\r\n\t\t\t\t\t\"original\": \"ភាសាខ្មែរ\",\r\n\t\t\t\t\t\"name\": \"Khmer\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ko-KR\": {\r\n\t\t\t\t\t\"code\": \"ko-KR\",\r\n\t\t\t\t\t\"original\": \"한국어\",\r\n\t\t\t\t\t\"name\": \"Korean\"\r\n\t\t\t\t},\r\n\t\t\t\t\"lt-LT\": {\r\n\t\t\t\t\t\"code\": \"lt-LT\",\r\n\t\t\t\t\t\"original\": \"Lietuvių\",\r\n\t\t\t\t\t\"name\": \"Lithuanian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"lv-LV\": {\r\n\t\t\t\t\t\"code\": \"lv-LV\",\r\n\t\t\t\t\t\"original\": \"Latviešu\",\r\n\t\t\t\t\t\"name\": \"Latvian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"mn-MN\": {\r\n\t\t\t\t\t\"code\": \"mn-MN\",\r\n\t\t\t\t\t\"original\": \"Монгол\",\r\n\t\t\t\t\t\"name\": \"Mongolian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"nb-NO\": {\r\n\t\t\t\t\t\"code\": \"nb-NO\",\r\n\t\t\t\t\t\"original\": \"Norsk bokmål\",\r\n\t\t\t\t\t\"name\": \"Norwegian (Bokmål)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"nl-NL\": {\r\n\t\t\t\t\t\"code\": \"nl-NL\",\r\n\t\t\t\t\t\"original\": \"Nederlands\",\r\n\t\t\t\t\t\"name\": \"Dutch\"\r\n\t\t\t\t},\r\n\t\t\t\t\"nn-NO\": {\r\n\t\t\t\t\t\"code\": \"nn-NO\",\r\n\t\t\t\t\t\"original\": \"Norsk nynorsk\",\r\n\t\t\t\t\t\"name\": \"Norwegian (Nynorsk)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"pl-PL\": {\r\n\t\t\t\t\t\"code\": \"pl-PL\",\r\n\t\t\t\t\t\"original\": \"Polski\",\r\n\t\t\t\t\t\"name\": \"Polish\"\r\n\t\t\t\t},\r\n\t\t\t\t\"pt-BR\": {\r\n\t\t\t\t\t\"code\": \"pt-BR\",\r\n\t\t\t\t\t\"original\": \"Português (Brasil)\",\r\n\t\t\t\t\t\"name\": \"Portuguese (Brazil)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"pt-PT\": {\r\n\t\t\t\t\t\"code\": \"pt-PT\",\r\n\t\t\t\t\t\"original\": \"Português (Portugal)\",\r\n\t\t\t\t\t\"name\": \"Portuguese (Portugal)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ro-RO\": {\r\n\t\t\t\t\t\"code\": \"ro-RO\",\r\n\t\t\t\t\t\"original\": \"Română\",\r\n\t\t\t\t\t\"name\": \"Romanian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ru-RU\": {\r\n\t\t\t\t\t\"code\": \"ru-RU\",\r\n\t\t\t\t\t\"original\": \"Русский\",\r\n\t\t\t\t\t\"name\": \"Russian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"sk-SK\": {\r\n\t\t\t\t\t\"code\": \"sk-SK\",\r\n\t\t\t\t\t\"original\": \"Slovenčina\",\r\n\t\t\t\t\t\"name\": \"Slovak\"\r\n\t\t\t\t},\r\n\t\t\t\t\"sl-SI\": {\r\n\t\t\t\t\t\"code\": \"sl-SI\",\r\n\t\t\t\t\t\"original\": \"Slovenščina\",\r\n\t\t\t\t\t\"name\": \"Slovenian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"sr-RS\": {\r\n\t\t\t\t\t\"code\": \"sr-RS\",\r\n\t\t\t\t\t\"original\": \"Српски / Srpski\",\r\n\t\t\t\t\t\"name\": \"Serbian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"sv-SE\": {\r\n\t\t\t\t\t\"code\": \"sv-SE\",\r\n\t\t\t\t\t\"original\": \"Svenska\",\r\n\t\t\t\t\t\"name\": \"Swedish\"\r\n\t\t\t\t},\r\n\t\t\t\t\"th-TH\": {\r\n\t\t\t\t\t\"code\": \"th-TH\",\r\n\t\t\t\t\t\"original\": \"ไทย\",\r\n\t\t\t\t\t\"name\": \"Thai\"\r\n\t\t\t\t},\r\n\t\t\t\t\"tr-TR\": {\r\n\t\t\t\t\t\"code\": \"tr-TR\",\r\n\t\t\t\t\t\"original\": \"Türkçe\",\r\n\t\t\t\t\t\"name\": \"Turkish\"\r\n\t\t\t\t},\r\n\t\t\t\t\"uk-UA\": {\r\n\t\t\t\t\t\"code\": \"uk-UA\",\r\n\t\t\t\t\t\"original\": \"Українська\",\r\n\t\t\t\t\t\"name\": \"Ukrainian\"\r\n\t\t\t\t},\r\n\t\t\t\t\"vi-VN\": {\r\n\t\t\t\t\t\"code\": \"vi-VN\",\r\n\t\t\t\t\t\"original\": \"Tiếng Việt\",\r\n\t\t\t\t\t\"name\": \"Vietnamese\"\r\n\t\t\t\t},\r\n\t\t\t\t\"zh-CN\": {\r\n\t\t\t\t\t\"code\": \"zh-CN\",\r\n\t\t\t\t\t\"original\": \"中文 (中国大陆)\",\r\n\t\t\t\t\t\"name\": \"Chinese (PRC)\"\r\n\t\t\t\t},\r\n\t\t\t\t\"zh-TW\": {\r\n\t\t\t\t\t\"code\": \"zh-TW\",\r\n\t\t\t\t\t\"original\": \"中文 (台灣)\",\r\n\t\t\t\t\t\"name\": \"Chinese (Taiwan)\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/locales.factory.js","(function() {\r\n\t'use strict';\r\n\r\n\tfunction jsonToQueryString(json) {\r\n\t\treturn '?' +\r\n\t\t\tObject.keys(json).map(function(key) {\r\n\t\t\t\treturn encodeURIComponent(key) + '=' +\r\n\t\t\t\t\tencodeURIComponent(json[key]);\r\n\t\t\t}).join('&');\r\n\t}\r\n\r\n\tangular.module('DataDashboard')\r\n\t\t.factory('$marketcloud', MarketcloudFactory);\r\n\r\n\tMarketcloudFactory.$inject = ['$http', '$q', '$cache', '$account', '$application'];\r\n\r\n\tfunction MarketcloudFactory($http, $q, $cache, $account, $application) {\r\n\r\n\r\n\r\n\t\tvar request = function(method, endpoint, data, options) {\r\n\r\n\t\t\tvar role = $application.get('role');\r\n\r\n\t\t\t// Guests users cannot perform requests\r\n\t\t\tif (role === 'guest' && method !== \"GET\") {\r\n\t\t\t\tnotie.alert(2,\"Action not allowed since your role is 'guest'.\",2);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar url = window.API_BASE_URL + '/' + endpoint;\r\n\r\n\t\t\tif (\"GET\" === method) {\r\n\t\t\t\tvar cacheKey = endpoint + jsonToQueryString(data || {});\r\n\t\t\t\t// We invoke cache only for GET requests\r\n\t\t\t\tif ($cache.has(cacheKey)) {\r\n\t\t\t\t\treturn $q.when($cache.get(cacheKey));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar config = {\r\n\t\t\t\tmethod: method,\r\n\t\t\t\turl: url,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Authorization': window.public_key + ':' + window.token\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\toptions = options || {};\r\n\r\n\r\n\t\t\tif ('GET' === method)\r\n\t\t\t\tconfig.params = data || {};\r\n\t\t\telse {\r\n\r\n\t\t\t\tconfig.data = data || {};\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn $http(config)\r\n\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\tif ('GET' === method) {\r\n\t\t\t\t\t\t$cache.set(endpoint, response);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ('PUT' === method || 'PATCH' === method) {\r\n\t\t\t\t\t\t// Devo invalidare la cache della risorsa e della collection\r\n\t\t\t\t\t\t// ex /resource/:id\r\n\t\t\t\t\t\t//  /resource/:id/subresources\r\n\t\t\t\t\t\t// /resource\r\n\t\t\t\t\t\t// Endpoint è qualcosa del tipo sopra,\r\n\r\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\r\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\r\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating GET cache to this resource\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ('POST' === method) {\r\n\t\t\t\t\t\t$cache.delByPattern(endpoint); // Invalidating LIST requests to this resource\r\n\t\t\t\t\t\t//Also for parent resource\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ('DELETE' === method) {\r\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\r\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\r\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating LIST requests to this resource\r\n\t\t\t\t\t\t//Also for parent resource\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\treturn $q.when(response);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\treturn $q.reject(error);\r\n\t\t\t\t})\r\n\r\n\r\n\r\n\t\t};\r\n\r\n\r\n\t\tvar resourceFactory = function(resource_name) {\r\n\t\t\treturn {\r\n\t\t\t\tlist: function(query, options) {\r\n\t\t\t\t\tquery = query || {};\r\n\t\t\t\t\tif ('object' !== typeof query)\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.list(query) query must be object');\r\n\t\t\t\t\treturn request('GET', resource_name, query, options);\r\n\t\t\t\t},\r\n\t\t\t\tgetById: function(id, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.getById(id) id must be an integer number');\r\n\t\t\t\t\treturn request('GET', resource_name + '/' + id, options);\r\n\t\t\t\t},\r\n\t\t\t\tsave: function(data, options) {\r\n\t\t\t\t\tif ('object' !== typeof data)\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.save(data) data must be object');\r\n\t\t\t\t\treturn request('POST', resource_name, data, options);\r\n\t\t\t\t},\r\n\t\t\t\tupdate: function(id, data, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.update(id,data) id must be an integer number');\r\n\t\t\t\t\treturn request('PUT', resource_name + '/' + id, data, options);\r\n\t\t\t\t},\r\n\t\t\t\tdelete: function(id, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.delete(id) id must be an integer number');\r\n\t\t\t\t\treturn request('DELETE', resource_name + '/' + id, options);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar subResourceFactory = function(resource_name, sub_resource_name) {\r\n\t\t\treturn {\r\n\t\t\t\tlist: function(parent_id, query, options) {\r\n\t\t\t\t\tquery = query || {};\r\n\t\t\t\t\tif ('object' !== typeof query)\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.list(query) query must be object');\r\n\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name, query, options);\r\n\t\t\t\t},\r\n\t\t\t\tgetById: function(parent_id, id, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.getById(id) id must be an integer number');\r\n\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\r\n\t\t\t\t},\r\n\t\t\t\tsave: function(parent_id, data, options) {\r\n\t\t\t\t\tif ('object' !== typeof data)\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.save(data) data must be object, got '+typeof(data));\r\n\t\t\t\t\treturn request('POST', resource_name + '/' + parent_id + '/' + sub_resource_name, data, options);\r\n\t\t\t\t},\r\n\t\t\t\tupdate: function(parent_id, id, data, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.update(id,data) id must be an integer number');\r\n\t\t\t\t\treturn request('PUT', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, data, options);\r\n\t\t\t\t},\r\n\t\t\t\tdelete: function(parent_id, id, options) {\r\n\t\t\t\t\tif (isNaN(id))\r\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.delete(id) id must be an integer number');\r\n\t\t\t\t\treturn request('DELETE', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar resources = [\r\n\t\t\t'addresses',\r\n\t\t\t'brands',\r\n\t\t\t'categories',\r\n\t\t\t'collections',\r\n\t\t\t'events',\r\n\t\t\t'coupons',\r\n\t\t\t'carts',\r\n\t\t\t'products',\r\n\t\t\t'orders',\r\n\t\t\t'invoices',\r\n\t\t\t'users',\r\n\t\t\t'contents',\r\n\t\t\t'staticContents',\r\n\t\t\t'media',\r\n\t\t\t'notifications',\r\n\t\t\t'promotions',\r\n\t\t\t'shippings',\r\n\t\t\t'payments',\r\n\t\t\t'taxes',\r\n\t\t\t'paymentMethods',\r\n\t\t\t'variables'\r\n\r\n\t\t];\r\n\r\n\t\tvar factory = {};\r\n\r\n\t\tresources.forEach(function(resource_name) {\r\n\t\t\tfactory[resource_name] = resourceFactory(resource_name);\r\n\t\t});\r\n\r\n\t\tfactory.variants = subResourceFactory('products', 'variants');\r\n\r\n\t\tfactory.refunds = subResourceFactory('orders', 'refunds');\r\n\t\tfactory.payments = subResourceFactory('orders', 'payments');\r\n\t\tfactory.shipments = subResourceFactory('orders', 'shipments');\r\n\r\n\t\treturn factory;\r\n\t}\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/marketcloud.factory.js","(function() {\r\n  'use strict';\r\n\r\n  angular.module('DataDashboard')\r\n    .factory('$models', ['$http', '$q', ModelsFactory]);\r\n\r\n\r\n\r\n  /*\r\n   *   AngularJS Factory that handles writes and reads\r\n   *   for the application object.\r\n   *\r\n   *   This avoids the use of the window object;\r\n   *   \r\n   */\r\n  function ModelsFactory($http, $q) {\r\n\r\n\r\n\r\n    if (!Schematic)\r\n      throw new Error('Models factory requires Schematic library');\r\n\r\n    // Container object we will return\r\n    var Types = {};\r\n\r\n    Types.Notifications = {};\r\n\r\n    Types.Notifications[\"orders.create\"] = new Schematic.Schema('orders.create', {\r\n      type: {\r\n        required: true,\r\n        type: \"string\"\r\n      },\r\n      application: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n      order: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n    });\r\n    Types.Notifications[\"orders.update.processing\"] = new Schematic.Schema('orders.update.processing', {\r\n      type: {\r\n        required: true,\r\n        type: \"string\"\r\n      },\r\n      application: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n      order_id: {\r\n        required: true,\r\n        type: 'number'\r\n      },\r\n    });\r\n    Types.Notifications[\"orders.update.completed\"] = new Schematic.Schema('orders.update.completed', {\r\n      type: {\r\n        required: true,\r\n        type: \"string\"\r\n      },\r\n      application: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n      order_id: {\r\n        required: true,\r\n        type: 'number'\r\n      },\r\n    });\r\n    Types.Notifications[\"users.create\"] = new Schematic.Schema('users.create', {\r\n      type: {\r\n        required: true,\r\n        type: \"string\"\r\n      },\r\n      application: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n      user: {\r\n        required: true,\r\n        type: 'object'\r\n      },\r\n    });\r\n\r\n    Types.Bundle = new Schematic.Schema('Bundle', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 2,\r\n        max: 30,\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"slug\": {\r\n        type: \"string\"\r\n      },\r\n      \"items\": {\r\n        type: \"array\",\r\n        elements: {\r\n          type: \"number\"\r\n        },\r\n        required: true\r\n      },\r\n      \"price\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"price_discount\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n    Types.Payment = new Schematic.Schema('Payment', {\r\n      payment_method_id: {\r\n        required: false,\r\n        type: \"number\"\r\n      },\r\n      method: {\r\n        required: true,\r\n        type: \"string\"\r\n      },\r\n      order_id: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      amount: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      data: {\r\n        type: \"object\"\r\n      }\r\n    })\r\n    Types.PaymentMethod = new Schematic.Schema('PaymentMethod', {\r\n      name: {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 1,\r\n        max: 100\r\n      },\r\n      description: {\r\n        type: \"string\",\r\n        min: 0,\r\n        max: 500\r\n      },\r\n      cost_type: {\r\n        type: \"string\",\r\n        required: true,\r\n        whitelist: ['no_cost', 'fixed_fee', 'percentage_fee', 'fixed_plus_percentage']\r\n      },\r\n      fixed_fee: {\r\n        type: \"number\",\r\n        min: 0\r\n      },\r\n      percentage_fee: {\r\n        type: \"number\",\r\n        min: 0\r\n      }\r\n    })\r\n    Types.PromotionCondition = new Schematic.Schema('PromotionCondition', {\r\n      \"type\": {\r\n        type: \"string\",\r\n        whitelist: ['MIN_NUMBER_OF_PRODUCTS', 'MIN_CART_VALUE', 'CART_HAS_ITEM'],\r\n        required: true\r\n      },\r\n      \"value\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n    });\r\n    Types.PromotionEffect = new Schematic.Schema('PromotionEffect', {\r\n      \"type\": {\r\n        type: \"string\",\r\n        whitelist: [\r\n          'CART_VALUE_PERCENTAGE_REDUCTION',\r\n          'CART_VALUE_NET_REDUCTION',\r\n          'CART_ITEMS_NET_REDUCTION', // price reduction to apply on each item price\r\n          'CART_ITEMS_PERCENTAGE_REDUCTION', // price reduction to apply on each item price\r\n          'FREE_SHIPPING'\r\n        ],\r\n        required: true\r\n      },\r\n      \"value\": {\r\n        required: true\r\n      },\r\n    });\r\n\r\n    Types.Promotion = new Schematic.Schema('Promotion', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 2,\r\n        max: 130,\r\n        required: true\r\n      },\r\n      \"active\": {\r\n        type: \"boolean\",\r\n        required: true\r\n      },\r\n      \"conditions\": {\r\n        type: 'array',\r\n        elements: {\r\n          type: Types.PromotionCondition\r\n        }\r\n      },\r\n      \"effects\": {\r\n        type: 'array',\r\n        required: true,\r\n        elements: {\r\n          type: Types.PromotionEffect\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n\r\n    Types.BundleEntry = new Schematic.Schema('BundleEntry', {\r\n      \"product_id\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"bundle_price\": {\r\n\r\n      },\r\n      \"variant_id\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n\r\n    Types.Bundle = new Schematic.Schema('Bundle', {\r\n      name: {\r\n        type: \"string\",\r\n        min: 1,\r\n        max: 140,\r\n        required: true\r\n      },\r\n      slug: {\r\n        type: \"string\",\r\n        max: 500\r\n      },\r\n      description: {\r\n        type: \"string\"\r\n      },\r\n      items: {\r\n        type: \"array\",\r\n        required: true,\r\n        elements: {\r\n          type: Types.BundleEntry\r\n        }\r\n      },\r\n      pricing_rule: {\r\n        type: \"string\",\r\n        whitelist: [\"fixed\", \"inherit\"]\r\n      }\r\n    });\r\n\r\n\r\n\r\n    Types.Category = new Schematic.Schema('Category', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 2,\r\n        max: 30,\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\",\r\n        max: 1400\r\n      },\r\n      \"url\": {\r\n        type: \"string\"\r\n      },\r\n      \"image_url\": {\r\n        type: \"string\"\r\n      },\r\n      \"parent_id\": {\r\n        type: \"number\",\r\n        required: false\r\n      }\r\n\r\n    });\r\n\r\n    Types.CategoryNew = new Schematic.Schema('Category', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 2,\r\n        max: 30,\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\",\r\n        max: 1400\r\n      },\r\n      \"url\": {\r\n        type: \"string\"\r\n      },\r\n      \"image_url\": {\r\n        type: \"string\"\r\n      },\r\n      \"path\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"parent\": {\r\n        type: \"string\",\r\n        required: true\r\n      }\r\n    });\r\n\r\n    Types.CollectionEntry = new Schematic.Schema('CollectionEntry', {\r\n      \"product_id\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"variant_id\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n\r\n    Types.Collection = new Schematic.Schema('Collection', {\r\n      name: {\r\n        type: \"string\",\r\n        min: 1,\r\n        max: 140,\r\n        required: true\r\n      },\r\n      slug: {\r\n        type: \"string\",\r\n        max: 500\r\n      },\r\n      description: {\r\n        type: \"string\"\r\n      },\r\n      items: {\r\n        type: \"array\",\r\n        required: true,\r\n        elements: {\r\n          type: Types.CollectionEntry\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    Types.ContentAuthor = new Schematic.Schema('ContentAuthor', {\r\n      image_url: {\r\n        type: \"string\"\r\n      },\r\n      name: {\r\n        type: \"string\"\r\n      },\r\n      id: {\r\n        type: \"number\"\r\n      }\r\n    })\r\n\r\n    Types.Content = new Schematic.Schema('Content', {\r\n      title: {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      text: {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      author: {\r\n        type: \"object\"\r\n      },\r\n      date: {\r\n        type: \"string\"\r\n      },\r\n      published: {\r\n        type: \"boolean\"\r\n      }\r\n    })\r\n\r\n    Types.StaticContent = new Schematic.Schema('StaticContent', {\r\n    name: {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 2\r\n    },\r\n    content: {\r\n        type: \"string\",\r\n        required: true\r\n    },\r\n    published: {\r\n        type: \"boolean\"\r\n    }\r\n})\r\n\r\n\r\n    Types.CartEntry = new Schematic.Schema('CartEntry', {\r\n      \"product_id\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"quantity\": {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0\r\n      },\r\n      \"variant_id\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n    Types.CartUpdateEntry = new Schematic.Schema('CartUpdateEntry', {\r\n      \"product_id\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"quantity\": {\r\n        type: \"number\",\r\n        min: 0\r\n      },\r\n      \"variant_id\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n\r\n    Types.Cart = new Schematic.Schema('Cart', {\r\n      \"items\": {\r\n        type: 'array',\r\n        elements: {\r\n          type: Types.CartEntry\r\n        },\r\n        required: true\r\n      },\r\n      \"user_id\": {\r\n        type: 'number'\r\n      }\r\n    });\r\n\r\n\r\n    Types.CartUpdate = new Schematic.Schema('CartUpdate', {\r\n      \"items\": {\r\n        type: \"array\",\r\n        elements: {\r\n          type: \"object\"\r\n        },\r\n        required: true\r\n      },\r\n      \"op\": {\r\n        type: \"string\",\r\n        whitelist: [\"add\", \"remove\", \"update\"]\r\n      }\r\n    })\r\n\r\n    Types.Coupon = new Schematic.Schema('Coupon', {\r\n      \"code\": {\r\n        type: \"string\",\r\n        min: \"1\",\r\n        max: \"30\",\r\n        required: true\r\n      },\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: \"1\",\r\n        max: \"30\",\r\n        required: true\r\n      },\r\n      \"target_type\": {\r\n        type: \"string\",\r\n        whitelist: [\r\n          'CART_COUPON',\r\n          'PRODUCT_COUPON',\r\n          'CATEGORY_COUPON',\r\n          'PRODUCTS_COUPON'\r\n        ],\r\n        required: true\r\n      },\r\n      \"target_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"discount_type\": {\r\n        type: \"string\",\r\n        whitelist: ['NET_REDUCTION', 'PERCENTAGE_REDUCTION'],\r\n        required: true\r\n      },\r\n      \"discount_value\": {\r\n        type: \"number\",\r\n        min: 0,\r\n        required: true\r\n      },\r\n      \"active\": {\r\n        type: \"boolean\",\r\n        required: true\r\n      },\r\n      \"usages_left\": {\r\n        type: \"number\",\r\n        required: false\r\n      },\r\n      \"expiration_date\": {\r\n        type: \"string\",\r\n        required: false\r\n      }\r\n    })\r\n\r\n    Types.Brand = new Schematic.Schema('Brand', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 3,\r\n        max: 50,\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"url\": {\r\n        type: \"string\"\r\n      },\r\n      \"image_url\": {\r\n        type: \"string\"\r\n      }\r\n    });\r\n\r\n    Types.File = new Schematic.Schema('File', {\r\n      file: {\r\n        type: \"string\",\r\n        required: true,\r\n      },\r\n      filename: {\r\n        type: \"string\",\r\n        required: true,\r\n      },\r\n      name: {\r\n        type: \"string\",\r\n        required: true,\r\n      },\r\n      slug: {\r\n        type: \"string\",\r\n        max: 140\r\n      },\r\n      description: {\r\n        type: \"string\"\r\n      }\r\n    })\r\n\r\n    Types.Notification = new Schematic.Schema('Notification', {\r\n      event: {\r\n        type: \"string\",\r\n        required: true,\r\n        whitelist: [\r\n          'custom', //Custom defined events, can only be sent programmaticaly\r\n          'order.create', // Sent automatically by the system\r\n          'order.paid', // Sent automatically by the system\r\n          'user.create' // Sent automatically by the system\r\n        ]\r\n      },\r\n      from_name: {\r\n        type: \"string\"\r\n      },\r\n      from_email: {\r\n        type: \"string\"\r\n      },\r\n      subject: {\r\n        type: \"string\"\r\n      }\r\n    })\r\n\r\n    Types.User = new Schematic.Schema('User', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 1,\r\n        max: 255\r\n      },\r\n      \"email\": {\r\n        type: \"string\",\r\n        min: 4,\r\n        max: 255,\r\n      },\r\n      \"password\": {\r\n        type: \"string\",\r\n        min: 4,\r\n        max: 255,\r\n      },\r\n      \"image_url\": {\r\n        type: \"string\"\r\n      }\r\n    })\r\n\r\n    Types.TaxRate = new Schematic.Schema('TaxRate', {\r\n      \"country\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"state\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"postcode\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"city\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"rate\": {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0,\r\n        max: 100\r\n      },\r\n      \"priority\": {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0\r\n      }\r\n    })\r\n    Types.Tax = new Schematic.Schema('Tax', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 3,\r\n        max: 30,\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\",\r\n        max: 600\r\n      },\r\n      \"rates\": {\r\n        type: \"array\",\r\n        elements: {\r\n          type: Types.TaxRate\r\n        }\r\n      }\r\n    })\r\n    Types.Currency = new Schematic.Schema('Currency', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        min: 3,\r\n        max: 30,\r\n        required: true\r\n      },\r\n      \"formatting\": {\r\n        type: \"string\",\r\n        min: 0,\r\n        max: 3,\r\n        required: true\r\n      }\r\n    })\r\n    Types.Product = new Schematic.Schema('Product', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 2\r\n      },\r\n      \"type\": {\r\n        type: \"string\",\r\n        required: true,\r\n        whitelist: [\"simple_product\", \"product_with_variants\", \"grouped_product\", \"bundled_product\"]\r\n      },\r\n      \"category_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"sku\": {\r\n        type: \"string\"\r\n      },\r\n      \"price\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"slug\": {\r\n        type: \"string\"\r\n      },\r\n      \"stock_level\": {\r\n        type: \"number\",\r\n        min: 0\r\n      },\r\n      \"stock_type\": {\r\n        type: \"string\",\r\n        whitelist: [\"infinite\", \"track\", \"status\"],\r\n        required: true\r\n      },\r\n      \"stock_status\": {\r\n        type: \"string\",\r\n        whitelist: [\"in_stock\", \"out_of_stock\"]\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"weigth\": {\r\n        type: \"number\"\r\n      },\r\n      \"height\": {\r\n        type: \"number\"\r\n      },\r\n      \"depth\": {\r\n        type: \"number\"\r\n      },\r\n      \"width\": {\r\n        type: \"number\"\r\n      },\r\n      \"brand_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"store_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"images\": {\r\n        type: \"array\"\r\n      },\r\n      \"published\": {\r\n        type: \"boolean\"\r\n      },\r\n      \"price_discount\": {\r\n        type: \"number\"\r\n      }\r\n    })\r\n\r\n\r\n    Types.Variant = new Schematic.Schema('Variant', {\r\n      variant_id: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      product_id: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"stock_level\": {\r\n        type: \"number\",\r\n        min: 0\r\n      },\r\n      \"stock_type\": {\r\n        type: \"string\",\r\n        whitelist: [\"infinite\", \"track\", \"status\"],\r\n        required: true\r\n      },\r\n      \"stock_status\": {\r\n        type: \"string\",\r\n        whitelist: [\"in_stock\", \"out_of_stock\"]\r\n      },\r\n      \"price\": {\r\n        type: \"number\",\r\n        required: true\r\n      }\r\n    })\r\n\r\n\r\n\r\n    Types.InvoiceLineItem = new Schematic.Schema('InvoiceLineItem', {\r\n      name: {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 1,\r\n        max: 140\r\n      },\r\n      description: {\r\n        type: \"string\",\r\n        max: 500\r\n      },\r\n      price: {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0\r\n      },\r\n      quantity: {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0\r\n      }\r\n    })\r\n    Types.Invoice = new Schematic.Schema('Invoice', {\r\n      number: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      order_id: {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      customer: {\r\n        type: \"object\",\r\n        required: true\r\n      },\r\n      company: {\r\n        type: \"object\",\r\n        required: true\r\n      },\r\n      lineItems: {\r\n        type: \"array\",\r\n        elements: {\r\n          type: Types.InvoiceLineItem\r\n        }\r\n      }\r\n    })\r\n    Types.GroupedProductEntry = new Schematic.Schema('GroupedProductEntry', {\r\n      \"product_id\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"quantity\": {\r\n        type: \"number\",\r\n        required: true\r\n      }\r\n    });\r\n    Types.GroupedProduct = new Schematic.Schema('GroupedProduct', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 2\r\n      },\r\n      \"category_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"sku\": {\r\n        type: \"string\"\r\n      },\r\n      \"items\": {\r\n        type: \"array\",\r\n        elements: {\r\n          type: Types.GroupedProductEntry\r\n        },\r\n        min: 1\r\n      },\r\n      \"pricing_method\": {\r\n        type: \"string\",\r\n        whitelist: [\"dynamic_pricing\", \"fixed_pricing\"],\r\n        required: true\r\n      },\r\n      \"price\": {\r\n        type: \"number\",\r\n      },\r\n      \"price_discount\": {\r\n        type: \"number\",\r\n      },\r\n      \"slug\": {\r\n        type: \"string\"\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"brand_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"store_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"images\": {\r\n        type: \"array\"\r\n      },\r\n      \"published\": {\r\n        type: \"boolean\"\r\n      },\r\n      \"type\": {\r\n        type: \"string\",\r\n        whitelist: [\"grouped_product\"]\r\n      }\r\n    })\r\n\r\n    Types.ProductWithVariants = new Schematic.Schema('Product', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 2\r\n      },\r\n      \"category_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"sku\": {\r\n        type: \"string\"\r\n      },\r\n      \"price\": {\r\n        type: \"number\",\r\n        required: true\r\n      },\r\n      \"stock_level\": {\r\n        type: \"number\",\r\n        min: 0\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"weigth\": {\r\n        type: \"number\"\r\n      },\r\n      \"height\": {\r\n        type: \"number\"\r\n      },\r\n      \"width\": {\r\n        type: \"number\"\r\n      },\r\n      \"depth\": {\r\n        type: \"number\"\r\n      },\r\n      \"brand_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"store_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"images\": {\r\n        type: \"array\"\r\n      },\r\n      \"slug\": {\r\n        type: \"string\"\r\n      },\r\n      \"published\": {\r\n        type: \"boolean\"\r\n      }\r\n    })\r\n\r\n\r\n    Types.Order = new Schematic.Schema('Order', {\r\n      \"status\": {\r\n        type: \"string\",\r\n        whitelist: [\"created\", \"processing\", \"evaded\", \"shipped\"]\r\n      },\r\n      \"shipping_address_id\": {\r\n        type: \"number\",\r\n      },\r\n      \"billing_address_id\": {\r\n        type: \"number\",\r\n      },\r\n      \"items_total\": {\r\n        type: \"number\"\r\n      },\r\n      \"display_items_total\": {\r\n        type: \"string\"\r\n      },\r\n      \"total\": {\r\n        type: \"number\"\r\n      },\r\n      \"display_total\": {\r\n        type: \"string\"\r\n      },\r\n      \"items\": {\r\n        type: \"array\",\r\n        required: true\r\n      },\r\n      \"currency\": {\r\n        type: \"string\",\r\n        whitelist: [\"USD\", \"CAD\", \"EUR\", \"AED\", \"AFN\", \"ALL\", \"AMD\", \"ARS\", \"AUD\", \"AZN\", \"BAM\", \"BDT\", \"BGN\", \"BHD\", \"BIF\", \"BND\", \"BOB\", \"BRL\", \"BWP\", \"BYR\", \"BZD\", \"CDF\", \"CHF\", \"CLP\", \"CNY\", \"COP\", \"CRC\", \"CVE\", \"CZK\", \"DJF\", \"DKK\", \"DOP\", \"DZD\", \"EEK\", \"EGP\", \"ERN\", \"ETB\", \"GBP\", \"GEL\", \"GHS\", \"GNF\", \"GTQ\", \"HKD\", \"HNL\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"INR\", \"IQD\", \"IRR\", \"ISK\", \"JMD\", \"JOD\", \"JPY\", \"KES\", \"KHR\", \"KMF\", \"KRW\", \"KWD\", \"KZT\", \"LBP\", \"LKR\", \"LTL\", \"LVL\", \"LYD\", \"MAD\", \"MDL\", \"MGA\", \"MKD\", \"MMK\", \"MOP\", \"MUR\", \"MXN\", \"MYR\", \"MZN\", \"NAD\", \"NGN\", \"NIO\", \"NOK\", \"NPR\", \"NZD\", \"OMR\", \"PAB\", \"PEN\", \"PHP\", \"PKR\", \"PLN\", \"PYG\", \"QAR\", \"RON\", \"RSD\", \"RUB\", \"RWF\", \"SAR\", \"SDG\", \"SEK\", \"SGD\", \"SOS\", \"SYP\", \"THB\", \"TND\", \"TOP\", \"TRY\", \"TTD\", \"TWD\", \"TZS\", \"UAH\", \"UGX\", \"UYU\", \"UZS\", \"VEF\", \"VND\", \"XAF\", \"XOF\", \"YER\", \"ZAR\", \"ZMK\"]\r\n      },\r\n      \"store_id\": {\r\n        type: \"number\"\r\n      },\r\n      \"notes\": {\r\n        type: \"string\",\r\n        max: 500\r\n      },\r\n      \"shipping_fee\": {\r\n        type: \"number\",\r\n        min: 0\r\n      }\r\n    })\r\n\r\n    Types.Address = new Schematic.Schema('Address', {\r\n      \"full_name\": {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 140\r\n      },\r\n      \"country\": {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 140\r\n      },\r\n      \"state\": {\r\n        type: \"string\",\r\n        max: 140\r\n      },\r\n      \"city\": {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 140\r\n      },\r\n      \"address1\": {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 250\r\n      },\r\n      \"address2\": {\r\n        type: \"string\",\r\n        max: 250\r\n      },\r\n      \"postal_code\": {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 20\r\n      },\r\n      phone_number: {\r\n        type: \"string\",\r\n        max: 30\r\n      },\r\n      email: {\r\n        type: \"string\",\r\n        required: true,\r\n        max: 140,\r\n      },\r\n      alternate_phone_number: {\r\n        type: \"string\",\r\n        max: 140\r\n      }\r\n    });\r\n\r\n\r\n\r\n    // This resemble a taxrate\r\n    Types.ShippingZone = new Schematic.Schema('ShippingZone', {\r\n      \"country\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"state\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"postcode\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"city\": {\r\n        type: \"string\",\r\n        required: true\r\n      }\r\n    })\r\n\r\n    Types.Shipping = new Schematic.Schema('Shipping', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        required: true,\r\n        min : 3,\r\n    },\r\n    \"base_cost\": {\r\n        type: \"number\",\r\n        required: true,\r\n        min: 0\r\n    },\r\n    \"per_item_cost\": {\r\n        type: \"number\",\r\n        min: 0\r\n    },\r\n    \"description\": {\r\n        type: \"string\"\r\n    },\r\n    \"min_price\": {\r\n        type: \"number\",\r\n        min: 0\r\n    },\r\n    \"max_price\": {\r\n        type: \"number\",\r\n        min: 0\r\n    },\r\n    \"min_weight\": {\r\n        type: \"number\",\r\n        min: 0\r\n    },\r\n    \"max_weight\": {\r\n        type: \"number\",\r\n        min: 0\r\n    },\r\n    \"zones\": {\r\n        type: \"array\"\r\n    }\r\n    });\r\n\r\n\r\n\r\n    Types.Store = new Schematic.Schema('Store', {\r\n      \"name\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"owner_email\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"string\"\r\n      },\r\n      \"custom_attributes\": {\r\n        type: \"object\"\r\n      }\r\n    });\r\n\r\n    Types.Customer = new Schematic.Schema('Customer', {\r\n      \"full_name\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"shipping_address\": {\r\n        type: Types.Address,\r\n        required: true\r\n      },\r\n      \"billing_address\": {\r\n        type: Types.Address,\r\n        required: true\r\n      },\r\n      \"email\": {\r\n        type: \"string\",\r\n        required: true\r\n      }\r\n    });\r\n\r\n\r\n    Types.Variable = new Schematic.Schema('Variable', {\r\n      name: {\r\n        type: \"string\",\r\n        required: true,\r\n        min: 1,\r\n        max: 500\r\n      },\r\n      type: {\r\n        type: \"string\",\r\n        required: false,\r\n        whitelist: ['string', 'number', 'boolean', 'object', 'array']\r\n      },\r\n      value: {\r\n        required: true\r\n      }\r\n    })\r\n\r\n\r\n    Types.Shipment = new Schematic.Schema('Shipment', {\r\n      \"date\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"delivery_date\": {\r\n        type: \"string\",\r\n        required: true\r\n      },\r\n      \"description\": {\r\n        type: \"text\"\r\n      },\r\n      \"method\": {\r\n        type: Types.Shipping\r\n      }\r\n\r\n    });\r\n\r\n    return Types;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/models.factory.js","(function() {\r\n\t'use strict';\r\n\r\n\tangular.module('DataDashboard')\r\n\t\t.factory('NotificationsPresetsFactory', NotificationsPresetsFactory);\r\n\r\n\tfunction NotificationsPresetsFactory() {\r\n\r\n\r\n\t\tvar presets = {};\r\n\r\n\t\tpresets['invoices.create'] = {\r\n\t\t\tname: 'An order is created',\r\n\t\t\tdescription: 'This notification is sent to the customer who creates an order',\r\n\t\t\tsubject: 'Your invoice',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Your invoice',\r\n\t\t\t\tmessage: 'Attached to this email you can find your most recent invoice for your order at {{application.name}}'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tpresets['orders.create'] = {\r\n\t\t\tname: 'An order is created',\r\n\t\t\tdescription: 'This notification is sent to the customer who creates an order',\r\n\t\t\tsubject: 'We received your order!',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Thank you for your order!',\r\n\t\t\t\tintroduction: 'Your order has been received and is now being processed. Your order\\'s details are shown below for your reference.',\r\n\t\t\t\tproductLabel: 'Items',\r\n\t\t\t\tpriceLabel: 'Price',\r\n\t\t\t\tcustomerInformationLabel: 'Customer information',\r\n\t\t\t\tshippingAddressLabel: 'Shipping address',\r\n\t\t\t\tbillingAddressLabel: 'Billing address'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tpresets['users.create'] = {\r\n\t\t\tname: 'New customer account',\r\n\t\t\tdescription: 'This notification is sent to the customer who creates an account',\r\n\t\t\tsubject: 'Welcome!',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Welcome to {{application.name}}!',\r\n\t\t\t\tintroduction: 'Thank you for creating an account with us!',\r\n\t\t\t\tbuttonLabel: 'Visit our store'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tpresets['users.recoverPassword'] = {\r\n\t\t\tname: 'Password recovery',\r\n\t\t\tdescription: 'This notification is sent to the customer who requests a password recovery',\r\n\t\t\tsubject: 'Password recovery',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Recover your password',\r\n\t\t\t\tintroduction: 'Hello, we sent you this email because you requested to recover your password. If it\\'s not the case, please ignore this email.',\r\n\t\t\t\tredirect_url : 'http://example.com/passwordrecovery'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tpresets['orders.update.processing'] = {\r\n\t\t\tname: 'An order is paid',\r\n\t\t\tdescription: 'This notification is sent to the customer who paid an order',\r\n\t\t\tsubject: 'Your order is confirmed!',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Thank you for your order!',\r\n\t\t\t\tintroduction: 'Your order has been confirmed and is now being processed. Your order\\'s details are shown below for your reference.',\r\n\t\t\t\tproductLabel: 'Items',\r\n\t\t\t\tpriceLabel: 'Price',\r\n\t\t\t\tcustomerInformationLabel: 'Customer information',\r\n\t\t\t\tshippingAddressLabel: 'Shipping address',\r\n\t\t\t\tbillingAddressLabel: 'Billing address'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tpresets['orders.update.completed'] = {\r\n\t\t\tname: 'An order is shipped',\r\n\t\t\tdescription: 'This notification is sent to the customer when his/her order is shipped.',\r\n\t\t\tsubject: 'We shipped your order!',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Your order is on the way',\r\n\t\t\t\tintroduction: 'We are happy to inform you that we shipped your order #{{order.id}} !',\r\n\t\t\t\ttracking_code_introduction: 'You can click on the following tracking number to track your package on the carrier\\'s website.',\r\n\t\t\t\tproductLabel: 'Items',\r\n\t\t\t\tpriceLabel: 'Price',\r\n\t\t\t\tcustomerInformationLabel: 'Customer information',\r\n\t\t\t\tshippingAddressLabel: 'Shipping address',\r\n\t\t\t\tbillingAddressLabel: 'Billing address'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tpresets['orders.refund'] = {\r\n\t\t\tname: 'An order is refunded',\r\n\t\t\tdescription: 'This notification is sent to the customer when his/her order is refunded.',\r\n\t\t\tsubject: 'Refund for order {{order.id}}',\r\n\t\t\tlocales : {},\r\n\t\t\ttemplate: {\r\n\t\t\t\ttitle: 'Refund for order {{order.id}}',\r\n\t\t\t\tintroduction: 'A refund was recently created for your order. Details are shown below for your reference.',\r\n\t\t\t\tproductLabel: 'Items'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\treturn presets;\r\n\t}\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/notificationsPresets.factory.js","(function() {\r\n  'use strict';\r\n\r\n  angular.module('DataDashboard')\r\n    .factory('$pagination', PaginationFactory);\r\n\r\n\r\n\r\n  /*\r\n   *   AngularJS Factory that handles the pagination object\r\n   *   \r\n   */\r\n  function PaginationFactory() {\r\n\r\n\r\n    // Container object we will return\r\n    var Factory = {};\r\n\r\n  \r\n    /*\r\n     * @param {HTTPResponse} httpResponse The response object\r\n     */\r\n    Factory.fromHTTPResponse = function(httpResponse) {\r\n      return {\r\n        currentPage: httpResponse.data.page,\r\n        numberOfPages: httpResponse.data.pages,\r\n        nextPage: httpResponse.data._links.next || null,\r\n        previousPage: httpResponse.data._links.prev || null,\r\n        count: httpResponse.data.count\r\n      }\r\n    }\r\n\r\n\r\n\r\n    return Factory;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/pagination.factory.js","var app = angular.module('DataDashboard')\r\napp.factory('rolePresets', function() {\r\n    function getCommonPublicProfile() {\r\n        return {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        }\r\n    }\r\n\r\n    function getAllTrueProfile() {\r\n        return {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        }\r\n    }\r\n\r\n    function getAllFalseProfile() {\r\n        return {\r\n            list: false,\r\n            findOne: false,\r\n            getById: false,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        }\r\n    }\r\n\r\n\r\n    function getCommonUserProfile() {\r\n        return {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        }\r\n    }\r\n\r\n    function getCommonAdminProfile() {\r\n        return {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        }\r\n    }\r\n\r\n    var publicAccessMap = {\r\n        addresses: getAllFalseProfile(),\r\n        brands: getCommonPublicProfile(),\r\n        carts: {\r\n            list: false,\r\n            findOne: false,\r\n            getById: true,\r\n            patch: true,\r\n            create: true,\r\n            update: true,\r\n            checkout: true,\r\n            delete: false\r\n        },\r\n        categories: getCommonPublicProfile(),\r\n        collections: getCommonPublicProfile(),\r\n        contents: getCommonPublicProfile(),\r\n        coupons: getAllFalseProfile(),\r\n        promotions: getCommonPublicProfile(),\r\n        currencies: getCommonPublicProfile(),\r\n        orders: {\r\n            list: false,\r\n            findOne: false,\r\n            getById: false,\r\n            create: true,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        paymentMethods: getCommonPublicProfile(),\r\n        invoices: getAllFalseProfile(),\r\n        products: getCommonPublicProfile(),\r\n        shippings: getCommonPublicProfile(),\r\n        stores: getCommonPublicProfile(),\r\n        taxes: getCommonPublicProfile(),\r\n        users: {\r\n            list: false,\r\n            findOne: false,\r\n            getById: false,\r\n            create: true,\r\n            update: false,\r\n            delete: false,\r\n            authenticate: true\r\n        },\r\n        variables: getCommonPublicProfile()\r\n    }\r\n\r\n\r\n    var userAccessMap = {\r\n        addresses: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        brands: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        carts: {\r\n            list: true,\r\n            findOne: false,\r\n            getById: true,\r\n            patch: true,\r\n            create: true,\r\n            update: true,\r\n            checkout: true,\r\n            delete: true\r\n        },\r\n        categories: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        collections: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        contents: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        coupons: getAllFalseProfile(),\r\n        promotions: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        currencies: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        orders: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        paymentMethods: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true, // I can order stuff on sites even if i'm not authenticated\r\n            update: false,\r\n            delete: false\r\n        },\r\n        products: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        shippings: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        stores: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        taxes: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        invoices: {\r\n            list: false,\r\n            findOne: false,\r\n            getById: false,\r\n            create: false,\r\n            update: false,\r\n            delete: false\r\n        },\r\n        users: {\r\n            list: false,\r\n            findOne: false,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true,\r\n            authenticate: true\r\n        },\r\n        variables: getCommonUserProfile()\r\n    }\r\n\r\n\r\n    var adminAccessMap = {\r\n        addresses: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true,\r\n        },\r\n        invoices: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true,\r\n        },\r\n        brands: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        carts: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            patch: true,\r\n            update: true,\r\n            checkout: true,\r\n            delete: true\r\n        },\r\n        categories: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        collections: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        contents: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        coupons: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        promotions: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        currencies: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n\r\n        orders: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        paymentMethods: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        products: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        shippings: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        stores: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        taxes: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true\r\n        },\r\n        users: {\r\n            list: true,\r\n            findOne: true,\r\n            getById: true,\r\n            create: true,\r\n            update: true,\r\n            delete: true,\r\n            authenticate: true\r\n        },\r\n        variables: getCommonAdminProfile()\r\n    }\r\n\r\n\r\n    return {\r\n        public: publicAccessMap,\r\n        user: userAccessMap,\r\n        admin: adminAccessMap\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/rolesPresets.factory.js","(function() {\r\n  'use strict';\r\n  \r\n  angular.module('DataDashboard')\r\n    .factory('StormConfiguration',StormConfigurationFactory);\r\n\r\n  StormConfigurationFactory.$inject = ['$window', '$application'];\r\n\r\n\r\n  /*\r\n  *   AngularJS Factory that handles writes and reads from\r\n  *   localStorage (or similar backend) for managing Storm user preferences.\r\n  *\r\n  *   For example it can be used to save default filters on a certain view\r\n  * \r\n  *   It can also be used to save some custom behaviour.\r\n  *\r\n  *   The main feature should be that it wraps all the configs in a json object\r\n  *   which gets written to storage and read every time as a whole.\r\n  */\r\n  function StormConfigurationFactory($window, $application) {\r\n\r\n    \r\n    var Factory = {};\r\n\r\n    console.info(\"Loading Storm configuration information from localStorage\");\r\n\r\n   \r\n    var LOCALSTORAGE_KEY = 'Marketcloud.Storm.Configuration.' + ($application.get('id') || \"unkownAppId\");\r\n \r\n\r\n    function loadFromStorage() {\r\n      var storedJson = window.localStorage.getItem(LOCALSTORAGE_KEY);\r\n      if (storedJson)\r\n        Factory._data = JSON.parse(storedJson);\r\n      else\r\n        Factory._data = {};\r\n    }\r\n\r\n    function persistToStorage(){\r\n      var s = JSON.stringify(Factory._data);\r\n      console.log(\"Persisting to storage with key \"+LOCALSTORAGE_KEY,s )\r\n      window.localStorage.setItem(LOCALSTORAGE_KEY,s);\r\n    }\r\n\r\n    Factory._data = {};\r\n\r\n    Factory.loadFromStorage = loadFromStorage;\r\n    Factory.persistToStorage = persistToStorage;\r\n\r\n    Factory.loadFromStorage();\r\n\r\n    Factory.get = function(key) {\r\n\r\n      if (\"undefined\" !== typeof key)\r\n        return this._data[key];\r\n      else\r\n        return this._data;\r\n    }\r\n\r\n    Factory.set = function(key,value, persist){\r\n\r\n      persist = persist || true;\r\n\r\n\r\n      if (\"string\" !== typeof key)\r\n        throw new Error(\"StormConfigurationFactory.set(key,value) 'key' must be String\");\r\n      \r\n\r\n      this._data[key] = value;\r\n\r\n      if (persist === true)\r\n        Factory.persistToStorage()\r\n      \r\n    }\r\n\r\n\r\n    Factory.applyTheme = function(theme){\r\n\r\n      // Checking\r\n       if (!theme)\r\n        return;\r\n\r\n      // Sanitizing the theme filename\r\n      if (theme.indexOf('.theme.css') === -1) {\r\n        theme = theme + '.theme.css';\r\n      }\r\n\r\n      var url = '/modules/data_dashboard/css/themes/'+theme;\r\n\r\n      // Removing previously loaded themes\r\n      $(\".storm-theme-definition\").remove();\r\n\r\n      // Appending the theme to the Document\r\n      $('<link rel=\"stylesheet\" class=\"storm-theme-definition\" type=\"text/css\" href=\"'+url+'\" >')\r\n      .appendTo(\"head\");\r\n\r\n    }\r\n  \r\n\r\n\r\n    \r\n\r\n    return Factory;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/stormConfiguration.factory.js","(function() {\r\n  'use strict';\r\n  \r\n  angular.module('DataDashboard')\r\n    .factory('TableManager',TableManagerFactory);\r\n\r\n  TableManagerFactory.$inject = [];\r\n\r\n\r\n  /*\r\n  *   AngularJS Factory that handles the configuration\r\n  *   of data tables\r\n  */\r\n  function TableManagerFactory() {\r\n\r\n    \r\n    var factory = {};\r\n\r\n   \r\n    // This is to avoid to overflow controllers with shared functionality\r\n    function attachTableManagerFunctions(scope){\r\n\r\n      if (!scope.hasOwnProperty(\"visibleColumns\")){\r\n        scope.visibleColumns = [];\r\n      }\r\n\r\n\r\n\r\n    }\r\n\r\n    return factory;\r\n  }\r\n\r\n\r\n\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/tableManager.factory.js","angular.module('Marketcloud.Shared')\r\n  .factory('TaxRates', function() {\r\n\r\n      return [{\r\n        \"country\": \"Australia\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"10.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"AU\"\r\n      }, {\r\n        \"country\": \"Bangladesh\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"15.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"BD\"\r\n      }, {\r\n        \"country\": \"Belgium\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"21.0000\",\r\n        \"name\": \"BTW\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"BE\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"British Columbia\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"PST\",\r\n        \"shipping\": false,\r\n        \"priority\": 2,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"BC\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Saskatchewan\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"PST\",\r\n        \"shipping\": false,\r\n        \"priority\": 2,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"SK\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Manitoba\",\r\n        \"rate\": \"8.0000\",\r\n        \"name\": \"PST\",\r\n        \"shipping\": false,\r\n        \"priority\": 2,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"MB\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Quebec\",\r\n        \"rate\": \"9.975\",\r\n        \"name\": \"QST\",\r\n        \"shipping\": false,\r\n        \"priority\": 2,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"QC\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Ontario\",\r\n        \"rate\": \"13.0000\",\r\n        \"name\": \"HST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"ON\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Newfoundland and Labrador\",\r\n        \"rate\": \"13.0000\",\r\n        \"name\": \"HST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"NL\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"New Brunswick\",\r\n        \"rate\": \"13.0000\",\r\n        \"name\": \"HST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"NB\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Prince Edward Island\",\r\n        \"rate\": \"14.0000\",\r\n        \"name\": \"HST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"PE\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Nova Scotia\",\r\n        \"rate\": \"15.0000\",\r\n        \"name\": \"HST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"NS\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Alberta\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"AB\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"British Columbia\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"BC\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Northwest Territories\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"NT\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Nunavut\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"NU\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Yukon\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"YT\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Saskatchewan\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"SK\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Manitoba\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"MB\"\r\n      }, {\r\n        \"country\": \"Canada\",\r\n        \"state\": \"Quebec\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"GST\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"CA\",\r\n        \"state_code\": \"QC\"\r\n      }, {\r\n        \"country\": \"Finland\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"24.0000\",\r\n        \"name\": \"ALV\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"FI\"\r\n      }, {\r\n        \"country\": \"France\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"20.0000\",\r\n        \"name\": \"TVA\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"FR\"\r\n      }, {\r\n        \"country\": \"Germany\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"19.0000\",\r\n        \"name\": \"Mwst.\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"DE\"\r\n      }, {\r\n        \"country\": \"Hungary\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"27.0000\",\r\n        \"name\": \"ÁFA\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"HU\"\r\n      }, {\r\n        \"country\": \"Italy\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"22.0000\",\r\n        \"name\": \"IVA\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"IT\"\r\n      }, {\r\n        \"country\": \"Japan\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"8.0000\",\r\n        \"name\": \"Consumption tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"JP\"\r\n      }, {\r\n        \"country\": \"Nepal\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"13.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"NP\"\r\n      }, {\r\n        \"country\": \"Netherlands\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"21.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"NL\"\r\n      }, {\r\n        \"country\": \"Norway\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"25.0000\",\r\n        \"name\": \"MVA\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"NO\"\r\n      }, {\r\n        \"country\": \"Poland\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"23.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"PL\"\r\n      }, {\r\n        \"country\": \"Romania\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"19.0000\",\r\n        \"name\": \"TVA\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"RO\"\r\n      }, {\r\n        \"country\": \"South Africa\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"14.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"ZA\"\r\n      }, {\r\n        \"country\": \"Spain\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"21.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"ES\"\r\n      }, {\r\n        \"country\": \"Thailand\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"TH\"\r\n      }, {\r\n        \"country\": \"Turkey\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"18.0000\",\r\n        \"name\": \"KDV\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"TR\"\r\n      }, {\r\n        \"country\": \"United Kingdom\",\r\n        \"state\": \"*\",\r\n        \"rate\": \"20.0000\",\r\n        \"name\": \"VAT\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"GB\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Alabama\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"AL\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Arizona\",\r\n        \"rate\": \"5.6000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"AZ\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Arkansas\",\r\n        \"rate\": \"6.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"AR\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"California\",\r\n        \"rate\": \"7.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"CA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Colorado\",\r\n        \"rate\": \"2.9000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"CO\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Connecticut\",\r\n        \"rate\": \"6.3500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"CT\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"District of Columbia\",\r\n        \"rate\": \"5.7500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"DC\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Florida\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"FL\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Georgia\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"GA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Guam\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"GU\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Hawaii\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"HI\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Idaho\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"ID\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Illinois\",\r\n        \"rate\": \"6.2500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"IL\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Indiana\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"IN\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Iowa\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"IA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Kansas\",\r\n        \"rate\": \"6.1500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"KS\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Kentucky\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"KY\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Louisiana\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"LA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Maine\",\r\n        \"rate\": \"5.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"ME\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Maryland\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MD\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Massachusetts\",\r\n        \"rate\": \"6.2500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Michigan\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MI\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Minnesota\",\r\n        \"rate\": \"6.8750\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MN\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Mississippi\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MS\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Missouri\",\r\n        \"rate\": \"4.225\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"MO\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Nebraska\",\r\n        \"rate\": \"5.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NE\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Nevada\",\r\n        \"rate\": \"6.8500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NV\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"New Jersey\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NJ\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"New Mexico\",\r\n        \"rate\": \"5.1250\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NM\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"New York\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NY\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"North Carolina\",\r\n        \"rate\": \"4.7500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"NC\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"North Dakota\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"ND\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Ohio\",\r\n        \"rate\": \"5.7500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"OH\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Oklahoma\",\r\n        \"rate\": \"4.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"OK\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Pennsylvania\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"PA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Puerto Rico\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"PR\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Rhode Island\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"RI\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"South Carolina\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"SC\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"South Dakota\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"SD\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Tennessee\",\r\n        \"rate\": \"7.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"TN\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Texas\",\r\n        \"rate\": \"6.2500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"TX\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Utah\",\r\n        \"rate\": \"5.9500\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"UT\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Vermont\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"VT\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Virginia\",\r\n        \"rate\": \"5.3000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": false,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"VA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Washington\",\r\n        \"rate\": \"6.5000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"WA\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"West Virginia\",\r\n        \"rate\": \"6.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"WV\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Wisconsin\",\r\n        \"rate\": \"5.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"WI\"\r\n      }, {\r\n        \"country\": \"United States\",\r\n        \"state\": \"Wyoming\",\r\n        \"rate\": \"4.0000\",\r\n        \"name\": \"State Tax\",\r\n        \"shipping\": true,\r\n        \"country_code\": \"US\",\r\n        \"state_code\": \"WY\"\r\n      }]\r\n    });\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/taxrates.factory.js","(function() {\r\n  'use strict';\r\n\r\n  angular.module('DataDashboard')\r\n    .factory('$utils', UtilsFactory);\r\n\r\n\r\n\r\n  /*\r\n   *   AngularJS Factory that handles the pagination object\r\n   *   \r\n   */\r\n  function UtilsFactory() {\r\n\r\n\r\n    // Container object we will return\r\n    var Factory = {};\r\n\r\n\r\n\r\n    var flatten = function(data) {\r\n      var result = {};\r\n\r\n      function recurse(cur, prop) {\r\n        if (Object(cur) !== cur) {\r\n          result[prop] = cur;\r\n        } else if (Array.isArray(cur)) {\r\n          for (var i = 0, l = cur.length; i < l; i++)\r\n            recurse(cur[i], prop + \"[\" + i + \"]\");\r\n          if (l === 0)\r\n            result[prop] = [];\r\n        } else {\r\n          var isEmpty = true;\r\n          for (var p in cur) {\r\n            isEmpty = false;\r\n            recurse(cur[p], prop ? prop + \".\" + p : p);\r\n          }\r\n          if (isEmpty && prop)\r\n            result[prop] = {};\r\n        }\r\n      }\r\n      recurse(data, \"\");\r\n      return result;\r\n    }\r\n\r\n    var unflatten = function(data) {\r\n      \"use strict\";\r\n      if (Object(data) !== data || Array.isArray(data)) return data;\r\n      var regex = /\\,?([^.\\[\\]]+)|\\[(\\d+)\\]/g,\r\n        resultholder = {};\r\n      for (var p in data) {\r\n        var cur = resultholder,\r\n          prop = \"\",\r\n          m;\r\n        while (m = regex.exec(p)) {\r\n          cur = cur[prop] || (cur[prop] = (m[2] ? [] : {}));\r\n          prop = m[2] || m[1];\r\n        }\r\n        cur[prop] = data[p];\r\n      }\r\n      return resultholder[\"\"] || resultholder;\r\n    }\r\n\r\n    Factory.flatten = flatten;\r\n    Factory.unflatten = unflatten;\r\n\r\n\r\n\r\n    /*\r\n     * @param {String} str The input string\r\n     * @return {String} The slug--ified version of the string\r\n     */\r\n    Factory.getSlugFromString = function(str) {\r\n      return str\r\n        .split(' ')\r\n        .map(function(item) {\r\n          return item.replace(/\\W/g, '')\r\n        })\r\n        .map(function(item) {\r\n          return item.toLowerCase()\r\n        })\r\n        .join('-')\r\n    }\r\n\r\n\r\n\r\n    /*\r\n     * @param {HTTPResponse} httpResponse The response object\r\n     */\r\n    Factory.getPaginationFromHTTPResponse = function(httpResponse) {\r\n      return {\r\n        currentPage: httpResponse.data.page,\r\n        numberOfPages: httpResponse.data.pages,\r\n        nextPage: httpResponse.data._links.next || null,\r\n        previousPage: httpResponse.data._links.prev || null,\r\n        count: httpResponse.data.count\r\n      }\r\n    }\r\n\r\n\r\n    // Exports an array of objects or an object to a JSON file\r\n    function JSONExport(data, title) {\r\n      if (!title)\r\n        title = 'Marketcloud_export_' + String(Date.now()) + '.json';\r\n\r\n      var encodedUri = encodeURI('data:application/json;charset=utf-8,' + JSON.stringify(data))\r\n      var link = document.createElement('a')\r\n      link.setAttribute('href', encodedUri)\r\n      link.setAttribute('download', title)\r\n      document.body.appendChild(link) // Required for FF\r\n\r\n      link.click() // This will download the data file named \"my_data.csv\".\r\n    }\r\n\r\n    Factory.exportAsJSON = JSONExport;\r\n\r\n\r\n    // Exports an array of objects or an object to a JSON file\r\n    function CSVExport(data, title) {\r\n      if (!title)\r\n        title = 'Marketcloud_export_' + String(Date.now()) + '.csv';\r\n\r\n      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + data )\r\n      var link = document.createElement('a')\r\n      link.setAttribute('href', encodedUri)\r\n      link.setAttribute('download', title)\r\n      document.body.appendChild(link) // Required for FF\r\n\r\n      link.click() // This will download the data file named \"my_data.csv\".\r\n    }\r\n\r\n    Factory.exportAsCSV = CSVExport;\r\n\r\n\r\n    /*\r\n     * Simple and UN-SAFE hash function\r\n     *\r\n     * @param {String} str the input string\r\n     * @return {String} the hashed string\r\n     */\r\n    function strhash(str) {\r\n      if (str.length % 32 > 0) {\r\n        str += Array(33 - str.length % 32).join(\"z\");\r\n      }\r\n      var hash = ''\r\n      var bytes = []\r\n      var i = 0;\r\n      var j = 0;\r\n      var k = 0;\r\n      var a = 0;\r\n      var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\r\n\r\n      for (i = 0; i < str.length; i++) {\r\n        var ch = str.charCodeAt(i);\r\n        bytes[j++] = (ch < 127) ? ch & 0xFF : 127;\r\n      }\r\n\r\n      var chunk_len = Math.ceil(bytes.length / 32);\r\n      for (i = 0; i < bytes.length; i++) {\r\n        j += bytes[i];\r\n        k++;\r\n        if ((k == chunk_len) || (i == bytes.length - 1)) {\r\n          a = Math.floor(j / k);\r\n          if (a < 32)\r\n            hash += '0';\r\n          else if (a > 126)\r\n            hash += 'z';\r\n          else\r\n            hash += dict[Math.floor((a - 32) / 2.76)];\r\n          j = k = 0;\r\n        }\r\n      }\r\n      return hash;\r\n    }\r\n\r\n    Factory.hash = strhash;\r\n\r\n\r\n    // Given a csv file (in string form)\r\n    // returns an array of objects\r\n    Factory.CSVToJSON = function(csv) {\r\n      var rows = csv.split(\"\\n\");\r\n\r\n      var header = rows[0];\r\n      var header_fields = header.split(\",\");\r\n\r\n      var objects = []\r\n\r\n      for (var i = 1; i < rows.length; i++) {\r\n        var o = {};\r\n        var row_fields = rows[i].split(\",\");\r\n\r\n        for (var k = 0; k < header_fields.length; k++) {\r\n          if (row_fields[k] !== \"\"){\r\n            o[header_fields[k]] = row_fields[k];\r\n            \r\n            if (\"true\" === o[header_fields[k]] || \"false\" === o[header_fields[k]])\r\n              o[header_fields[k]] = Boolean(o[header_fields[k]]);\r\n            else if (!isNaN(o[header_fields[k]]) ){\r\n              // Keeping the else-if otherwise\r\n              // test will fail converting a boolean to number\r\n              o[header_fields[k]] = Number(o[header_fields[k]]);\r\n            }\r\n\r\n\r\n          }\r\n        }\r\n\r\n        objects.push(o)\r\n      }\r\n\r\n      return objects;\r\n    }\r\n\r\n\r\n    Factory.JSONToCSV = function(json) {\r\n      if (!Array.isArray(json))\r\n        json = [json];\r\n\r\n      var fields = [];\r\n\r\n      json.forEach(function(row) {\r\n        for (var k in row) {\r\n          if (fields.indexOf(k) < 0)\r\n            fields.push(k)\r\n        }\r\n      })\r\n\r\n      var firstRow = fields.join(',');\r\n\r\n      var buf = firstRow + \"\\n\";\r\n\r\n      json.forEach(function(row) {\r\n        fields.forEach(function(field) {\r\n          if (row.hasOwnProperty(field) && row[field] !== null)\r\n            buf += row[field] + \",\";\r\n          else\r\n            buf += \",\";\r\n        })\r\n        buf += \"\\n\";\r\n      })\r\n\r\n      // lets remove the last newline\r\n      buf = buf.replace(/\\n$/, \"\");\r\n\r\n      return buf;\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    return Factory;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/utils.factory.js","(function() {\r\n  'use strict';\r\n\r\n  angular.module('DataDashboard')\r\n    .factory('$validation', ValidationService);\r\n\r\n\r\n\r\n  /*\r\n   *   AngularJS Service that handles the pagination object\r\n   *   \r\n   */\r\n  function ValidationService() {\r\n\r\n\r\n    // Container object we will return\r\n    var Service = {};\r\n\r\n\r\n    Service.showErrorMessage = function(validation,schema,  selector) {\r\n\r\n      Service.hideErrors();\r\n\r\n      selector = selector || '[ng-model=\"'+validation.invalidPropertyName+'\"]'\r\n\r\n      if (0 === angular.element(selector).length) {\r\n        console.log(\"COuld now match selector \"+selector+\" to show error message, exiting\");\r\n        return;\r\n      }    \r\n\r\n      var element = angular.element(selector);\r\n\r\n      var errorMessage = Service.getErrorMessage(validation,schema);\r\n\r\n      var parent = element.parent();\r\n\r\n      if (parent.hasClass('input-group'))\r\n        parent = parent.parent();\r\n\r\n      parent.append('<div class=\"error-message\">'+errorMessage+'</div>')\r\n      parent.addClass(\"has-error\")\r\n\r\n      $('html, body').animate({\r\n        scrollTop: element.offset().top - 200\r\n      }, 500);\r\n      \r\n    }\r\n\r\n    Service.getErrorMessage = function(validation, schema) {\r\n\r\n\r\n      switch (validation.failedValidator) {\r\n        case \"required\":\r\n          return \"This field is required\";\r\n\r\n        case \"type\":\r\n          return \"This field must be a \"+schema[validation.invalidPropertyName].type;\r\n\r\n        case \"min\":\r\n          if (\"number\" === schema[validation.invalidPropertyName].type)\r\n            return \"Minimum value is \"+schema[validation.invalidPropertyName].min;\r\n          else if (\"string\" === schema[validation.invalidPropertyName].type)\r\n            return \"Minimum length is \"+schema[validation.invalidPropertyName].min;\r\n          else if (\"array\" === schema[validation.invalidPropertyName].type)\r\n            return \"Minimum number of elements is is \"+schema[validation.invalidPropertyName].min;\r\n          else\r\n            return \"Minimum is \"+schema[validation.invalidPropertyName].min;\r\n\r\n        case \"max\":\r\n          if (\"number\" === schema[validation.invalidPropertyName].type)\r\n            return \"Maxiumum value is \"+schema[validation.invalidPropertyName].max;\r\n          else if (\"string\" === schema[validation.invalidPropertyName].type)\r\n            return \"Maxiumum length is \"+schema[validation.invalidPropertyName].max;\r\n          else if (\"array\" === schema[validation.invalidPropertyName].type)\r\n            return \"Maxiumum number of elements is is \"+schema[validation.invalidPropertyName].max;\r\n          else\r\n            return \"Maxiumum is \"+schema[validation.invalidPropertyName].max;\r\n        break;\r\n\r\n        default :\r\n          return \"This field is invalid\";\r\n        break;\r\n      }\r\n    }\r\n\r\n\r\n    Service.hideErrors = function(){\r\n      angular.element('.error-message').remove()\r\n      angular.element('.has-error').removeClass('has-error')\r\n    }\r\n\r\n    \r\n\r\n    \r\n\r\n\r\n    return Service;\r\n  }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/validation.service.js"],"sourceRoot":""}